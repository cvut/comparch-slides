<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:ooo="http://xml.openoffice.org/svg/export"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.2"
   viewBox="0 0 2503.8 1471.7"
   preserveAspectRatio="xMidYMid"
   xml:space="preserve"
   id="svg2996"
   sodipodi:docname="Qtrvsim-jalr.svg"
   width="2503.8"
   height="1471.7"
   style="fill-rule:evenodd;stroke-width:28.22200012;stroke-linejoin:round"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"><metadata
   id="metadata3000"><rdf:RDF><cc:Work
       rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
         rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><sodipodi:namedview
   pagecolor="#ffffff"
   bordercolor="#666666"
   borderopacity="1"
   objecttolerance="10"
   gridtolerance="10"
   guidetolerance="10"
   inkscape:pageopacity="0"
   inkscape:pageshadow="2"
   inkscape:window-width="1848"
   inkscape:window-height="1016"
   id="namedview2998"
   showgrid="false"
   fit-margin-top="0"
   fit-margin-left="0"
   fit-margin-right="0"
   fit-margin-bottom="0"
   inkscape:snap-grids="false"
   inkscape:snap-to-guides="false"
   inkscape:zoom="0.79314285"
   inkscape:cx="1782.3933"
   inkscape:cy="704.84917"
   inkscape:window-x="72"
   inkscape:window-y="27"
   inkscape:window-maximized="1"
   inkscape:current-layer="g2484" />
 <defs
   class="ClipPathGroup"
   id="defs8">
  <clipPath
   id="presentation_clip_path"
   clipPathUnits="userSpaceOnUse">
   <rect
   x="0"
   y="0"
   width="28000"
   height="15750"
   id="rect2" />
  </clipPath>
  <clipPath
   id="presentation_clip_path_shrink"
   clipPathUnits="userSpaceOnUse">
   <rect
   x="28"
   y="15"
   width="27944"
   height="15719"
   id="rect5" />
  </clipPath>
 
  
 
   
  
    
   
     
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
     </defs>
 <defs
   id="defs13">
  <g
   id="ooo:meta_slides"
   ooo:number-of-slides="1"
   ooo:start-slide-number="0">
   <g
   id="ooo:meta_dummy_slide"
   ooo:slide="dummy-slide"
   ooo:master="dummy-master-page"
   ooo:background-visibility="hidden"
   ooo:master-objects-visibility="hidden"
   ooo:has-transition="false" />
   <g
   id="ooo:meta_slide_0"
   ooo:slide="id1"
   ooo:master="id2"
   ooo:has-transition="true" />
  </g>
 </defs>
 <defs
   id="presentation-animations" />
 <defs
   id="defs65">
  <font
   id="EmbeddedFont_1"
   horiz-adv-x="2048"
   horiz-origin-x="0"
   horiz-origin-y="0"
   vert-origin-x="45"
   vert-origin-y="90"
   vert-adv-y="90">
   <font-face
   font-family="Arial Narrow embedded"
   units-per-em="2048"
   font-weight="normal"
   font-style="normal"
   ascent="1905"
   descent="423"
   id="font-face16" />
   <missing-glyph
   horiz-adv-x="2048"
   d="M 0,0 L 2047,0 2047,2047 0,2047 0,0 Z"
   id="missing-glyph18" />
   <glyph
   unicode="y"
   horiz-adv-x="848"
   d="M 495,0 C 474,-65 453,-124 432,-177 410,-229 386,-273 359,-311 332,-347 303,-376 270,-396 237,-415 200,-425 157,-425 138,-425 121,-424 105,-423 89,-422 72,-419 55,-414 L 55,-279 C 66,-281 78,-282 91,-284 104,-284 115,-285 124,-285 167,-285 208,-265 245,-226 282,-187 314,-124 342,-38 L 356,5 4,1082 162,1082 349,484 C 349,484 356,460 370,412 L 395,322 C 404,292 411,265 418,241 424,217 428,202 429,196 430,203 434,218 440,240 L 462,312 486,393 C 495,420 502,444 507,464 L 681,1082 837,1082 495,0 Z"
   id="glyph20" />
   <glyph
   unicode="u"
   horiz-adv-x="715"
   d="M 257,1082 L 257,396 C 257,343 260,299 267,264 273,229 283,200 298,179 312,157 331,142 354,133 377,124 406,119 440,119 475,119 506,127 535,142 563,157 587,178 607,207 627,235 643,270 654,312 665,353 670,401 670,455 L 670,1082 818,1082 818,231 C 818,231 818,207 818,160 818,135 818,111 819,89 820,66 820,47 821,31 822,15 822,5 822,0 L 683,0 C 682,3 682,12 682,27 681,42 681,59 680,78 679,97 678,116 678,136 677,155 677,172 677,185 L 674,185 C 660,154 645,125 628,100 611,75 591,53 569,36 546,18 521,4 492,-6 463,-15 429,-20 390,-20 341,-20 298,-13 263,2 228,17 199,39 176,70 153,101 136,140 125,188 114,236 109,294 109,361 L 109,1082 257,1082 Z"
   id="glyph22" />
   <glyph
   unicode="t"
   horiz-adv-x="477"
   d="M 455,8 C 432,1 409,-5 386,-10 363,-14 336,-16 305,-16 187,-16 128,66 128,229 L 128,951 25,951 25,1082 134,1082 177,1324 276,1324 276,1082 440,1082 440,951 276,951 276,268 C 276,216 283,180 297,159 311,138 335,127 369,127 383,127 397,128 411,131 424,134 439,137 455,141 L 455,8 Z"
   id="glyph24" />
   <glyph
   unicode="s"
   horiz-adv-x="769"
   d="M 779,299 C 779,248 771,203 755,164 739,124 716,91 685,64 654,37 617,16 572,2 527,-13 476,-20 419,-20 368,-20 321,-15 280,-6 239,4 203,20 172,41 141,62 115,91 94,126 73,161 57,203 47,254 L 177,285 C 190,227 216,185 255,158 294,131 349,117 419,117 451,117 480,120 507,125 533,130 556,140 575,153 594,166 609,183 620,205 631,226 636,253 636,285 636,318 630,345 617,366 604,387 587,404 565,418 542,432 515,444 483,454 L 377,489 C 342,500 307,513 272,527 237,541 205,560 177,583 149,606 126,634 109,668 91,702 82,745 82,796 82,895 111,970 169,1022 226,1073 310,1099 421,1099 519,1099 597,1078 655,1036 712,994 749,927 764,834 L 631,814 C 626,842 617,866 604,885 591,904 575,919 556,931 537,942 517,951 494,956 471,961 446,963 421,963 354,963 305,951 274,926 242,901 226,864 226,814 226,785 232,761 244,742 255,723 272,707 293,694 314,681 339,669 368,660 L 466,629 C 466,629 490,621 538,606 563,597 587,587 610,576 633,564 655,550 676,535 696,519 714,500 729,478 744,456 757,430 766,401 775,372 779,338 779,299 Z"
   id="glyph26" />
   <glyph
   unicode="r"
   horiz-adv-x="424"
   d="M 116,0 L 116,830 C 116,830 116,853 116,900 116,923 116,946 115,968 114,990 114,1011 113,1030 112,1049 112,1067 111,1082 L 251,1082 C 252,1067 252,1049 253,1030 254,1010 255,990 256,969 257,948 257,929 257,910 L 257,861 261,861 C 272,902 283,938 294,969 305,999 319,1024 335,1044 351,1063 370,1078 392,1088 414,1097 440,1102 471,1102 483,1102 495,1101 506,1099 517,1096 525,1094 531,1092 L 531,927 C 521,930 510,933 497,935 484,936 469,937 452,937 418,937 389,928 366,909 342,890 323,865 308,832 293,799 282,759 275,714 268,668 264,618 264,564 L 264,0 116,0 Z"
   id="glyph28" />
   <glyph
   unicode="o"
   horiz-adv-x="821"
   d="M 863,542 C 863,353 829,212 761,119 692,26 593,-20 463,-20 401,-20 346,-9 298,14 249,37 208,71 175,118 141,165 115,223 98,294 80,364 71,447 71,542 71,915 203,1102 468,1102 537,1102 596,1090 647,1067 697,1044 738,1009 770,962 802,915 826,857 841,787 856,717 863,635 863,542 Z M 708,542 C 708,626 703,695 693,750 682,805 667,848 646,881 625,914 600,937 571,950 541,963 508,969 471,969 433,969 399,962 369,949 338,935 312,912 291,879 270,846 254,802 243,747 232,692 226,624 226,542 226,458 232,389 244,334 256,279 273,235 294,202 315,169 339,146 368,133 397,120 428,113 462,113 500,113 534,120 565,133 595,146 621,168 642,201 663,234 680,278 691,333 702,388 708,458 708,542 Z"
   id="glyph30" />
   <glyph
   unicode="n"
   horiz-adv-x="742"
   d="M 677,0 L 677,686 C 677,739 674,783 668,818 661,853 651,882 637,904 622,925 603,941 580,950 557,959 528,963 494,963 459,963 428,956 400,941 371,926 347,904 327,876 307,847 292,812 281,771 270,729 264,681 264,627 L 264,0 116,0 116,851 C 116,851 116,875 116,922 116,947 116,971 115,994 114,1016 114,1035 113,1051 112,1067 112,1077 112,1082 L 251,1082 C 252,1079 252,1070 253,1055 253,1040 254,1024 255,1005 256,986 256,966 257,947 257,927 257,910 257,897 L 260,897 C 274,928 290,957 307,982 324,1007 343,1029 366,1047 388,1064 414,1078 443,1088 472,1097 505,1102 544,1102 593,1102 636,1095 671,1080 706,1065 736,1043 759,1012 782,981 798,942 809,894 820,845 825,788 825,721 L 825,0 677,0 Z"
   id="glyph32" />
   <glyph
   unicode="m"
   horiz-adv-x="1191"
   d="M 630,0 L 630,686 C 630,739 627,783 622,818 616,853 607,882 594,904 581,925 565,941 544,950 523,959 498,963 467,963 436,963 408,956 383,941 358,926 336,904 319,876 301,847 287,812 278,771 268,729 263,681 263,627 L 263,0 116,0 116,851 C 116,851 116,875 116,922 116,947 116,971 115,994 114,1016 114,1035 113,1051 112,1067 112,1077 112,1082 L 251,1082 C 252,1079 252,1070 253,1055 253,1040 254,1024 255,1005 256,986 256,966 257,947 257,927 257,910 257,897 L 260,897 C 273,928 288,957 303,982 318,1007 336,1029 357,1047 377,1064 400,1078 427,1088 454,1097 484,1102 519,1102 586,1102 640,1086 679,1053 718,1020 745,968 760,897 L 763,897 C 776,928 791,957 808,982 824,1007 843,1029 865,1047 886,1064 911,1078 938,1088 965,1097 997,1102 1032,1102 1077,1102 1115,1095 1148,1080 1180,1065 1207,1043 1228,1012 1249,981 1264,942 1274,894 1283,845 1288,788 1288,721 L 1288,0 1142,0 1142,686 C 1142,739 1139,783 1134,818 1129,853 1120,882 1107,904 1094,925 1077,941 1056,950 1035,959 1010,963 980,963 949,963 921,956 896,942 871,927 849,906 831,878 813,850 799,815 790,773 781,731 776,682 776,627 L 776,0 630,0 Z"
   id="glyph34" />
   <glyph
   unicode="l"
   horiz-adv-x="160"
   d="M 113,0 L 113,1484 261,1484 261,0 113,0 Z"
   id="glyph36" />
   <glyph
   unicode="i"
   horiz-adv-x="160"
   d="M 112,1312 L 112,1484 260,1484 260,1312 112,1312 Z M 112,0 L 112,1082 260,1082 260,0 112,0 Z"
   id="glyph38" />
   <glyph
   unicode="g"
   horiz-adv-x="795"
   d="M 449,-425 C 398,-425 353,-419 314,-406 275,-393 241,-375 213,-352 185,-328 162,-300 145,-267 128,-234 115,-198 107,-158 L 256,-132 C 266,-182 288,-220 321,-248 354,-274 398,-288 453,-288 486,-288 517,-282 544,-271 571,-260 595,-241 614,-217 633,-191 648,-159 659,-119 669,-79 674,-30 674,27 L 674,201 672,201 C 661,174 648,148 632,123 616,98 596,75 573,56 550,37 523,21 492,10 461,-2 426,-8 387,-8 331,-8 283,4 243,27 202,50 169,84 144,130 119,176 100,233 89,302 77,370 71,449 71,539 71,626 77,704 89,773 100,842 119,901 146,950 172,998 206,1035 249,1061 291,1086 342,1099 403,1099 466,1099 520,1082 567,1047 613,1012 649,962 674,897 L 676,897 C 676,914 676,933 677,953 678,974 679,994 680,1012 681,1031 682,1046 683,1060 684,1073 685,1080 686,1080 L 826,1080 C 825,1074 825,1064 824,1050 823,1035 823,1018 823,998 822,978 822,956 822,932 821,907 821,882 821,856 L 821,30 C 821,-121 791,-234 730,-311 669,-387 575,-425 449,-425 Z M 674,541 C 674,616 667,681 654,735 641,788 623,832 601,866 579,900 554,925 526,941 498,957 469,965 440,965 402,965 370,957 343,941 316,925 293,900 275,866 257,831 244,787 236,734 227,680 223,616 223,541 223,463 227,398 236,345 244,292 257,249 275,216 292,183 314,160 341,146 368,132 400,125 437,125 466,125 495,133 524,148 552,163 577,188 600,221 622,254 640,297 654,350 667,403 674,466 674,541 Z"
   id="glyph40" />
   <glyph
   unicode="e"
   horiz-adv-x="821"
   d="M 219,503 C 219,446 225,394 237,347 249,299 265,258 285,224 305,189 331,163 362,144 393,125 430,115 474,115 538,115 589,131 628,162 667,193 693,233 706,281 L 836,236 C 827,206 814,176 797,146 780,115 758,88 730,64 702,39 667,19 626,4 584,-12 533,-20 474,-20 343,-20 243,28 174,123 105,218 71,360 71,548 71,649 82,735 103,806 124,876 152,933 188,977 224,1021 266,1053 314,1073 362,1092 413,1102 468,1102 543,1102 605,1087 655,1058 752,1001 813,900 840,754 853,684 859,608 859,527 L 859,503 219,503 Z M 711,641 C 711,762 689,847 644,896 599,945 539,969 466,969 414,969 363,947 314,903 254,852 222,764 219,641 L 711,641 Z"
   id="glyph42" />
   <glyph
   unicode="c"
   horiz-adv-x="742"
   d="M 226,546 C 226,484 230,427 237,375 244,323 257,278 274,241 291,203 314,174 343,153 372,132 407,122 450,122 503,122 547,139 582,174 617,209 638,262 646,334 L 796,322 C 791,277 781,234 764,193 747,152 725,115 697,84 669,53 635,28 594,9 553,-10 507,-20 454,-20 385,-20 326,-6 277,23 228,52 188,91 158,142 127,192 105,251 92,320 78,388 71,462 71,542 71,615 76,679 86,735 96,790 110,839 128,881 145,922 166,957 190,986 214,1014 240,1037 269,1054 297,1071 327,1083 358,1091 389,1098 420,1102 452,1102 502,1102 546,1094 585,1077 624,1060 657,1038 686,1009 714,980 737,945 754,906 771,867 784,824 791,779 L 639,765 C 632,825 612,873 581,908 550,943 505,961 448,961 406,961 371,953 343,936 314,919 291,893 274,859 257,824 244,781 237,729 230,677 226,616 226,546 Z"
   id="glyph44" />
   <glyph
   unicode="a"
   horiz-adv-x="901"
   d="M 339,-20 C 250,-20 183,9 138,66 93,123 71,202 71,302 71,373 82,432 105,478 127,523 156,559 192,585 227,611 268,629 314,639 360,649 407,655 454,656 L 654,660 654,719 C 654,764 650,802 643,833 635,864 623,890 607,909 591,928 571,943 548,952 524,961 496,965 463,965 434,965 409,963 386,958 363,953 344,944 327,931 310,918 296,900 286,878 275,855 268,827 265,793 L 111,810 C 116,853 127,892 142,928 157,963 179,994 207,1020 235,1046 270,1066 313,1081 355,1095 406,1102 467,1102 578,1102 662,1071 719,1009 775,946 803,856 803,738 L 803,272 C 803,219 809,179 820,152 831,125 853,111 886,111 894,111 902,112 911,113 919,114 927,116 934,118 L 934,6 C 915,1 897,-3 879,-6 860,-9 841,-10 820,-10 792,-10 768,-5 748,4 728,13 712,26 700,45 687,63 678,86 671,113 664,140 660,171 658,207 L 654,207 C 638,172 621,141 602,113 583,85 561,61 536,42 511,22 482,7 450,-4 417,-15 380,-20 339,-20 Z M 373,115 C 420,115 462,126 497,147 532,168 561,194 584,227 607,260 625,295 637,334 648,373 654,410 654,445 L 654,534 492,530 C 456,529 422,526 389,521 356,515 328,504 304,487 279,470 260,447 245,417 230,387 223,348 223,299 223,240 236,195 262,163 288,131 325,115 373,115 Z"
   id="glyph46" />
   <glyph
   unicode="R"
   horiz-adv-x="1007"
   d="M 954,0 L 654,585 294,585 294,0 138,0 138,1409 681,1409 C 746,1409 804,1400 855,1382 906,1363 948,1337 983,1302 1017,1267 1043,1225 1061,1175 1079,1125 1088,1069 1088,1006 1088,961 1083,917 1072,874 1061,831 1045,791 1022,755 999,719 969,688 934,662 899,636 856,618 806,607 L 1134,0 954,0 Z M 931,1004 C 931,1047 925,1084 913,1115 901,1146 884,1173 861,1194 838,1215 810,1230 777,1241 744,1251 707,1256 665,1256 L 294,1256 294,736 672,736 C 717,736 756,743 789,757 822,770 849,789 870,813 891,837 906,865 916,898 926,931 931,966 931,1004 Z"
   id="glyph48" />
   <glyph
   unicode="M"
   horiz-adv-x="1139"
   d="M 1120,0 L 1120,940 C 1120,974 1120,1009 1121,1044 1122,1079 1122,1112 1123,1141 1124,1175 1126,1208 1128,1240 1121,1206 1113,1172 1104,1139 1104,1139 1096,1109 1080,1048 1072,1015 1064,986 1055,960 L 757,0 647,0 344,960 C 341,970 337,982 334,995 L 323,1038 310,1084 298,1130 C 289,1165 280,1202 271,1240 272,1203 273,1166 274,1129 275,1098 276,1065 277,1031 277,996 277,966 277,940 L 277,0 138,0 138,1409 344,1409 651,432 C 655,419 660,402 665,381 670,360 676,338 681,316 686,294 690,273 694,254 698,234 701,219 703,208 704,219 707,234 712,254 716,274 721,295 727,317 L 744,381 C 749,402 754,419 759,432 L 1060,1409 1261,1409 1261,0 1120,0 Z"
   id="glyph50" />
   <glyph
   unicode="I"
   horiz-adv-x="187"
   d="M 155,0 L 155,1409 312,1409 312,0 155,0 Z"
   id="glyph52" />
   <glyph
   unicode="F"
   horiz-adv-x="848"
   d="M 294,1253 L 294,729 939,729 939,571 294,571 294,0 138,0 138,1409 959,1409 959,1253 294,1253 Z"
   id="glyph54" />
   <glyph
   unicode="D"
   horiz-adv-x="1007"
   d="M 1132,719 C 1132,602 1118,498 1089,409 1060,319 1020,244 970,184 919,123 860,78 791,47 722,16 649,0 570,0 L 138,0 138,1409 520,1409 C 609,1409 691,1396 766,1369 841,1342 905,1300 960,1244 1014,1187 1056,1116 1087,1029 1117,942 1132,839 1132,719 Z M 974,719 C 974,814 963,896 941,964 918,1031 887,1087 847,1130 806,1173 758,1205 702,1226 645,1246 583,1256 516,1256 L 294,1256 294,153 552,153 C 613,153 669,165 720,189 771,213 816,249 854,296 891,343 921,402 942,473 963,544 974,626 974,719 Z"
   id="glyph56" />
   <glyph
   unicode="C"
   horiz-adv-x="1086"
   d="M 649,1274 C 584,1274 526,1261 475,1234 424,1207 382,1169 348,1120 314,1071 288,1011 271,942 253,873 244,796 244,711 244,626 254,549 273,479 292,408 319,348 354,297 389,246 432,207 483,179 534,151 592,137 656,137 701,137 741,144 778,159 815,173 848,193 878,219 908,245 935,276 958,312 981,347 1002,387 1020,430 L 1148,352 C 1127,299 1102,250 1071,205 1040,160 1004,120 963,87 922,54 875,28 823,9 771,-10 713,-20 648,-20 555,-20 473,-2 403,35 332,71 274,122 227,187 180,252 144,329 121,418 97,507 85,605 85,711 85,821 98,920 123,1009 148,1098 184,1173 232,1236 279,1298 338,1346 408,1380 478,1413 558,1430 647,1430 770,1430 872,1401 955,1342 1038,1283 1098,1196 1137,1081 L 989,1021 C 978,1054 964,1086 945,1117 926,1147 903,1174 875,1197 847,1220 814,1239 777,1253 740,1267 697,1274 649,1274 Z"
   id="glyph58" />
   <glyph
   unicode="."
   horiz-adv-x="187"
   d="M 153,0 L 153,219 314,219 314,0 153,0 Z"
   id="glyph60" />
   <glyph
   unicode=" "
   horiz-adv-x="476"
   id="glyph62" />
  </font>
 </defs>
 <defs
   id="defs178">
  <font
   id="EmbeddedFont_2"
   horiz-adv-x="2048"
   horiz-origin-x="0"
   horiz-origin-y="0"
   vert-origin-x="45"
   vert-origin-y="90"
   vert-adv-y="90">
   <font-face
   font-family="Arial Narrow embedded"
   units-per-em="2048"
   font-weight="bold"
   font-style="normal"
   ascent="1905"
   descent="423"
   id="font-face67" />
   <missing-glyph
   horiz-adv-x="2048"
   d="M 0,0 L 2047,0 2047,2047 0,2047 0,0 Z"
   id="missing-glyph69" />
   <glyph
   unicode="Â´"
   horiz-adv-x="451"
   d="M 71,1183 L 71,1214 278,1502 489,1502 489,1459 211,1183 71,1183 Z"
   id="glyph71" />
   <glyph
   unicode="y"
   horiz-adv-x="927"
   d="M 574,-57 C 553,-120 531,-175 509,-221 487,-267 463,-305 437,-336 410,-366 381,-388 348,-403 315,-418 276,-425 232,-425 208,-425 184,-424 159,-422 134,-420 110,-417 87,-412 L 87,-212 C 98,-214 111,-216 127,-218 142,-219 155,-220 166,-220 189,-220 209,-217 227,-211 244,-205 260,-195 274,-181 288,-167 301,-148 314,-125 326,-102 338,-72 349,-37 L 364,11 13,1082 257,1082 396,575 C 396,575 399,563 406,538 L 422,478 440,408 457,338 C 462,315 467,295 471,278 474,261 477,248 479,241 480,248 483,261 486,278 L 499,336 514,404 530,473 543,532 C 547,550 550,563 553,571 L 684,1082 925,1082 574,-57 Z"
   id="glyph73" />
   <glyph
   unicode="w"
   horiz-adv-x="1350"
   d="M 1077,0 L 834,0 692,660 C 687,681 683,704 679,730 675,755 671,779 667,802 L 654,882 C 649,855 644,829 639,802 634,779 630,755 625,729 620,703 616,679 611,658 L 468,0 225,0 -5,1082 212,1082 324,446 C 327,428 331,408 334,386 L 345,323 C 349,300 353,278 358,255 362,280 366,305 369,329 372,350 376,371 380,392 L 390,446 529,1082 776,1082 912,446 C 916,429 920,409 924,387 L 935,325 C 939,302 943,279 946,255 951,279 955,302 958,325 958,325 962,346 969,387 L 980,446 1097,1082 1310,1082 1077,0 Z"
   id="glyph75" />
   <glyph
   unicode="u"
   horiz-adv-x="848"
   d="M 335,1082 L 335,475 C 335,433 338,395 343,360 348,325 357,295 370,270 383,245 399,225 419,211 439,197 463,190 492,190 520,190 545,198 568,213 591,228 610,249 627,277 643,304 656,337 665,376 674,414 678,456 678,502 L 678,1082 909,1082 909,242 C 909,219 909,196 910,171 910,146 910,122 911,100 912,77 912,57 913,40 914,22 914,9 915,0 L 695,0 C 694,8 694,21 693,39 692,56 691,76 690,97 689,118 688,140 687,161 686,182 686,200 686,215 L 682,215 C 651,133 612,73 565,36 518,-1 461,-20 396,-20 343,-20 298,-9 261,12 224,33 193,63 170,100 147,137 130,180 120,231 109,282 104,336 104,395 L 104,1082 335,1082 Z"
   id="glyph77" />
   <glyph
   unicode="t"
   horiz-adv-x="557"
   d="M 344,-18 C 276,-18 224,5 188,50 151,95 133,163 133,254 L 133,892 20,892 20,1082 144,1082 216,1336 361,1336 361,1082 529,1082 529,892 361,892 361,330 C 361,277 369,239 386,214 402,189 427,176 461,176 475,176 488,177 500,180 511,183 524,186 539,190 L 539,16 C 510,5 480,-4 449,-10 417,-15 382,-18 344,-18 Z"
   id="glyph79" />
   <glyph
   unicode="s"
   horiz-adv-x="821"
   d="M 865,316 C 865,264 856,217 839,176 821,135 795,100 761,71 727,42 686,19 637,4 588,-12 531,-20 468,-20 412,-20 361,-15 316,-5 271,5 231,22 197,45 162,68 134,97 111,134 88,171 70,216 59,270 L 262,307 C 269,277 278,253 289,234 300,215 315,201 332,191 349,181 368,174 391,171 414,168 439,166 468,166 494,166 519,168 542,172 565,175 584,182 601,191 618,200 631,212 640,229 649,245 654,265 654,290 654,318 647,340 634,357 620,373 602,386 579,397 556,407 528,416 497,424 465,431 431,440 396,450 359,460 322,472 286,486 250,500 218,519 190,543 161,567 138,598 121,635 103,672 94,718 94,775 94,826 102,872 119,913 136,953 160,987 192,1016 223,1044 262,1066 309,1081 356,1096 409,1103 470,1103 518,1103 563,1098 605,1087 646,1076 683,1058 716,1035 749,1011 776,981 799,944 821,907 836,863 845,811 L 640,785 C 636,811 629,833 620,850 610,867 598,880 584,890 569,900 552,907 533,911 514,914 493,916 470,916 415,916 374,908 347,891 320,874 306,845 306,805 306,780 312,761 323,746 334,731 349,719 370,710 391,700 415,692 443,685 471,678 502,669 535,659 576,648 617,636 657,622 696,607 732,588 763,563 794,538 818,505 837,466 856,427 865,377 865,316 Z"
   id="glyph81" />
   <glyph
   unicode="r"
   horiz-adv-x="530"
   d="M 117,0 L 117,828 C 117,851 117,876 117,902 116,928 116,953 115,977 114,1000 114,1022 113,1041 112,1060 112,1073 111,1082 L 330,1082 C 331,1074 333,1060 334,1041 335,1021 335,999 336,976 L 340,906 C 341,883 341,865 341,851 L 344,851 C 355,890 367,926 379,957 390,988 404,1014 419,1036 434,1057 453,1074 475,1086 497,1097 524,1103 556,1103 569,1103 583,1102 597,1099 610,1096 621,1092 628,1088 L 628,853 C 613,857 598,861 583,864 568,867 550,868 529,868 472,868 427,840 395,783 363,726 347,642 347,531 L 347,0 117,0 Z"
   id="glyph83" />
   <glyph
   unicode="p"
   horiz-adv-x="848"
   d="M 957,546 C 957,464 950,388 937,319 924,250 903,190 875,140 847,90 812,51 769,23 726,-6 675,-20 617,-20 591,-20 565,-17 539,-10 512,-3 487,8 464,23 441,38 419,57 399,82 379,106 362,136 348,172 L 343,172 C 344,169 344,160 345,147 345,134 345,118 346,101 347,83 347,64 348,45 348,25 348,7 348,-10 L 348,-425 117,-425 117,833 C 117,888 116,938 115,981 114,1024 112,1058 111,1082 L 335,1082 C 336,1077 338,1068 339,1055 340,1042 341,1026 342,1009 343,992 343,974 344,955 344,936 344,920 344,906 L 348,906 C 376,977 414,1028 463,1059 512,1090 568,1105 632,1105 688,1105 737,1091 778,1063 819,1035 852,996 879,947 906,898 925,839 938,771 951,702 957,627 957,546 Z M 717,546 C 717,669 702,761 671,821 640,880 595,910 534,910 511,910 489,904 466,893 443,881 422,861 405,833 387,804 372,766 361,719 350,671 344,611 344,538 344,467 350,409 361,362 372,315 386,277 404,249 422,221 442,201 465,190 487,178 509,172 532,172 561,172 588,179 611,194 634,208 653,230 669,261 684,291 696,330 705,377 713,424 717,481 717,546 Z"
   id="glyph85" />
   <glyph
   unicode="o"
   horiz-adv-x="927"
   d="M 960,542 C 960,459 951,384 932,315 913,246 885,187 848,138 810,88 763,49 707,22 650,-6 584,-20 509,-20 437,-20 373,-6 318,21 263,48 216,87 179,136 142,185 114,245 95,314 76,383 66,459 66,542 66,623 75,697 94,766 112,834 140,893 177,943 214,993 260,1032 317,1060 373,1088 439,1102 514,1102 594,1102 662,1088 719,1060 775,1032 821,993 857,944 892,894 918,835 935,767 952,698 960,623 960,542 Z M 719,542 C 719,671 702,764 668,822 633,880 583,909 518,909 450,909 398,880 362,821 326,762 308,669 308,542 308,477 313,422 322,375 331,328 345,290 363,260 380,230 401,208 426,194 451,179 478,172 507,172 541,172 571,179 598,194 624,208 646,230 664,260 682,290 696,328 705,375 714,422 719,477 719,542 Z"
   id="glyph87" />
   <glyph
   unicode="n"
   horiz-adv-x="821"
   d="M 692,0 L 692,607 C 692,649 689,688 684,723 679,758 670,788 657,813 644,838 628,857 608,871 587,885 563,892 534,892 506,892 481,885 458,870 435,855 416,833 400,806 383,778 371,745 362,707 353,668 348,626 348,580 L 348,0 117,0 117,840 C 117,863 117,887 117,912 116,937 116,960 115,983 114,1005 114,1025 113,1043 112,1060 112,1073 111,1082 L 331,1082 C 332,1074 333,1061 334,1044 335,1026 336,1006 337,985 338,964 339,942 340,921 341,900 341,882 341,867 L 344,867 C 375,950 415,1010 462,1047 509,1084 565,1103 630,1103 683,1103 729,1092 766,1071 803,1050 833,1020 856,983 879,946 896,902 907,851 917,800 922,746 922,687 L 922,0 692,0 Z"
   id="glyph89" />
   <glyph
   unicode="m"
   horiz-adv-x="1297"
   d="M 640,0 L 640,607 C 640,649 638,688 633,723 628,758 621,788 610,813 599,838 585,857 568,871 551,885 530,892 505,892 482,892 460,885 441,870 422,855 405,833 392,806 378,778 367,745 360,707 352,668 348,626 348,580 L 348,0 117,0 117,840 C 117,863 117,887 117,912 116,937 116,960 115,983 114,1005 114,1025 113,1043 112,1060 112,1073 111,1082 L 330,1082 C 331,1074 333,1061 334,1044 335,1026 336,1006 337,985 338,964 339,942 340,921 341,900 341,882 341,867 L 344,867 C 373,950 408,1010 451,1047 493,1084 544,1103 603,1103 671,1103 726,1083 767,1043 808,1002 835,944 849,867 L 854,867 C 870,912 887,949 906,979 924,1009 944,1033 966,1052 988,1070 1012,1083 1038,1091 1064,1099 1092,1103 1123,1103 1172,1103 1213,1092 1247,1071 1280,1050 1308,1020 1329,983 1350,946 1365,902 1375,851 1384,800 1389,746 1389,687 L 1389,0 1160,0 1160,607 C 1160,649 1158,688 1153,723 1148,758 1141,788 1130,813 1119,838 1106,857 1089,871 1072,885 1051,892 1026,892 1003,892 983,885 964,871 945,856 928,836 914,810 900,783 889,752 882,715 874,678 869,638 868,593 L 868,0 640,0 Z"
   id="glyph91" />
   <glyph
   unicode="l"
   horiz-adv-x="265"
   d="M 117,0 L 117,1484 348,1484 348,0 117,0 Z"
   id="glyph93" />
   <glyph
   unicode="i"
   horiz-adv-x="265"
   d="M 117,1277 L 117,1484 348,1484 348,1277 117,1277 Z M 117,0 L 117,1082 348,1082 348,0 117,0 Z"
   id="glyph95" />
   <glyph
   unicode="h"
   horiz-adv-x="821"
   d="M 344,866 C 375,949 415,1009 462,1046 509,1083 565,1102 630,1102 683,1102 729,1091 766,1070 803,1049 833,1019 856,982 879,945 896,901 907,850 917,799 922,745 922,686 L 922,0 692,0 692,606 C 692,648 689,687 684,722 679,757 670,787 657,812 644,837 628,856 608,870 587,884 563,891 534,891 506,891 481,884 458,869 435,854 416,832 400,805 383,777 371,744 362,706 353,667 348,625 348,579 L 348,0 117,0 117,1484 348,1484 348,1079 C 348,1058 348,1036 347,1015 346,993 346,973 345,954 344,935 344,917 343,902 342,887 342,875 341,866 L 344,866 Z"
   id="glyph97" />
   <glyph
   unicode="g"
   horiz-adv-x="874"
   d="M 489,-434 C 430,-434 379,-427 334,-413 289,-398 251,-378 220,-353 189,-327 164,-296 145,-261 126,-225 113,-186 106,-143 L 336,-110 C 344,-153 362,-187 389,-212 416,-237 452,-249 495,-249 522,-249 547,-244 570,-235 593,-226 612,-210 629,-188 645,-165 658,-136 667,-99 676,-62 680,-17 680,37 680,37 680,56 680,94 680,113 680,131 681,147 682,166 682,184 682,201 L 680,201 C 653,131 616,80 568,49 519,18 461,2 394,2 338,2 290,16 249,43 208,70 175,107 148,156 121,204 101,262 88,329 75,396 69,469 69,550 69,633 76,709 90,777 103,844 124,902 152,951 180,1000 216,1037 259,1064 302,1090 353,1103 412,1103 471,1103 524,1088 571,1057 618,1026 654,977 680,908 L 684,908 C 684,922 684,938 685,957 686,975 687,993 688,1010 689,1027 691,1042 692,1055 693,1068 694,1077 695,1082 L 914,1082 C 913,1058 912,1024 911,981 910,938 909,888 909,832 L 909,33 C 909,-46 900,-114 881,-173 862,-231 835,-279 800,-318 764,-357 720,-386 668,-405 615,-424 556,-434 489,-434 Z M 682,556 C 682,624 677,681 666,726 655,771 640,808 623,835 605,862 585,882 562,893 539,904 517,910 494,910 465,910 439,903 416,889 393,875 373,853 358,824 342,795 330,757 322,712 313,667 309,613 309,550 309,433 324,345 355,286 386,227 431,197 492,197 515,197 538,203 561,214 584,225 604,244 622,272 640,299 655,336 666,382 677,428 682,486 682,556 Z"
   id="glyph99" />
   <glyph
   unicode="e"
   horiz-adv-x="821"
   d="M 481,-20 C 417,-20 359,-8 308,15 257,38 213,73 177,120 141,167 114,226 95,297 76,368 66,451 66,546 66,649 77,736 100,807 123,878 153,935 192,979 230,1022 274,1054 325,1073 375,1092 428,1102 484,1102 554,1102 614,1087 663,1058 712,1028 753,986 785,933 816,880 840,816 855,742 870,667 877,585 877,495 L 877,487 308,487 C 308,442 311,400 318,361 324,322 334,288 349,260 364,231 383,209 407,193 430,176 459,168 492,168 533,168 566,179 592,200 617,221 635,253 646,297 L 863,274 C 853,243 839,211 822,176 804,141 780,110 751,81 722,52 685,28 641,9 597,-10 544,-20 481,-20 Z M 481,925 C 458,925 436,920 415,911 394,901 377,886 362,865 347,844 334,816 325,783 316,750 310,710 309,663 L 654,663 C 649,750 632,816 602,860 572,903 532,925 481,925 Z"
   id="glyph101" />
   <glyph
   unicode="d"
   horiz-adv-x="874"
   d="M 692,0 C 691,5 689,15 688,29 687,42 685,58 684,75 683,92 682,110 681,128 680,146 680,162 680,176 L 677,176 C 650,106 613,56 565,26 517,-5 460,-20 393,-20 337,-20 289,-6 248,22 207,50 174,89 147,139 120,189 101,248 88,317 75,385 69,459 69,540 69,622 76,697 89,766 102,835 123,894 151,944 179,993 215,1032 258,1060 301,1088 351,1102 410,1102 439,1102 467,1098 494,1091 521,1084 546,1072 569,1057 592,1042 612,1022 631,998 650,974 665,945 678,911 L 680,911 C 680,918 680,928 680,941 679,954 679,968 679,985 679,1002 679,1019 679,1037 678,1055 678,1072 678,1089 L 678,1484 909,1484 909,236 C 909,183 910,137 912,96 913,55 914,23 915,0 L 692,0 Z M 682,547 C 682,618 677,678 666,725 655,772 640,809 622,837 604,864 584,884 561,895 538,906 515,911 492,911 463,911 437,904 414,890 391,876 372,854 357,824 341,794 329,756 321,709 313,662 309,606 309,540 309,295 369,172 490,172 513,172 536,178 559,190 582,202 603,222 621,251 639,280 654,318 665,367 676,415 682,475 682,547 Z"
   id="glyph103" />
   <glyph
   unicode="c"
   horiz-adv-x="848"
   d="M 487,-20 C 416,-20 355,-7 302,20 249,47 206,84 171,133 136,182 109,240 92,309 75,377 66,452 66,535 66,625 76,705 95,776 114,846 141,905 177,954 213,1002 258,1039 311,1064 364,1089 423,1102 490,1102 547,1102 598,1093 643,1074 688,1055 726,1030 759,998 791,965 817,927 837,883 857,839 871,792 878,741 L 646,727 C 639,782 623,827 597,860 571,893 534,909 485,909 423,909 378,878 350,816 322,754 308,664 308,546 308,297 368,172 489,172 533,172 570,189 599,223 628,256 647,306 654,373 L 885,360 C 880,310 867,262 848,217 828,171 802,131 769,96 736,61 696,33 649,12 602,-9 548,-20 487,-20 Z"
   id="glyph105" />
   <glyph
   unicode="a"
   horiz-adv-x="928"
   d="M 322,-20 C 279,-20 241,-13 208,2 174,16 145,37 122,65 99,92 81,126 68,167 55,208 49,254 49,306 49,370 58,424 77,468 95,511 120,547 152,574 183,601 220,620 263,633 306,645 351,651 399,652 L 590,656 590,711 C 590,750 587,783 582,810 576,836 568,857 557,874 546,891 532,903 516,910 500,917 482,920 461,920 442,920 425,918 410,913 395,908 382,900 371,889 360,877 351,861 344,842 337,822 333,797 330,767 L 89,781 C 96,828 108,872 126,911 143,950 167,983 198,1012 229,1041 267,1063 312,1079 357,1094 410,1102 471,1102 526,1102 576,1094 619,1077 662,1060 698,1036 728,1003 758,970 781,929 797,881 813,833 821,777 821,714 L 821,320 C 821,295 822,272 824,252 826,232 830,215 835,202 840,188 847,178 857,171 866,164 879,160 894,160 911,160 928,162 945,166 L 945,14 C 945,14 933,10 908,3 897,0 886,-3 875,-5 864,-7 853,-9 841,-10 828,-11 814,-12 797,-12 739,-12 696,5 669,40 641,75 624,126 619,193 L 614,193 C 583,126 544,73 496,36 448,-1 390,-20 322,-20 Z M 590,501 L 472,499 C 447,498 424,495 402,492 380,488 361,480 344,469 327,457 314,440 304,418 294,396 289,366 289,328 289,277 299,239 319,214 338,189 364,176 396,176 425,176 452,184 477,199 501,214 521,235 538,260 555,285 568,313 577,346 586,379 590,412 590,446 L 590,501 Z"
   id="glyph107" />
   <glyph
   unicode="Z"
   horiz-adv-x="954"
   d="M 978,0 L 50,0 50,209 675,1178 112,1178 112,1409 944,1409 944,1204 319,231 978,231 978,0 Z"
   id="glyph109" />
   <glyph
   unicode="W"
   horiz-adv-x="1589"
   d="M 1285,0 L 998,0 841,815 C 836,840 831,869 826,903 L 809,1002 C 803,1039 798,1077 793,1116 793,1116 787,1078 775,1001 775,1001 772,985 767,952 764,935 761,918 758,902 L 750,855 C 747,840 745,827 742,815 L 586,0 299,0 2,1409 247,1409 391,625 414,499 434,388 C 441,350 447,314 452,279 L 476,423 C 476,423 479,444 486,485 L 498,548 508,608 517,659 660,1409 931,1409 1077,659 C 1080,643 1083,625 1086,606 L 1096,544 C 1099,523 1103,503 1106,482 1109,461 1112,440 1115,420 L 1135,279 C 1135,279 1142,318 1155,395 1155,395 1162,432 1176,507 1183,548 1191,587 1199,625 L 1338,1409 1583,1409 1285,0 Z"
   id="glyph111" />
   <glyph
   unicode="U"
   horiz-adv-x="1033"
   d="M 592,-20 C 520,-20 454,-9 394,12 334,33 282,65 239,110 196,154 162,211 138,280 113,349 101,432 101,528 L 101,1409 343,1409 343,551 C 343,492 349,441 361,398 373,355 390,319 413,292 435,264 462,244 494,231 525,218 560,211 599,211 638,211 675,218 708,232 741,245 769,266 793,295 816,324 835,360 848,404 861,448 868,500 868,561 L 868,1409 1110,1409 1110,543 C 1110,446 1097,363 1072,292 1046,221 1010,163 964,117 918,70 863,36 800,14 737,-9 667,-20 592,-20 Z"
   id="glyph113" />
   <glyph
   unicode="T"
   horiz-adv-x="1006"
   d="M 634,1181 L 634,0 392,0 392,1181 19,1181 19,1409 1008,1409 1008,1181 634,1181 Z"
   id="glyph115" />
   <glyph
   unicode="S"
   horiz-adv-x="1033"
   d="M 1054,406 C 1054,342 1045,284 1026,232 1007,179 977,134 937,97 896,60 845,31 783,11 720,-10 646,-20 559,-20 482,-20 415,-12 357,5 298,22 248,46 206,79 164,112 130,152 105,201 79,249 60,304 48,367 L 282,414 C 289,383 298,354 311,328 324,302 341,280 363,261 385,242 413,227 446,217 479,206 519,201 566,201 648,201 711,216 754,247 797,277 819,324 819,389 819,428 810,459 793,484 776,509 753,529 724,545 695,561 661,574 624,585 586,596 546,606 505,616 505,616 472,626 406,645 373,655 342,667 313,681 283,695 255,712 230,731 204,750 182,774 163,803 144,831 129,864 118,902 107,940 102,985 102,1036 102,1106 114,1166 137,1216 160,1266 192,1307 233,1339 274,1370 322,1393 378,1408 434,1423 495,1430 562,1430 637,1430 702,1423 756,1409 810,1394 855,1372 892,1343 928,1314 957,1277 978,1233 999,1188 1014,1136 1024,1077 L 790,1038 C 778,1099 754,1144 717,1175 680,1206 627,1221 558,1221 515,1221 480,1217 452,1208 423,1199 401,1186 384,1171 367,1156 356,1138 349,1118 342,1097 338,1076 338,1053 338,1018 345,990 359,968 372,945 391,927 416,912 441,897 470,884 504,874 538,863 576,853 617,842 653,833 689,823 724,813 759,802 793,790 826,776 858,762 888,745 916,725 944,705 968,681 989,652 1009,623 1025,588 1037,548 1048,508 1054,461 1054,406 Z"
   id="glyph117" />
   <glyph
   unicode="R"
   horiz-adv-x="1086"
   d="M 906,0 L 638,535 354,535 354,0 112,0 112,1409 689,1409 C 761,1409 824,1399 878,1380 932,1360 977,1332 1013,1296 1049,1259 1076,1215 1094,1164 1111,1112 1120,1054 1120,989 1120,936 1114,888 1101,845 1088,801 1071,762 1048,728 1025,694 998,666 967,643 936,620 902,603 865,592 L 1178,0 906,0 Z M 877,977 C 877,1046 859,1097 822,1130 785,1163 732,1180 664,1180 L 354,1180 354,764 670,764 C 706,764 737,769 763,780 789,790 810,805 827,824 844,843 856,865 865,891 873,917 877,946 877,977 Z"
   id="glyph119" />
   <glyph
   unicode="P"
   horiz-adv-x="953"
   d="M 1063,963 C 1063,902 1055,844 1038,788 1021,731 996,681 961,638 926,595 883,560 830,535 777,509 714,496 641,496 L 354,496 354,0 112,0 112,1409 631,1409 C 705,1409 769,1398 823,1377 877,1355 922,1324 958,1285 993,1246 1020,1199 1037,1144 1054,1089 1063,1029 1063,963 Z M 819,958 C 819,1031 801,1086 766,1124 730,1161 676,1180 604,1180 L 354,1180 354,723 611,723 C 647,723 678,729 704,740 730,751 752,767 769,788 786,809 798,834 807,863 815,892 819,923 819,958 Z"
   id="glyph121" />
   <glyph
   unicode="O"
   horiz-adv-x="1192"
   d="M 1236,711 C 1236,601 1223,501 1196,411 1169,321 1131,244 1081,180 1030,116 969,67 897,32 824,-3 742,-20 651,-20 554,-20 470,-2 397,35 324,71 264,122 215,187 166,252 130,329 106,418 81,507 69,605 69,711 69,821 82,920 107,1009 132,1098 170,1173 220,1236 269,1298 330,1346 403,1380 475,1413 558,1430 652,1430 746,1430 829,1413 902,1379 975,1345 1036,1297 1085,1234 1134,1171 1172,1096 1198,1008 1223,919 1236,820 1236,711 Z M 989,711 C 989,785 982,852 968,912 953,971 932,1022 904,1065 875,1108 840,1141 798,1164 756,1187 707,1198 652,1198 595,1198 546,1187 504,1164 462,1141 427,1108 398,1065 369,1022 348,971 334,912 320,852 313,785 313,711 313,638 320,571 335,510 349,449 370,396 399,352 427,308 462,274 505,249 547,224 596,212 651,212 710,212 761,225 804,250 846,275 881,309 909,354 936,398 957,451 970,512 983,573 989,639 989,711 Z"
   id="glyph123" />
   <glyph
   unicode="N"
   horiz-adv-x="1006"
   d="M 815,0 L 312,1085 C 315,1056 317,1026 320,997 322,972 324,944 325,915 326,886 327,858 327,831 L 327,0 112,0 112,1409 388,1409 899,315 C 896,343 894,372 892,403 890,429 888,458 887,491 885,524 884,557 884,590 L 884,1409 1099,1409 1099,0 815,0 Z"
   id="glyph125" />
   <glyph
   unicode="M"
   horiz-adv-x="1191"
   d="M 1072,0 L 1072,854 C 1072,888 1072,923 1073,959 1074,995 1075,1028 1076,1058 1076,1058 1077,1092 1080,1161 1080,1161 1069,1111 1047,1011 1047,1011 1042,990 1033,949 L 1019,887 1006,831 994,786 786,0 613,0 405,786 C 402,799 398,814 394,831 L 381,887 366,949 352,1011 C 352,1011 340,1061 317,1161 318,1122 320,1084 322,1047 323,1015 325,981 326,946 327,911 327,880 327,854 L 327,0 112,0 112,1409 436,1409 643,621 C 648,600 654,575 660,545 L 679,458 C 679,458 686,424 700,356 700,356 707,389 722,456 722,456 725,470 732,499 L 742,542 C 745,556 749,569 752,582 L 761,616 964,1409 1287,1409 1287,0 1072,0 Z"
   id="glyph127" />
   <glyph
   unicode="L"
   horiz-adv-x="874"
   d="M 112,0 L 112,1409 354,1409 354,228 974,228 974,0 112,0 Z"
   id="glyph129" />
   <glyph
   unicode="J"
   horiz-adv-x="821"
   d="M 430,-20 C 372,-20 320,-13 275,2 230,17 190,40 157,72 124,104 96,146 75,197 53,248 36,309 25,382 L 266,425 C 271,386 279,353 289,326 298,299 310,277 324,260 338,243 354,230 372,223 390,215 410,211 431,211 479,211 516,231 541,270 566,309 578,366 578,439 L 578,1178 348,1178 348,1409 819,1409 819,446 C 819,375 811,310 794,253 777,195 752,146 719,106 686,65 645,34 597,13 548,-9 493,-20 430,-20 Z"
   id="glyph131" />
   <glyph
   unicode="I"
   horiz-adv-x="265"
   d="M 112,0 L 112,1409 355,1409 355,0 112,0 Z"
   id="glyph133" />
   <glyph
   unicode="F"
   horiz-adv-x="874"
   d="M 354,1181 L 354,745 946,745 946,517 354,517 354,0 112,0 112,1409 964,1409 964,1181 354,1181 Z"
   id="glyph135" />
   <glyph
   unicode="E"
   horiz-adv-x="953"
   d="M 112,0 L 112,1409 1021,1409 1021,1181 354,1181 354,827 971,827 971,599 354,599 354,228 1054,228 1054,0 112,0 Z"
   id="glyph137" />
   <glyph
   unicode="D"
   horiz-adv-x="1033"
   d="M 1142,715 C 1142,598 1128,495 1099,406 1070,317 1030,242 980,182 929,122 870,77 801,46 732,15 658,0 579,0 L 112,0 112,1409 530,1409 C 619,1409 702,1395 777,1368 852,1341 916,1299 970,1242 1024,1185 1066,1113 1097,1026 1127,939 1142,835 1142,715 Z M 898,715 C 898,797 889,867 871,926 852,985 827,1033 794,1071 761,1108 722,1136 677,1154 631,1172 580,1181 525,1181 L 354,1181 354,228 559,228 C 608,228 653,238 694,259 735,280 771,311 802,352 832,393 856,443 873,504 890,565 898,635 898,715 Z"
   id="glyph139" />
   <glyph
   unicode="C"
   horiz-adv-x="1112"
   d="M 651,212 C 696,212 736,220 769,236 802,251 831,272 856,297 880,322 900,351 916,383 932,415 945,447 956,480 L 1166,383 C 1149,332 1127,283 1100,234 1073,185 1039,142 998,105 957,68 908,38 851,15 794,-8 728,-20 651,-20 551,-20 465,-2 392,35 319,71 258,122 210,187 162,252 127,329 104,418 81,507 69,605 69,711 69,821 81,920 104,1009 127,1098 162,1173 209,1236 256,1298 315,1346 387,1380 459,1413 544,1430 641,1430 716,1430 782,1420 839,1401 896,1382 945,1355 986,1320 1027,1285 1061,1243 1088,1196 1115,1148 1136,1095 1151,1038 L 938,967 C 931,997 919,1026 903,1054 887,1081 867,1106 843,1127 818,1148 790,1166 757,1179 724,1192 687,1198 646,1198 587,1198 537,1187 495,1164 453,1141 419,1108 392,1065 365,1022 345,971 332,912 319,852 312,785 312,711 312,638 319,571 332,510 345,449 365,396 392,352 419,308 454,274 497,249 540,224 591,212 651,212 Z"
   id="glyph141" />
   <glyph
   unicode="B"
   horiz-adv-x="1033"
   d="M 1136,402 C 1136,331 1124,270 1101,219 1077,168 1045,126 1004,94 963,61 916,38 862,23 808,8 751,0 690,0 L 112,0 112,1409 641,1409 C 709,1409 770,1402 823,1388 876,1373 921,1351 958,1322 995,1293 1022,1256 1041,1212 1060,1167 1069,1115 1069,1055 1069,975 1051,908 1015,853 978,798 923,760 849,741 942,728 1014,692 1063,634 1112,575 1136,498 1136,402 Z M 826,1015 C 826,1078 810,1123 777,1150 744,1177 694,1190 629,1190 L 354,1190 354,841 631,841 C 699,841 749,856 780,885 811,914 826,957 826,1015 Z M 893,425 C 893,462 887,494 875,519 863,544 847,565 826,580 805,595 780,606 752,613 724,620 693,623 660,623 L 354,623 354,219 670,219 C 702,219 732,222 759,229 786,235 809,246 829,262 849,277 865,298 876,325 887,352 893,385 893,425 Z"
   id="glyph143" />
   <glyph
   unicode="A"
   horiz-adv-x="1139"
   d="M 928,0 L 826,360 386,360 284,0 42,0 463,1409 748,1409 1168,0 928,0 Z M 658,987 C 658,987 651,1011 638,1058 632,1081 627,1103 622,1122 L 610,1171 C 607,1184 606,1191 606,1192 605,1190 604,1183 601,1170 598,1157 595,1141 590,1122 585,1103 580,1081 574,1058 L 554,987 440,582 772,582 658,987 Z"
   id="glyph145" />
   <glyph
   unicode=":"
   horiz-adv-x="239"
   d="M 161,752 L 161,1034 398,1034 398,752 161,752 Z M 161,0 L 161,281 398,281 398,0 161,0 Z"
   id="glyph147" />
   <glyph
   unicode="9"
   horiz-adv-x="821"
   d="M 872,727 C 872,477 835,290 760,166 685,42 578,-20 440,-20 390,-20 345,-14 306,-1 267,12 232,31 203,58 173,85 148,119 128,161 107,203 91,253 79,311 L 295,348 C 306,298 324,261 349,237 374,213 405,201 443,201 474,201 502,210 527,228 551,246 572,273 590,310 607,347 621,393 631,450 640,506 645,572 645,649 634,623 620,600 602,580 584,560 564,543 541,530 518,517 494,507 469,500 443,493 417,489 390,489 340,489 295,500 254,522 213,543 178,574 149,615 120,656 97,705 82,763 66,820 58,885 58,958 58,1033 67,1099 86,1158 104,1217 130,1266 165,1307 199,1347 241,1378 292,1399 342,1420 399,1430 462,1430 529,1430 588,1416 639,1389 690,1361 732,1318 767,1261 801,1203 827,1130 845,1042 863,953 872,848 872,727 Z M 628,924 C 628,964 624,1002 617,1037 610,1072 599,1102 584,1128 569,1153 551,1173 530,1188 509,1203 484,1210 456,1210 430,1210 407,1204 387,1193 367,1181 350,1164 336,1142 321,1120 310,1093 303,1062 296,1031 292,995 292,956 292,919 296,885 303,854 310,822 320,795 334,772 347,749 365,731 386,718 407,705 430,698 457,698 478,698 499,703 520,712 540,721 558,735 575,754 591,773 604,796 614,825 623,853 628,886 628,924 Z"
   id="glyph149" />
   <glyph
   unicode="7"
   horiz-adv-x="821"
   d="M 860,1186 C 860,1186 811,1089 713,895 667,801 627,707 592,612 557,517 530,419 511,319 491,218 481,112 481,0 L 240,0 C 240,111 251,217 273,318 294,418 324,516 361,611 398,706 441,801 490,894 L 646,1178 72,1178 72,1409 860,1409 860,1186 Z"
   id="glyph151" />
   <glyph
   unicode="6"
   horiz-adv-x="821"
   d="M 873,461 C 873,390 865,326 849,267 832,208 808,157 776,115 743,72 703,39 654,16 605,-8 549,-20 485,-20 349,-20 245,38 172,155 99,271 62,443 62,672 62,923 99,1113 173,1240 247,1367 353,1430 490,1430 536,1430 578,1424 616,1413 653,1401 687,1382 717,1356 746,1330 771,1297 792,1256 813,1215 829,1165 842,1106 L 625,1069 C 614,1118 597,1154 572,1176 547,1197 518,1208 485,1208 423,1208 375,1170 340,1095 305,1020 287,905 287,752 312,802 346,840 390,867 433,894 483,907 538,907 589,907 635,897 676,877 717,856 753,827 782,789 811,750 834,703 850,648 865,593 873,530 873,461 Z M 642,453 C 642,491 639,525 632,556 625,586 614,612 599,633 584,654 566,671 545,683 524,694 499,700 472,700 452,700 432,696 411,688 390,680 372,667 357,650 341,632 328,609 318,582 308,555 303,522 303,483 303,443 307,406 316,371 324,336 336,306 351,281 366,255 384,235 405,221 426,206 450,199 477,199 529,199 570,222 599,267 628,312 642,374 642,453 Z"
   id="glyph153" />
   <glyph
   unicode="5"
   horiz-adv-x="875"
   d="M 887,469 C 887,398 878,333 860,274 841,214 814,162 778,119 742,75 697,41 644,17 591,-8 529,-20 459,-20 394,-20 338,-10 290,9 242,28 202,54 169,88 136,121 110,161 91,206 72,251 59,300 52,352 L 282,375 C 287,353 293,332 301,311 308,290 319,272 334,256 348,240 365,227 386,218 407,208 432,203 462,203 519,203 565,225 599,270 633,315 650,379 650,463 650,500 646,534 638,564 629,594 617,620 602,641 586,662 567,679 544,690 521,701 496,707 467,707 429,707 398,698 373,681 348,663 327,641 310,616 L 85,616 125,1409 820,1409 820,1200 335,1200 316,844 C 339,869 368,890 403,908 438,925 478,934 525,934 582,934 633,923 678,900 723,877 761,846 792,805 823,764 846,716 863,659 879,602 887,538 887,469 Z"
   id="glyph155" />
   <glyph
   unicode="4"
   horiz-adv-x="927"
   d="M 771,287 L 771,0 551,0 551,287 25,287 25,498 513,1409 771,1409 771,496 925,496 925,287 771,287 Z M 551,957 C 551,968 551,983 552,1002 552,1020 552,1039 553,1058 554,1077 555,1096 556,1114 557,1131 557,1145 558,1155 555,1148 551,1137 545,1124 L 525,1080 C 518,1064 510,1048 502,1033 L 481,993 213,496 551,496 551,957 Z"
   id="glyph157" />
   <glyph
   unicode="3"
   horiz-adv-x="848"
   d="M 873,391 C 873,327 865,270 848,219 831,168 805,124 770,88 735,52 693,25 642,6 591,-13 531,-23 463,-23 388,-23 324,-11 273,12 221,35 179,66 146,105 113,143 88,186 71,235 54,284 44,333 39,383 L 273,408 C 276,378 283,351 292,326 301,301 313,279 328,261 343,243 362,229 384,220 406,210 432,205 462,205 517,205 560,222 591,255 622,288 637,339 637,408 637,450 630,484 616,509 601,534 583,554 561,568 538,581 514,590 489,595 463,600 439,602 416,602 L 335,602 335,829 411,829 C 434,829 457,832 481,837 505,842 527,852 546,866 565,880 580,900 592,925 604,950 610,981 610,1020 610,1078 597,1124 571,1157 544,1190 505,1206 454,1206 407,1206 368,1190 339,1158 310,1126 293,1081 289,1022 L 58,1042 C 65,1108 80,1165 103,1214 126,1263 156,1303 191,1335 226,1367 267,1391 313,1407 358,1422 407,1430 458,1430 526,1430 584,1420 633,1400 682,1380 722,1353 753,1319 784,1285 807,1245 822,1200 837,1155 844,1106 844,1055 844,1014 839,975 829,940 819,904 804,872 784,844 764,815 739,791 708,771 677,750 640,735 597,725 L 597,721 C 644,714 686,701 721,682 756,662 784,637 807,608 830,579 846,546 857,509 868,472 873,432 873,391 Z"
   id="glyph159" />
   <glyph
   unicode="2"
   horiz-adv-x="821"
   d="M 58,0 L 58,195 C 84,265 116,328 154,385 192,441 232,493 273,540 314,587 355,630 396,671 437,711 473,750 506,788 538,825 564,863 585,901 605,939 615,979 615,1022 615,1085 602,1131 577,1161 551,1191 513,1206 463,1206 414,1206 376,1190 351,1158 325,1125 308,1077 300,1012 L 68,1028 C 73,1083 85,1135 102,1184 119,1233 143,1275 174,1312 205,1349 245,1378 292,1399 339,1420 396,1430 462,1430 524,1430 579,1421 627,1404 675,1386 716,1360 749,1326 782,1292 807,1251 824,1202 841,1153 849,1097 849,1034 849,968 838,908 817,855 796,802 768,753 735,708 702,663 665,620 624,581 L 506,466 C 467,429 432,391 401,353 369,315 345,274 330,231 L 867,231 867,0 58,0 Z"
   id="glyph161" />
   <glyph
   unicode="1"
   horiz-adv-x="822"
   d="M 106,0 L 106,209 392,209 392,1170 115,959 115,1180 404,1409 622,1409 622,209 887,209 887,0 106,0 Z"
   id="glyph163" />
   <glyph
   unicode="0"
   horiz-adv-x="821"
   d="M 865,705 C 865,570 855,457 835,365 814,272 786,198 751,141 715,84 673,43 624,18 575,-7 521,-20 463,-20 405,-20 352,-8 303,17 254,42 213,83 178,140 143,197 115,271 96,364 76,456 66,570 66,705 66,847 76,965 96,1058 115,1151 143,1225 178,1280 213,1335 256,1374 306,1397 355,1419 410,1430 470,1430 526,1430 578,1419 627,1397 675,1374 717,1335 752,1280 787,1225 815,1151 835,1058 855,965 865,847 865,705 Z M 634,705 C 634,804 631,887 625,952 619,1017 609,1068 596,1107 583,1145 566,1172 545,1187 524,1202 498,1210 468,1210 436,1210 409,1202 387,1187 365,1171 347,1144 334,1105 321,1066 311,1015 306,950 300,885 297,803 297,705 297,608 300,528 306,463 312,398 322,347 335,308 348,269 365,241 386,225 407,209 434,201 465,201 495,201 521,209 542,225 563,241 581,269 595,308 608,347 618,398 625,463 631,528 634,608 634,705 Z"
   id="glyph165" />
   <glyph
   unicode=","
   horiz-adv-x="265"
   d="M 355,66 C 355,21 353,-19 349,-56 344,-93 338,-126 331,-158 323,-188 314,-217 303,-243 292,-269 279,-294 266,-317 L 114,-317 C 130,-294 145,-269 158,-243 171,-217 182,-190 192,-163 202,-136 210,-108 215,-81 220,-54 223,-27 223,0 L 117,0 117,305 355,305 355,66 Z"
   id="glyph167" />
   <glyph
   unicode="+"
   horiz-adv-x="874"
   d="M 583,569 L 583,161 398,161 398,569 71,569 71,793 398,793 398,1201 583,1201 583,793 913,793 913,569 583,569 Z"
   id="glyph169" />
   <glyph
   unicode=")"
   horiz-adv-x="477"
   d="M 2,-425 C 46,-347 84,-270 115,-196 146,-120 171,-44 191,33 210,110 225,190 234,272 243,353 248,439 248,530 248,620 243,706 234,788 225,869 210,949 191,1026 171,1103 145,1180 114,1255 83,1330 45,1407 2,1484 L 232,1484 C 274,1410 310,1337 341,1264 372,1191 397,1116 417,1039 437,962 452,882 461,799 470,716 475,626 475,531 475,436 470,347 461,264 452,180 437,99 417,22 397,-55 372,-131 341,-204 310,-277 274,-351 232,-425 L 2,-425 Z"
   id="glyph171" />
   <glyph
   unicode="("
   horiz-adv-x="478"
   d="M 327,-425 C 285,-351 249,-277 218,-204 187,-131 162,-55 142,22 122,99 107,180 98,264 89,347 84,436 84,531 84,626 89,716 98,799 107,882 122,962 142,1039 162,1116 187,1191 218,1264 249,1337 285,1410 327,1484 L 557,1484 C 513,1407 476,1330 445,1255 414,1180 388,1103 369,1026 349,949 334,869 325,788 316,706 311,620 311,530 311,439 316,353 325,272 334,190 349,110 369,33 388,-44 414,-120 445,-196 476,-270 514,-347 557,-425 L 327,-425 Z"
   id="glyph173" />
   <glyph
   unicode=" "
   horiz-adv-x="476"
   id="glyph175" />
  </font>
 </defs>
 <defs
   id="defs261">
  <font
   id="EmbeddedFont_3"
   horiz-adv-x="2048"
   horiz-origin-x="0"
   horiz-origin-y="0"
   vert-origin-x="45"
   vert-origin-y="90"
   vert-adv-y="90">
   <font-face
   font-family="Liberation Sans embedded"
   units-per-em="2048"
   font-weight="normal"
   font-style="normal"
   ascent="1852"
   descent="423"
   id="font-face180" />
   <missing-glyph
   horiz-adv-x="2048"
   d="M 0,0 L 2047,0 2047,2047 0,2047 0,0 Z"
   id="missing-glyph182" />
   <glyph
   unicode="z"
   horiz-adv-x="848"
   d="M 83,0 L 83,137 688,943 117,943 117,1082 901,1082 901,945 295,139 922,139 922,0 83,0 Z"
   id="glyph184" />
   <glyph
   unicode="x"
   horiz-adv-x="1006"
   d="M 801,0 L 510,444 217,0 23,0 408,556 41,1082 240,1082 510,661 778,1082 979,1082 612,558 1002,0 801,0 Z"
   id="glyph186" />
   <glyph
   unicode="v"
   horiz-adv-x="1033"
   d="M 613,0 L 400,0 7,1082 199,1082 437,378 C 446,351 469,272 506,141 L 541,258 580,376 826,1082 1017,1082 613,0 Z"
   id="glyph188" />
   <glyph
   unicode="u"
   horiz-adv-x="874"
   d="M 314,1082 L 314,396 C 314,325 321,269 335,230 349,191 371,162 402,145 433,128 478,119 537,119 624,119 692,149 742,208 792,267 817,350 817,455 L 817,1082 997,1082 997,231 C 997,105 999,28 1003,0 L 833,0 C 832,3 832,12 831,27 830,42 830,59 829,78 828,97 826,132 825,185 L 822,185 C 781,110 733,58 679,27 624,-4 557,-20 476,-20 357,-20 271,10 216,69 161,128 133,225 133,361 L 133,1082 314,1082 Z"
   id="glyph190" />
   <glyph
   unicode="t"
   horiz-adv-x="531"
   d="M 554,8 C 495,-8 434,-16 372,-16 228,-16 156,66 156,229 L 156,951 31,951 31,1082 163,1082 216,1324 336,1324 336,1082 536,1082 536,951 336,951 336,268 C 336,216 345,180 362,159 379,138 408,127 450,127 474,127 509,132 554,141 L 554,8 Z"
   id="glyph192" />
   <glyph
   unicode="r"
   horiz-adv-x="530"
   d="M 142,0 L 142,830 C 142,906 140,990 136,1082 L 306,1082 C 311,959 314,886 314,861 L 318,861 C 347,954 380,1017 417,1051 454,1085 507,1102 575,1102 599,1102 623,1099 648,1092 L 648,927 C 624,934 592,937 552,937 477,937 420,905 381,841 342,776 322,684 322,564 L 322,0 142,0 Z"
   id="glyph194" />
   <glyph
   unicode="o"
   horiz-adv-x="980"
   d="M 1053,542 C 1053,353 1011,212 928,119 845,26 724,-20 565,-20 407,-20 288,28 207,125 126,221 86,360 86,542 86,915 248,1102 571,1102 736,1102 858,1057 936,966 1014,875 1053,733 1053,542 Z M 864,542 C 864,691 842,800 798,868 753,935 679,969 574,969 469,969 393,935 346,866 299,797 275,689 275,542 275,399 298,292 345,221 391,149 464,113 563,113 671,113 748,148 795,217 841,286 864,395 864,542 Z"
   id="glyph196" />
   <glyph
   unicode="n"
   horiz-adv-x="874"
   d="M 825,0 L 825,686 C 825,757 818,813 804,852 790,891 768,920 737,937 706,954 661,963 602,963 515,963 447,933 397,874 347,815 322,732 322,627 L 322,0 142,0 142,851 C 142,977 140,1054 136,1082 L 306,1082 C 307,1079 307,1070 308,1055 309,1040 310,1024 311,1005 312,986 313,950 314,897 L 317,897 C 358,972 406,1025 461,1056 515,1087 582,1102 663,1102 782,1102 869,1073 924,1014 979,955 1006,857 1006,721 L 1006,0 825,0 Z"
   id="glyph198" />
   <glyph
   unicode="m"
   horiz-adv-x="1457"
   d="M 768,0 L 768,686 C 768,791 754,863 725,903 696,943 645,963 570,963 493,963 433,934 388,875 343,816 321,734 321,627 L 321,0 142,0 142,851 C 142,977 140,1054 136,1082 L 306,1082 C 307,1079 307,1070 308,1055 309,1040 310,1024 311,1005 312,986 313,950 314,897 L 317,897 C 356,974 400,1027 450,1057 500,1087 561,1102 633,1102 715,1102 780,1086 828,1053 875,1020 908,968 927,897 L 930,897 C 967,970 1013,1022 1066,1054 1119,1086 1183,1102 1258,1102 1367,1102 1447,1072 1497,1013 1546,954 1571,856 1571,721 L 1571,0 1393,0 1393,686 C 1393,791 1379,863 1350,903 1321,943 1270,963 1195,963 1116,963 1055,934 1012,876 968,817 946,734 946,627 L 946,0 768,0 Z"
   id="glyph200" />
   <glyph
   unicode="l"
   horiz-adv-x="187"
   d="M 138,0 L 138,1484 318,1484 318,0 138,0 Z"
   id="glyph202" />
   <glyph
   unicode="k"
   horiz-adv-x="901"
   d="M 816,0 L 450,494 318,385 318,0 138,0 138,1484 318,1484 318,557 793,1082 1004,1082 565,617 1027,0 816,0 Z"
   id="glyph204" />
   <glyph
   unicode="i"
   horiz-adv-x="187"
   d="M 137,1312 L 137,1484 317,1484 317,1312 137,1312 Z M 137,0 L 137,1082 317,1082 317,0 137,0 Z"
   id="glyph206" />
   <glyph
   unicode="h"
   horiz-adv-x="874"
   d="M 317,897 C 356,968 402,1020 457,1053 511,1086 580,1102 663,1102 780,1102 867,1073 923,1015 978,956 1006,858 1006,721 L 1006,0 825,0 825,686 C 825,762 818,819 804,856 790,893 767,920 735,937 703,954 659,963 602,963 517,963 450,934 399,875 348,816 322,737 322,638 L 322,0 142,0 142,1484 322,1484 322,1098 C 322,1057 321,1015 319,972 316,929 315,904 314,897 L 317,897 Z"
   id="glyph208" />
   <glyph
   unicode="f"
   horiz-adv-x="557"
   d="M 361,951 L 361,0 181,0 181,951 29,951 29,1082 181,1082 181,1204 C 181,1303 203,1374 246,1417 289,1460 356,1482 445,1482 495,1482 537,1478 572,1470 L 572,1333 C 542,1338 515,1341 492,1341 446,1341 413,1329 392,1306 371,1283 361,1240 361,1179 L 361,1082 572,1082 572,951 361,951 Z"
   id="glyph210" />
   <glyph
   unicode="e"
   horiz-adv-x="980"
   d="M 276,503 C 276,379 302,283 353,216 404,149 479,115 578,115 656,115 719,131 766,162 813,193 844,233 861,281 L 1019,236 C 954,65 807,-20 578,-20 418,-20 296,28 213,123 129,218 87,360 87,548 87,727 129,864 213,959 296,1054 416,1102 571,1102 889,1102 1048,910 1048,527 L 1048,503 276,503 Z M 862,641 C 852,755 823,838 775,891 727,943 658,969 568,969 481,969 412,940 361,882 310,823 282,743 278,641 L 862,641 Z"
   id="glyph212" />
   <glyph
   unicode="d"
   horiz-adv-x="927"
   d="M 821,174 C 788,105 744,55 689,25 634,-5 565,-20 484,-20 347,-20 247,26 183,118 118,210 86,349 86,536 86,913 219,1102 484,1102 566,1102 634,1087 689,1057 744,1027 788,979 821,914 L 823,914 821,1035 821,1484 1001,1484 1001,223 C 1001,110 1003,36 1007,0 L 835,0 C 833,11 831,35 829,74 826,113 825,146 825,174 L 821,174 Z M 275,542 C 275,391 295,282 335,217 375,152 440,119 530,119 632,119 706,154 752,225 798,296 821,405 821,554 821,697 798,802 752,869 706,936 633,969 532,969 441,969 376,936 336,869 295,802 275,693 275,542 Z"
   id="glyph214" />
   <glyph
   unicode="c"
   horiz-adv-x="901"
   d="M 275,546 C 275,402 298,295 343,226 388,157 457,122 548,122 612,122 666,139 709,174 752,209 778,262 788,334 L 970,322 C 956,218 912,135 837,73 762,11 668,-20 553,-20 402,-20 286,28 207,124 127,219 87,359 87,542 87,724 127,863 207,959 287,1054 402,1102 551,1102 662,1102 754,1073 827,1016 900,959 945,880 964,779 L 779,765 C 770,825 746,873 708,908 670,943 616,961 546,961 451,961 382,929 339,866 296,803 275,696 275,546 Z"
   id="glyph216" />
   <glyph
   unicode="a"
   horiz-adv-x="1060"
   d="M 414,-20 C 305,-20 224,9 169,66 114,123 87,202 87,302 87,414 124,500 198,560 271,620 390,652 554,656 L 797,660 797,719 C 797,807 778,870 741,908 704,946 645,965 565,965 484,965 426,951 389,924 352,897 330,853 323,793 L 135,810 C 166,1005 310,1102 569,1102 705,1102 807,1071 876,1009 945,946 979,856 979,738 L 979,272 C 979,219 986,179 1000,152 1014,125 1041,111 1080,111 1097,111 1117,113 1139,118 L 1139,6 C 1094,-5 1047,-10 1000,-10 933,-10 885,8 855,43 824,78 807,132 803,207 L 797,207 C 751,124 698,66 637,32 576,-3 501,-20 414,-20 Z M 455,115 C 521,115 580,130 631,160 682,190 723,231 753,284 782,336 797,390 797,445 L 797,534 600,530 C 515,529 451,520 408,504 364,488 330,463 307,430 284,397 272,353 272,299 272,240 288,195 320,163 351,131 396,115 455,115 Z"
   id="glyph218" />
   <glyph
   unicode="W"
   horiz-adv-x="1932"
   d="M 1511,0 L 1283,0 1039,895 C 1023,951 1000,1051 969,1196 952,1119 937,1054 925,1002 913,950 822,616 652,0 L 424,0 9,1409 208,1409 461,514 C 491,402 519,287 544,168 560,241 579,321 600,408 621,495 713,828 877,1409 L 1060,1409 1305,532 C 1342,389 1372,267 1393,168 L 1402,203 C 1420,280 1435,342 1446,391 1457,439 1551,778 1727,1409 L 1926,1409 1511,0 Z"
   id="glyph220" />
   <glyph
   unicode="U"
   horiz-adv-x="1192"
   d="M 731,-20 C 616,-20 515,1 429,43 343,85 276,146 229,226 182,306 158,401 158,512 L 158,1409 349,1409 349,528 C 349,399 382,302 447,235 512,168 607,135 730,135 857,135 955,170 1026,239 1096,308 1131,408 1131,541 L 1131,1409 1321,1409 1321,530 C 1321,416 1297,318 1249,235 1200,152 1132,89 1044,46 955,2 851,-20 731,-20 Z"
   id="glyph222" />
   <glyph
   unicode="T"
   horiz-adv-x="1192"
   d="M 720,1253 L 720,0 530,0 530,1253 46,1253 46,1409 1204,1409 1204,1253 720,1253 Z"
   id="glyph224" />
   <glyph
   unicode="S"
   horiz-adv-x="1192"
   d="M 1272,389 C 1272,259 1221,158 1120,87 1018,16 875,-20 690,-20 347,-20 148,99 93,338 L 278,375 C 299,290 345,228 414,189 483,149 578,129 697,129 820,129 916,150 983,193 1050,235 1083,297 1083,379 1083,425 1073,462 1052,491 1031,520 1001,543 963,562 925,581 880,596 827,609 774,622 716,635 652,650 541,675 456,699 399,724 341,749 295,776 262,807 229,837 203,872 186,913 168,954 159,1000 159,1053 159,1174 205,1267 298,1332 390,1397 522,1430 694,1430 854,1430 976,1406 1061,1357 1146,1308 1205,1224 1239,1106 L 1051,1073 C 1030,1148 991,1202 933,1236 875,1269 795,1286 692,1286 579,1286 493,1267 434,1230 375,1193 345,1137 345,1063 345,1020 357,984 380,956 403,927 436,903 479,884 522,864 609,840 738,811 781,801 825,791 868,781 911,770 952,758 991,744 1030,729 1067,712 1102,693 1136,674 1166,650 1191,622 1216,594 1236,561 1251,523 1265,485 1272,440 1272,389 Z"
   id="glyph226" />
   <glyph
   unicode="R"
   horiz-adv-x="1244"
   d="M 1164,0 L 798,585 359,585 359,0 168,0 168,1409 831,1409 C 990,1409 1112,1374 1199,1303 1285,1232 1328,1133 1328,1006 1328,901 1298,813 1237,742 1176,671 1091,626 984,607 L 1384,0 1164,0 Z M 1136,1004 C 1136,1086 1108,1149 1053,1192 997,1235 917,1256 812,1256 L 359,1256 359,736 820,736 C 921,736 999,760 1054,807 1109,854 1136,919 1136,1004 Z"
   id="glyph228" />
   <glyph
   unicode="O"
   horiz-adv-x="1430"
   d="M 1495,711 C 1495,564 1467,435 1411,324 1354,213 1273,128 1168,69 1063,10 938,-20 795,-20 650,-20 526,9 421,68 316,127 235,212 180,323 125,434 97,563 97,711 97,936 159,1113 282,1240 405,1367 577,1430 797,1430 940,1430 1065,1402 1170,1345 1275,1288 1356,1205 1412,1096 1467,987 1495,859 1495,711 Z M 1300,711 C 1300,886 1256,1024 1169,1124 1081,1224 957,1274 797,1274 636,1274 511,1225 423,1126 335,1027 291,889 291,711 291,534 336,394 425,291 514,187 637,135 795,135 958,135 1083,185 1170,286 1257,386 1300,528 1300,711 Z"
   id="glyph230" />
   <glyph
   unicode="L"
   horiz-adv-x="927"
   d="M 168,0 L 168,1409 359,1409 359,156 1071,156 1071,0 168,0 Z"
   id="glyph232" />
   <glyph
   unicode="I"
   horiz-adv-x="213"
   d="M 189,0 L 189,1409 380,1409 380,0 189,0 Z"
   id="glyph234" />
   <glyph
   unicode="H"
   horiz-adv-x="1165"
   d="M 1121,0 L 1121,653 359,653 359,0 168,0 168,1409 359,1409 359,813 1121,813 1121,1409 1312,1409 1312,0 1121,0 Z"
   id="glyph236" />
   <glyph
   unicode="F"
   horiz-adv-x="1006"
   d="M 359,1253 L 359,729 1145,729 1145,571 359,571 359,0 168,0 168,1409 1169,1409 1169,1253 359,1253 Z"
   id="glyph238" />
   <glyph
   unicode="E"
   horiz-adv-x="1138"
   d="M 168,0 L 168,1409 1237,1409 1237,1253 359,1253 359,801 1177,801 1177,647 359,647 359,156 1278,156 1278,0 168,0 Z"
   id="glyph240" />
   <glyph
   unicode="D"
   horiz-adv-x="1218"
   d="M 1381,719 C 1381,574 1353,447 1296,338 1239,229 1159,145 1055,87 951,29 831,0 695,0 L 168,0 168,1409 634,1409 C 873,1409 1057,1349 1187,1230 1316,1110 1381,940 1381,719 Z M 1189,719 C 1189,894 1141,1027 1046,1119 950,1210 811,1256 630,1256 L 359,1256 359,153 673,153 C 776,153 867,176 946,221 1024,266 1084,332 1126,417 1168,502 1189,603 1189,719 Z"
   id="glyph242" />
   <glyph
   unicode="C"
   horiz-adv-x="1324"
   d="M 792,1274 C 636,1274 515,1224 428,1124 341,1023 298,886 298,711 298,538 343,400 434,295 524,190 646,137 800,137 997,137 1146,235 1245,430 L 1401,352 C 1343,231 1262,138 1157,75 1052,12 930,-20 791,-20 649,-20 526,10 423,69 319,128 240,212 186,322 131,431 104,561 104,711 104,936 165,1112 286,1239 407,1366 575,1430 790,1430 940,1430 1065,1401 1166,1342 1267,1283 1341,1196 1388,1081 L 1207,1021 C 1174,1103 1122,1166 1050,1209 977,1252 891,1274 792,1274 Z"
   id="glyph244" />
   <glyph
   unicode="A"
   horiz-adv-x="1377"
   d="M 1167,0 L 1006,412 364,412 202,0 4,0 579,1409 796,1409 1362,0 1167,0 Z M 685,1265 L 676,1237 C 659,1182 635,1111 602,1024 L 422,561 949,561 768,1026 C 749,1072 731,1124 712,1182 L 685,1265 Z"
   id="glyph246" />
   <glyph
   unicode="3"
   horiz-adv-x="1006"
   d="M 1049,389 C 1049,259 1008,158 925,87 842,16 724,-20 571,-20 428,-20 315,12 230,77 145,141 94,236 78,362 L 264,379 C 288,212 390,129 571,129 662,129 733,151 785,196 836,241 862,307 862,395 862,472 833,532 774,575 715,618 629,639 518,639 L 416,639 416,795 514,795 C 613,795 689,817 744,860 798,903 825,962 825,1038 825,1113 803,1173 759,1217 714,1260 648,1282 561,1282 482,1282 418,1262 369,1221 320,1180 291,1123 283,1049 L 102,1063 C 115,1178 163,1268 246,1333 328,1398 434,1430 563,1430 704,1430 814,1397 893,1332 971,1266 1010,1174 1010,1057 1010,967 985,894 935,838 884,781 811,743 715,723 L 715,719 C 820,708 902,672 961,613 1020,554 1049,479 1049,389 Z"
   id="glyph248" />
   <glyph
   unicode="2"
   horiz-adv-x="954"
   d="M 103,0 L 103,127 C 137,205 179,274 228,334 277,393 328,447 382,496 436,544 490,589 543,630 596,671 643,713 686,754 729,795 763,839 790,884 816,929 829,981 829,1038 829,1115 806,1175 761,1218 716,1261 653,1282 572,1282 495,1282 432,1261 383,1220 333,1178 304,1119 295,1044 L 111,1061 C 124,1174 172,1263 255,1330 337,1397 443,1430 572,1430 714,1430 823,1397 900,1330 976,1263 1014,1167 1014,1044 1014,989 1002,935 977,881 952,827 914,773 865,719 816,665 721,581 582,468 505,405 444,349 399,299 354,248 321,200 301,153 L 1036,153 1036,0 103,0 Z"
   id="glyph250" />
   <glyph
   unicode="1"
   horiz-adv-x="927"
   d="M 156,0 L 156,153 515,153 515,1237 197,1010 197,1180 530,1409 696,1409 696,153 1039,153 1039,0 156,0 Z"
   id="glyph252" />
   <glyph
   unicode="0"
   horiz-adv-x="980"
   d="M 1059,705 C 1059,470 1018,290 935,166 852,42 729,-20 567,-20 405,-20 283,42 202,165 121,288 80,468 80,705 80,947 120,1128 199,1249 278,1370 402,1430 573,1430 739,1430 862,1369 941,1247 1020,1125 1059,944 1059,705 Z M 876,705 C 876,908 853,1056 806,1147 759,1238 681,1284 573,1284 462,1284 383,1239 335,1149 286,1059 262,911 262,705 262,505 287,359 336,266 385,173 462,127 569,127 675,127 753,174 802,269 851,364 876,509 876,705 Z"
   id="glyph254" />
   <glyph
   unicode="+"
   horiz-adv-x="1033"
   d="M 671,608 L 671,180 524,180 524,608 100,608 100,754 524,754 524,1182 671,1182 671,754 1095,754 1095,608 671,608 Z"
   id="glyph256" />
   <glyph
   unicode=" "
   horiz-adv-x="556"
   id="glyph258" />
  </font>
 </defs>
 <defs
   id="defs298">
  <font
   id="EmbeddedFont_4"
   horiz-adv-x="2048"
   horiz-origin-x="0"
   horiz-origin-y="0"
   vert-origin-x="45"
   vert-origin-y="90"
   vert-adv-y="90">
   <font-face
   font-family="Liberation Serif embedded"
   units-per-em="2048"
   font-weight="normal"
   font-style="normal"
   ascent="1826"
   descent="450"
   id="font-face263" />
   <missing-glyph
   horiz-adv-x="2048"
   d="M 0,0 L 2047,0 2047,2047 0,2047 0,0 Z"
   id="missing-glyph265" />
   <glyph
   unicode="u"
   horiz-adv-x="980"
   d="M 313,268 C 313,153 366,96 473,96 556,96 633,106 705,127 L 705,870 563,895 563,940 870,940 870,70 989,45 989,0 715,0 707,76 C 660,50 605,28 543,9 481,-10 429,-20 387,-20 227,-20 147,72 147,256 L 147,870 27,895 27,940 313,940 313,268 Z"
   id="glyph267" />
   <glyph
   unicode="t"
   horiz-adv-x="557"
   d="M 334,-20 C 270,-20 222,-1 191,37 159,75 143,128 143,197 L 143,856 20,856 20,901 145,940 246,1153 309,1153 309,940 524,940 524,856 309,856 309,215 C 309,172 319,139 339,117 358,95 384,84 416,84 455,84 502,89 557,100 L 557,35 C 534,19 500,6 456,-5 412,-15 371,-20 334,-20 Z"
   id="glyph269" />
   <glyph
   unicode="r"
   horiz-adv-x="636"
   d="M 664,965 L 664,711 621,711 563,821 C 530,821 490,817 445,808 399,799 359,787 326,772 L 326,70 487,45 487,0 41,0 41,45 160,70 160,870 41,895 41,940 315,940 324,823 C 364,856 418,888 487,919 555,950 609,965 649,965 L 664,965 Z"
   id="glyph271" />
   <glyph
   unicode="o"
   horiz-adv-x="901"
   d="M 946,475 C 946,145 799,-20 506,-20 365,-20 258,22 186,107 114,192 78,314 78,475 78,634 114,755 186,839 258,923 367,965 514,965 657,965 764,924 837,842 910,759 946,637 946,475 Z M 766,475 C 766,619 745,723 703,788 661,853 595,885 506,885 419,885 356,854 317,792 278,730 258,624 258,475 258,324 278,217 318,154 357,91 420,59 506,59 594,59 659,92 702,157 745,222 766,328 766,475 Z"
   id="glyph273" />
   <glyph
   unicode="n"
   horiz-adv-x="980"
   d="M 324,864 C 375,893 430,918 488,937 546,956 594,965 633,965 714,965 776,941 817,894 858,847 879,778 879,688 L 879,70 993,45 993,0 588,0 588,45 713,70 713,670 C 713,725 700,769 673,801 646,832 604,848 547,848 487,848 413,838 326,819 L 326,70 453,45 453,0 47,0 47,45 160,70 160,870 47,895 47,940 315,940 324,864 Z"
   id="glyph275" />
   <glyph
   unicode="m"
   horiz-adv-x="1536"
   d="M 326,864 C 376,893 429,917 485,936 541,955 590,965 633,965 679,965 722,956 761,939 800,922 829,894 848,856 899,885 960,910 1029,932 1098,954 1155,965 1200,965 1360,965 1440,873 1440,688 L 1440,70 1561,45 1561,0 1134,0 1134,45 1274,70 1274,670 C 1274,785 1221,842 1114,842 1097,842 1077,841 1054,838 1031,835 1008,832 985,829 962,826 940,822 919,818 898,813 880,810 866,807 877,771 883,731 883,688 L 883,70 1024,45 1024,0 578,0 578,45 717,70 717,670 C 717,725 703,768 675,798 646,827 604,842 547,842 488,842 415,832 328,813 L 328,70 469,45 469,0 43,0 43,45 162,70 162,870 43,895 43,940 318,940 326,864 Z"
   id="glyph277" />
   <glyph
   unicode="i"
   horiz-adv-x="504"
   d="M 379,1247 C 379,1218 368,1192 347,1171 326,1150 300,1139 270,1139 241,1139 215,1150 194,1171 173,1192 162,1218 162,1247 162,1277 173,1303 194,1324 215,1345 241,1356 270,1356 300,1356 326,1345 347,1324 368,1303 379,1277 379,1247 Z M 369,70 L 530,45 530,0 43,0 43,45 203,70 203,870 70,895 70,940 369,940 369,70 Z"
   id="glyph279" />
   <glyph
   unicode="f"
   horiz-adv-x="636"
   d="M 225,856 L 63,856 63,905 225,944 225,1010 C 225,1149 253,1255 308,1330 363,1405 440,1442 539,1442 590,1442 638,1436 682,1423 L 682,1218 633,1218 588,1341 C 565,1355 538,1362 506,1362 464,1362 434,1343 417,1306 400,1269 391,1199 391,1096 L 391,940 641,940 641,856 391,856 391,78 594,45 594,0 86,0 86,45 225,78 225,856 Z"
   id="glyph281" />
   <glyph
   unicode="e"
   horiz-adv-x="769"
   d="M 260,473 L 260,455 C 260,363 270,292 291,241 311,190 342,151 385,124 427,97 482,84 551,84 587,84 630,87 679,93 728,99 769,106 801,113 L 801,57 C 769,36 726,18 671,3 616,-12 559,-20 502,-20 356,-20 249,19 182,98 114,177 80,303 80,477 80,641 114,763 183,844 252,925 350,965 477,965 718,965 838,828 838,555 L 838,473 260,473 Z M 477,885 C 408,885 355,857 318,801 281,745 262,662 262,553 L 664,553 C 664,672 649,758 618,809 587,860 540,885 477,885 Z"
   id="glyph283" />
   <glyph
   unicode="d"
   horiz-adv-x="953"
   d="M 723,70 C 648,10 560,-20 459,-20 202,-20 74,140 74,461 74,626 110,751 183,837 256,922 363,965 504,965 576,965 649,957 723,942 719,964 717,1019 717,1108 L 717,1352 559,1376 559,1421 883,1421 883,70 999,45 999,0 735,0 723,70 Z M 254,461 C 254,334 275,240 318,178 361,115 426,84 514,84 589,84 657,97 717,123 L 717,866 C 658,877 590,883 514,883 341,883 254,742 254,461 Z"
   id="glyph285" />
   <glyph
   unicode="b"
   horiz-adv-x="954"
   d="M 766,496 C 766,619 745,710 702,770 659,830 593,860 504,860 465,860 426,857 387,850 348,843 320,835 303,827 L 303,82 C 359,71 426,66 504,66 596,66 663,102 704,174 745,246 766,353 766,496 Z M 137,1352 L 0,1376 0,1421 303,1421 303,1085 C 303,1049 301,983 297,887 364,939 448,965 549,965 677,965 775,926 844,849 912,771 946,653 946,496 946,327 909,199 834,112 759,24 650,-20 508,-20 451,-20 388,-14 319,-1 250,12 189,28 137,49 L 137,1352 Z"
   id="glyph287" />
   <glyph
   unicode="a"
   horiz-adv-x="848"
   d="M 465,961 C 568,961 643,940 692,898 740,856 764,792 764,705 L 764,70 881,45 881,0 623,0 604,94 C 528,18 431,-20 313,-20 152,-20 72,73 72,260 72,323 84,375 109,416 133,457 172,488 225,510 278,531 356,543 457,545 L 598,549 598,696 C 598,761 586,808 563,839 539,870 502,885 453,885 386,885 325,869 270,838 L 236,721 180,721 180,926 C 288,949 383,961 465,961 Z M 598,479 L 467,475 C 378,472 317,454 286,423 254,392 238,339 238,266 238,149 286,90 381,90 426,90 466,95 499,106 532,116 565,129 598,145 L 598,479 Z"
   id="glyph289" />
   <glyph
   unicode="&gt;"
   horiz-adv-x="980"
   d="M 104,186 L 104,289 913,680 104,1071 104,1174 1057,705 1057,655 104,186 Z"
   id="glyph291" />
   <glyph
   unicode="&lt;"
   horiz-adv-x="980"
   d="M 102,655 L 102,705 1055,1174 1055,1071 246,680 1055,289 1055,186 102,655 Z"
   id="glyph293" />
   <glyph
   unicode="/"
   horiz-adv-x="583"
   d="M 100,-20 L 0,-20 471,1350 569,1350 100,-20 Z"
   id="glyph295" />
  </font>
 </defs>
 <defs
   id="defs309">
  <font
   id="EmbeddedFont_5"
   horiz-adv-x="2048"
   horiz-origin-x="0"
   horiz-origin-y="0"
   vert-origin-x="45"
   vert-origin-y="90"
   vert-adv-y="90">
   <font-face
   font-family="StarSymbol embedded"
   units-per-em="2048"
   font-weight="normal"
   font-style="normal"
   ascent="1402"
   descent="450"
   id="font-face300" />
   <missing-glyph
   horiz-adv-x="2048"
   d="M 0,0 L 2047,0 2047,2047 0,2047 0,0 Z"
   id="missing-glyph302" />
   <glyph
   unicode="â"
   horiz-adv-x="1191"
   d="M 813,0 C 632,0 489,54 383,161 276,268 223,411 223,592 223,773 276,916 383,1023 489,1130 632,1184 813,1184 992,1184 1136,1130 1245,1023 1353,916 1407,772 1407,592 1407,412 1353,268 1245,161 1136,54 992,0 813,0 Z"
   id="glyph304" />
   <glyph
   unicode="â"
   horiz-adv-x="1165"
   d="M -4,459 L 1135,459 1135,606 -4,606 -4,459 Z"
   id="glyph306" />
  </font>
 </defs>
 <defs
   class="TextShapeIndex"
   id="defs313">
  <g
   ooo:slide="id1"
   ooo:id-list="id6 id7 id8 id9 id10 id11 id12 id13 id14 id15 id16 id17 id18 id19 id20 id21 id22 id23 id24 id25 id26 id27 id28 id29 id30 id31 id32 id33 id34 id35 id36 id37 id38 id39 id40 id41 id42 id43 id44 id45 id46 id47 id48 id49 id50 id51 id52 id53 id54 id55 id56 id57 id58 id59 id60 id61 id62 id63 id64 id65 id66 id67 id68 id69 id70 id71 id72 id73 id74 id75 id76 id77 id78 id79 id80 id81 id82 id83 id84 id85 id86 id87 id88 id89 id90 id91 id92 id93 id94 id95 id96 id97 id98 id99 id100 id101 id102 id103 id104 id105 id106 id107 id108 id109 id110 id111 id112 id113 id114 id115 id116 id117 id118 id119 id120 id121 id122 id123 id124 id125 id126 id127 id128 id129 id130 id131 id132 id133 id134 id135 id136 id137 id138 id139 id140 id141 id142 id143 id144 id145 id146 id147 id148 id149 id150 id151 id152 id153 id154 id155 id156 id157 id158 id159 id160 id161 id162 id163 id164 id165 id166 id167 id168 id169 id170 id171 id172 id173 id174 id175 id176 id177 id178 id179 id180 id181 id182 id183 id184 id185 id186 id187 id188 id189 id190 id191 id192 id193 id194 id195 id196 id197 id198 id199 id200 id201 id202 id203 id204 id205 id206 id207 id208 id209 id210 id211 id212 id213 id214 id215 id216 id217 id218 id219 id220 id221 id222 id223 id224 id225 id226 id227 id228 id229 id230 id231 id232 id233 id234 id235 id236 id237 id238 id239 id240 id241 id242 id243 id244 id245 id246 id247 id248"
   id="g311" />
 </defs>
 <defs
   class="EmbeddedBulletChars"
   id="defs345">
  <g
   id="bullet-char-template-57356"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 580,1141 1163,571 580,0 -4,571 Z"
   id="path315"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-57354"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 8,1128 H 1137 V 0 H 8 Z"
   id="path318"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-10146"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 174,0 602,739 174,1481 1456,739 Z M 1358,739 309,1346 659,739 Z"
   id="path321"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-10132"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 2015,739 1276,0 H 717 l 543,543 H 174 v 393 h 1086 l -543,545 h 557 z"
   id="path324"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-10007"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="m 0,-2 c -7,16 -16,29 -25,39 l 381,530 c -94,256 -141,385 -141,387 0,25 13,38 40,38 9,0 21,-2 34,-5 21,4 42,12 65,25 l 27,-13 111,-251 280,301 64,-25 24,25 c 21,-10 41,-24 62,-43 C 886,937 835,863 770,784 769,783 710,716 594,584 L 774,223 c 0,-27 -21,-55 -63,-84 l 16,-20 C 717,90 699,76 672,76 641,76 570,178 457,381 L 164,-76 c -22,-34 -53,-51 -92,-51 -42,0 -63,17 -64,51 -7,9 -10,24 -10,44 0,9 1,19 2,30 z"
   id="path327"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-10004"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 285,-33 C 182,-33 111,30 74,156 52,228 41,333 41,471 c 0,78 14,145 41,201 34,71 87,106 158,106 53,0 88,-31 106,-94 l 23,-176 c 8,-64 28,-97 59,-98 l 735,706 c 11,11 33,17 66,17 42,0 63,-15 63,-46 V 965 c 0,-36 -10,-64 -30,-84 L 442,47 C 390,-6 338,-33 285,-33 Z"
   id="path330"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-9679"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M 813,0 C 632,0 489,54 383,161 276,268 223,411 223,592 c 0,181 53,324 160,431 106,107 249,161 430,161 179,0 323,-54 432,-161 108,-107 162,-251 162,-431 0,-180 -54,-324 -162,-431 C 1136,54 992,0 813,0 Z"
   id="path333"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-8226"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="m 346,457 c -73,0 -137,26 -191,78 -54,51 -81,114 -81,188 0,73 27,136 81,188 54,52 118,78 191,78 73,0 134,-26 185,-79 51,-51 77,-114 77,-187 0,-75 -25,-137 -76,-188 -50,-52 -112,-78 -186,-78 z"
   id="path336"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-8211"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="M -4,459 H 1135 V 606 H -4 Z"
   id="path339"
   inkscape:connector-curvature="0" />
  </g>
  <g
   id="bullet-char-template-61548"
   transform="matrix(4.8828125e-4,0,0,-4.8828125e-4,0,0)">
   <path
   d="m 173,740 c 0,163 58,303 173,419 116,115 255,173 419,173 163,0 302,-58 418,-173 116,-116 174,-256 174,-419 0,-163 -58,-303 -174,-418 C 1067,206 928,148 765,148 601,148 462,206 346,322 231,437 173,577 173,740 Z"
   id="path342"
   inkscape:connector-curvature="0" />
  </g>
 </defs>
 <defs
   id="defs392">
  <g
   id="dummy-master-page"
   ooo:name="dummy-master-page"
   class="Master_Slide">
   <g
   id="bg-dummy-master-page"
   class="Background"
   visibility="hidden"
   style="visibility:hidden" />
   <g
   id="bo-dummy-master-page"
   class="BackgroundObjects"
   visibility="hidden"
   style="visibility:hidden" />
  </g>
  <g
   id="id2"
   ooo:name="Default"
   class="Master_Slide">
   <g
   id="bg-id2"
   class="Background" />
   <g
   id="bo-id2"
   class="BackgroundObjects">
    <g
   visibility="hidden"
   ooo:text-adjust="left"
   class="Date/Time"
   id="g362"
   style="visibility:hidden">
     <g
   id="id3">
      <rect
   class="BoundingBox"
   x="1400"
   y="14348"
   width="6524"
   height="1086"
   id="rect351"
   style="fill:none;stroke:none" />
      <text
   class="TextShape"
   id="text359"><tspan
     class="TextParagraph"
     font-size="493px"
     font-weight="400"
     id="tspan357"
     style="font-weight:400;font-size:493px;font-family:'Liberation Serif', serif"><tspan
       class="TextPosition"
       x="1400"
       y="14784"
       id="tspan355"><tspan
         class="PlaceholderText"
         id="tspan353"
         style="fill:#000000;stroke:none">&lt;date/time&gt;</tspan></tspan></tspan></text>

     </g>
    </g>
    <g
   visibility="hidden"
   ooo:text-adjust="center"
   class="Footer"
   id="g375"
   style="visibility:hidden">
     <g
   id="id4">
      <rect
   class="BoundingBox"
   x="9576"
   y="14348"
   width="8876"
   height="1086"
   id="rect364"
   style="fill:none;stroke:none" />
      <text
   class="TextShape"
   id="text372"><tspan
     class="TextParagraph"
     font-size="493px"
     font-weight="400"
     id="tspan370"
     style="font-weight:400;font-size:493px;font-family:'Liberation Serif', serif"><tspan
       class="TextPosition"
       x="13152"
       y="14784"
       id="tspan368"><tspan
         class="PlaceholderText"
         id="tspan366"
         style="fill:#000000;stroke:none">&lt;footer&gt;</tspan></tspan></tspan></text>

     </g>
    </g>
    <g
   visibility="hidden"
   ooo:text-adjust="right"
   class="Slide_Number"
   id="g388"
   style="visibility:hidden">
     <g
   id="id5">
      <rect
   class="BoundingBox"
   x="20076"
   y="14348"
   width="6524"
   height="1086"
   id="rect377"
   style="fill:none;stroke:none" />
      <text
   class="TextShape"
   id="text385"><tspan
     class="TextParagraph"
     font-size="493px"
     font-weight="400"
     id="tspan383"
     style="font-weight:400;font-size:493px;font-family:'Liberation Serif', serif"><tspan
       class="TextPosition"
       x="24551"
       y="14784"
       id="tspan381"><tspan
         class="PlaceholderText"
         id="tspan379"
         style="fill:#000000;stroke:none">&lt;number&gt;</tspan></tspan></tspan></text>

     </g>
    </g>
   </g>
  </g>
 </defs>
 <g
   class="DummySlide"
   id="g399"
   transform="translate(-11727.1,-6990.65)">
  <g
   id="g397">
   <g
   id="dummy-slide"
   class="Slide"
   clip-path="url(#presentation_clip_path)">
    <g
   ooo:name="dummy-page"
   class="Page"
   id="g394" />
   </g>
  </g>
 </g>
 <g
   style="visibility:hidden"
   id="g406"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id6">
        <rect
   style="fill:none;stroke:none"
   id="rect401"
   height="1791"
   width="12855"
   y="9191"
   x="4380"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path403"
   d="m 4442,9253 h 290 v 1666 h 12440" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g413"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id7">
        <rect
   style="fill:none;stroke:none"
   id="rect408"
   height="2834"
   width="73"
   y="11420"
   x="12852"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path410"
   d="m 12888,11420 v 2833" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g420"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id8">
        <rect
   style="fill:none;stroke:none"
   id="rect415"
   height="675"
   width="5308"
   y="5129"
   x="9649"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path417"
   d="m 9711,5741 h 4201 v -550 h 982" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g429"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id9">
        <rect
   style="fill:none;stroke:none"
   id="rect422"
   height="239"
   width="239"
   y="11167"
   x="15785"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path424"
   d="m 16022,11286 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path426"
   d="m 16022,11286 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g436"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id10">
        <rect
   style="fill:none;stroke:none"
   id="rect431"
   height="125"
   width="781"
   y="5408"
   x="15322"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path433"
   d="m 15322,5470 h 780" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g443"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id11">
        <rect
   style="fill:none;stroke:none"
   id="rect438"
   height="1287"
   width="2126"
   y="7777"
   x="22450"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path440"
   d="m 22512,9001 h 240 V 7839 h 1761" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g450"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id12">
        <rect
   style="fill:none;stroke:none"
   id="rect445"
   height="522"
   width="3056"
   y="10223"
   x="18509"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path447"
   d="m 18571,10682 h 1470 v -397 h 1461" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g457"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id13">
        <rect
   style="fill:none;stroke:none"
   id="rect452"
   height="5758"
   width="68"
   y="8479"
   x="14217"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:62;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path454"
   d="m 14253,8480 -5,5755" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g464"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id14">
        <rect
   style="fill:none;stroke:none"
   id="rect459"
   height="7844"
   width="86"
   y="6398"
   x="2294"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path461"
   d="m 2330,6399 13,7841" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g477"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id15">
        <rect
   style="fill:none;stroke:none"
   id="rect466"
   height="286"
   width="934"
   y="13681"
   x="2417"
   class="BoundingBox" />
        <text
   id="text474"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan472"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan470"
       y="13962"
       x="2408"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan468">Stall F</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g486"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id16">
        <rect
   style="fill:none;stroke:none"
   id="rect479"
   height="227"
   width="222"
   y="6191"
   x="2235"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path481"
   d="m 2443,6304 c 0,18 -5,35 -13,50 -9,15 -21,28 -36,37 -15,8 -31,13 -48,13 -18,0 -34,-5 -49,-13 -15,-9 -27,-22 -36,-37 -8,-15 -13,-32 -13,-50 0,-18 5,-35 13,-50 9,-15 21,-28 36,-37 15,-8 31,-13 49,-13 17,0 33,5 48,13 15,9 27,22 36,37 8,15 13,32 13,50 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path483"
   d="m 2443,6304 c 0,18 -5,35 -13,50 -9,15 -21,28 -36,37 -15,8 -31,13 -48,13 -18,0 -34,-5 -49,-13 -15,-9 -27,-22 -36,-37 -8,-15 -13,-32 -13,-50 0,-18 5,-35 13,-50 9,-15 21,-28 36,-37 15,-8 31,-13 49,-13 17,0 33,5 48,13 15,9 27,22 36,37 8,15 13,32 13,50 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g493"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id17">
        <rect
   style="fill:none;stroke:none"
   id="rect488"
   height="2966"
   width="78"
   y="11267"
   x="5167"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path490"
   d="m 5208,11268 -5,2963" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g506"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id18">
        <rect
   style="fill:none;stroke:none"
   id="rect495"
   height="286"
   width="968"
   y="13681"
   x="5367"
   class="BoundingBox" />
        <text
   id="text503"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan501"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan499"
       y="13962"
       x="5358"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan497">Stall D</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g513"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id19">
        <rect
   style="fill:none;stroke:none"
   id="rect508"
   height="3825"
   width="63"
   y="10407"
   x="10335"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:62;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path510"
   d="m 10366,10407 v 3824" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g520"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id20">
        <rect
   style="fill:none;stroke:none"
   id="rect515"
   height="4284"
   width="65"
   y="9946"
   x="10881"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:62;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path517"
   d="m 10914,9947 -2,4281" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g528"
   class="Graphic"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g526">
        <rect
   style="fill:none;stroke:none"
   id="rect522"
   height="1897"
   width="645"
   y="12666"
   x="12288"
   class="BoundingBox" />
        <image
   id="image524"
   xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAABwCAYAAABy6gJEAAAACXBIWXMAABcDAAAXEAGdI2HuAAACL0lEQVR4nO2Zv0oDQRCHV0grdtZWWvoIFlYWwVYLOxEtLARLfYMUliGxE4xgJfaCLyCIlRYWdlrpE8QZdmOWcLfxdzd3CcnvgyF7f7J87N3O7N013JTSmLRAHhRDoRgKxVAohkIxFIqhUAyFYigUQ6EYCsVQKIZSVqwftRf+sX/csT9mdsQqg2IoFEOxFOuD+5PMxYiZUlYsN3OXZWZHLItViaZE6x/n1lYrVerVoiNrsROrjqzFDqP2psRD0Y6sxe6dv7+UwlKKtdiFG4otSfwU7chaTEfp1PkZqb9diY8iHVkurUc5C5GCS2szWCtR5kpM89eWxKLz6ULZkeiFtqaRK4mvOsWWJS6dT7KnGVKK5rgNif2UnLXYthtm/laQ7GWc1wzndjOOVSLWjNprEivR9oHEncRn2O5MSuzN+cs44MWNua9iqpyVOgk2ou135xeSA+5Tf7YW08vVCe3vaH/b+dH6jPZdpzqyFnvM2d+OfnUxqaN1k+rIWkzvK73pT4KAitxKPIfjTxK746SqEBvIHYUYJXcWjmIthr6n4HrMDGux1PpM6+ixxLrzdfQt1VGdI6Z5TOvnt/MVQmdvrlzdlzJ+nNuTOM87sW6xuJbqE1RtYki6aKcOTnJWTp2YzkitlbXOSrPHuZlNsIXe4UewVprBdxcoVX0TL01VI1ZaeGYvZWVQDGUuxIp8E2etNIO1EoViKBRDoRgKxVAohkIxFIqhUAyFYigUQ6EYyi/bPUzEYhatBAAAAABJRU5ErkJggg=="
   preserveAspectRatio="none"
   height="1897"
   width="645"
   y="12666"
   x="12288" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g537"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id21">
        <rect
   style="fill:none;stroke:none"
   id="rect530"
   height="228"
   width="222"
   y="11767"
   x="5094"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path532"
   d="m 5302,11880 c 0,18 -5,35 -13,50 -9,15 -21,28 -36,37 -15,8 -31,13 -48,13 -18,0 -34,-5 -49,-13 -15,-9 -27,-22 -36,-37 -8,-15 -13,-32 -13,-50 0,-18 5,-35 13,-50 9,-15 21,-28 36,-37 15,-8 31,-13 49,-13 17,0 33,5 48,13 15,9 27,22 36,37 8,15 13,32 13,50 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path534"
   d="m 5302,11880 c 0,18 -5,35 -13,50 -9,15 -21,28 -36,37 -15,8 -31,13 -48,13 -18,0 -34,-5 -49,-13 -15,-9 -27,-22 -36,-37 -8,-15 -13,-32 -13,-50 0,-18 5,-35 13,-50 9,-15 21,-28 36,-37 15,-8 31,-13 49,-13 17,0 33,5 48,13 15,9 27,22 36,37 8,15 13,32 13,50 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g544"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id22">
        <rect
   style="fill:none;stroke:none"
   id="rect539"
   height="6582"
   width="21786"
   y="5911"
   x="460"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path541"
   d="m 22007,10076 h 176 v 2354 H 522 V 5973 h 495" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g551"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id23">
        <rect
   style="fill:none;stroke:none"
   id="rect546"
   height="5791"
   width="14972"
   y="5572"
   x="2754"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path548"
   d="m 2816,5634 v 5666 h 14847" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g558"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id24">
        <rect
   style="fill:none;stroke:none"
   id="rect553"
   height="45"
   width="17060"
   y="8449"
   x="6598"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path555"
   d="m 6599,8462 17057,18" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g565"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id25">
        <rect
   style="fill:none;stroke:none"
   id="rect560"
   height="59"
   width="7041"
   y="10380"
   x="6661"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path562"
   d="m 6662,10407 7038,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g572"
   class="com.sun.star.drawing.PolyLineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id26">
        <rect
   style="fill:none;stroke:none"
   id="rect567"
   height="5185"
   width="2655"
   y="3860"
   x="8134"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path569"
   d="m 8135,3900 2621,-22 14,3993 H 8583 v 1172" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g579"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id27">
        <rect
   style="fill:none;stroke:none"
   id="rect574"
   height="5355"
   width="38"
   y="2210"
   x="24785"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path576"
   d="m 24804,7563 -1,-5352" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g616"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g588"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id28">
         <rect
   style="fill:none;stroke:none"
   id="rect581"
   height="963"
   width="532"
   y="5262"
   x="1003"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path583"
   d="m 1016,5275 505,125 v 685 l -505,126 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path585"
   d="m 1016,5275 505,125 v 685 l -505,126 z" />
        </g>
       </g>
       <g
   id="g601"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id29">
         <rect
   style="fill:none;stroke:none"
   id="rect590"
   height="300"
   width="204"
   y="5404"
   x="1081"
   class="BoundingBox" />
         <text
   id="text598"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan596"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan594"
       y="5699"
       x="1065"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan592">0</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g614"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id30">
         <rect
   style="fill:none;stroke:none"
   id="rect603"
   height="292"
   width="184"
   y="5832"
   x="1097"
   class="BoundingBox" />
         <text
   id="text611"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan609"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan607"
       y="6123"
       x="1065"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan605">1</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g653"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g625"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id31">
         <rect
   style="fill:none;stroke:none"
   id="rect618"
   height="967"
   width="532"
   y="7123"
   x="24502"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path620"
   d="m 24515,7136 505,125 v 689 l -505,126 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path622"
   d="m 24515,7136 505,125 v 689 l -505,126 z" />
        </g>
       </g>
       <g
   id="g638"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id32">
         <rect
   style="fill:none;stroke:none"
   id="rect627"
   height="292"
   width="184"
   y="7269"
   x="24596"
   class="BoundingBox" />
         <text
   id="text635"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan633"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan631"
       y="7560"
       x="24564"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan629">1</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g651"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id33">
         <rect
   style="fill:none;stroke:none"
   id="rect640"
   height="300"
   width="204"
   y="7691"
   x="24580"
   class="BoundingBox" />
         <text
   id="text648"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan646"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan644"
       y="7986"
       x="24564"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan642">0</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g660"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id34">
        <rect
   style="fill:none;stroke:none"
   id="rect655"
   height="129"
   width="545"
   y="5682"
   x="1521"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path657"
   d="m 1522,5744 542,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g667"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id35">
        <rect
   style="fill:none;stroke:none"
   id="rect662"
   height="125"
   width="4115"
   y="5682"
   x="2514"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path664"
   d="M 2514,5744 H 6628" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g674"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id36">
        <rect
   style="fill:none;stroke:none"
   id="rect669"
   height="7179"
   width="174"
   y="3234"
   x="6560"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path671"
   d="m 6671,3235 -49,7176" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g681"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id37">
        <rect
   style="fill:none;stroke:none"
   id="rect676"
   height="152"
   width="5846"
   y="6267"
   x="9696"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path678"
   d="m 9697,6356 5843,-27" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g688"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id38">
        <rect
   style="fill:none;stroke:none"
   id="rect683"
   height="7405"
   width="136"
   y="5379"
   x="14469"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path685"
   d="m 14531,12782 11,-7402" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g695"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id39">
        <rect
   style="fill:none;stroke:none"
   id="rect690"
   height="125"
   width="381"
   y="5378"
   x="14502"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path692"
   d="m 14502,5440 h 380" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g702"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id40">
        <rect
   style="fill:none;stroke:none"
   id="rect697"
   height="139"
   width="794"
   y="6528"
   x="14548"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path699"
   d="m 15339,6590 -789,14" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g709"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id41">
        <rect
   style="fill:none;stroke:none"
   id="rect704"
   height="134"
   width="567"
   y="6765"
   x="14775"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path706"
   d="m 15340,6836 -564,-9" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g716"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id42">
        <rect
   style="fill:none;stroke:none"
   id="rect711"
   height="139"
   width="1631"
   y="5667"
   x="16601"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path713"
   d="m 16602,5743 1628,-14" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g723"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id43">
        <rect
   style="fill:none;stroke:none"
   id="rect718"
   height="133"
   width="1141"
   y="6542"
   x="17065"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path720"
   d="m 17066,6612 1138,-8" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g730"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id44">
        <rect
   style="fill:none;stroke:none"
   id="rect725"
   height="5306"
   width="19420"
   y="7544"
   x="5954"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path727"
   d="M 6016,12787 H 25311 V 7606 h -291" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g737"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id45">
        <rect
   style="fill:none;stroke:none"
   id="rect732"
   height="1472"
   width="6315"
   y="5982"
   x="18261"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path734"
   d="m 18323,6044 h 5639 v 1347 h 551" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g828"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g758"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id46">
         <rect
   style="fill:none;stroke:none"
   id="rect739"
   height="2530"
   width="1518"
   y="5123"
   x="21179"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path741"
   d="m 21938,7639 h -746 V 5136 h 1491 v 2503 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path743"
   d="m 21938,7639 h -746 V 5136 h 1491 v 2503 z" />
         <text
   id="text755"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Arial Narrow', sans-serif"
     id="tspan753"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan747"
       y="6565"
       x="21896"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan745">Data </tspan></tspan><tspan
       id="tspan751"
       y="6917"
       x="21380"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan749">Memory</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g771"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id47">
         <rect
   style="fill:none;stroke:none"
   id="rect760"
   height="292"
   width="283"
   y="5920"
   x="21253"
   class="BoundingBox" />
         <text
   id="text768"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan766"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan764"
       y="6211"
       x="21253"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan762">A</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g784"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id48">
         <rect
   style="fill:none;stroke:none"
   id="rect773"
   height="292"
   width="558"
   y="5906"
   x="22027"
   class="BoundingBox" />
         <text
   id="text781"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan779"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan777"
       y="6197"
       x="21993"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan775">RD</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g797"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id49">
         <rect
   style="fill:none;stroke:none"
   id="rect786"
   height="318"
   width="732"
   y="7249"
   x="21239"
   class="BoundingBox" />
         <text
   id="text794"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan792"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan790"
       y="7540"
       x="21253"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan788">WD</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g810"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id50">
         <rect
   style="fill:none;stroke:none"
   id="rect799"
   height="292"
   width="663"
   y="5269"
   x="21891"
   class="BoundingBox" />
         <text
   id="text807"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan805"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan803"
       y="5560"
       x="21890"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan801">WE</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g817"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id51">
         <rect
   style="fill:none;stroke:none"
   id="rect812"
   height="274"
   width="40"
   y="4864"
   x="21535"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path814"
   d="m 21548,5136 13,-271" />
        </g>
       </g>
       <g
   id="g826"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id52">
         <rect
   style="fill:none;stroke:none"
   id="rect819"
   height="280"
   width="478"
   y="5057"
   x="21311"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path821"
   d="m 21549,5323 226,-252 h -451 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path823"
   d="m 21549,5323 226,-252 h -451 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g835"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id53">
        <rect
   style="fill:none;stroke:none"
   id="rect830"
   height="2442"
   width="233"
   y="6758"
   x="16390"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path832"
   d="m 16560,6820 h -108 v 1294 0 1023" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g842"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id54">
        <rect
   style="fill:none;stroke:none"
   id="rect837"
   height="126"
   width="7525"
   y="9149"
   x="8912"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path839"
   d="m 8974,9211 h 3707 v 1 h 3693" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g849"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id55">
        <rect
   style="fill:none;stroke:none"
   id="rect844"
   height="318"
   width="646"
   y="6339"
   x="15980"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path846"
   d="m 16042,6594 h 200 v -193 h 321" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g856"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id56">
        <rect
   style="fill:none;stroke:none"
   id="rect851"
   height="904"
   width="5576"
   y="6530"
   x="15680"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path853"
   d="m 15742,6592 h 500 v 779 h 4951" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g863"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id57">
        <rect
   style="fill:none;stroke:none"
   id="rect858"
   height="55"
   width="7293"
   y="9920"
   x="6668"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path860"
   d="m 6668,9947 h 7292" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g870"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id58">
        <rect
   style="fill:none;stroke:none"
   id="rect865"
   height="3824"
   width="60"
   y="10406"
   x="13673"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path867"
   d="m 13705,10407 -5,3821" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g877"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id59">
        <rect
   style="fill:none;stroke:none"
   id="rect872"
   height="4288"
   width="58"
   y="9946"
   x="13930"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path874"
   d="m 13960,9947 -3,4285" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g884"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id60">
        <rect
   style="fill:none;stroke:none"
   id="rect879"
   height="5784"
   width="81"
   y="8446"
   x="19685"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path881"
   d="m 19738,8447 -26,5781" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g891"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id61">
        <rect
   style="fill:none;stroke:none"
   id="rect886"
   height="2263"
   width="55"
   y="11975"
   x="23653"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:53;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path888"
   d="m 23680,11975 v 2262" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g898"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id62">
        <rect
   style="fill:none;stroke:none"
   id="rect893"
   height="32"
   width="872"
   y="5733"
   x="6670"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path895"
   d="m 7540,5746 -869,5" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g905"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id63">
        <rect
   style="fill:none;stroke:none"
   id="rect900"
   height="31"
   width="889"
   y="6357"
   x="6654"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path902"
   d="m 7541,6374 -886,-4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g912"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id64">
        <rect
   style="fill:none;stroke:none"
   id="rect907"
   height="36"
   width="603"
   y="3217"
   x="6671"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path909"
   d="m 6672,3230 600,9" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g919"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id65">
        <rect
   style="fill:none;stroke:none"
   id="rect914"
   height="31"
   width="603"
   y="3945"
   x="6671"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path916"
   d="m 7272,3962 -600,-4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g926"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id66">
        <rect
   style="fill:none;stroke:none"
   id="rect921"
   height="4673"
   width="20727"
   y="622"
   x="1245"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path923"
   d="m 20854,4379 h 1099 V 640 H 1263 v 4636" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g933"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id67">
        <rect
   style="fill:none;stroke:none"
   id="rect928"
   height="42"
   width="16901"
   y="1770"
   x="8122"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path930"
   d="m 8123,1788 16898,5" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g940"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id68">
        <rect
   style="fill:none;stroke:none"
   id="rect935"
   height="64"
   width="16751"
   y="2166"
   x="8056"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path937"
   d="m 8057,2211 16748,-27" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g947"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id69">
        <rect
   style="fill:none;stroke:none"
   id="rect942"
   height="41"
   width="14141"
   y="2617"
   x="8122"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path944"
   d="m 8123,2635 14138,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g954"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id70">
        <rect
   style="fill:none;stroke:none"
   id="rect949"
   height="2501"
   width="37"
   y="2635"
   x="22243"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path951"
   d="M 22261,5135 V 2635" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g961"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id71">
        <rect
   style="fill:none;stroke:none"
   id="rect956"
   height="46"
   width="10084"
   y="3000"
   x="8122"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path958"
   d="m 8123,3018 10081,9" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g968"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id72">
        <rect
   style="fill:none;stroke:none"
   id="rect963"
   height="2371"
   width="46"
   y="3022"
   x="18180"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path965"
   d="m 18207,3023 -9,2368" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g975"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id73">
        <rect
   style="fill:none;stroke:none"
   id="rect970"
   height="41"
   width="8725"
   y="3433"
   x="8122"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path972"
   d="m 8123,3451 8722,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g982"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id74">
        <rect
   style="fill:none;stroke:none"
   id="rect977"
   height="2942"
   width="37"
   y="3455"
   x="16827"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path979"
   d="M 16845,3455 V 6396" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g991"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id75">
        <rect
   style="fill:none;stroke:none"
   id="rect984"
   height="967"
   width="532"
   y="6127"
   x="16547"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path986"
   d="m 16560,6140 505,125 v 689 l -505,126 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path988"
   d="m 16560,6140 505,125 v 689 l -505,126 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1004"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id76">
        <rect
   style="fill:none;stroke:none"
   id="rect993"
   height="300"
   width="204"
   y="6269"
   x="16625"
   class="BoundingBox" />
        <text
   id="text1001"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan999"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan997"
       y="6564"
       x="16609"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan995">0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1017"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id77">
        <rect
   style="fill:none;stroke:none"
   id="rect1006"
   height="292"
   width="184"
   y="6699"
   x="16641"
   class="BoundingBox" />
        <text
   id="text1014"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1012"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1010"
       y="6990"
       x="16609"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1008">1</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1024"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id78">
        <rect
   style="fill:none;stroke:none"
   id="rect1019"
   height="41"
   width="12319"
   y="4306"
   x="8122"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1021"
   d="m 8123,4324 12316,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1033"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id79">
        <rect
   style="fill:none;stroke:none"
   id="rect1026"
   height="500"
   width="444"
   y="4130"
   x="20425"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1028"
   d="m 20646,4143 v 0 c 37,0 72,11 104,32 32,20 58,50 76,86 18,36 28,77 28,119 v 0 0 c 0,41 -10,82 -28,118 -18,36 -44,66 -76,86 -32,21 -67,32 -104,32 h -208 v -473 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1030"
   d="m 20646,4143 v 0 c 37,0 72,11 104,32 32,20 58,50 76,86 18,36 28,77 28,119 v 0 0 c 0,41 -10,82 -28,118 -18,36 -44,66 -76,86 -32,21 -67,32 -104,32 h -208 v -473 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1040"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id80">
        <rect
   style="fill:none;stroke:none"
   id="rect1035"
   height="8480"
   width="99"
   y="5759"
   x="15019"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1037"
   d="m 15055,5760 26,8477" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1047"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id81">
        <rect
   style="fill:none;stroke:none"
   id="rect1042"
   height="7403"
   width="77"
   y="6836"
   x="15460"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1044"
   d="m 15496,6837 4,7400" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1054"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id82">
        <rect
   style="fill:none;stroke:none"
   id="rect1049"
   height="4759"
   width="37"
   y="386"
   x="8564"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1051"
   d="M 8582,5144 V 386" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1061"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id83">
        <rect
   style="fill:none;stroke:none"
   id="rect1056"
   height="41"
   width="16447"
   y="368"
   x="8581"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1058"
   d="m 8582,386 16444,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1068"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id84">
        <rect
   style="fill:none;stroke:none"
   id="rect1063"
   height="1401"
   width="42"
   y="394"
   x="25002"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:35;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1065"
   d="m 25025,395 -5,1398" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1075"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id85">
        <rect
   style="fill:none;stroke:none"
   id="rect1070"
   height="1131"
   width="78"
   y="13125"
   x="21509"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1072"
   d="m 21550,13126 -5,1128" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1082"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id86">
        <rect
   style="fill:none;stroke:none"
   id="rect1077"
   height="1131"
   width="78"
   y="13125"
   x="23855"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#0033cc;stroke-width:71;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1079"
   d="m 23896,13126 -5,1128" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g1103"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id87">
        <rect
   style="fill:none;stroke:none"
   id="rect1084"
   height="2970"
   width="1025"
   y="1541"
   x="7258"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1086"
   d="m 7437,1554 v 0 c -29,0 -58,8 -83,22 -25,15 -46,36 -61,61 -14,25 -22,54 -22,83 v 2610 1 c 0,29 8,58 22,83 15,25 36,46 61,61 25,14 54,22 83,22 h 665 1 c 29,0 58,-8 83,-22 25,-15 46,-36 61,-61 14,-25 22,-54 22,-83 v -2611 0 0 c 0,-29 -8,-58 -22,-83 -15,-25 -36,-46 -61,-61 -25,-14 -54,-22 -83,-22 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1088"
   d="m 7437,1554 v 0 c -29,0 -58,8 -83,22 -25,15 -46,36 -61,61 -14,25 -22,54 -22,83 v 2610 1 c 0,29 8,58 22,83 15,25 36,46 61,61 25,14 54,22 83,22 h 665 1 c 29,0 58,-8 83,-22 25,-15 46,-36 61,-61 14,-25 22,-54 22,-83 v -2611 0 0 c 0,-29 -8,-58 -22,-83 -15,-25 -36,-46 -61,-61 -25,-14 -54,-22 -83,-22 z" />
        <text
   id="text1100"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1098"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1092"
       y="1920"
       x="7352"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1090">Control </tspan></tspan><tspan
       id="tspan1096"
       y="2301"
       x="7352"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1094">unit</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1130"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1112"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id88">
         <rect
   style="fill:none;stroke:none"
   id="rect1105"
   height="6721"
   width="419"
   y="5063"
   x="4922"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1107"
   d="M 5131,11770 H 4935 V 5076 h 392 v 6694 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1109"
   d="M 5131,11770 H 4935 V 5076 h 392 v 6694 z" />
        </g>
       </g>
       <g
   id="g1119"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id89">
         <rect
   style="fill:none;stroke:none"
   id="rect1114"
   height="225"
   width="27"
   y="4850"
   x="5118"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1116"
   d="M 5131,5074 V 4850" />
        </g>
       </g>
       <g
   id="g1128"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id90">
         <rect
   style="fill:none;stroke:none"
   id="rect1121"
   height="321"
   width="420"
   y="5062"
   x="4922"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1123"
   d="m 5131,5368 197,-293 h -393 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1125"
   d="m 5131,5368 197,-293 h -393 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g1157"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1139"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id91">
         <rect
   style="fill:none;stroke:none"
   id="rect1132"
   height="965"
   width="477"
   y="5260"
   x="2051"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1134"
   d="m 2289,6211 h -225 v -938 h 450 v 938 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1136"
   d="m 2289,6211 h -225 v -938 h 450 v 938 z" />
        </g>
       </g>
       <g
   id="g1148"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id92">
         <rect
   style="fill:none;stroke:none"
   id="rect1141"
   height="292"
   width="478"
   y="5259"
   x="2051"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1143"
   d="m 2289,5537 226,-265 h -451 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1145"
   d="m 2289,5537 226,-265 h -451 z" />
        </g>
       </g>
       <g
   id="g1155"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id93">
         <rect
   style="fill:none;stroke:none"
   id="rect1150"
   height="273"
   width="40"
   y="5002"
   x="2274"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1152"
   d="m 2287,5273 13,-270" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g1184"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1166"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id94">
         <rect
   style="fill:none;stroke:none"
   id="rect1159"
   height="10546"
   width="420"
   y="1237"
   x="12673"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1161"
   d="m 12883,11769 h -197 V 1250 h 393 v 10519 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1163"
   d="m 12883,11769 h -197 V 1250 h 393 v 10519 z" />
        </g>
       </g>
       <g
   id="g1173"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id95">
         <rect
   style="fill:none;stroke:none"
   id="rect1168"
   height="324"
   width="27"
   y="928"
   x="12870"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1170"
   d="M 12883,1251 V 928" />
        </g>
       </g>
       <g
   id="g1182"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id96">
         <rect
   style="fill:none;stroke:none"
   id="rect1175"
   height="309"
   width="421"
   y="1235"
   x="12673"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1177"
   d="m 12883,1530 197,-282 h -394 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1179"
   d="m 12883,1530 197,-282 h -394 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g1211"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1193"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id97">
         <rect
   style="fill:none;stroke:none"
   id="rect1186"
   height="9932"
   width="420"
   y="1324"
   x="22899"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1188"
   d="m 23109,11242 h -197 V 1337 h 393 v 9905 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1190"
   d="m 23109,11242 h -197 V 1337 h 393 v 9905 z" />
        </g>
       </g>
       <g
   id="g1200"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id98">
         <rect
   style="fill:none;stroke:none"
   id="rect1195"
   height="305"
   width="27"
   y="1034"
   x="23096"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1197"
   d="M 23109,1338 V 1034" />
        </g>
       </g>
       <g
   id="g1209"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id99">
         <rect
   style="fill:none;stroke:none"
   id="rect1202"
   height="292"
   width="421"
   y="1324"
   x="22899"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1204"
   d="m 23109,1602 197,-265 h -394 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1206"
   d="m 23109,1602 197,-265 h -394 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g1228"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id100">
        <rect
   style="fill:none;stroke:none"
   id="rect1213"
   height="870"
   width="23013"
   y="14215"
   x="1507"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1215"
   d="m 1661,14228 h 1 c -25,0 -49,6 -71,19 -21,12 -39,30 -51,51 -13,22 -19,46 -19,71 v 561 1 c 0,24 6,48 19,70 12,21 30,39 51,51 22,13 46,19 71,19 h 22702 1 c 24,0 48,-6 70,-19 21,-12 39,-30 51,-51 13,-22 19,-46 19,-70 v -563 1 0 c 0,-25 -6,-49 -19,-71 -12,-21 -30,-39 -51,-51 -22,-13 -46,-19 -70,-19 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1217"
   d="m 1661,14228 h 1 c -25,0 -49,6 -71,19 -21,12 -39,30 -51,51 -13,22 -19,46 -19,71 v 561 1 c 0,24 6,48 19,70 12,21 30,39 51,51 22,13 46,19 71,19 h 22702 1 c 24,0 48,-6 70,-19 21,-12 39,-30 51,-51 13,-22 19,-46 19,-70 v -563 1 0 c 0,-25 -6,-49 -19,-71 -12,-21 -30,-39 -51,-51 -22,-13 -46,-19 -70,-19 z" />
        <text
   id="text1225"
   class="TextShape"><tspan
     style="font-weight:400;font-size:494px;font-family:'Liberation Sans', sans-serif"
     id="tspan1223"
     font-weight="400"
     font-size="494px"
     class="TextParagraph"><tspan
       id="tspan1221"
       y="14847"
       x="2412"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1219">Hazard unit</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1241"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id101">
        <rect
   style="fill:none;stroke:none"
   id="rect1230"
   height="364"
   width="1648"
   y="1415"
   x="8772"
   class="BoundingBox" />
        <text
   id="text1238"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1236"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1234"
       y="1696"
       x="8785"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1232">RegWriteD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1254"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id102">
        <rect
   style="fill:none;stroke:none"
   id="rect1243"
   height="350"
   width="1953"
   y="1900"
   x="8801"
   class="BoundingBox" />
        <text
   id="text1251"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1249"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1247"
       y="2167"
       x="8814"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1245">MemToRegD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1267"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id103">
        <rect
   style="fill:none;stroke:none"
   id="rect1256"
   height="306"
   width="1775"
   y="2310"
   x="8791"
   class="BoundingBox" />
        <text
   id="text1264"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1262"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1260"
       y="2591"
       x="8804"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1258">MemWriteD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1280"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id104">
        <rect
   style="fill:none;stroke:none"
   id="rect1269"
   height="306"
   width="2038"
   y="2715"
   x="8794"
   class="BoundingBox" />
        <text
   id="text1277"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1275"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1273"
       y="2996"
       x="8807"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1271">ALUControlD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1293"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id105">
        <rect
   style="fill:none;stroke:none"
   id="rect1282"
   height="296"
   width="1420"
   y="3135"
   x="8772"
   class="BoundingBox" />
        <text
   id="text1290"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1288"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1286"
       y="3406"
       x="8785"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1284">ALUSrcD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1306"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id106">
        <rect
   style="fill:none;stroke:none"
   id="rect1295"
   height="353"
   width="1915"
   y="3568"
   x="8781"
   class="BoundingBox" />
        <text
   id="text1303"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1301"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1299"
       y="3839"
       x="8794"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1297">TypeRISBUJ</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1319"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id107">
        <rect
   style="fill:none;stroke:none"
   id="rect1308"
   height="306"
   width="1352"
   y="3963"
   x="8806"
   class="BoundingBox" />
        <text
   id="text1316"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1314"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1312"
       y="4244"
       x="8819"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1310">BranchD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1332"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id108">
        <rect
   style="fill:none;stroke:none"
   id="rect1321"
   height="364"
   width="1631"
   y="1392"
   x="13253"
   class="BoundingBox" />
        <text
   id="text1329"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1327"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1325"
       y="1673"
       x="13266"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1323">RegWriteE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1345"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id109">
        <rect
   style="fill:none;stroke:none"
   id="rect1334"
   height="350"
   width="1936"
   y="1878"
   x="13280"
   class="BoundingBox" />
        <text
   id="text1342"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1340"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1338"
       y="2145"
       x="13293"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1336">MemToRegE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1358"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id110">
        <rect
   style="fill:none;stroke:none"
   id="rect1347"
   height="306"
   width="1758"
   y="2288"
   x="13270"
   class="BoundingBox" />
        <text
   id="text1355"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1353"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1351"
       y="2569"
       x="13283"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1349">MemWriteE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1371"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id111">
        <rect
   style="fill:none;stroke:none"
   id="rect1360"
   height="306"
   width="2021"
   y="2693"
   x="13274"
   class="BoundingBox" />
        <text
   id="text1368"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1366"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1364"
       y="2974"
       x="13287"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1362">ALUControlE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1384"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id112">
        <rect
   style="fill:none;stroke:none"
   id="rect1373"
   height="296"
   width="1403"
   y="3113"
   x="13252"
   class="BoundingBox" />
        <text
   id="text1381"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1379"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1377"
       y="3384"
       x="13265"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1375">ALUSrcE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1397"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id113">
        <rect
   style="fill:none;stroke:none"
   id="rect1386"
   height="364"
   width="1686"
   y="1410"
   x="19535"
   class="BoundingBox" />
        <text
   id="text1394"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1392"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1390"
       y="1691"
       x="19548"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1388">RegWriteM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1410"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id114">
        <rect
   style="fill:none;stroke:none"
   id="rect1399"
   height="350"
   width="1991"
   y="1896"
   x="19566"
   class="BoundingBox" />
        <text
   id="text1407"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1405"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1403"
       y="2163"
       x="19579"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1401">MemToRegM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1423"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id115">
        <rect
   style="fill:none;stroke:none"
   id="rect1412"
   height="306"
   width="1813"
   y="2305"
   x="19556"
   class="BoundingBox" />
        <text
   id="text1420"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1418"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1416"
       y="2586"
       x="19569"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1414">MemWriteM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1436"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id116">
        <rect
   style="fill:none;stroke:none"
   id="rect1425"
   height="364"
   width="1720"
   y="1379"
   x="23338"
   class="BoundingBox" />
        <text
   id="text1433"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1431"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1429"
       y="1660"
       x="23351"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1427">RegWriteW</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1455"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id117">
        <rect
   style="fill:none;stroke:none"
   id="rect1438"
   height="815"
   width="1529"
   y="2309"
   x="23233"
   class="BoundingBox" />
        <text
   id="text1452"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1444"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1442"
       y="2576"
       x="23246"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1440">MemTo</tspan></tspan></tspan><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1450"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1448"
       y="3041"
       x="23846"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1446">RegW</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1468"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id118">
        <rect
   style="fill:none;stroke:none"
   id="rect1457"
   height="243"
   width="1018"
   y="4085"
   x="20866"
   class="BoundingBox" />
        <text
   id="text1465"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1463"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1461"
       y="4307"
       x="20877"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1459">PCSrcM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1481"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id119">
        <rect
   style="fill:none;stroke:none"
   id="rect1470"
   height="276"
   width="437"
   y="2906"
   x="6643"
   class="BoundingBox" />
        <text
   id="text1478"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1476"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1474"
       y="3177"
       x="6632"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1472">6:0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1494"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id120">
        <rect
   style="fill:none;stroke:none"
   id="rect1483"
   height="251"
   width="715"
   y="5440"
   x="6770"
   class="BoundingBox" />
        <text
   id="text1491"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1489"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1487"
       y="5687"
       x="6752"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1485">19:15</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1507"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id121">
        <rect
   style="fill:none;stroke:none"
   id="rect1496"
   height="251"
   width="720"
   y="6061"
   x="6762"
   class="BoundingBox" />
        <text
   id="text1504"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1502"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1500"
       y="6308"
       x="6752"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1498">24:20</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1520"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id122">
        <rect
   style="fill:none;stroke:none"
   id="rect1509"
   height="272"
   width="781"
   y="9613"
   x="11263"
   class="BoundingBox" />
        <text
   id="text1517"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1515"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1513"
       y="9880"
       x="11242"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1511">Rs1D</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1533"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id123">
        <rect
   style="fill:none;stroke:none"
   id="rect1522"
   height="272"
   width="764"
   y="9636"
   x="13152"
   class="BoundingBox" />
        <text
   id="text1530"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1528"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1526"
       y="9903"
       x="13131"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1524">Rs1E</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1546"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id124">
        <rect
   style="fill:none;stroke:none"
   id="rect1535"
   height="270"
   width="884"
   y="5400"
   x="16927"
   class="BoundingBox" />
        <text
   id="text1543"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1541"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1539"
       y="5647"
       x="16939"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1537">SrcAE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1559"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id125">
        <rect
   style="fill:none;stroke:none"
   id="rect1548"
   height="243"
   width="802"
   y="6276"
   x="17067"
   class="BoundingBox" />
        <text
   id="text1556"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1554"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1552"
       y="6498"
       x="17078"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1550">SrcBE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1572"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id126">
        <rect
   style="fill:none;stroke:none"
   id="rect1561"
   height="279"
   width="1557"
   y="7036"
   x="17381"
   class="BoundingBox" />
        <text
   id="text1569"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1567"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1565"
       y="7292"
       x="17393"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1563">WriteDataE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1585"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id127">
        <rect
   style="fill:none;stroke:none"
   id="rect1574"
   height="332"
   width="1958"
   y="8076"
   x="16709"
   class="BoundingBox" />
        <text
   id="text1582"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1580"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1578"
       y="8332"
       x="16721"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1576">WriteRegE 4:0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1598"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id128">
        <rect
   style="fill:none;stroke:none"
   id="rect1587"
   height="251"
   width="1441"
   y="7062"
   x="19396"
   class="BoundingBox" />
        <text
   id="text1595"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1593"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1591"
       y="7292"
       x="19407"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1589">WriteDataM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1611"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id129">
        <rect
   style="fill:none;stroke:none"
   id="rect1600"
   height="296"
   width="1496"
   y="5623"
   x="19608"
   class="BoundingBox" />
        <text
   id="text1608"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1606"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1604"
       y="5894"
       x="19621"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1602">ALUOutM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1624"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id130">
        <rect
   style="fill:none;stroke:none"
   id="rect1613"
   height="232"
   width="1405"
   y="8143"
   x="19404"
   class="BoundingBox" />
        <text
   id="text1621"
   class="TextShape"><tspan
     style="font-weight:700;font-size:247px;font-family:'Arial Narrow', sans-serif"
     id="tspan1619"
     font-weight="700"
     font-size="247px"
     class="TextParagraph"><tspan
       id="tspan1617"
       y="8322"
       x="19412"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1615">WriteRegM 4:0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1637"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-48.676178,-16.664232)">
       <g
   id="id131">
        <rect
   style="fill:none;stroke:none"
   id="rect1626"
   height="298"
   width="1838"
   y="8164"
   x="23660"
   class="BoundingBox" />
        <text
   id="text1634"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1632"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1630"
       y="8394"
       x="23671"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1628">WriteRegW 4:0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1650"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-42.796855,-14.503425)">
       <g
   id="id132">
        <rect
   style="fill:none;stroke:none"
   id="rect1639"
   height="216"
   width="1124"
   y="7552"
   x="23617"
   class="BoundingBox" />
        <text
   id="text1647"
   class="TextShape"><tspan
     style="font-weight:700;font-size:282px;font-family:'Arial Narrow', sans-serif"
     id="tspan1645"
     font-weight="700"
     font-size="282px"
     class="TextParagraph"><tspan
       id="tspan1643"
       y="7749"
       x="23626"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1641">ALUOutW</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1663"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-50.252187,-31.793915)">
       <g
   id="id133">
        <rect
   style="fill:none;stroke:none"
   id="rect1652"
   height="251"
   width="1462"
   y="5691"
   x="23639"
   class="BoundingBox" />
        <text
   id="text1660"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan1658"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1656"
       y="5921"
       x="23650"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1654">ReadDataW</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1676"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-54.034608,-25.48988)">
       <g
   id="id134">
        <rect
   style="fill:none;stroke:none"
   id="rect1665"
   height="306"
   width="1301"
   y="12386"
   x="24183"
   class="BoundingBox" />
        <text
   id="text1673"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1671"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1669"
       y="12667"
       x="24196"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1667">ResultW</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1689"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id135">
        <rect
   style="fill:none;stroke:none"
   id="rect1678"
   height="266"
   width="859"
   y="5386"
   x="5702"
   class="BoundingBox" />
        <text
   id="text1686"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1684"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1682"
       y="5629"
       x="5714"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1680">InstrD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1702"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-46.171207,-21.703425)">
       <g
   id="id136">
        <rect
   style="fill:none;stroke:none"
   id="rect1691"
   height="263"
   width="469"
   y="5322"
   x="1869"
   class="BoundingBox" />
        <text
   id="text1699"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1697"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1695"
       y="5581"
       x="1850"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1693">PCÂ´</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1715"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-35.571207,-14.903425)">
       <g
   id="id137">
        <rect
   style="fill:none;stroke:none"
   id="rect1704"
   height="251"
   width="376"
   y="5316"
   x="2935"
   class="BoundingBox" />
        <text
   id="text1712"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1710"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1708"
       y="5563"
       x="2916"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1706">PC</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1728"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id138">
        <rect
   style="fill:none;stroke:none"
   id="rect1717"
   height="321"
   width="380"
   y="3102"
   x="7381"
   class="BoundingBox" />
        <text
   id="text1725"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1723"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1721"
       y="3349"
       x="7370"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1719">Op</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1741"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id139">
        <rect
   style="fill:none;stroke:none"
   id="rect1730"
   height="266"
   width="817"
   y="3830"
   x="7331"
   class="BoundingBox" />
        <text
   id="text1738"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan1736"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan1734"
       y="4073"
       x="7343"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1732">Funct</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1760"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id140">
        <rect
   style="fill:none;stroke:none"
   id="rect1743"
   height="658"
   width="1250"
   y="13321"
   x="13785"
   class="BoundingBox" />
        <text
   id="text1757"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1749"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1747"
       y="13602"
       x="13764"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1745">Forward</tspan></tspan></tspan><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1755"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1753"
       y="13954"
       x="14581"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1751">AE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1779"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id141">
        <rect
   style="fill:none;stroke:none"
   id="rect1762"
   height="634"
   width="1215"
   y="13334"
   x="15574"
   class="BoundingBox" />
        <text
   id="text1776"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1768"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1766"
       y="13615"
       x="15553"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1764">Forward</tspan></tspan></tspan><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1774"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1772"
       y="13967"
       x="16153"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1770">BE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1796"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id142">
        <rect
   style="fill:none;stroke:none"
   id="rect1781"
   height="771"
   width="1242"
   y="13531"
   x="20390"
   class="BoundingBox" />
        <text
   id="text1793"
   class="TextShape"
   x="-592.57922"
   y="-12.608069"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan1791"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan1785"
       y="13799.392"
       x="19810.42"
       class="TextPosition"
       style="fill:#000000;stroke:none">RegWriteM</tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g1819"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-79.071207,-44.403425)">
       <g
   id="id143">
        <rect
   style="fill:none;stroke:none"
   id="rect1798"
   height="1198"
   width="924"
   y="13348"
   x="24549"
   class="BoundingBox" />
        
       </g>
      </g><g
   style="visibility:hidden"
   id="g1953"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1844"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id144">
         <rect
   style="fill:none;stroke:none"
   id="rect1821"
   height="2532"
   width="2201"
   y="5130"
   x="7528"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1823"
   d="M 8628,7648 H 7541 V 5143 h 2174 v 2505 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1825"
   d="M 8628,7648 H 7541 V 5143 h 2174 v 2505 z" />
         <text
   id="text1841"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Arial Narrow', sans-serif"
     id="tspan1831"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1829"
       y="7031"
       x="8929"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1827">Reg.</tspan></tspan></tspan><tspan
     style="font-weight:400;font-size:423px;font-family:'Arial Narrow', sans-serif"
     id="tspan1839"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1837"
       y="7538"
       x="9010"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1833"> </tspan><tspan
         style="fill:#000000;stroke:none"
         id="tspan1835">File</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1857"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id145">
         <rect
   style="fill:none;stroke:none"
   id="rect1846"
   height="292"
   width="498"
   y="5623"
   x="7599"
   class="BoundingBox" />
         <text
   id="text1854"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1852"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1850"
       y="5914"
       x="7599"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1848">A1</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1870"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id146">
         <rect
   style="fill:none;stroke:none"
   id="rect1859"
   height="292"
   width="792"
   y="5623"
   x="8820"
   class="BoundingBox" />
         <text
   id="text1867"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1865"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1863"
       y="5914"
       x="8786"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1861">RD1</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1883"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id147">
         <rect
   style="fill:none;stroke:none"
   id="rect1872"
   height="296"
   width="497"
   y="6238"
   x="7599"
   class="BoundingBox" />
         <text
   id="text1880"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1878"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1876"
       y="6533"
       x="7599"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1874">A2</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1896"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id148">
         <rect
   style="fill:none;stroke:none"
   id="rect1885"
   height="296"
   width="791"
   y="6225"
   x="8820"
   class="BoundingBox" />
         <text
   id="text1893"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1891"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1889"
       y="6520"
       x="8786"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1887">RD2</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1909"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id149">
         <rect
   style="fill:none;stroke:none"
   id="rect1898"
   height="300"
   width="500"
   y="6751"
   x="7599"
   class="BoundingBox" />
         <text
   id="text1906"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1904"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1902"
       y="7046"
       x="7599"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1900">A3</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1922"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id150">
         <rect
   style="fill:none;stroke:none"
   id="rect1911"
   height="300"
   width="921"
   y="7264"
   x="7604"
   class="BoundingBox" />
         <text
   id="text1919"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1917"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1915"
       y="7559"
       x="7603"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1913">WD3</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1935"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id151">
         <rect
   style="fill:none;stroke:none"
   id="rect1924"
   height="300"
   width="898"
   y="5272"
   x="8423"
   class="BoundingBox" />
         <text
   id="text1932"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan1930"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan1928"
       y="5567"
       x="8422"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1926">WE3</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1942"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id152">
         <rect
   style="fill:none;stroke:none"
   id="rect1937"
   height="274"
   width="31"
   y="4873"
   x="7882"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path1939"
   d="m 7895,5145 4,-271" />
        </g>
       </g>
       <g
   id="g1951"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id153">
         <rect
   style="fill:none;stroke:none"
   id="rect1944"
   height="293"
   width="477"
   y="5129"
   x="7658"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1946"
   d="m 7896,5408 225,-265 h -450 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1948"
   d="m 7896,5408 225,-265 h -450 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2003"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g1962"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id154">
         <rect
   style="fill:none;stroke:none"
   id="rect1955"
   height="968"
   width="531"
   y="4970"
   x="14880"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path1957"
   d="m 14893,4984 504,125 v 689 l -504,126 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path1959"
   d="m 14893,4984 504,125 v 689 l -504,126 z" />
        </g>
       </g>
       <g
   id="g1975"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id155">
         <rect
   style="fill:none;stroke:none"
   id="rect1964"
   height="226"
   width="331"
   y="5094"
   x="14969"
   class="BoundingBox" />
         <text
   id="text1972"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan1970"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1968"
       y="5316"
       x="14957"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1966">00</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g1988"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id156">
         <rect
   style="fill:none;stroke:none"
   id="rect1977"
   height="226"
   width="319"
   y="5599"
   x="14979"
   class="BoundingBox" />
         <text
   id="text1985"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan1983"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1981"
       y="5821"
       x="14955"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1979">10</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g2001"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id157">
         <rect
   style="fill:none;stroke:none"
   id="rect1990"
   height="226"
   width="328"
   y="5356"
   x="14969"
   class="BoundingBox" />
         <text
   id="text1998"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan1996"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan1994"
       y="5578"
       x="14957"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan1992">01</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2053"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g2012"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id158">
         <rect
   style="fill:none;stroke:none"
   id="rect2005"
   height="968"
   width="532"
   y="6108"
   x="15224"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2007"
   d="m 15238,6122 504,125 v 689 l -504,126 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2009"
   d="m 15238,6122 504,125 v 689 l -504,126 z" />
        </g>
       </g>
       <g
   id="g2025"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id159">
         <rect
   style="fill:none;stroke:none"
   id="rect2014"
   height="226"
   width="331"
   y="6232"
   x="15314"
   class="BoundingBox" />
         <text
   id="text2022"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan2020"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan2018"
       y="6454"
       x="15302"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2016">00</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g2038"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id160">
         <rect
   style="fill:none;stroke:none"
   id="rect2027"
   height="226"
   width="328"
   y="6494"
   x="15314"
   class="BoundingBox" />
         <text
   id="text2035"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan2033"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan2031"
       y="6716"
       x="15302"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2029">01</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g2051"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id161">
         <rect
   style="fill:none;stroke:none"
   id="rect2040"
   height="226"
   width="319"
   y="6737"
   x="15324"
   class="BoundingBox" />
         <text
   id="text2048"
   class="TextShape"><tspan
     style="font-weight:400;font-size:318px;font-family:'Liberation Sans', sans-serif"
     id="tspan2046"
     font-weight="400"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan2044"
       y="6959"
       x="15300"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2042">10</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2060"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id162">
        <rect
   style="fill:none;stroke:none"
   id="rect2055"
   height="2884"
   width="362"
   y="8939"
   x="22450"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2057"
   d="m 22512,9001 h 230 v 99 h 7 v 2660" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2067"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id163">
        <rect
   style="fill:none;stroke:none"
   id="rect2062"
   height="40"
   width="1339"
   y="5638"
   x="18207"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2064"
   d="m 18208,5651 1336,13" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2074"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id164">
        <rect
   style="fill:none;stroke:none"
   id="rect2069"
   height="1198"
   width="31"
   y="4464"
   x="19527"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2071"
   d="m 19544,4465 -4,1195" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2081"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id165">
        <rect
   style="fill:none;stroke:none"
   id="rect2076"
   height="32"
   width="881"
   y="4465"
   x="19565"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2078"
   d="m 19566,4478 878,5" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2105"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g2090"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id166">
         <rect
   style="fill:none;stroke:none"
   id="rect2083"
   height="1721"
   width="888"
   y="5170"
   x="17860"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2085"
   d="m 17873,5183 861,224 v 1258 l -822,212 v -742 l 411,-92 -424,-93 c -4,-256 -13,-767 -26,-767 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2087"
   d="m 17873,5183 861,224 v 1258 l -822,212 v -742 l 411,-92 -424,-93 c -4,-256 -13,-767 -26,-767 z" />
        </g>
       </g>
       <g
   id="g2103"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id167">
         <rect
   style="fill:none;stroke:none"
   id="rect2092"
   height="292"
   width="781"
   y="6273"
   x="17968"
   class="BoundingBox" />
         <text
   id="text2100"
   class="TextShape"><tspan
     style="font-weight:400;font-size:388px;font-family:'Liberation Sans', sans-serif"
     id="tspan2098"
     font-weight="400"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2096"
       y="6540"
       x="17981"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2094">ALU</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2132"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g2114"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id168">
         <rect
   style="fill:none;stroke:none"
   id="rect2107"
   height="9932"
   width="416"
   y="1324"
   x="18908"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2109"
   d="m 19116,11242 h -195 V 1337 h 389 v 9905 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2111"
   d="m 19116,11242 h -195 V 1337 h 389 v 9905 z" />
        </g>
       </g>
       <g
   id="g2121"
   class="com.sun.star.drawing.LineShape">
        <g
   id="id169">
         <rect
   style="fill:none;stroke:none"
   id="rect2116"
   height="305"
   width="27"
   y="1034"
   x="19103"
   class="BoundingBox" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2118"
   d="M 19116,1338 V 1034" />
        </g>
       </g>
       <g
   id="g2130"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id170">
         <rect
   style="fill:none;stroke:none"
   id="rect2123"
   height="293"
   width="416"
   y="1324"
   x="18908"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2125"
   d="m 19115,1602 195,-265 h -389 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2127"
   d="m 19115,1602 195,-265 h -389 z" />
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2145"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id171">
        <rect
   style="fill:none;stroke:none"
   id="rect2134"
   height="247"
   width="610"
   y="4941"
   x="19660"
   class="BoundingBox" />
        <text
   id="text2142"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2140"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2138"
       y="5184"
       x="19652"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2136">Zero</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2158"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id172">
        <rect
   style="fill:none;stroke:none"
   id="rect2147"
   height="306"
   width="1335"
   y="3985"
   x="13251"
   class="BoundingBox" />
        <text
   id="text2155"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2153"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2151"
       y="4266"
       x="13264"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2149">BranchE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2171"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id173">
        <rect
   style="fill:none;stroke:none"
   id="rect2160"
   height="279"
   width="1261"
   y="3803"
   x="19365"
   class="BoundingBox" />
        <text
   id="text2168"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2166"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2164"
       y="4059"
       x="19377"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2162">BranchM</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2178"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id174">
        <rect
   style="fill:none;stroke:none"
   id="rect2173"
   height="129"
   width="10467"
   y="12724"
   x="14750"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2175"
   d="m 14751,12786 10464,4" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2185"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id175">
        <rect
   style="fill:none;stroke:none"
   id="rect2180"
   height="121"
   width="977"
   y="9430"
   x="6568"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#3465a4;stroke-width:120;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2182"
   d="m 6628,9490 h 856" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2234"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g2206"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id176">
         <rect
   style="fill:none;stroke:none"
   id="rect2187"
   height="2660"
   width="1601"
   y="5055"
   x="3202"
   class="BoundingBox" />
         <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2189"
   d="M 4002,7701 H 3215 V 5068 h 1574 v 2633 z" />
         <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2191"
   d="M 4002,7701 H 3215 V 5068 h 1574 v 2633 z" />
         <text
   id="text2203"
   class="TextShape"><tspan
     style="font-weight:400;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2201"
     font-weight="400"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2195"
       y="6611"
       x="3265"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2193">Instruction </tspan></tspan><tspan
       id="tspan2199"
       y="7034"
       x="3265"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2197">Memory</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g2219"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id177">
         <rect
   style="fill:none;stroke:none"
   id="rect2208"
   height="292"
   width="283"
   y="5619"
   x="3275"
   class="BoundingBox" />
         <text
   id="text2216"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2214"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2212"
       y="5910"
       x="3275"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2210">A</tspan></tspan></tspan></text>

        </g>
       </g>
       <g
   id="g2232"
   class="com.sun.star.drawing.CustomShape">
        <g
   id="id178">
         <rect
   style="fill:none;stroke:none"
   id="rect2221"
   height="292"
   width="558"
   y="5606"
   x="4152"
   class="BoundingBox" />
         <text
   id="text2229"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2227"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2225"
       y="5897"
       x="4118"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2223">RD</tspan></tspan></tspan></text>

        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2247"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id179">
        <rect
   style="fill:none;stroke:none"
   id="rect2236"
   height="332"
   width="1798"
   y="3907"
   x="4703"
   class="BoundingBox" />
        <text
   id="text2244"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2242"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2240"
       y="4178"
       x="4696"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2238">31:25, 14:12 </tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2279"
   class="Group"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="g2277"
   class="Group">
        <g
   id="g2256"
   class="com.sun.star.drawing.CustomShape">
         <g
   id="id180">
          <rect
   style="fill:none;stroke:none"
   id="rect2249"
   height="990"
   width="1518"
   y="8808"
   x="7471"
   class="BoundingBox" />
          <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2251"
   d="m 7484,9783 h 1491 v -962 l -1486,397 c -2,188 -4,376 -5,565 z" />
          <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2253"
   d="m 7484,9783 h 1491 v -962 l -1486,397 c -2,188 -4,376 -5,565 z" />
         </g>
        </g>
        <g
   id="g2275"
   class="com.sun.star.drawing.CustomShape">
         <g
   id="id181">
          <rect
   style="fill:none;stroke:none"
   id="rect2258"
   height="564"
   width="1150"
   y="9101"
   x="7772"
   class="BoundingBox" />
          <text
   id="text2272"
   class="TextShape"><tspan
     style="font-weight:400;font-size:353px;font-family:'Liberation Sans', sans-serif"
     id="tspan2264"
     font-weight="400"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2262"
       y="9344"
       x="8227"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2260">Imm</tspan></tspan></tspan><tspan
     style="font-weight:400;font-size:353px;font-family:'Liberation Sans', sans-serif"
     id="tspan2270"
     font-weight="400"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2268"
       y="9661"
       x="7758"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2266">decode</tspan></tspan></tspan></text>

         </g>
        </g>
       </g>
      </g><g
   style="visibility:hidden"
   id="g2298"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id182">
        <rect
   style="fill:none;stroke:none"
   id="rect2281"
   height="671"
   width="1624"
   y="8689"
   x="6787"
   class="BoundingBox" />
        <text
   id="text2295"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2287"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2285"
       y="8936"
       x="6781"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2283">31:25, 24:20</tspan></tspan></tspan><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2293"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2291"
       y="9359"
       x="6781"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2289">11:7</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2311"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id183">
        <rect
   style="fill:none;stroke:none"
   id="rect2300"
   height="298"
   width="1314"
   y="8840"
   x="9322"
   class="BoundingBox" />
        <text
   id="text2308"
   class="TextShape"><tspan
     style="font-weight:700;font-size:318px;font-family:'Arial Narrow', sans-serif"
     id="tspan2306"
     font-weight="700"
     font-size="318px"
     class="TextParagraph"><tspan
       id="tspan2304"
       y="9070"
       x="9333"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2302">SignImmD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2328"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id184">
        <rect
   style="fill:none;stroke:none"
   id="rect2313"
   height="332"
   width="2042"
   y="8098"
   x="10202"
   class="BoundingBox" />
        <text
   id="text2325"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2323"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2321"
       y="8354"
       x="10202"
       class="TextPosition"><tspan
         style="font-size:318px;fill:#000000;stroke:none"
         id="tspan2315"
         font-size="318px"> </tspan><tspan
         style="fill:#000000;stroke:none"
         id="tspan2317">WriteRegD 4:0</tspan><tspan
         style="font-size:318px;fill:#000000;stroke:none"
         id="tspan2319"
         font-size="318px"> </tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2341"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id185">
        <rect
   style="fill:none;stroke:none"
   id="rect2330"
   height="276"
   width="781"
   y="10069"
   x="11257"
   class="BoundingBox" />
        <text
   id="text2338"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2336"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2334"
       y="10340"
       x="11236"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2332">Rs2D</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2354"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id186">
        <rect
   style="fill:none;stroke:none"
   id="rect2343"
   height="276"
   width="764"
   y="10092"
   x="13146"
   class="BoundingBox" />
        <text
   id="text2351"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2349"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2347"
       y="10363"
       x="13125"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2345">Rs2E</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2367"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id187">
        <rect
   style="fill:none;stroke:none"
   id="rect2356"
   height="251"
   width="715"
   y="9633"
   x="6751"
   class="BoundingBox" />
        <text
   id="text2364"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2362"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2360"
       y="9880"
       x="6733"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2358">19:15</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2380"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id188">
        <rect
   style="fill:none;stroke:none"
   id="rect2369"
   height="251"
   width="720"
   y="10118"
   x="6787"
   class="BoundingBox" />
        <text
   id="text2377"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2375"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2373"
       y="10365"
       x="6777"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2371">24:20</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2387"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id189">
        <rect
   style="fill:none;stroke:none"
   id="rect2382"
   height="5124"
   width="18634"
   y="6880"
   x="5667"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2384"
   d="M 7542,6893 H 5680 v 5097 H 24287 V 8471 h -631" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2400"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id190">
        <rect
   style="fill:none;stroke:none"
   id="rect2389"
   height="244"
   width="534"
   y="8170"
   x="6802"
   class="BoundingBox" />
        <text
   id="text2397"
   class="TextShape"><tspan
     style="font-weight:700;font-size:353px;font-family:'Arial Narrow', sans-serif"
     id="tspan2395"
     font-weight="700"
     font-size="353px"
     class="TextParagraph"><tspan
       id="tspan2393"
       y="8413"
       x="6784"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2391">11:7</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2413"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id191">
        <rect
   style="fill:none;stroke:none"
   id="rect2402"
   height="364"
   width="1585"
   y="8757"
   x="16889"
   class="BoundingBox" />
        <text
   id="text2410"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2408"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2406"
       y="9038"
       x="16902"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2404">SignImmE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2422"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id192">
        <rect
   style="fill:none;stroke:none"
   id="rect2415"
   height="153"
   width="160"
   y="9135"
   x="16373"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2417"
   d="m 16531,9211 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2419"
   d="m 16531,9211 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2431"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id193">
        <rect
   style="fill:none;stroke:none"
   id="rect2424"
   height="239"
   width="239"
   y="9097"
   x="16339"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2426"
   d="m 16576,9216 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2428"
   d="m 16576,9216 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2438"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id194">
        <rect
   style="fill:none;stroke:none"
   id="rect2433"
   height="903"
   width="1336"
   y="9224"
   x="16390"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2435"
   d="M 17663,10064 H 16452 V 9286" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2445"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id195">
        <rect
   style="fill:none;stroke:none"
   id="rect2440"
   height="5539"
   width="4045"
   y="5444"
   x="750"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2442"
   d="M 1017,5506 H 812 v 5414 H 4732 V 9253 h -290" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2458"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id196">
        <rect
   style="fill:none;stroke:none"
   id="rect2447"
   height="276"
   width="1002"
   y="10528"
   x="6143"
   class="BoundingBox" />
        <text
   id="text2455"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2453"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2451"
       y="10799"
       x="6122"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2449">PC+4D</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2471"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-16.671207,80.096575)">
       <g
   id="id197">
        <rect
   style="fill:none;stroke:none"
   id="rect2460"
   height="306"
   width="1564"
   y="9817"
   x="19349"
   class="BoundingBox" />
        <text
   id="text2468"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2466"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2464"
       y="10098"
       x="19362"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2462">PCBranch</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2484"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id198">
        <rect
   style="fill:none;stroke:none"
   id="rect2473"
   height="286"
   width="1453"
   y="10066"
   x="932"
   class="BoundingBox" />
        <text
   id="text2481"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2479"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2477"
       y="10347"
       x="911"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2475">PC+4F</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2493"
   class="com.sun.star.drawing.PolyPolygonShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id199">
        <rect
   style="fill:none;stroke:none"
   id="rect2486"
   height="1968"
   width="950"
   y="9699"
   x="17643"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2488"
   d="m 17663,9719 v 757 l 343,206 -343,206 v 758 l 909,-413 v -1101 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:40;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2490"
   d="m 17663,9719 v 757 l 343,206 -343,206 v 758 l 909,-413 v -1101 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2506"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id200">
        <rect
   style="fill:none;stroke:none"
   id="rect2495"
   height="276"
   width="985"
   y="10551"
   x="16159"
   class="BoundingBox" />
        <text
   id="text2503"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2501"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2499"
       y="10822"
       x="16138"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2497">PC+4E</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2519"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id201">
        <rect
   style="fill:none;stroke:none"
   id="rect2508"
   height="244"
   width="242"
   y="10587"
   x="18158"
   class="BoundingBox" />
        <text
   id="text2516"
   class="TextShape"><tspan
     style="font-weight:400;font-size:494px;font-family:'Liberation Sans', sans-serif"
     id="tspan2514"
     font-weight="400"
     font-size="494px"
     class="TextParagraph"><tspan
       id="tspan2512"
       y="10873"
       x="18134"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2510">+</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2526"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id202">
        <rect
   style="fill:none;stroke:none"
   id="rect2521"
   height="125"
   width="374"
   y="8628"
   x="3293"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2523"
   d="M 3666,8690 H 3293" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2535"
   class="com.sun.star.drawing.PolyPolygonShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id203">
        <rect
   style="fill:none;stroke:none"
   id="rect2528"
   height="1968"
   width="951"
   y="8270"
   x="3513"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2530"
   d="m 3534,8290 v 757 l 343,206 -343,206 v 758 l 909,-413 V 8703 Z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:40;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2532"
   d="m 3534,8290 v 757 l 343,206 -343,206 v 758 l 909,-413 V 8703 Z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2548"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id204">
        <rect
   style="fill:none;stroke:none"
   id="rect2537"
   height="244"
   width="242"
   y="9126"
   x="4002"
   class="BoundingBox" />
        <text
   id="text2545"
   class="TextShape"><tspan
     style="font-weight:400;font-size:494px;font-family:'Liberation Sans', sans-serif"
     id="tspan2543"
     font-weight="400"
     font-size="494px"
     class="TextParagraph"><tspan
       id="tspan2541"
       y="9412"
       x="3978"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2539">+</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2561"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id205">
        <rect
   style="fill:none;stroke:none"
   id="rect2550"
   height="268"
   width="173"
   y="8563"
   x="3039"
   class="BoundingBox" />
        <text
   id="text2558"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2556"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2554"
       y="8830"
       x="3035"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2552">4</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2568"
   class="com.sun.star.drawing.LineShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id206">
        <rect
   style="fill:none;stroke:none"
   id="rect2563"
   height="125"
   width="706"
   y="9785"
   x="2817"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:miter"
   inkscape:connector-curvature="0"
   id="path2565"
   d="m 2817,9847 h 705" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2581"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id207">
        <rect
   style="fill:none;stroke:none"
   id="rect2570"
   height="163"
   width="375"
   y="11506"
   x="12683"
   class="BoundingBox" />
        <text
   id="text2578"
   class="TextShape"><tspan
     style="font-weight:700;font-size:212px;font-family:'Arial Narrow', sans-serif"
     id="tspan2576"
     font-weight="700"
     font-size="212px"
     class="TextParagraph"><tspan
       id="tspan2574"
       y="11654"
       x="12690"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2572">CLR</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2594"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id208">
        <rect
   style="fill:none;stroke:none"
   id="rect2583"
   height="147"
   width="220"
   y="5967"
   x="2183"
   class="BoundingBox" />
        <text
   id="text2591"
   class="TextShape"><tspan
     style="font-weight:700;font-size:212px;font-family:'Arial Narrow', sans-serif"
     id="tspan2589"
     font-weight="700"
     font-size="212px"
     class="TextParagraph"><tspan
       id="tspan2587"
       y="6113"
       x="2172"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2585">EN</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2607"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id209">
        <rect
   style="fill:none;stroke:none"
   id="rect2596"
   height="147"
   width="220"
   y="11582"
   x="5022"
   class="BoundingBox" />
        <text
   id="text2604"
   class="TextShape"><tspan
     style="font-weight:700;font-size:212px;font-family:'Arial Narrow', sans-serif"
     id="tspan2602"
     font-weight="700"
     font-size="212px"
     class="TextParagraph"><tspan
       id="tspan2600"
       y="11728"
       x="5011"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2598">EN</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2616"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id210">
        <rect
   style="fill:none;stroke:none"
   id="rect2609"
   height="125"
   width="117"
   y="12725"
   x="5901"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2611"
   d="m 5959,12848 h -57 v -122 h 114 v 122 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2613"
   d="m 5959,12848 h -57 v -122 h 114 v 122 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2623"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id211">
        <rect
   style="fill:none;stroke:none"
   id="rect2618"
   height="5442"
   width="1709"
   y="7347"
   x="5897"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2620"
   d="M 5959,12726 V 7409 h 1584" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2632"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id212">
        <rect
   style="fill:none;stroke:none"
   id="rect2625"
   height="967"
   width="533"
   y="9592"
   x="21489"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2627"
   d="m 21502,9605 505,125 v 689 l -505,126 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2629"
   d="m 21502,9605 505,125 v 689 l -505,126 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2645"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id213">
        <rect
   style="fill:none;stroke:none"
   id="rect2634"
   height="292"
   width="184"
   y="9738"
   x="21583"
   class="BoundingBox" />
        <text
   id="text2642"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2640"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2638"
       y="10029"
       x="21551"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2636">1</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2658"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id214">
        <rect
   style="fill:none;stroke:none"
   id="rect2647"
   height="300"
   width="204"
   y="10160"
   x="21567"
   class="BoundingBox" />
        <text
   id="text2655"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2653"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2651"
       y="10455"
       x="21551"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2649">0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2665"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id215">
        <rect
   style="fill:none;stroke:none"
   id="rect2660"
   height="3939"
   width="698"
   y="5990"
   x="20870"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2662"
   d="m 20932,6052 h 20 v 3814 h 553" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2674"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id216">
        <rect
   style="fill:none;stroke:none"
   id="rect2667"
   height="125"
   width="117"
   y="11759"
   x="22691"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2669"
   d="m 22749,11882 h -57 v -122 h 114 v 122 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2671"
   d="m 22749,11882 h -57 v -122 h 114 v 122 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2681"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id217">
        <rect
   style="fill:none;stroke:none"
   id="rect2676"
   height="6227"
   width="8065"
   y="5657"
   x="14690"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2678"
   d="m 14894,5719 h -142 v 6102 h 7940" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2690"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id218">
        <rect
   style="fill:none;stroke:none"
   id="rect2683"
   height="967"
   width="533"
   y="8517"
   x="21994"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2685"
   d="m 22007,8530 505,125 v 689 l -505,126 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2687"
   d="m 22007,8530 505,125 v 689 l -505,126 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2703"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id219">
        <rect
   style="fill:none;stroke:none"
   id="rect2692"
   height="300"
   width="204"
   y="8659"
   x="22072"
   class="BoundingBox" />
        <text
   id="text2700"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2698"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2696"
       y="8954"
       x="22056"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2694">0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2716"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id220">
        <rect
   style="fill:none;stroke:none"
   id="rect2705"
   height="292"
   width="184"
   y="9089"
   x="22088"
   class="BoundingBox" />
        <text
   id="text2713"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2711"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2709"
       y="9380"
       x="22056"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2707">1</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2725"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id221">
        <rect
   style="fill:none;stroke:none"
   id="rect2718"
   height="125"
   width="117"
   y="10857"
   x="17171"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2720"
   d="m 17229,10980 h -57 v -122 h 114 v 122 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2722"
   d="m 17229,10980 h -57 v -122 h 114 v 122 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2732"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id222">
        <rect
   style="fill:none;stroke:none"
   id="rect2727"
   height="1772"
   width="4893"
   y="9149"
   x="17167"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2729"
   d="M 17229,10858 V 9211 h 4768" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2741"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id223">
        <rect
   style="fill:none;stroke:none"
   id="rect2734"
   height="239"
   width="239"
   y="8665"
   x="20857"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2736"
   d="m 21094,8784 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2738"
   d="m 21094,8784 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2750"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id224">
        <rect
   style="fill:none;stroke:none"
   id="rect2743"
   height="153"
   width="160"
   y="8706"
   x="20883"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2745"
   d="m 21041,8782 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2747"
   d="m 21041,8782 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2757"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id225">
        <rect
   style="fill:none;stroke:none"
   id="rect2752"
   height="127"
   width="1082"
   y="8721"
   x="20978"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2754"
   d="m 21040,8783 h 517 v 2 h 440" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2766"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id226">
        <rect
   style="fill:none;stroke:none"
   id="rect2759"
   height="967"
   width="533"
   y="5186"
   x="16083"
   class="BoundingBox" />
        <path
   style="fill:#daedef;stroke:none"
   inkscape:connector-curvature="0"
   id="path2761"
   d="m 16097,5199 505,125 v 689 l -505,126 z" />
        <path
   style="fill:none;stroke:#000000;stroke-width:26;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2763"
   d="m 16097,5199 505,125 v 689 l -505,126 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2779"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id227">
        <rect
   style="fill:none;stroke:none"
   id="rect2768"
   height="300"
   width="204"
   y="5328"
   x="16162"
   class="BoundingBox" />
        <text
   id="text2776"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2774"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2772"
       y="5623"
       x="16146"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2770">0</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2792"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id228">
        <rect
   style="fill:none;stroke:none"
   id="rect2781"
   height="292"
   width="184"
   y="5758"
   x="16178"
   class="BoundingBox" />
        <text
   id="text2789"
   class="TextShape"><tspan
     style="font-weight:400;font-size:423px;font-family:'Liberation Sans', sans-serif"
     id="tspan2787"
     font-weight="400"
     font-size="423px"
     class="TextParagraph"><tspan
       id="tspan2785"
       y="6049"
       x="16146"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2783">1</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2801"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id229">
        <rect
   style="fill:none;stroke:none"
   id="rect2794"
   height="153"
   width="160"
   y="11205"
   x="15819"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2796"
   d="m 15977,11281 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2798"
   d="m 15977,11281 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2808"
   class="com.sun.star.drawing.ConnectorShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id230">
        <rect
   style="fill:none;stroke:none"
   id="rect2803"
   height="5453"
   width="324"
   y="5817"
   x="15836"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#000000;stroke-width:123;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2805"
   d="M 15898,11207 V 8820 h 3 V 5879 h 196" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2815"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id231">
        <rect
   style="fill:none;stroke:none"
   id="rect2810"
   height="1322"
   width="1531"
   y="4990"
   x="15461"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#dc2300;stroke-width:100;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2812"
   d="m 16941,5651 c 0,107 -33,212 -96,305 -62,93 -153,170 -261,223 -109,54 -232,82 -358,82 -125,0 -248,-28 -357,-82 -108,-53 -199,-130 -261,-223 -63,-93 -96,-198 -96,-305 0,-108 33,-213 96,-306 62,-93 153,-170 261,-223 109,-54 232,-82 357,-82 126,0 249,28 358,82 108,53 199,130 261,223 63,93 96,198 96,305 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2822"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id232">
        <rect
   style="fill:none;stroke:none"
   id="rect2817"
   height="1323"
   width="1531"
   y="8350"
   x="21401"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#dc2300;stroke-width:100;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2819"
   d="m 22881,9011 c 0,107 -33,212 -96,305 -62,93 -153,170 -261,223 -109,54 -232,82 -357,82 -126,0 -249,-28 -358,-82 -108,-53 -199,-130 -261,-223 -63,-93 -96,-198 -96,-305 0,-108 33,-213 96,-306 62,-93 153,-170 261,-223 109,-54 232,-82 358,-82 125,0 248,28 357,82 108,53 199,130 261,223 63,93 96,198 96,306 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2829"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id233">
        <rect
   style="fill:none;stroke:none"
   id="rect2824"
   height="1322"
   width="1531"
   y="9450"
   x="20921"
   class="BoundingBox" />
        <path
   style="fill:none;stroke:#dc2300;stroke-width:100;stroke-linejoin:round"
   inkscape:connector-curvature="0"
   id="path2826"
   d="m 22401,10111 c 0,107 -33,212 -96,305 -62,93 -153,170 -261,223 -109,54 -232,82 -357,82 -126,0 -249,-28 -358,-82 -108,-53 -199,-130 -261,-223 -63,-93 -96,-198 -96,-305 0,-108 33,-213 96,-306 62,-93 153,-170 261,-223 109,-54 232,-82 358,-82 125,0 248,28 357,82 108,53 199,130 261,223 63,93 96,198 96,306 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2842"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id234">
        <rect
   style="fill:none;stroke:none"
   id="rect2831"
   height="363"
   width="1041"
   y="7941"
   x="21303"
   class="BoundingBox" />
        <text
   id="text2839"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2837"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2835"
       y="8222"
       x="21316"
       class="TextPosition"><tspan
         style="fill:#dc2300;stroke:none"
         id="tspan2833">JAL(R)</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2855"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id235">
        <rect
   style="fill:none;stroke:none"
   id="rect2844"
   height="292"
   width="857"
   y="10921"
   x="21141"
   class="BoundingBox" />
        <text
   id="text2852"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2850"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2848"
       y="11188"
       x="21154"
       class="TextPosition"><tspan
         style="fill:#dc2300;stroke:none"
         id="tspan2846">JALR</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2868"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id236">
        <rect
   style="fill:none;stroke:none"
   id="rect2857"
   height="292"
   width="857"
   y="4585"
   x="15657"
   class="BoundingBox" />
        <text
   id="text2865"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2863"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2861"
       y="4852"
       x="15670"
       class="TextPosition"><tspan
         style="fill:#dc2300;stroke:none"
         id="tspan2859">JALR</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2877"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id237">
        <rect
   style="fill:none;stroke:none"
   id="rect2870"
   height="153"
   width="160"
   y="9781"
   x="2734"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2872"
   d="m 2892,9857 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2874"
   d="m 2892,9857 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2886"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id238">
        <rect
   style="fill:none;stroke:none"
   id="rect2879"
   height="239"
   width="239"
   y="9743"
   x="2700"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2881"
   d="m 2937,9862 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2883"
   d="m 2937,9862 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2895"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id239">
        <rect
   style="fill:none;stroke:none"
   id="rect2888"
   height="153"
   width="160"
   y="10821"
   x="4644"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2890"
   d="m 4802,10897 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2892"
   d="m 4802,10897 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2904"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id240">
        <rect
   style="fill:none;stroke:none"
   id="rect2897"
   height="239"
   width="239"
   y="10783"
   x="4610"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2899"
   d="m 4847,10902 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2901"
   d="m 4847,10902 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2917"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id241">
        <rect
   style="fill:none;stroke:none"
   id="rect2906"
   height="296"
   width="696"
   y="11511"
   x="6275"
   class="BoundingBox" />
        <text
   id="text2914"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2912"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2910"
       y="11782"
       x="6288"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2908">PCD</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2930"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id242">
        <rect
   style="fill:none;stroke:none"
   id="rect2919"
   height="296"
   width="679"
   y="11401"
   x="16361"
   class="BoundingBox" />
        <text
   id="text2927"
   class="TextShape"><tspan
     style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
     id="tspan2925"
     font-weight="700"
     font-size="388px"
     class="TextParagraph"><tspan
       id="tspan2923"
       y="11672"
       x="16374"
       class="TextPosition"><tspan
         style="fill:#000000;stroke:none"
         id="tspan2921">PCE</tspan></tspan></tspan></text>

       </g>
      </g><g
   style="visibility:hidden"
   id="g2939"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id243">
        <rect
   style="fill:none;stroke:none"
   id="rect2932"
   height="153"
   width="160"
   y="5671"
   x="2734"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2934"
   d="m 2892,5747 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2936"
   d="m 2892,5747 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2948"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id244">
        <rect
   style="fill:none;stroke:none"
   id="rect2941"
   height="239"
   width="239"
   y="5633"
   x="2700"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2943"
   d="m 2937,5752 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2945"
   d="m 2937,5752 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2957"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id245">
        <rect
   style="fill:none;stroke:none"
   id="rect2950"
   height="153"
   width="160"
   y="6771"
   x="14684"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2952"
   d="m 14842,6847 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2954"
   d="m 14842,6847 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2966"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id246">
        <rect
   style="fill:none;stroke:none"
   id="rect2959"
   height="239"
   width="239"
   y="6733"
   x="14650"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2961"
   d="m 14887,6852 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2963"
   d="m 14887,6852 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2975"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id247">
        <rect
   style="fill:none;stroke:none"
   id="rect2968"
   height="153"
   width="160"
   y="6499"
   x="14451"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2970"
   d="m 14609,6575 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2972"
   d="m 14609,6575 c 0,13 -4,26 -11,38 -6,11 -16,20 -28,27 -12,7 -26,10 -39,10 -14,0 -28,-3 -40,-10 -12,-7 -22,-16 -28,-27 -7,-12 -11,-25 -11,-38 0,-13 4,-26 11,-37 6,-12 16,-21 28,-28 12,-7 26,-10 40,-10 13,0 27,3 39,10 12,7 22,16 28,28 7,11 11,24 11,37 z" />
       </g>
      </g><g
   style="visibility:hidden"
   id="g2984"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,-17.471207,-15.403425)">
       <g
   id="id248">
        <rect
   style="fill:none;stroke:none"
   id="rect2977"
   height="239"
   width="239"
   y="6472"
   x="14410"
   class="BoundingBox" />
        <path
   style="fill:#000000;stroke:none"
   inkscape:connector-curvature="0"
   id="path2979"
   d="m 14647,6591 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
        <path
   style="fill:none;stroke:#3465a4"
   inkscape:connector-curvature="0"
   id="path2981"
   d="m 14647,6591 c 0,21 -5,41 -16,59 -10,18 -25,33 -43,43 -18,11 -38,16 -59,16 -21,0 -41,-5 -59,-16 -18,-10 -33,-25 -43,-43 -11,-18 -16,-38 -16,-59 0,-21 5,-41 16,-59 10,-18 25,-33 43,-43 18,-11 38,-16 59,-16 21,0 41,5 59,16 18,10 33,25 43,43 11,18 16,38 16,59 z" />
       </g>
      </g>
 <script
   type="text/ecmascript"
   id="script2994"><![CDATA[


(function(window, document, exportName, undefined) {
'use strict';

var VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];
var TEST_ELEMENT = document.createElement('div');

var TYPE_FUNCTION = 'function';

var round = Math.round;
var abs = Math.abs;
var now = Date.now;

function setTimeoutContext(fn, timeout, context) {
return setTimeout(bindFn(fn, context), timeout);
}

function invokeArrayArg(arg, fn, context) {
if (Array.isArray(arg)) {
each(arg, context[fn], context);
return true;
}
return false;
}

function each(obj, iterator, context) {
var i;

if (!obj) {
return;
}

if (obj.forEach) {
obj.forEach(iterator, context);
} else if (obj.length !== undefined) {
i = 0;
while (i < obj.length) {
iterator.call(context, obj[i], i, obj);
i++;
}
} else {
for (i in obj) {
obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);
}
}
}

function deprecate(method, name, message) {
var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\n' + message + ' AT \n';
return function() {
var e = new Error('get-stack-trace');
var stack = e && e.stack ? e.stack.replace(/^[^\(]+?[\n$]/gm, '')
.replace(/^\s+at\s+/gm, '')
.replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';

var log = window.console && (window.console.warn || window.console.log);
if (log) {
log.call(window.console, deprecationMessage, stack);
}
return method.apply(this, arguments);
};
}

var assign;
if (typeof Object.assign !== 'function') {
assign = function assign(target) {
if (target === undefined || target === null) {
throw new TypeError('Cannot convert undefined or null to object');
}

var output = Object(target);
for (var index = 1; index < arguments.length; index++) {
var source = arguments[index];
if (source !== undefined && source !== null) {
for (var nextKey in source) {
if (source.hasOwnProperty(nextKey)) {
output[nextKey] = source[nextKey];
}
}
}
}
return output;
};
} else {
assign = Object.assign;
}

var extend = deprecate(function extend(dest, src, merge) {
var keys = Object.keys(src);
var i = 0;
while (i < keys.length) {
if (!merge || (merge && dest[keys[i]] === undefined)) {
dest[keys[i]] = src[keys[i]];
}
i++;
}
return dest;
}, 'extend', 'Use `assign`.');

var merge = deprecate(function merge(dest, src) {
return extend(dest, src, true);
}, 'merge', 'Use `assign`.');

function inherit(child, base, properties) {
var baseP = base.prototype,
childP;

childP = child.prototype = Object.create(baseP);
childP.constructor = child;
childP._super = baseP;

if (properties) {
assign(childP, properties);
}
}

function bindFn(fn, context) {
return function boundFn() {
return fn.apply(context, arguments);
};
}

function boolOrFn(val, args) {
if (typeof val == TYPE_FUNCTION) {
return val.apply(args ? args[0] || undefined : undefined, args);
}
return val;
}

function ifUndefined(val1, val2) {
return (val1 === undefined) ? val2 : val1;
}

function addEventListeners(target, types, handler) {
each(splitStr(types), function(type) {
target.addEventListener(type, handler, false);
});
}

function removeEventListeners(target, types, handler) {
each(splitStr(types), function(type) {
target.removeEventListener(type, handler, false);
});
}

function hasParent(node, parent) {
while (node) {
if (node == parent) {
return true;
}
node = node.parentNode;
}
return false;
}

function inStr(str, find) {
return str.indexOf(find) > -1;
}

function splitStr(str) {
return str.trim().split(/\s+/g);
}

function inArray(src, find, findByKey) {
if (src.indexOf && !findByKey) {
return src.indexOf(find);
} else {
var i = 0;
while (i < src.length) {
if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {
return i;
}
i++;
}
return -1;
}
}

function toArray(obj) {
return Array.prototype.slice.call(obj, 0);
}

function uniqueArray(src, key, sort) {
var results = [];
var values = [];
var i = 0;

while (i < src.length) {
var val = key ? src[i][key] : src[i];
if (inArray(values, val) < 0) {
results.push(src[i]);
}
values[i] = val;
i++;
}

if (sort) {
if (!key) {
results = results.sort();
} else {
results = results.sort(function sortUniqueArray(a, b) {
return a[key] > b[key];
});
}
}

return results;
}

function prefixed(obj, property) {
if (obj === undefined) {
return undefined;
}

var prefix, prop;
var camelProp = property[0].toUpperCase() + property.slice(1);

var i = 0;
while (i < VENDOR_PREFIXES.length) {
prefix = VENDOR_PREFIXES[i];
prop = (prefix) ? prefix + camelProp : property;

if (prop in obj) {
return prop;
}
i++;
}
return undefined;
}

var _uniqueId = 1;
function uniqueId() {
return _uniqueId++;
}

function getWindowForElement(element) {
var doc = element.ownerDocument || element;
return (doc.defaultView || doc.parentWindow || window);
}

var MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;

var SUPPORT_TOUCH = ('ontouchstart' in window);
var SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;
var SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);

var INPUT_TYPE_TOUCH = 'touch';
var INPUT_TYPE_PEN = 'pen';
var INPUT_TYPE_MOUSE = 'mouse';
var INPUT_TYPE_KINECT = 'kinect';

var COMPUTE_INTERVAL = 25;

var INPUT_START = 1;
var INPUT_MOVE = 2;
var INPUT_END = 4;
var INPUT_CANCEL = 8;

var DIRECTION_NONE = 1;
var DIRECTION_LEFT = 2;
var DIRECTION_RIGHT = 4;
var DIRECTION_UP = 8;
var DIRECTION_DOWN = 16;

var DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;
var DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;
var DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;

var PROPS_XY = ['x', 'y'];
var PROPS_CLIENT_XY = ['clientX', 'clientY'];

function Input(manager, callback) {
var self = this;
this.manager = manager;
this.callback = callback;
this.element = manager.element;
this.target = manager.options.inputTarget;

this.domHandler = function(ev) {
if (boolOrFn(manager.options.enable, [manager])) {
self.handler(ev);
}
};

this.init();

}

Input.prototype = {
handler: function() { },

init: function() {
this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);
this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);
this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);
},

destroy: function() {
this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);
this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);
this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);
}
};

function createInputInstance(manager) {
var Type;
var inputClass = manager.options.inputClass;

if (inputClass) {
Type = inputClass;
} else if (!SUPPORT_TOUCH && SUPPORT_POINTER_EVENTS) {
Type = PointerEventInput;
} else if (SUPPORT_ONLY_TOUCH) {
Type = TouchInput;
} else if (!SUPPORT_TOUCH) {
Type = MouseInput;
} else {
Type = TouchMouseInput;
}
return new (Type)(manager, inputHandler);
}

function inputHandler(manager, eventType, input) {
var pointersLen = input.pointers.length;
var changedPointersLen = input.changedPointers.length;
var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));
var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));

input.isFirst = !!isFirst;
input.isFinal = !!isFinal;

if (isFirst) {
manager.session = {};
}

input.eventType = eventType;

computeInputData(manager, input);

manager.emit('hammer.input', input);

manager.recognize(input);
manager.session.prevInput = input;
}

function computeInputData(manager, input) {
var session = manager.session;
var pointers = input.pointers;
var pointersLength = pointers.length;

if (!session.firstInput) {
session.firstInput = simpleCloneInputData(input);
}

if (pointersLength > 1 && !session.firstMultiple) {
session.firstMultiple = simpleCloneInputData(input);
} else if (pointersLength === 1) {
session.firstMultiple = false;
}

var firstInput = session.firstInput;
var firstMultiple = session.firstMultiple;
var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;

var center = input.center = getCenter(pointers);
input.timeStamp = now();
input.deltaTime = input.timeStamp - firstInput.timeStamp;

input.angle = getAngle(offsetCenter, center);
input.distance = getDistance(offsetCenter, center);

computeDeltaXY(session, input);
input.offsetDirection = getDirection(input.deltaX, input.deltaY);

var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);
input.overallVelocityX = overallVelocity.x;
input.overallVelocityY = overallVelocity.y;
input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;

input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;
input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;

input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >
session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);

computeIntervalInputData(session, input);

var target = manager.element;
if (hasParent(input.srcEvent.target, target)) {
target = input.srcEvent.target;
}
input.target = target;
}

function computeDeltaXY(session, input) {
var center = input.center;
var offset = session.offsetDelta || {};
var prevDelta = session.prevDelta || {};
var prevInput = session.prevInput || {};

if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {
prevDelta = session.prevDelta = {
x: prevInput.deltaX || 0,
y: prevInput.deltaY || 0
};

offset = session.offsetDelta = {
x: center.x,
y: center.y
};
}

input.deltaX = prevDelta.x + (center.x - offset.x);
input.deltaY = prevDelta.y + (center.y - offset.y);
}

function computeIntervalInputData(session, input) {
var last = session.lastInterval || input,
deltaTime = input.timeStamp - last.timeStamp,
velocity, velocityX, velocityY, direction;

if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {
var deltaX = input.deltaX - last.deltaX;
var deltaY = input.deltaY - last.deltaY;

var v = getVelocity(deltaTime, deltaX, deltaY);
velocityX = v.x;
velocityY = v.y;
velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;
direction = getDirection(deltaX, deltaY);

session.lastInterval = input;
} else {
velocity = last.velocity;
velocityX = last.velocityX;
velocityY = last.velocityY;
direction = last.direction;
}

input.velocity = velocity;
input.velocityX = velocityX;
input.velocityY = velocityY;
input.direction = direction;
}

function simpleCloneInputData(input) {
var pointers = [];
var i = 0;
while (i < input.pointers.length) {
pointers[i] = {
clientX: round(input.pointers[i].clientX),
clientY: round(input.pointers[i].clientY)
};
i++;
}

return {
timeStamp: now(),
pointers: pointers,
center: getCenter(pointers),
deltaX: input.deltaX,
deltaY: input.deltaY
};
}

function getCenter(pointers) {
var pointersLength = pointers.length;

if (pointersLength === 1) {
return {
x: round(pointers[0].clientX),
y: round(pointers[0].clientY)
};
}

var x = 0, y = 0, i = 0;
while (i < pointersLength) {
x += pointers[i].clientX;
y += pointers[i].clientY;
i++;
}

return {
x: round(x / pointersLength),
y: round(y / pointersLength)
};
}

function getVelocity(deltaTime, x, y) {
return {
x: x / deltaTime || 0,
y: y / deltaTime || 0
};
}

function getDirection(x, y) {
if (x === y) {
return DIRECTION_NONE;
}

if (abs(x) >= abs(y)) {
return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;
}
return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;
}

function getDistance(p1, p2, props) {
if (!props) {
props = PROPS_XY;
}
var x = p2[props[0]] - p1[props[0]],
y = p2[props[1]] - p1[props[1]];

return Math.sqrt((x * x) + (y * y));
}

function getAngle(p1, p2, props) {
if (!props) {
props = PROPS_XY;
}
var x = p2[props[0]] - p1[props[0]],
y = p2[props[1]] - p1[props[1]];
return Math.atan2(y, x) * 180 / Math.PI;
}

function getRotation(start, end) {
return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);
}

function getScale(start, end) {
return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);
}

var MOUSE_INPUT_MAP = {
mousedown: INPUT_START,
mousemove: INPUT_MOVE,
mouseup: INPUT_END
};

var MOUSE_ELEMENT_EVENTS = 'mousedown';
var MOUSE_WINDOW_EVENTS = 'mousemove mouseup';

function MouseInput() {
this.evEl = MOUSE_ELEMENT_EVENTS;
this.evWin = MOUSE_WINDOW_EVENTS;

this.pressed = false; // mousedown state

Input.apply(this, arguments);
}

inherit(MouseInput, Input, {
handler: function MEhandler(ev) {
var eventType = MOUSE_INPUT_MAP[ev.type];

if (eventType & INPUT_START && ev.button === 0) {
this.pressed = true;
}

if (eventType & INPUT_MOVE && ev.which !== 1) {
eventType = INPUT_END;
}

if (!this.pressed) {
return;
}

if (eventType & INPUT_END) {
this.pressed = false;
}

this.callback(this.manager, eventType, {
pointers: [ev],
changedPointers: [ev],
pointerType: INPUT_TYPE_MOUSE,
srcEvent: ev
});
}
});

var POINTER_INPUT_MAP = {
pointerdown: INPUT_START,
pointermove: INPUT_MOVE,
pointerup: INPUT_END,
pointercancel: INPUT_CANCEL,
pointerout: INPUT_CANCEL
};

var IE10_POINTER_TYPE_ENUM = {
2: INPUT_TYPE_TOUCH,
3: INPUT_TYPE_PEN,
4: INPUT_TYPE_MOUSE,
5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816
};

var POINTER_ELEMENT_EVENTS = 'pointerdown';
var POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';

if (window.MSPointerEvent && !window.PointerEvent) {
POINTER_ELEMENT_EVENTS = 'MSPointerDown';
POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';
}

function PointerEventInput() {
this.evEl = POINTER_ELEMENT_EVENTS;
this.evWin = POINTER_WINDOW_EVENTS;

Input.apply(this, arguments);

this.store = (this.manager.session.pointerEvents = []);
}

inherit(PointerEventInput, Input, {
handler: function PEhandler(ev) {
var store = this.store;
var removePointer = false;

var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');
var eventType = POINTER_INPUT_MAP[eventTypeNormalized];
var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;

var isTouch = (pointerType == INPUT_TYPE_TOUCH);

var storeIndex = inArray(store, ev.pointerId, 'pointerId');

if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {
if (storeIndex < 0) {
store.push(ev);
storeIndex = store.length - 1;
}
} else if (eventType & (INPUT_END | INPUT_CANCEL)) {
removePointer = true;
}

if (storeIndex < 0) {
return;
}

store[storeIndex] = ev;

this.callback(this.manager, eventType, {
pointers: store,
changedPointers: [ev],
pointerType: pointerType,
srcEvent: ev
});

if (removePointer) {
store.splice(storeIndex, 1);
}
}
});

var SINGLE_TOUCH_INPUT_MAP = {
touchstart: INPUT_START,
touchmove: INPUT_MOVE,
touchend: INPUT_END,
touchcancel: INPUT_CANCEL
};

var SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';
var SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';

function SingleTouchInput() {
this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;
this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;
this.started = false;

Input.apply(this, arguments);
}

inherit(SingleTouchInput, Input, {
handler: function TEhandler(ev) {
var type = SINGLE_TOUCH_INPUT_MAP[ev.type];

if (type === INPUT_START) {
this.started = true;
}

if (!this.started) {
return;
}

var touches = normalizeSingleTouches.call(this, ev, type);

if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {
this.started = false;
}

this.callback(this.manager, type, {
pointers: touches[0],
changedPointers: touches[1],
pointerType: INPUT_TYPE_TOUCH,
srcEvent: ev
});
}
});

function normalizeSingleTouches(ev, type) {
var all = toArray(ev.touches);
var changed = toArray(ev.changedTouches);

if (type & (INPUT_END | INPUT_CANCEL)) {
all = uniqueArray(all.concat(changed), 'identifier', true);
}

return [all, changed];
}

var TOUCH_INPUT_MAP = {
touchstart: INPUT_START,
touchmove: INPUT_MOVE,
touchend: INPUT_END,
touchcancel: INPUT_CANCEL
};

var TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';

function TouchInput() {
this.evTarget = TOUCH_TARGET_EVENTS;
this.targetIds = {};

Input.apply(this, arguments);
}

inherit(TouchInput, Input, {
handler: function MTEhandler(ev) {
var type = TOUCH_INPUT_MAP[ev.type];
var touches = getTouches.call(this, ev, type);
if (!touches) {
return;
}

this.callback(this.manager, type, {
pointers: touches[0],
changedPointers: touches[1],
pointerType: INPUT_TYPE_TOUCH,
srcEvent: ev
});
}
});

function getTouches(ev, type) {
var allTouches = toArray(ev.touches);
var targetIds = this.targetIds;

if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {
targetIds[allTouches[0].identifier] = true;
return [allTouches, allTouches];
}

var i,
targetTouches,
changedTouches = toArray(ev.changedTouches),
changedTargetTouches = [],
target = this.target;

targetTouches = allTouches.filter(function(touch) {
return hasParent(touch.target, target);
});

if (type === INPUT_START) {
i = 0;
while (i < targetTouches.length) {
targetIds[targetTouches[i].identifier] = true;
i++;
}
}

i = 0;
while (i < changedTouches.length) {
if (targetIds[changedTouches[i].identifier]) {
changedTargetTouches.push(changedTouches[i]);
}

if (type & (INPUT_END | INPUT_CANCEL)) {
delete targetIds[changedTouches[i].identifier];
}
i++;
}

if (!changedTargetTouches.length) {
return;
}

return [
uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),
changedTargetTouches
];
}


var DEDUP_TIMEOUT = 2500;
var DEDUP_DISTANCE = 25;

function TouchMouseInput() {
Input.apply(this, arguments);

var handler = bindFn(this.handler, this);
this.touch = new TouchInput(this.manager, handler);
this.mouse = new MouseInput(this.manager, handler);

this.primaryTouch = null;
this.lastTouches = [];
}

inherit(TouchMouseInput, Input, {
handler: function TMEhandler(manager, inputEvent, inputData) {
var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),
isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);

if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {
return;
}

if (isTouch) {
recordTouches.call(this, inputEvent, inputData);
} else if (isMouse && isSyntheticEvent.call(this, inputData)) {
return;
}

this.callback(manager, inputEvent, inputData);
},

destroy: function destroy() {
this.touch.destroy();
this.mouse.destroy();
}
});

function recordTouches(eventType, eventData) {
if (eventType & INPUT_START) {
this.primaryTouch = eventData.changedPointers[0].identifier;
setLastTouch.call(this, eventData);
} else if (eventType & (INPUT_END | INPUT_CANCEL)) {
setLastTouch.call(this, eventData);
}
}

function setLastTouch(eventData) {
var touch = eventData.changedPointers[0];

if (touch.identifier === this.primaryTouch) {
var lastTouch = {x: touch.clientX, y: touch.clientY};
this.lastTouches.push(lastTouch);
var lts = this.lastTouches;
var removeLastTouch = function() {
var i = lts.indexOf(lastTouch);
if (i > -1) {
lts.splice(i, 1);
}
};
setTimeout(removeLastTouch, DEDUP_TIMEOUT);
}
}

function isSyntheticEvent(eventData) {
var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;
for (var i = 0; i < this.lastTouches.length; i++) {
var t = this.lastTouches[i];
var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);
if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {
return true;
}
}
return false;
}

var PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');
var NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;

var TOUCH_ACTION_COMPUTE = 'compute';
var TOUCH_ACTION_AUTO = 'auto';
var TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented
var TOUCH_ACTION_NONE = 'none';
var TOUCH_ACTION_PAN_X = 'pan-x';
var TOUCH_ACTION_PAN_Y = 'pan-y';
var TOUCH_ACTION_MAP = getTouchActionProps();

function TouchAction(manager, value) {
this.manager = manager;
this.set(value);
}

TouchAction.prototype = {
set: function(value) {
if (value == TOUCH_ACTION_COMPUTE) {
value = this.compute();
}

if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {
this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;
}
this.actions = value.toLowerCase().trim();
},

update: function() {
this.set(this.manager.options.touchAction);
},

compute: function() {
var actions = [];
each(this.manager.recognizers, function(recognizer) {
if (boolOrFn(recognizer.options.enable, [recognizer])) {
actions = actions.concat(recognizer.getTouchAction());
}
});
return cleanTouchActions(actions.join(' '));
},

preventDefaults: function(input) {
var srcEvent = input.srcEvent;
var direction = input.offsetDirection;

if (this.manager.session.prevented) {
srcEvent.preventDefault();
return;
}

var actions = this.actions;
var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];
var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];
var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];

if (hasNone) {

var isTapPointer = input.pointers.length === 1;
var isTapMovement = input.distance < 2;
var isTapTouchTime = input.deltaTime < 250;

if (isTapPointer && isTapMovement && isTapTouchTime) {
return;
}
}

if (hasPanX && hasPanY) {
return;
}

if (hasNone ||
(hasPanY && direction & DIRECTION_HORIZONTAL) ||
(hasPanX && direction & DIRECTION_VERTICAL)) {
return this.preventSrc(srcEvent);
}
},

preventSrc: function(srcEvent) {
this.manager.session.prevented = true;
srcEvent.preventDefault();
}
};

function cleanTouchActions(actions) {
if (inStr(actions, TOUCH_ACTION_NONE)) {
return TOUCH_ACTION_NONE;
}

var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);
var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);

if (hasPanX && hasPanY) {
return TOUCH_ACTION_NONE;
}

if (hasPanX || hasPanY) {
return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;
}

if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {
return TOUCH_ACTION_MANIPULATION;
}

return TOUCH_ACTION_AUTO;
}

function getTouchActionProps() {
if (!NATIVE_TOUCH_ACTION) {
return false;
}
var touchMap = {};
var cssSupports = window.CSS && window.CSS.supports;
['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {

touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;
});
return touchMap;
}

var STATE_POSSIBLE = 1;
var STATE_BEGAN = 2;
var STATE_CHANGED = 4;
var STATE_ENDED = 8;
var STATE_RECOGNIZED = STATE_ENDED;
var STATE_CANCELLED = 16;
var STATE_FAILED = 32;

function Recognizer(options) {
this.options = assign({}, this.defaults, options || {});

this.id = uniqueId();

this.manager = null;

this.options.enable = ifUndefined(this.options.enable, true);

this.state = STATE_POSSIBLE;

this.simultaneous = {};
this.requireFail = [];
}

Recognizer.prototype = {
defaults: {},

set: function(options) {
assign(this.options, options);

this.manager && this.manager.touchAction.update();
return this;
},

recognizeWith: function(otherRecognizer) {
if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {
return this;
}

var simultaneous = this.simultaneous;
otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);
if (!simultaneous[otherRecognizer.id]) {
simultaneous[otherRecognizer.id] = otherRecognizer;
otherRecognizer.recognizeWith(this);
}
return this;
},

dropRecognizeWith: function(otherRecognizer) {
if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {
return this;
}

otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);
delete this.simultaneous[otherRecognizer.id];
return this;
},

requireFailure: function(otherRecognizer) {
if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {
return this;
}

var requireFail = this.requireFail;
otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);
if (inArray(requireFail, otherRecognizer) === -1) {
requireFail.push(otherRecognizer);
otherRecognizer.requireFailure(this);
}
return this;
},

dropRequireFailure: function(otherRecognizer) {
if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {
return this;
}

otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);
var index = inArray(this.requireFail, otherRecognizer);
if (index > -1) {
this.requireFail.splice(index, 1);
}
return this;
},

hasRequireFailures: function() {
return this.requireFail.length > 0;
},

canRecognizeWith: function(otherRecognizer) {
return !!this.simultaneous[otherRecognizer.id];
},

emit: function(input) {
var self = this;
var state = this.state;

function emit(event) {
self.manager.emit(event, input);
}

if (state < STATE_ENDED) {
emit(self.options.event + stateStr(state));
}

emit(self.options.event); // simple 'eventName' events

if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)
emit(input.additionalEvent);
}

if (state >= STATE_ENDED) {
emit(self.options.event + stateStr(state));
}
},

tryEmit: function(input) {
if (this.canEmit()) {
return this.emit(input);
}
this.state = STATE_FAILED;
},

canEmit: function() {
var i = 0;
while (i < this.requireFail.length) {
if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {
return false;
}
i++;
}
return true;
},

recognize: function(inputData) {
var inputDataClone = assign({}, inputData);

if (!boolOrFn(this.options.enable, [this, inputDataClone])) {
this.reset();
this.state = STATE_FAILED;
return;
}

if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {
this.state = STATE_POSSIBLE;
}

this.state = this.process(inputDataClone);

if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {
this.tryEmit(inputDataClone);
}
},

process: function(inputData) { }, // jshint ignore:line

getTouchAction: function() { },

reset: function() { }
};

function stateStr(state) {
if (state & STATE_CANCELLED) {
return 'cancel';
} else if (state & STATE_ENDED) {
return 'end';
} else if (state & STATE_CHANGED) {
return 'move';
} else if (state & STATE_BEGAN) {
return 'start';
}
return '';
}

function directionStr(direction) {
if (direction == DIRECTION_DOWN) {
return 'down';
} else if (direction == DIRECTION_UP) {
return 'up';
} else if (direction == DIRECTION_LEFT) {
return 'left';
} else if (direction == DIRECTION_RIGHT) {
return 'right';
}
return '';
}

function getRecognizerByNameIfManager(otherRecognizer, recognizer) {
var manager = recognizer.manager;
if (manager) {
return manager.get(otherRecognizer);
}
return otherRecognizer;
}

function AttrRecognizer() {
Recognizer.apply(this, arguments);
}

inherit(AttrRecognizer, Recognizer, {
defaults: {
pointers: 1
},

attrTest: function(input) {
var optionPointers = this.options.pointers;
return optionPointers === 0 || input.pointers.length === optionPointers;
},

process: function(input) {
var state = this.state;
var eventType = input.eventType;

var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);
var isValid = this.attrTest(input);

if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {
return state | STATE_CANCELLED;
} else if (isRecognized || isValid) {
if (eventType & INPUT_END) {
return state | STATE_ENDED;
} else if (!(state & STATE_BEGAN)) {
return STATE_BEGAN;
}
return state | STATE_CHANGED;
}
return STATE_FAILED;
}
});

function PanRecognizer() {
AttrRecognizer.apply(this, arguments);

this.pX = null;
this.pY = null;
}

inherit(PanRecognizer, AttrRecognizer, {
defaults: {
event: 'pan',
threshold: 10,
pointers: 1,
direction: DIRECTION_ALL
},

getTouchAction: function() {
var direction = this.options.direction;
var actions = [];
if (direction & DIRECTION_HORIZONTAL) {
actions.push(TOUCH_ACTION_PAN_Y);
}
if (direction & DIRECTION_VERTICAL) {
actions.push(TOUCH_ACTION_PAN_X);
}
return actions;
},

directionTest: function(input) {
var options = this.options;
var hasMoved = true;
var distance = input.distance;
var direction = input.direction;
var x = input.deltaX;
var y = input.deltaY;

if (!(direction & options.direction)) {
if (options.direction & DIRECTION_HORIZONTAL) {
direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;
hasMoved = x != this.pX;
distance = Math.abs(input.deltaX);
} else {
direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;
hasMoved = y != this.pY;
distance = Math.abs(input.deltaY);
}
}
input.direction = direction;
return hasMoved && distance > options.threshold && direction & options.direction;
},

attrTest: function(input) {
return AttrRecognizer.prototype.attrTest.call(this, input) &&
(this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));
},

emit: function(input) {

this.pX = input.deltaX;
this.pY = input.deltaY;

var direction = directionStr(input.direction);

if (direction) {
input.additionalEvent = this.options.event + direction;
}
this._super.emit.call(this, input);
}
});

function PinchRecognizer() {
AttrRecognizer.apply(this, arguments);
}

inherit(PinchRecognizer, AttrRecognizer, {
defaults: {
event: 'pinch',
threshold: 0,
pointers: 2
},

getTouchAction: function() {
return [TOUCH_ACTION_NONE];
},

attrTest: function(input) {
return this._super.attrTest.call(this, input) &&
(Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);
},

emit: function(input) {
if (input.scale !== 1) {
var inOut = input.scale < 1 ? 'in' : 'out';
input.additionalEvent = this.options.event + inOut;
}
this._super.emit.call(this, input);
}
});

function PressRecognizer() {
Recognizer.apply(this, arguments);

this._timer = null;
this._input = null;
}

inherit(PressRecognizer, Recognizer, {
defaults: {
event: 'press',
pointers: 1,
time: 251, // minimal time of the pointer to be pressed
threshold: 9 // a minimal movement is ok, but keep it low
},

getTouchAction: function() {
return [TOUCH_ACTION_AUTO];
},

process: function(input) {
var options = this.options;
var validPointers = input.pointers.length === options.pointers;
var validMovement = input.distance < options.threshold;
var validTime = input.deltaTime > options.time;

this._input = input;

if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {
this.reset();
} else if (input.eventType & INPUT_START) {
this.reset();
this._timer = setTimeoutContext(function() {
this.state = STATE_RECOGNIZED;
this.tryEmit();
}, options.time, this);
} else if (input.eventType & INPUT_END) {
return STATE_RECOGNIZED;
}
return STATE_FAILED;
},

reset: function() {
clearTimeout(this._timer);
},

emit: function(input) {
if (this.state !== STATE_RECOGNIZED) {
return;
}

if (input && (input.eventType & INPUT_END)) {
this.manager.emit(this.options.event + 'up', input);
} else {
this._input.timeStamp = now();
this.manager.emit(this.options.event, this._input);
}
}
});

function RotateRecognizer() {
AttrRecognizer.apply(this, arguments);
}

inherit(RotateRecognizer, AttrRecognizer, {
defaults: {
event: 'rotate',
threshold: 0,
pointers: 2
},

getTouchAction: function() {
return [TOUCH_ACTION_NONE];
},

attrTest: function(input) {
return this._super.attrTest.call(this, input) &&
(Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);
}
});

function SwipeRecognizer() {
AttrRecognizer.apply(this, arguments);
}

inherit(SwipeRecognizer, AttrRecognizer, {
defaults: {
event: 'swipe',
threshold: 10,
velocity: 0.3,
direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,
pointers: 1
},

getTouchAction: function() {
return PanRecognizer.prototype.getTouchAction.call(this);
},

attrTest: function(input) {
var direction = this.options.direction;
var velocity;

if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {
velocity = input.overallVelocity;
} else if (direction & DIRECTION_HORIZONTAL) {
velocity = input.overallVelocityX;
} else if (direction & DIRECTION_VERTICAL) {
velocity = input.overallVelocityY;
}

return this._super.attrTest.call(this, input) &&
direction & input.offsetDirection &&
input.distance > this.options.threshold &&
input.maxPointers == this.options.pointers &&
abs(velocity) > this.options.velocity && input.eventType & INPUT_END;
},

emit: function(input) {
var direction = directionStr(input.offsetDirection);
if (direction) {
this.manager.emit(this.options.event + direction, input);
}

this.manager.emit(this.options.event, input);
}
});

function TapRecognizer() {
Recognizer.apply(this, arguments);

this.pTime = false;
this.pCenter = false;

this._timer = null;
this._input = null;
this.count = 0;
}

inherit(TapRecognizer, Recognizer, {
defaults: {
event: 'tap',
pointers: 1,
taps: 1,
interval: 300, // max time between the multi-tap taps
time: 250, // max time of the pointer to be down (like finger on the screen)
threshold: 9, // a minimal movement is ok, but keep it low
posThreshold: 10 // a multi-tap can be a bit off the initial position
},

getTouchAction: function() {
return [TOUCH_ACTION_MANIPULATION];
},

process: function(input) {
var options = this.options;

var validPointers = input.pointers.length === options.pointers;
var validMovement = input.distance < options.threshold;
var validTouchTime = input.deltaTime < options.time;

this.reset();

if ((input.eventType & INPUT_START) && (this.count === 0)) {
return this.failTimeout();
}

if (validMovement && validTouchTime && validPointers) {
if (input.eventType != INPUT_END) {
return this.failTimeout();
}

var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;
var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;

this.pTime = input.timeStamp;
this.pCenter = input.center;

if (!validMultiTap || !validInterval) {
this.count = 1;
} else {
this.count += 1;
}

this._input = input;

var tapCount = this.count % options.taps;
if (tapCount === 0) {
if (!this.hasRequireFailures()) {
return STATE_RECOGNIZED;
} else {
this._timer = setTimeoutContext(function() {
this.state = STATE_RECOGNIZED;
this.tryEmit();
}, options.interval, this);
return STATE_BEGAN;
}
}
}
return STATE_FAILED;
},

failTimeout: function() {
this._timer = setTimeoutContext(function() {
this.state = STATE_FAILED;
}, this.options.interval, this);
return STATE_FAILED;
},

reset: function() {
clearTimeout(this._timer);
},

emit: function() {
if (this.state == STATE_RECOGNIZED) {
this._input.tapCount = this.count;
this.manager.emit(this.options.event, this._input);
}
}
});

function Hammer(element, options) {
options = options || {};
options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);
return new Manager(element, options);
}

Hammer.VERSION = '2.0.7';

Hammer.defaults = {
domEvents: false,

touchAction: TOUCH_ACTION_COMPUTE,

enable: true,

inputTarget: null,

inputClass: null,

preset: [
[RotateRecognizer, {enable: false}],
[PinchRecognizer, {enable: false}, ['rotate']],
[SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],
[PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],
[TapRecognizer],
[TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],
[PressRecognizer]
],

cssProps: {
userSelect: 'none',

touchSelect: 'none',

touchCallout: 'none',

contentZooming: 'none',

userDrag: 'none',

tapHighlightColor: 'rgba(0,0,0,0)'
}
};

var STOP = 1;
var FORCED_STOP = 2;

function Manager(element, options) {
this.options = assign({}, Hammer.defaults, options || {});

this.options.inputTarget = this.options.inputTarget || element;

this.handlers = {};
this.session = {};
this.recognizers = [];
this.oldCssProps = {};

this.element = element;
this.input = createInputInstance(this);
this.touchAction = new TouchAction(this, this.options.touchAction);

toggleCssProps(this, true);

each(this.options.recognizers, function(item) {
var recognizer = this.add(new (item[0])(item[1]));
item[2] && recognizer.recognizeWith(item[2]);
item[3] && recognizer.requireFailure(item[3]);
}, this);
}

Manager.prototype = {
set: function(options) {
assign(this.options, options);

if (options.touchAction) {
this.touchAction.update();
}
if (options.inputTarget) {
this.input.destroy();
this.input.target = options.inputTarget;
this.input.init();
}
return this;
},

stop: function(force) {
this.session.stopped = force ? FORCED_STOP : STOP;
},

recognize: function(inputData) {
var session = this.session;
if (session.stopped) {
return;
}

this.touchAction.preventDefaults(inputData);

var recognizer;
var recognizers = this.recognizers;

var curRecognizer = session.curRecognizer;

if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {
curRecognizer = session.curRecognizer = null;
}

var i = 0;
while (i < recognizers.length) {
recognizer = recognizers[i];

if (session.stopped !== FORCED_STOP && ( // 1
!curRecognizer || recognizer == curRecognizer || // 2
recognizer.canRecognizeWith(curRecognizer))) { // 3
recognizer.recognize(inputData);
} else {
recognizer.reset();
}

if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {
curRecognizer = session.curRecognizer = recognizer;
}
i++;
}
},

get: function(recognizer) {
if (recognizer instanceof Recognizer) {
return recognizer;
}

var recognizers = this.recognizers;
for (var i = 0; i < recognizers.length; i++) {
if (recognizers[i].options.event == recognizer) {
return recognizers[i];
}
}
return null;
},

add: function(recognizer) {
if (invokeArrayArg(recognizer, 'add', this)) {
return this;
}

var existing = this.get(recognizer.options.event);
if (existing) {
this.remove(existing);
}

this.recognizers.push(recognizer);
recognizer.manager = this;

this.touchAction.update();
return recognizer;
},

remove: function(recognizer) {
if (invokeArrayArg(recognizer, 'remove', this)) {
return this;
}

recognizer = this.get(recognizer);

if (recognizer) {
var recognizers = this.recognizers;
var index = inArray(recognizers, recognizer);

if (index !== -1) {
recognizers.splice(index, 1);
this.touchAction.update();
}
}

return this;
},

on: function(events, handler) {
if (events === undefined) {
return;
}
if (handler === undefined) {
return;
}

var handlers = this.handlers;
each(splitStr(events), function(event) {
handlers[event] = handlers[event] || [];
handlers[event].push(handler);
});
return this;
},

off: function(events, handler) {
if (events === undefined) {
return;
}

var handlers = this.handlers;
each(splitStr(events), function(event) {
if (!handler) {
delete handlers[event];
} else {
handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);
}
});
return this;
},

emit: function(event, data) {
if (this.options.domEvents) {
triggerDomEvent(event, data);
}

var handlers = this.handlers[event] && this.handlers[event].slice();
if (!handlers || !handlers.length) {
return;
}

data.type = event;
data.preventDefault = function() {
data.srcEvent.preventDefault();
};

var i = 0;
while (i < handlers.length) {
handlers[i](data);
i++;
}
},

destroy: function() {
this.element && toggleCssProps(this, false);

this.handlers = {};
this.session = {};
this.input.destroy();
this.element = null;
}
};

function toggleCssProps(manager, add) {
var element = manager.element;
if (!element.style) {
return;
}
var prop;
each(manager.options.cssProps, function(value, name) {
prop = prefixed(element.style, name);
if (add) {
manager.oldCssProps[prop] = element.style[prop];
element.style[prop] = value;
} else {
element.style[prop] = manager.oldCssProps[prop] || '';
}
});
if (!add) {
manager.oldCssProps = {};
}
}

function triggerDomEvent(event, data) {
var gestureEvent = document.createEvent('Event');
gestureEvent.initEvent(event, true, true);
gestureEvent.gesture = data;
data.target.dispatchEvent(gestureEvent);
}

assign(Hammer, {
INPUT_START: INPUT_START,
INPUT_MOVE: INPUT_MOVE,
INPUT_END: INPUT_END,
INPUT_CANCEL: INPUT_CANCEL,

STATE_POSSIBLE: STATE_POSSIBLE,
STATE_BEGAN: STATE_BEGAN,
STATE_CHANGED: STATE_CHANGED,
STATE_ENDED: STATE_ENDED,
STATE_RECOGNIZED: STATE_RECOGNIZED,
STATE_CANCELLED: STATE_CANCELLED,
STATE_FAILED: STATE_FAILED,

DIRECTION_NONE: DIRECTION_NONE,
DIRECTION_LEFT: DIRECTION_LEFT,
DIRECTION_RIGHT: DIRECTION_RIGHT,
DIRECTION_UP: DIRECTION_UP,
DIRECTION_DOWN: DIRECTION_DOWN,
DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,
DIRECTION_VERTICAL: DIRECTION_VERTICAL,
DIRECTION_ALL: DIRECTION_ALL,

Manager: Manager,
Input: Input,
TouchAction: TouchAction,

TouchInput: TouchInput,
MouseInput: MouseInput,
PointerEventInput: PointerEventInput,
TouchMouseInput: TouchMouseInput,
SingleTouchInput: SingleTouchInput,

Recognizer: Recognizer,
AttrRecognizer: AttrRecognizer,
Tap: TapRecognizer,
Pan: PanRecognizer,
Swipe: SwipeRecognizer,
Pinch: PinchRecognizer,
Rotate: RotateRecognizer,
Press: PressRecognizer,

on: addEventListeners,
off: removeEventListeners,
each: each,
merge: merge,
extend: extend,
assign: assign,
inherit: inherit,
bindFn: bindFn,
prefixed: prefixed
});

var freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line
freeGlobal.Hammer = Hammer;

if (typeof define === 'function' && define.amd) {
define(function() {
return Hammer;
});
} else if (typeof module != 'undefined' && module.exports) {
module.exports = Hammer;
} else {
window[exportName] = Hammer;
}

})(window, document, 'Hammer');

/*****
* @licstart
*
* The following is the license notice for the part of JavaScript code of this
* page included between the '@jessyinkstart' and the '@jessyinkend' notes.
*/

/*****  ******************************************************************
*
* Copyright 2008-2013 Hannes Hochreiner
*
* The JavaScript code included between the start note '@jessyinkstart'
* and the end note '@jessyinkend' is subject to the terms of the Mozilla
* Public License, v. 2.0. If a copy of the MPL was not distributed with
* this file, You can obtain one at http://mozilla.org/MPL/2.0/.
*
* Alternatively, you can redistribute and/or that part of this file
* under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program.  If not, see http://www.gnu.org/licenses/.
*/

/*****
*  You can find the complete source code of the JessyInk project at:
*  @source http://code.google.com/p/jessyink/
*/

/*****
* @licend
*
* The above is the license notice for the part of JavaScript code of this
* page included between the '@jessyinkstart' and the '@jessyinkend' notes.
*/


/*****
* @jessyinkstart
*
*  The following code is a derivative work of some parts of the JessyInk
*  project.
*  @source http://code.google.com/p/jessyink/
*/

function getElementsByProperty( node, name )
{
var elements = [];

if( node.getAttribute( name ) )
elements.push( node );

for( var counter = 0; counter < node.childNodes.length; ++counter )
{
if( node.childNodes[counter].nodeType == 1 )
{
var subElements = getElementsByProperty( node.childNodes[counter], name );
elements = elements.concat( subElements );
}
}
return elements;
}

function onKeyDown( aEvt )
{
if ( !aEvt )
aEvt = window.event;

var code = aEvt.keyCode || aEvt.charCode;


if (code == 0 && aEvt.key != undefined) {
switch (aEvt.key) {
case 'UIKeyInputLeftArrow':
code = LEFT_KEY;
break;
case 'UIKeyInputUpArrow':
code = UP_KEY;
break;
case 'UIKeyInputRightArrow':
code = RIGHT_KEY;
break;
case 'UIKeyInputDownArrow':
code = DOWN_KEY;
break;
}

}

if( !processingEffect && keyCodeDictionary[currentMode] && keyCodeDictionary[currentMode][code] )
{
return keyCodeDictionary[currentMode][code]();
}
else
{
document.onkeypress = onKeyPress;
return null;
}
}
document.onkeydown = onKeyDown;

function onKeyPress( aEvt )
{
document.onkeypress = null;

if ( !aEvt )
aEvt = window.event;

var str = String.fromCharCode( aEvt.keyCode || aEvt.charCode );

if ( !processingEffect && charCodeDictionary[currentMode] && charCodeDictionary[currentMode][str] )
return charCodeDictionary[currentMode][str]();

return null;
}

function getDefaultKeyCodeDictionary()
{
var keyCodeDict = {};

keyCodeDict[SLIDE_MODE] = {};
keyCodeDict[INDEX_MODE] = {};

keyCodeDict[SLIDE_MODE][LEFT_KEY]
= function() { return aSlideShow.rewindEffect(); };
keyCodeDict[SLIDE_MODE][RIGHT_KEY]
= function() { return dispatchEffects(1); };
keyCodeDict[SLIDE_MODE][UP_KEY]
= function() { return aSlideShow.rewindEffect(); };
keyCodeDict[SLIDE_MODE][DOWN_KEY]
= function() { return skipEffects(1); };
keyCodeDict[SLIDE_MODE][PAGE_UP_KEY]
= function() { return aSlideShow.rewindAllEffects(); };
keyCodeDict[SLIDE_MODE][PAGE_DOWN_KEY]
= function() { return skipAllEffects(); };
keyCodeDict[SLIDE_MODE][HOME_KEY]
= function() { return aSlideShow.displaySlide( 0, true ); };
keyCodeDict[SLIDE_MODE][END_KEY]
= function() { return aSlideShow.displaySlide( theMetaDoc.nNumberOfSlides - 1, true ); };
keyCodeDict[SLIDE_MODE][SPACE_KEY]
= function() { return dispatchEffects(1); };
keyCodeDict[SLIDE_MODE][ESCAPE_KEY]
= function() { return aSlideShow.exitSlideShowInApp(); };
keyCodeDict[SLIDE_MODE][Q_KEY]
= function() { return aSlideShow.exitSlideShowInApp(); };

keyCodeDict[INDEX_MODE][LEFT_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex - 1 ); };
keyCodeDict[INDEX_MODE][RIGHT_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex + 1 ); };
keyCodeDict[INDEX_MODE][UP_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex - theSlideIndexPage.indexColumns ); };
keyCodeDict[INDEX_MODE][DOWN_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex + theSlideIndexPage.indexColumns ); };
keyCodeDict[INDEX_MODE][PAGE_UP_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex - theSlideIndexPage.getTotalThumbnails() ); };
keyCodeDict[INDEX_MODE][PAGE_DOWN_KEY]
= function() { return indexSetPageSlide( theSlideIndexPage.selectedSlideIndex + theSlideIndexPage.getTotalThumbnails() ); };
keyCodeDict[INDEX_MODE][HOME_KEY]
= function() { return indexSetPageSlide( 0 ); };
keyCodeDict[INDEX_MODE][END_KEY]
= function() { return indexSetPageSlide( theMetaDoc.nNumberOfSlides - 1 ); };
keyCodeDict[INDEX_MODE][ENTER_KEY]
= function() { return toggleSlideIndex(); };
keyCodeDict[INDEX_MODE][SPACE_KEY]
= function() { return toggleSlideIndex(); };
keyCodeDict[INDEX_MODE][ESCAPE_KEY]
= function() { return abandonIndexMode(); };

return keyCodeDict;
}

function getDefaultCharCodeDictionary()
{
var charCodeDict = {};

charCodeDict[SLIDE_MODE] = {};
charCodeDict[INDEX_MODE] = {};

charCodeDict[SLIDE_MODE]['i']
= function () { return toggleSlideIndex(); };

charCodeDict[INDEX_MODE]['i']
= function () { return toggleSlideIndex(); };
charCodeDict[INDEX_MODE]['-']
= function () { return theSlideIndexPage.decreaseNumberOfColumns(); };
charCodeDict[INDEX_MODE]['=']
= function () { return theSlideIndexPage.increaseNumberOfColumns(); };
charCodeDict[INDEX_MODE]['+']
= function () { return theSlideIndexPage.increaseNumberOfColumns(); };
charCodeDict[INDEX_MODE]['0']
= function () { return theSlideIndexPage.resetNumberOfColumns(); };

return charCodeDict;
}


function slideOnMouseUp( aEvt )
{
if (!aEvt)
aEvt = window.event;

var nOffset = 0;

if( aEvt.button == 0 )
nOffset = 1;
else if( aEvt.button == 2 )
nOffset = -1;

if( 0 != nOffset )
dispatchEffects( nOffset );
return true; // the click has been handled
}

document.handleClick = slideOnMouseUp;


function slideOnMouseWheel(aEvt)
{
var delta = 0;

if (!aEvt)
aEvt = window.event;

if (aEvt.wheelDelta)
{ // IE Opera
delta = aEvt.wheelDelta/120;
}
else if (aEvt.detail)
{ // MOZ
delta = -aEvt.detail/3;
}

if (delta > 0)
skipEffects(-1);
else if (delta < 0)
skipEffects(1);

if (aEvt.preventDefault)
aEvt.preventDefault();

aEvt.returnValue = false;
}

if( window.addEventListener )
{
window.addEventListener( 'DOMMouseScroll', function( aEvt ) { return mouseHandlerDispatch( aEvt, MOUSE_WHEEL ); }, false );
}

window.onmousewheel
= function( aEvt ) { return mouseHandlerDispatch( aEvt, MOUSE_WHEEL ); };

function mouseHandlerDispatch( aEvt, anAction )
{
if( !aEvt )
aEvt = window.event;

var retVal = true;

if ( mouseHandlerDictionary[currentMode] && mouseHandlerDictionary[currentMode][anAction] )
{
var subRetVal = mouseHandlerDictionary[currentMode][anAction]( aEvt );

if( subRetVal != null && subRetVal != undefined )
retVal = subRetVal;
}

if( aEvt.preventDefault && !retVal )
aEvt.preventDefault();

aEvt.returnValue = retVal;

return retVal;
}

document.onmouseup = function( aEvt ) { return mouseHandlerDispatch( aEvt, MOUSE_UP ); };


function mouseClickHelper( aEvt )
{
if( !Detect.isMozilla )
{
var aWindowObject = document.defaultView;
if( aWindowObject )
{
var aTextSelection = aWindowObject.getSelection();
var sSelectedText =  aTextSelection.toString();
if( sSelectedText )
{
DBGLOG( 'text selection: ' + sSelectedText );
if( sLastSelectedText !== sSelectedText )
{
bTextHasBeenSelected = true;
sLastSelectedText = sSelectedText;
}
else
{
bTextHasBeenSelected = false;
}
return null;
}
else if( bTextHasBeenSelected )
{
bTextHasBeenSelected = false;
sLastSelectedText = '';
return null;
}
}
else
{
log( 'error: HyperlinkElement.handleClick: invalid window object.' );
}
}

var aSlideAnimationsHandler = theMetaDoc.aMetaSlideSet[nCurSlide].aSlideAnimationsHandler;
if( aSlideAnimationsHandler )
{
var aCurrentEventMultiplexer = aSlideAnimationsHandler.aEventMultiplexer;
if( aCurrentEventMultiplexer )
{
if( aCurrentEventMultiplexer.hasRegisteredMouseClickHandlers() )
{
return aCurrentEventMultiplexer.notifyMouseClick( aEvt );
}
}
}
return slideOnMouseUp( aEvt );
}


function getDefaultMouseHandlerDictionary()
{
var mouseHandlerDict = {};

mouseHandlerDict[SLIDE_MODE] = {};
mouseHandlerDict[INDEX_MODE] = {};

mouseHandlerDict[SLIDE_MODE][MOUSE_UP]
= mouseClickHelper;

mouseHandlerDict[SLIDE_MODE][MOUSE_WHEEL]
= function( aEvt ) { return slideOnMouseWheel( aEvt ); };

mouseHandlerDict[INDEX_MODE][MOUSE_UP]
= function( ) { return toggleSlideIndex(); };

return mouseHandlerDict;
}

function indexSetPageSlide( nIndex )
{
var aMetaSlideSet = theMetaDoc.aMetaSlideSet;
nIndex = getSafeIndex( nIndex, 0, aMetaSlideSet.length - 1 );

var nSelectedThumbnailIndex = nIndex % theSlideIndexPage.getTotalThumbnails();
var offset = nIndex - nSelectedThumbnailIndex;

if( offset < 0 )
offset = 0;

if( offset != INDEX_OFFSET )
{
INDEX_OFFSET = offset;
displayIndex( INDEX_OFFSET );
}

theSlideIndexPage.setSelection( nSelectedThumbnailIndex );
}


/*****
* @jessyinkend
*
*  The above code is a derivative work of some parts of the JessyInk project.
*  @source http://code.google.com/p/jessyink/
*/


/*****
* @licstart
*
* The following is the license notice for the part of JavaScript code of this
* page included between the '@dojostart' and the '@dojoend' notes.
*/

/*****  **********************************************************************
*
*  The 'New' BSD License:
*  **********************
*  Copyright (c) 2005-2012, The Dojo Foundation
*  All rights reserved.
*
*  Redistribution and use in source and binary forms, with or without
*  modification, are permitted provided that the following conditions are met:
*
*    * Redistributions of source code must retain the above copyright notice,
*      this list of conditions and the following disclaimer.
*    * Redistributions in binary form must reproduce the above copyright notice,
*      this list of conditions and the following disclaimer in the documentation
*      and/or other materials provided with the distribution.
*    * Neither the name of the Dojo Foundation nor the names of its contributors
*      may be used to endorse or promote products derived from this software
*      without specific prior written permission.
*
*  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND
*  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
*  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
*  DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
*  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
*  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
*  SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
*  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
*  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
*  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*
****************************************************************************/


/*****
* @licend
*
* The above is the license notice for the part of JavaScript code of this
* page included between the '@dojostart' and the '@dojoend' notes.
*/


/*****
* @dojostart
*
*  The following code is a derivative work of some part of the dojox.gfx library.
*  @source http://svn.dojotoolkit.org/src/dojox/trunk/_base/sniff.js
*/

function has( name )
{
return has.cache[name];
}

has.cache = {};

has.add = function( name, test )
{
has.cache[name] = test;
};

function configureDetectionTools()
{
if( !navigator )
{
log( 'error: configureDetectionTools: configuration failed' );
return null;
}

var n = navigator,
dua = n.userAgent,
dav = n.appVersion,
tv = parseFloat(dav);

has.add('air', dua.indexOf('AdobeAIR') >= 0);
has.add('khtml', dav.indexOf('Konqueror') >= 0 ? tv : undefined);
has.add('webkit', parseFloat(dua.split('WebKit/')[1]) || undefined);
has.add('chrome', parseFloat(dua.split('Chrome/')[1]) || undefined);
has.add('safari', dav.indexOf('Safari')>=0 && !has('chrome') ? parseFloat(dav.split('Version/')[1]) : undefined);
has.add('mac', dav.indexOf('Macintosh') >= 0);
has.add('quirks', document.compatMode == 'BackCompat');
has.add('ios', /iPhone|iPod|iPad/.test(dua));
has.add('android', parseFloat(dua.split('Android ')[1]) || undefined);

if(!has('webkit')){
if(dua.indexOf('Opera') >= 0){
has.add('opera', tv >= 9.8 ? parseFloat(dua.split('Version/')[1]) || tv : tv);
}

if(dua.indexOf('Gecko') >= 0 && !has('khtml') && !has('webkit')){
has.add('mozilla', tv);
}
if(has('mozilla')){
has.add('ff', parseFloat(dua.split('Firefox/')[1] || dua.split('Minefield/')[1]) || undefined);
}

if(document.all && !has('opera')){
var isIE = parseFloat(dav.split('MSIE ')[1]) || undefined;

var mode = document.documentMode;
if(mode && mode != 5 && Math.floor(isIE) != mode){
isIE = mode;
}

has.add('ie', isIE);
}

has.add('wii', typeof opera != 'undefined' && opera.wiiremote);
}

var detect =
{
isFF: has('ff'),

isIE: has('ie'),

isKhtml: has('khtml'),

isWebKit: has('webkit'),

isMozilla: has('mozilla'),
isMoz: has('mozilla'),

isOpera: has('opera'),

isSafari: has('safari'),

isChrome: has('chrome'),

isMac: has('mac'),

isIos: has('ios'),

isAndroid: has('android'),

isWii: has('wii'),

isQuirks: has('quirks'),

isAir: has('air')
};
return detect;
}

/*****
* @dojoend
*
*  The above code is a derivative work of some part of the dojox.gfx library.
*  @source http://svn.dojotoolkit.org/src/dojox/trunk/_base/sniff.js
*/

/*****
* @licstart
*
* The following is the license notice for the part of JavaScript code of this
* file included between the '@svgpathstart' and the '@svgpathend' notes.
*/

/*****  **********************************************************************
*
*   Copyright 2015 The Chromium Authors. All rights reserved.
*
*   The Chromium Authors can be found at
*   http://src.chromium.org/svn/trunk/src/AUTHORS
*
*   Redistribution and use in source and binary forms, with or without
*   modification, are permitted provided that the following conditions are
*   met:
*
*   * Redistributions of source code must retain the above copyright
*   notice, this list of conditions and the following disclaimer.
*   * Redistributions in binary form must reproduce the above
*   copyright notice, this list of conditions and the following disclaimer
*   in the documentation and/or other materials provided with the
*   distribution.
*   * Neither the name of Google Inc. nor the names of its
*   contributors may be used to endorse or promote products derived from
*   this software without specific prior written permission.
*
*   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
*   'AS IS' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
*   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
*   A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
*   OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
*   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
*   LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
*   DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
*   THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
*   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
*   OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*
****************************************************************************/

/*****
* @licend
*
* The above is the license notice for the part of JavaScript code of this
* file included between the '@svgpathstart' and the '@svgpathend' notes.
*/


/*****
* @svgpathstart
*
*  The following code is a derivative work of some part of the SVGPathSeg API.
*
*  This API is a drop-in replacement for the SVGPathSeg and SVGPathSegList APIs that were removed from
*  SVG2 (https://lists.w3.org/Archives/Public/www-svg/2015Jun/0044.html), including the latest spec
*  changes which were implemented in Firefox 43 and Chrome 46.
*
*  @source https://github.com/progers/pathseg
*/

(function() { 'use strict';
if (!('SVGPathSeg' in window)) {
window.SVGPathSeg = function(type, typeAsLetter, owningPathSegList) {
this.pathSegType = type;
this.pathSegTypeAsLetter = typeAsLetter;
this._owningPathSegList = owningPathSegList;
}

window.SVGPathSeg.prototype.classname = 'SVGPathSeg';

window.SVGPathSeg.PATHSEG_UNKNOWN = 0;
window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;
window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;
window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;
window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;
window.SVGPathSeg.PATHSEG_LINETO_REL = 5;
window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;
window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;
window.SVGPathSeg.PATHSEG_ARC_ABS = 10;
window.SVGPathSeg.PATHSEG_ARC_REL = 11;
window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;
window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;
window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;
window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;
window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;
window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;

window.SVGPathSeg.prototype._segmentChanged = function() {
if (this._owningPathSegList)
this._owningPathSegList.segmentChanged(this);
}

window.SVGPathSegClosePath = function(owningPathSegList) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);
}
window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegClosePath.prototype.toString = function() { return '[object SVGPathSegClosePath]'; }
window.SVGPathSegClosePath.prototype._asPathString = function() { return this.pathSegTypeAsLetter; }
window.SVGPathSegClosePath.prototype.clone = function() { return new window.SVGPathSegClosePath(undefined); }

window.SVGPathSegMovetoAbs = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegMovetoAbs.prototype.toString = function() { return '[object SVGPathSegMovetoAbs]'; }
window.SVGPathSegMovetoAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegMovetoAbs.prototype.clone = function() { return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegMovetoRel = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegMovetoRel.prototype.toString = function() { return '[object SVGPathSegMovetoRel]'; }
window.SVGPathSegMovetoRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegMovetoRel.prototype.clone = function() { return new window.SVGPathSegMovetoRel(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoAbs = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoAbs.prototype.toString = function() { return '[object SVGPathSegLinetoAbs]'; }
window.SVGPathSegLinetoAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegLinetoAbs.prototype.clone = function() { return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoRel = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoRel.prototype.toString = function() { return '[object SVGPathSegLinetoRel]'; }
window.SVGPathSegLinetoRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegLinetoRel.prototype.clone = function() { return new window.SVGPathSegLinetoRel(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoCubicAbs = function(owningPathSegList, x, y, x1, y1, x2, y2) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);
this._x = x;
this._y = y;
this._x1 = x1;
this._y1 = y1;
this._x2 = x2;
this._y2 = y2;
}
window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoCubicAbs.prototype.toString = function() { return '[object SVGPathSegCurvetoCubicAbs]'; }
window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoCubicAbs.prototype.clone = function() { return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2); }
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoCubicRel = function(owningPathSegList, x, y, x1, y1, x2, y2) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);
this._x = x;
this._y = y;
this._x1 = x1;
this._y1 = y1;
this._x2 = x2;
this._y2 = y2;
}
window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoCubicRel.prototype.toString = function() { return '[object SVGPathSegCurvetoCubicRel]'; }
window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoCubicRel.prototype.clone = function() { return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2); }
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoQuadraticAbs = function(owningPathSegList, x, y, x1, y1) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);
this._x = x;
this._y = y;
this._x1 = x1;
this._y1 = y1;
}
window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function() { return '[object SVGPathSegCurvetoQuadraticAbs]'; }
window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function() { return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1); }
Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoQuadraticRel = function(owningPathSegList, x, y, x1, y1) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);
this._x = x;
this._y = y;
this._x1 = x1;
this._y1 = y1;
}
window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function() { return '[object SVGPathSegCurvetoQuadraticRel]'; }
window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function() { return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1); }
Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegArcAbs = function(owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);
this._x = x;
this._y = y;
this._r1 = r1;
this._r2 = r2;
this._angle = angle;
this._largeArcFlag = largeArcFlag;
this._sweepFlag = sweepFlag;
}
window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegArcAbs.prototype.toString = function() { return '[object SVGPathSegArcAbs]'; }
window.SVGPathSegArcAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegArcAbs.prototype.clone = function() { return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag); }
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', { get: function() { return this._r1; }, set: function(r1) { this._r1 = r1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', { get: function() { return this._r2; }, set: function(r2) { this._r2 = r2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', { get: function() { return this._angle; }, set: function(angle) { this._angle = angle; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', { get: function() { return this._largeArcFlag; }, set: function(largeArcFlag) { this._largeArcFlag = largeArcFlag; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', { get: function() { return this._sweepFlag; }, set: function(sweepFlag) { this._sweepFlag = sweepFlag; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegArcRel = function(owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);
this._x = x;
this._y = y;
this._r1 = r1;
this._r2 = r2;
this._angle = angle;
this._largeArcFlag = largeArcFlag;
this._sweepFlag = sweepFlag;
}
window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegArcRel.prototype.toString = function() { return '[object SVGPathSegArcRel]'; }
window.SVGPathSegArcRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegArcRel.prototype.clone = function() { return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag); }
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', { get: function() { return this._r1; }, set: function(r1) { this._r1 = r1; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', { get: function() { return this._r2; }, set: function(r2) { this._r2 = r2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', { get: function() { return this._angle; }, set: function(angle) { this._angle = angle; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', { get: function() { return this._largeArcFlag; }, set: function(largeArcFlag) { this._largeArcFlag = largeArcFlag; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', { get: function() { return this._sweepFlag; }, set: function(sweepFlag) { this._sweepFlag = sweepFlag; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoHorizontalAbs = function(owningPathSegList, x) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);
this._x = x;
}
window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function() { return '[object SVGPathSegLinetoHorizontalAbs]'; }
window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x; }
window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function() { return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x); }
Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoHorizontalRel = function(owningPathSegList, x) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);
this._x = x;
}
window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoHorizontalRel.prototype.toString = function() { return '[object SVGPathSegLinetoHorizontalRel]'; }
window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x; }
window.SVGPathSegLinetoHorizontalRel.prototype.clone = function() { return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x); }
Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoVerticalAbs = function(owningPathSegList, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);
this._y = y;
}
window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoVerticalAbs.prototype.toString = function() { return '[object SVGPathSegLinetoVerticalAbs]'; }
window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._y; }
window.SVGPathSegLinetoVerticalAbs.prototype.clone = function() { return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y); }
Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegLinetoVerticalRel = function(owningPathSegList, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);
this._y = y;
}
window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegLinetoVerticalRel.prototype.toString = function() { return '[object SVGPathSegLinetoVerticalRel]'; }
window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._y; }
window.SVGPathSegLinetoVerticalRel.prototype.clone = function() { return new window.SVGPathSegLinetoVerticalRel(undefined, this._y); }
Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoCubicSmoothAbs = function(owningPathSegList, x, y, x2, y2) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);
this._x = x;
this._y = y;
this._x2 = x2;
this._y2 = y2;
}
window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function() { return '[object SVGPathSegCurvetoCubicSmoothAbs]'; }
window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function() { return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2); }
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoCubicSmoothRel = function(owningPathSegList, x, y, x2, y2) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);
this._x = x;
this._y = y;
this._x2 = x2;
this._y2 = y2;
}
window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function() { return '[object SVGPathSegCurvetoCubicSmoothRel]'; }
window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function() { return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2); }
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoQuadraticSmoothAbs = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function() { return '[object SVGPathSegCurvetoQuadraticSmoothAbs]'; }
window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function() { return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathSegCurvetoQuadraticSmoothRel = function(owningPathSegList, x, y) {
window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);
this._x = x;
this._y = y;
}
window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);
window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function() { return '[object SVGPathSegCurvetoQuadraticSmoothRel]'; }
window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y; }
window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function() { return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y); }
Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

window.SVGPathElement.prototype.createSVGPathSegClosePath = function() { return new window.SVGPathSegClosePath(undefined); }
window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function(x, y) { return new window.SVGPathSegMovetoAbs(undefined, x, y); }
window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function(x, y) { return new window.SVGPathSegMovetoRel(undefined, x, y); }
window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function(x, y) { return new window.SVGPathSegLinetoAbs(undefined, x, y); }
window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function(x, y) { return new window.SVGPathSegLinetoRel(undefined, x, y); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function(x, y, x1, y1, x2, y2) { return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function(x, y, x1, y1, x2, y2) { return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function(x, y, x1, y1) { return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function(x, y, x1, y1) { return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1); }
window.SVGPathElement.prototype.createSVGPathSegArcAbs = function(x, y, r1, r2, angle, largeArcFlag, sweepFlag) { return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag); }
window.SVGPathElement.prototype.createSVGPathSegArcRel = function(x, y, r1, r2, angle, largeArcFlag, sweepFlag) { return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag); }
window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function(x) { return new window.SVGPathSegLinetoHorizontalAbs(undefined, x); }
window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function(x) { return new window.SVGPathSegLinetoHorizontalRel(undefined, x); }
window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function(y) { return new window.SVGPathSegLinetoVerticalAbs(undefined, y); }
window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function(y) { return new window.SVGPathSegLinetoVerticalRel(undefined, y); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function(x, y, x2, y2) { return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function(x, y, x2, y2) { return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function(x, y) { return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y); }
window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function(x, y) { return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y); }

if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {
window.SVGPathElement.prototype.getPathSegAtLength = function(distance) {
if (distance === undefined || !isFinite(distance))
throw 'Invalid arguments.';

var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');
measurementElement.setAttribute('d', this.getAttribute('d'));
var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;

if (lastPathSegment <= 0)
return 0;

do {
measurementElement.pathSegList.removeItem(lastPathSegment);
if (distance > measurementElement.getTotalLength())
break;
lastPathSegment--;
} while (lastPathSegment > 0);
return lastPathSegment;
}
}
}

if (!('SVGPathSegList' in window) || !('appendItem' in window.SVGPathSegList.prototype)) {
window.SVGPathSegList = function(pathElement) {
this._pathElement = pathElement;
this._list = this._parsePath(this._pathElement.getAttribute('d'));

this._mutationObserverConfig = { 'attributes': true, 'attributeFilter': ['d'] };
this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));
this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
}

window.SVGPathSegList.prototype.classname = 'SVGPathSegList';

Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {
get: function() {
this._checkPathSynchronizedToList();
return this._list.length;
},
enumerable: true
});

Object.defineProperty(window.SVGPathSegList.prototype, 'length', {
get: function() {
this._checkPathSynchronizedToList();
return this._list.length;
},
enumerable: true
});

Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {
get: function() {
if (!this._pathSegList)
this._pathSegList = new window.SVGPathSegList(this);
return this._pathSegList;
},
enumerable: true
});
Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', { get: function() { return this.pathSegList; }, enumerable: true });
Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', { get: function() { return this.pathSegList; }, enumerable: true });
Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', { get: function() { return this.pathSegList; }, enumerable: true });

window.SVGPathSegList.prototype._checkPathSynchronizedToList = function() {
this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());
}

window.SVGPathSegList.prototype._updateListFromPathMutations = function(mutationRecords) {
if (!this._pathElement)
return;
var hasPathMutations = false;
mutationRecords.forEach(function(record) {
if (record.attributeName == 'd')
hasPathMutations = true;
});
if (hasPathMutations)
this._list = this._parsePath(this._pathElement.getAttribute('d'));
}

window.SVGPathSegList.prototype._writeListToPath = function() {
this._pathElementMutationObserver.disconnect();
this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));
this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
}

window.SVGPathSegList.prototype.segmentChanged = function(pathSeg) {
this._writeListToPath();
}

window.SVGPathSegList.prototype.clear = function() {
this._checkPathSynchronizedToList();

this._list.forEach(function(pathSeg) {
pathSeg._owningPathSegList = null;
});
this._list = [];
this._writeListToPath();
}

window.SVGPathSegList.prototype.initialize = function(newItem) {
this._checkPathSynchronizedToList();

this._list = [newItem];
newItem._owningPathSegList = this;
this._writeListToPath();
return newItem;
}

window.SVGPathSegList.prototype._checkValidIndex = function(index) {
if (isNaN(index) || index < 0 || index >= this.numberOfItems)
throw 'INDEX_SIZE_ERR';
}

window.SVGPathSegList.prototype.getItem = function(index) {
this._checkPathSynchronizedToList();

this._checkValidIndex(index);
return this._list[index];
}

window.SVGPathSegList.prototype.insertItemBefore = function(newItem, index) {
this._checkPathSynchronizedToList();

if (index > this.numberOfItems)
index = this.numberOfItems;
if (newItem._owningPathSegList) {
newItem = newItem.clone();
}
this._list.splice(index, 0, newItem);
newItem._owningPathSegList = this;
this._writeListToPath();
return newItem;
}

window.SVGPathSegList.prototype.replaceItem = function(newItem, index) {
this._checkPathSynchronizedToList();

if (newItem._owningPathSegList) {
newItem = newItem.clone();
}
this._checkValidIndex(index);
this._list[index] = newItem;
newItem._owningPathSegList = this;
this._writeListToPath();
return newItem;
}

window.SVGPathSegList.prototype.removeItem = function(index) {
this._checkPathSynchronizedToList();

this._checkValidIndex(index);
var item = this._list[index];
this._list.splice(index, 1);
this._writeListToPath();
return item;
}

window.SVGPathSegList.prototype.appendItem = function(newItem) {
this._checkPathSynchronizedToList();

if (newItem._owningPathSegList) {
newItem = newItem.clone();
}
this._list.push(newItem);
newItem._owningPathSegList = this;
this._writeListToPath();
return newItem;
};

window.SVGPathSegList.prototype.matrixTransform = function(aSVGMatrix) {
this._checkPathSynchronizedToList();

var nLength = this._list.length;
for( var i = 0; i < nLength; ++i )
{
var nX;
var aPathSeg = this._list[i];
switch( aPathSeg.pathSegTypeAsLetter )
{
case 'C':
nX = aPathSeg._x2;
aPathSeg._x2 = aSVGMatrix.a * nX + aSVGMatrix.c * aPathSeg._y2 + aSVGMatrix.e;
aPathSeg._y2 = aSVGMatrix.b * nX + aSVGMatrix.d * aPathSeg._y2 + aSVGMatrix.f;
case 'Q':
nX = aPathSeg._x1;
aPathSeg._x1 = aSVGMatrix.a * nX + aSVGMatrix.c * aPathSeg._y1 + aSVGMatrix.e;
aPathSeg._y1 = aSVGMatrix.b * nX + aSVGMatrix.d * aPathSeg._y1 + aSVGMatrix.f;
case 'M':
case 'L':
nX = aPathSeg._x;
aPathSeg._x = aSVGMatrix.a * nX + aSVGMatrix.c * aPathSeg._y + aSVGMatrix.e;
aPathSeg._y = aSVGMatrix.b * nX + aSVGMatrix.d * aPathSeg._y + aSVGMatrix.f;
break;
default:
log( 'SVGPathSeg.matrixTransform: unexpected path segment type: '
+ aPathSeg.pathSegTypeAsLetter );
}
}

this._writeListToPath();
};

window.SVGPathSegList.prototype.changeOrientation = function() {
this._checkPathSynchronizedToList();

var aPathSegList = this._list;
var nLength = aPathSegList.length;
if( nLength == 0 ) return;

var nCurrentX = 0;
var nCurrentY = 0;

var aPathSeg = aPathSegList[0];
if( aPathSeg.pathSegTypeAsLetter == 'M' )
{
nCurrentX = aPathSeg.x;
nCurrentY = aPathSeg.y;
aPathSegList.shift();
--nLength;
}

var i;
for( i = 0; i < nLength; ++i )
{
aPathSeg = aPathSegList[i];
switch( aPathSeg.pathSegTypeAsLetter )
{
case 'C':
var nX = aPathSeg._x1;
aPathSeg._x1 = aPathSeg._x2;
aPathSeg._x2 = nX;
var nY = aPathSeg._y1;
aPathSeg._y1 = aPathSeg._y2;
aPathSeg._y2 = nY;
case 'M':
case 'L':
case 'Q':
var aPoint = { x: aPathSeg._x, y: aPathSeg._y };
aPathSeg._x = nCurrentX;
aPathSeg._y = nCurrentY;
nCurrentX = aPoint.x;
nCurrentY = aPoint.y;
break;
default:
log( 'SVGPathSegList.changeOrientation: unexpected path segment type: '
+ aPathSeg.pathSegTypeAsLetter );
}

}

aPathSegList.reverse();

var aMovePathSeg = new window.SVGPathSegMovetoAbs( this, nCurrentX, nCurrentY );
aPathSegList.unshift( aMovePathSeg );

this._writeListToPath();
};

window.SVGPathSegList._pathSegArrayAsString = function(pathSegArray) {
var string = '';
var first = true;
pathSegArray.forEach(function(pathSeg) {
if (first) {
first = false;
string += pathSeg._asPathString();
} else {
string += ' ' + pathSeg._asPathString();
}
});
return string;
}

window.SVGPathSegList.prototype._parsePath = function(string) {
if (!string || string.length == 0)
return [];

var owningPathSegList = this;

var Builder = function() {
this.pathSegList = [];
}

Builder.prototype.appendSegment = function(pathSeg) {
this.pathSegList.push(pathSeg);
}

var Source = function(string) {
this._string = string;
this._currentIndex = 0;
this._endIndex = this._string.length;
this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;

this._skipOptionalSpaces();
}

Source.prototype._isCurrentSpace = function() {
var character = this._string[this._currentIndex];
return character <= ' ' && (character == ' ' || character == '\n' || character == '\t' || character == '\r' || character == '\f');
}

Source.prototype._skipOptionalSpaces = function() {
while (this._currentIndex < this._endIndex && this._isCurrentSpace())
this._currentIndex++;
return this._currentIndex < this._endIndex;
}

Source.prototype._skipOptionalSpacesOrDelimiter = function() {
if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ',')
return false;
if (this._skipOptionalSpaces()) {
if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ',') {
this._currentIndex++;
this._skipOptionalSpaces();
}
}
return this._currentIndex < this._endIndex;
}

Source.prototype.hasMoreData = function() {
return this._currentIndex < this._endIndex;
}

Source.prototype.peekSegmentType = function() {
var lookahead = this._string[this._currentIndex];
return this._pathSegTypeFromChar(lookahead);
}

Source.prototype._pathSegTypeFromChar = function(lookahead) {
switch (lookahead) {
case 'Z':
case 'z':
return window.SVGPathSeg.PATHSEG_CLOSEPATH;
case 'M':
return window.SVGPathSeg.PATHSEG_MOVETO_ABS;
case 'm':
return window.SVGPathSeg.PATHSEG_MOVETO_REL;
case 'L':
return window.SVGPathSeg.PATHSEG_LINETO_ABS;
case 'l':
return window.SVGPathSeg.PATHSEG_LINETO_REL;
case 'C':
return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;
case 'c':
return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;
case 'Q':
return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;
case 'q':
return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;
case 'A':
return window.SVGPathSeg.PATHSEG_ARC_ABS;
case 'a':
return window.SVGPathSeg.PATHSEG_ARC_REL;
case 'H':
return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;
case 'h':
return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;
case 'V':
return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;
case 'v':
return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;
case 'S':
return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;
case 's':
return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;
case 'T':
return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;
case 't':
return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;
default:
return window.SVGPathSeg.PATHSEG_UNKNOWN;
}
}

Source.prototype._nextCommandHelper = function(lookahead, previousCommand) {
if ((lookahead == '+' || lookahead == '-' || lookahead == '.' || (lookahead >= '0' && lookahead <= '9')) && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {
if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS)
return window.SVGPathSeg.PATHSEG_LINETO_ABS;
if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL)
return window.SVGPathSeg.PATHSEG_LINETO_REL;
return previousCommand;
}
return window.SVGPathSeg.PATHSEG_UNKNOWN;
}

Source.prototype.initialCommandIsMoveTo = function() {
if (!this.hasMoreData())
return true;
var command = this.peekSegmentType();
return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;
}

Source.prototype._parseNumber = function() {
var exponent = 0;
var integer = 0;
var frac = 1;
var decimal = 0;
var sign = 1;
var expsign = 1;

var startIndex = this._currentIndex;

this._skipOptionalSpaces();

if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '+')
this._currentIndex++;
else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '-') {
this._currentIndex++;
sign = -1;
}

if (this._currentIndex == this._endIndex || ((this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') && this._string.charAt(this._currentIndex) != '.'))
return undefined;

var startIntPartIndex = this._currentIndex;
while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9')
this._currentIndex++; // Advance to first non-digit.

if (this._currentIndex != startIntPartIndex) {
var scanIntPartIndex = this._currentIndex - 1;
var multiplier = 1;
while (scanIntPartIndex >= startIntPartIndex) {
integer += multiplier * (this._string.charAt(scanIntPartIndex--) - '0');
multiplier *= 10;
}
}

if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '.') {
this._currentIndex++;

if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9')
return undefined;
while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {
frac *= 10;
decimal += (this._string.charAt(this._currentIndex) - '0') / frac;
this._currentIndex += 1;
}
}

if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == 'e' || this._string.charAt(this._currentIndex) == 'E') && (this._string.charAt(this._currentIndex + 1) != 'x' && this._string.charAt(this._currentIndex + 1) != 'm')) {
this._currentIndex++;

if (this._string.charAt(this._currentIndex) == '+') {
this._currentIndex++;
} else if (this._string.charAt(this._currentIndex) == '-') {
this._currentIndex++;
expsign = -1;
}

if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9')
return undefined;

while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {
exponent *= 10;
exponent += (this._string.charAt(this._currentIndex) - '0');
this._currentIndex++;
}
}

var number = integer + decimal;
number *= sign;

if (exponent)
number *= Math.pow(10, expsign * exponent);

if (startIndex == this._currentIndex)
return undefined;

this._skipOptionalSpacesOrDelimiter();

return number;
}

Source.prototype._parseArcFlag = function() {
if (this._currentIndex >= this._endIndex)
return undefined;
var flag = false;
var flagChar = this._string.charAt(this._currentIndex++);
if (flagChar == '0')
flag = false;
else if (flagChar == '1')
flag = true;
else
return undefined;

this._skipOptionalSpacesOrDelimiter();
return flag;
}

Source.prototype.parseSegment = function() {
var lookahead = this._string[this._currentIndex];
var command = this._pathSegTypeFromChar(lookahead);
if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {
if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN)
return null;
command = this._nextCommandHelper(lookahead, this._previousCommand);
if (command == window.SVGPathSeg.PATHSEG_UNKNOWN)
return null;
} else {
this._currentIndex++;
}

this._previousCommand = command;

switch (command) {
case window.SVGPathSeg.PATHSEG_MOVETO_REL:
return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_MOVETO_ABS:
return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_REL:
return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_ABS:
return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:
return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:
return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:
return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());
case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:
return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());
case window.SVGPathSeg.PATHSEG_CLOSEPATH:
this._skipOptionalSpaces();
return new window.SVGPathSegClosePath(owningPathSegList);
case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);
case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);
case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:
var points = {x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);
case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:
var points = {x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);
case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);
case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);
case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:
return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:
return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
case window.SVGPathSeg.PATHSEG_ARC_REL:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);
case window.SVGPathSeg.PATHSEG_ARC_ABS:
var points = {x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber()};
return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);
default:
throw 'Unknown path seg type.'
}
}

var builder = new Builder();
var source = new Source(string);

if (!source.initialCommandIsMoveTo())
return [];
while (source.hasMoreData()) {
var pathSeg = source.parseSegment();
if (!pathSeg)
return [];
builder.appendSegment(pathSeg);
}

return builder.pathSegList;
}
}
}());

/*****
* @svgpathend
*
*  The above code is a derivative work of some part of the SVGPathSeg API.
*
*  This API is a drop-in replacement for the SVGPathSeg and SVGPathSegList APIs that were removed from
*  SVG2 (https://lists.w3.org/Archives/Public/www-svg/2015Jun/0044.html), including the latest spec
*  changes which were implemented in Firefox 43 and Chrome 46.
*
*  @source https://github.com/progers/pathseg
*/


/*****
* @licstart
*
* The following is the license notice for the part of JavaScript code  of
* this page included between the '@libreofficestart' and the '@libreofficeend'
* notes.
*/

/*****  ******************************************************************
*
* This file is part of the LibreOffice project.
*
* This Source Code Form is subject to the terms of the Mozilla Public
* License, v. 2.0. If a copy of the MPL was not distributed with this
* file, You can obtain one at http://mozilla.org/MPL/2.0/.
*
* This file incorporates work covered by the following license notice:
*
*   Licensed to the Apache Software Foundation (ASF) under one or more
*   contributor license agreements. See the NOTICE file distributed
*   with this work for additional information regarding copyright
*   ownership. The ASF licenses this file to you under the Apache
*   License, Version 2.0 (the 'License'); you may not use this file
*   except in compliance with the License. You may obtain a copy of
*   the License at http://www.apache.org/licenses/LICENSE-2.0 .
*
************************************************************************/

/*****
* @licend
*
* The above is the license notice for the part of JavaScript code  of
* this page included between the '@libreofficestart' and the '@libreofficeend'
* notes.
*/


/*****
* @libreofficestart
*
* Several parts of the following code are the result of the porting,
* started on August 2011, of the C++ code included in the source
* files placed under the folder '/slideshow/source' and
* sub-folders. This got later rebased onto the AL2-licensed versions
* of those files in early 2013.
* @source https://cgit.freedesktop.org/libreoffice/core/tree/slideshow/source
*
*/


window.onload = init;


var aOOOElemMetaSlides = 'ooo:meta_slides';
var aOOOElemMetaSlide = 'ooo:meta_slide';
var aOOOElemTextField = 'ooo:text_field';
var aPresentationClipPathId = 'presentation_clip_path';
var aPresentationClipPathShrinkId = 'presentation_clip_path_shrink';

var aOOOAttrNumberOfSlides = 'number-of-slides';
var aOOOAttrStartSlideNumber= 'start-slide-number';
var aOOOAttrNumberingType = 'page-numbering-type';
var aOOOAttrListItemNumberingType= 'numbering-type';
var aOOOAttrUsePositionedChars = 'use-positioned-chars';

var aOOOAttrSlide = 'slide';
var aOOOAttrMaster = 'master';
var aOOOAttrSlideDuration = 'slide-duration';
var aOOOAttrHasTransition = 'has-transition';
var aOOOAttrBackgroundVisibility = 'background-visibility';
var aOOOAttrMasterObjectsVisibility = 'master-objects-visibility';
var aOOOAttrPageNumberVisibility = 'page-number-visibility';
var aOOOAttrDateTimeVisibility = 'date-time-visibility';
var aOOOAttrFooterVisibility = 'footer-visibility';
var aOOOAttrHeaderVisibility = 'header-visibility';
var aOOOAttrDateTimeField = 'date-time-field';
var aOOOAttrFooterField = 'footer-field';
var aOOOAttrHeaderField = 'header-field';

var aOOOAttrDateTimeFormat = 'date-time-format';

var aOOOAttrTextAdjust = 'text-adjust';

var aClipPathGroupClassName = 'ClipPathGroup';
var aPageClassName = 'Page';
var aSlideNumberClassName = 'Slide_Number';
var aDateTimeClassName = 'Date/Time';
var aFooterClassName = 'Footer';
var aHeaderClassName = 'Header';

var NSS = {};
NSS['svg']='http://www.w3.org/2000/svg';
NSS['rdf']='http://www.w3.org/1999/02/22-rdf-syntax-ns#';
NSS['xlink']='http://www.w3.org/1999/xlink';
NSS['xml']='http://www.w3.org/XML/1998/namespace';
NSS['ooo'] = 'http://xml.openoffice.org/svg/export';
NSS['presentation'] = 'http://sun.com/xmlns/staroffice/presentation';
NSS['smil'] = 'http://www.w3.org/2001/SMIL20/';
NSS['anim'] = 'urn:oasis:names:tc:opendocument:xmlns:animation:1.0';

var SLIDE_MODE = 1;
var INDEX_MODE = 2;

var MOUSE_UP = 1;
var MOUSE_DOWN = 2; // eslint-disable-line no-unused-vars
var MOUSE_MOVE = 3; // eslint-disable-line no-unused-vars
var MOUSE_WHEEL = 4;

var LEFT_KEY = 37;          // cursor left keycode
var UP_KEY = 38;            // cursor up keycode
var RIGHT_KEY = 39;         // cursor right keycode
var DOWN_KEY = 40;          // cursor down keycode
var PAGE_UP_KEY = 33;       // page up keycode
var PAGE_DOWN_KEY = 34;     // page down keycode
var HOME_KEY = 36;          // home keycode
var END_KEY = 35;           // end keycode
var ENTER_KEY = 13;
var SPACE_KEY = 32;
var ESCAPE_KEY = 27;
var Q_KEY = 81;

var HIDDEN = 0;
var VISIBLE = 1;
var INHERIT = 2;
var aVisibilityAttributeValue = [ 'hidden', 'visible', 'inherit' ];  // eslint-disable-line no-unused-vars
var aVisibilityValue = { 'hidden' : HIDDEN, 'visible' : VISIBLE, 'inherit' : INHERIT };

var ROOT_NODE = document.getElementsByTagNameNS( NSS['svg'], 'svg' )[0];
var WIDTH = 0;
var HEIGHT = 0;
var INDEX_COLUMNS_DEFAULT = 3;
var INDEX_OFFSET = 0;

var Detect = configureDetectionTools();
var theMetaDoc;
var theSlideIndexPage;
var currentMode = SLIDE_MODE;
var processingEffect = false;
var nCurSlide = undefined;
var bTextHasBeenSelected = false;
var sLastSelectedText = '';


var charCodeDictionary = getDefaultCharCodeDictionary();
var keyCodeDictionary = getDefaultKeyCodeDictionary();

var mouseHandlerDictionary = getDefaultMouseHandlerDictionary();


function object( aObject )
{
var F = function() {};
F.prototype = aObject;
return new F();
}


function extend( aSubType, aSuperType )
{
if (!aSuperType || !aSubType)
{
alert('extend failed, verify dependencies');
}
var OP = Object.prototype;
var sp = aSuperType.prototype;
var rp = object( sp );
aSubType.prototype = rp;

rp.constructor = aSubType;
aSubType.superclass = sp;

if (aSuperType != Object && sp.constructor == OP.constructor)
{
sp.constructor = aSuperType;
}

return aSubType;
}


function instantiate( TemplateClass, BaseType )
{
if( !TemplateClass.instanceSet )
TemplateClass.instanceSet = [];

var nSize = TemplateClass.instanceSet.length;

for( var i = 0; i < nSize; ++i )
{
if( TemplateClass.instanceSet[i].base === BaseType )
return TemplateClass.instanceSet[i].instance;
}

TemplateClass.instanceSet[ nSize ] = {};
TemplateClass.instanceSet[ nSize ].base = BaseType;
TemplateClass.instanceSet[ nSize ].instance = TemplateClass( BaseType );

return TemplateClass.instanceSet[ nSize ].instance;
}


function Rectangle( aSVGRectElem )
{
var x = parseInt( aSVGRectElem.getAttribute( 'x' ) );
var y = parseInt( aSVGRectElem.getAttribute( 'y' ) );
var width = parseInt( aSVGRectElem.getAttribute( 'width' ) );
var height = parseInt( aSVGRectElem.getAttribute( 'height' ) );

this.left = x;
this.right = x + width;
this.top = y;
this.bottom = y + height;
}

function getKeyByValue(aObj, value) {
for(var key in aObj) {
if(aObj[key] == value)
return key;
}
return null;
}

function log( message )
{
if( typeof console == 'object' )
{
console.log( message );
}
else if( typeof opera == 'object' )
{
opera.postError( message );
}
else if( typeof java == 'object' && typeof java.lang == 'object' )
{
java.lang.System.out.println( message );
}
}

function getNSAttribute( sNSPrefix, aElem, sAttrName )
{
if( !aElem ) return null;
if( 'getAttributeNS' in aElem )
{
return aElem.getAttributeNS( NSS[sNSPrefix], sAttrName );
}
else
{
return aElem.getAttribute( sNSPrefix + ':' + sAttrName );
}
}

function getOOOAttribute( aElem, sAttrName )
{
return getNSAttribute( 'ooo', aElem, sAttrName );
}

function setNSAttribute( sNSPrefix, aElem, sAttrName, aValue )
{
if( !aElem ) return false;
if( 'setAttributeNS' in aElem )
{
aElem.setAttributeNS( NSS[sNSPrefix], sAttrName, aValue );
return true;
}
else
{
aElem.setAttribute(sNSPrefix + ':' + sAttrName, aValue );
return true;
}
}

function getElementsByClassName( aElem, sClassName )
{

var aElementSet = [];
if( 'getElementsByClassName' in aElem )
{
aElementSet = aElem.getElementsByClassName( sClassName );
}
else
{
var aElementSetByClassProperty = getElementsByProperty( aElem, 'class' );
for( var i = 0; i < aElementSetByClassProperty.length; ++i )
{
var sAttrClassName = aElementSetByClassProperty[i].getAttribute( 'class' );
if( sAttrClassName == sClassName )
{
aElementSet.push( aElementSetByClassProperty[i] );
}
}
}
return aElementSet;
}

function getElementByClassName( aElem, sClassName /*, sTagName */)
{
var aElementSet = getElementsByClassName( aElem, sClassName );
if ( aElementSet.length == 1 )
return aElementSet[0];
else
return null;
}

function getClassAttribute(  aElem )
{
if( aElem )
return aElem.getAttribute( 'class' );
return '';
}

function createElementGroup( aParentElement, aElementList, nFrom, nCount, sGroupClass, sGroupId )
{
var nTo = nFrom + nCount;
if( nCount < 1 || aElementList.length < nTo )
{
log( 'createElementGroup: not enough elements available.' );
return;
}
var firstElement = aElementList[nFrom];
if( !firstElement )
{
log( 'createElementGroup: element not found.' );
return;
}
var aGroupElement = document.createElementNS( NSS['svg'], 'g' );
if( sGroupId )
aGroupElement.setAttribute( 'id', sGroupId );
if( sGroupClass )
aGroupElement.setAttribute( 'class', sGroupClass );
aParentElement.insertBefore( aGroupElement, firstElement );
var i = nFrom;
for( ; i < nTo; ++i )
{
aParentElement.removeChild( aElementList[i] );
aGroupElement.appendChild( aElementList[i] );
}
}

function initVisibilityProperty( aElement )
{
var nVisibility = VISIBLE;
var sVisibility = aElement.getAttribute( 'visibility' );
if( sVisibility ) nVisibility = aVisibilityValue[ sVisibility ];
return nVisibility;
}

function getSafeIndex( nIndex, nMin, nMax )
{
if( nIndex < nMin )
return nMin;
else if( nIndex > nMax )
return nMax;
else
return nIndex;
}

function getRandomInt( nMax )
{
return Math.floor( Math.random() * nMax );
}

function isTextFieldElement( aElement ) // eslint-disable-line no-unused-vars
{
var sClassName = aElement.getAttribute( 'class' );
return ( sClassName === aSlideNumberClassName ) ||
( sClassName === aFooterClassName ) ||
( sClassName === aHeaderClassName ) ||
( sClassName === aDateTimeClassName );
}


function DebugPrinter()
{
this.bEnabled = false;
}


DebugPrinter.prototype.on = function()
{
this.bEnabled = true;
};

DebugPrinter.prototype.off = function()
{
this.bEnabled = false;
};

DebugPrinter.prototype.isEnabled = function()
{
return this.bEnabled;
};

DebugPrinter.prototype.print = function( sMessage, nTime )
{
if( this.isEnabled() )
{
var sInfo = 'DBG: ' + sMessage;
if( nTime )
sInfo += ' (at: ' + String( nTime / 1000 ) + 's)';
log( sInfo );
}
};


var aGenericDebugPrinter = new DebugPrinter();
aGenericDebugPrinter.off();
var DBGLOG = bind2( DebugPrinter.prototype.print, aGenericDebugPrinter );

var NAVDBG = new DebugPrinter();
NAVDBG.off();

var ANIMDBG = new DebugPrinter();
ANIMDBG.off();

var aRegisterEventDebugPrinter = new DebugPrinter();
aRegisterEventDebugPrinter.off();

var aTimerEventQueueDebugPrinter = new DebugPrinter();
aTimerEventQueueDebugPrinter.off();

var aEventMultiplexerDebugPrinter = new DebugPrinter();
aEventMultiplexerDebugPrinter.off();

var aNextEffectEventArrayDebugPrinter = new DebugPrinter();
aNextEffectEventArrayDebugPrinter.off();

var aActivityQueueDebugPrinter = new DebugPrinter();
aActivityQueueDebugPrinter.off();

var aAnimatedElementDebugPrinter = new DebugPrinter();
aAnimatedElementDebugPrinter.off();


function MetaDocument()
{
var aMetaDocElem = document.getElementById( aOOOElemMetaSlides );
assert( aMetaDocElem, 'MetaDocument: the svg element with id:' + aOOOElemMetaSlides + 'is not valid.');

this.nNumberOfSlides = parseInt( aMetaDocElem.getAttributeNS( NSS['ooo'], aOOOAttrNumberOfSlides ) );
assert( typeof this.nNumberOfSlides == 'number' && this.nNumberOfSlides > 0,
'MetaDocument: number of slides is zero or undefined.' );
this.nStartSlideNumber = parseInt( aMetaDocElem.getAttributeNS( NSS['ooo'], aOOOAttrStartSlideNumber ) ) || 0;
this.sPageNumberingType = aMetaDocElem.getAttributeNS( NSS['ooo'], aOOOAttrNumberingType ) || 'arabic';
this.bIsUsePositionedChars = ( aMetaDocElem.getAttributeNS( NSS['ooo'], aOOOAttrUsePositionedChars ) === 'true' );

this.aClipPathGroup = getElementByClassName( ROOT_NODE, aClipPathGroupClassName );
assert( this.aClipPathGroup, 'MetaDocument: the clip path group element is not valid.');

this.aPresentationClipPath = document.getElementById( aPresentationClipPathId );
assert( this.aPresentationClipPath,
'MetaDocument: the presentation clip path element element is not valid.');

this.aMetaSlideSet = [];
this.aMasterPageSet = {};
this.aTextFieldHandlerSet = {};
this.aTextFieldContentProviderSet = [];
this.aSlideNumberProvider = new SlideNumberProvider( this.nStartSlideNumber + 1, this.sPageNumberingType );

this.bIsAnimated = false;
this.aSlideAnimationsMap = {};
this.initSlideAnimationsMap();

this.theMetaDummySlide = new MetaSlide( 'ooo:meta_dummy_slide', this );

for( var i = 0; i < this.nNumberOfSlides; ++i )
{
var sMetaSlideId = aOOOElemMetaSlide + '_' + i;
this.aMetaSlideSet.push( new MetaSlide( sMetaSlideId, this ) );
}
assert( this.aMetaSlideSet.length == this.nNumberOfSlides,
'MetaDocument: aMetaSlideSet.length != nNumberOfSlides.' );
}

MetaDocument.prototype =
{

getCurrentSlide : function()
{
return this.aMetaSlideSet[nCurSlide];
},

setCurrentSlide : function( nSlideIndex )
{
if( nSlideIndex >= 0 &&  nSlideIndex < this.nNumberOfSlides )
{
if( nCurSlide !== undefined )
this.aMetaSlideSet[nCurSlide].hide();
this.aMetaSlideSet[nSlideIndex].show();
nCurSlide = nSlideIndex;
}
else
{
log('MetaDocument.setCurrentSlide: slide index out of range: ' + nSlideIndex );
}
},


initSlideAnimationsMap : function()
{
var aAnimationsSection = document.getElementById( 'presentation-animations' );
if( aAnimationsSection )
{
var aAnimationsDefSet = aAnimationsSection.getElementsByTagName( 'defs' );

this.bIsAnimated = ( typeof aAnimationsDefSet.length =='number' &&
aAnimationsDefSet.length > 0 );

for( var i = 0; i < aAnimationsDefSet.length; ++i )
{
var sSlideId = aAnimationsDefSet[i].getAttributeNS( NSS['ooo'], aOOOAttrSlide );
var aChildSet = getElementChildren( aAnimationsDefSet[i] );
if( sSlideId && ( aChildSet.length === 1 ) )
{
this.aSlideAnimationsMap[ sSlideId ] = aChildSet[0];
}
}
}
}

}; // end MetaDocument prototype

function MetaSlide( sMetaSlideId, aMetaDoc )
{
this.theDocument = document;
this.id = sMetaSlideId;
this.theMetaDoc = aMetaDoc;

this.element = this.theDocument.getElementById( this.id );
assert( this.element,
'MetaSlide: meta_slide element <' + this.id + '> not found.' );

this.slideId = this.element.getAttributeNS( NSS['ooo'], aOOOAttrSlide );
this.slideElement = this.theDocument.getElementById( this.slideId );
assert( this.slideElement,
'MetaSlide: slide element <' + this.slideId + '> not found.' );

if( this.slideId !== 'dummy_slide' )
this.nSlideNumber = parseInt( this.slideId.substr(2) );
else
this.nSlideNumber= -1;

this.aContainerElement = this.slideElement.parentNode;
this.slideContainerId = this.aContainerElement.getAttribute( 'id' );
this.aVisibilityStatusElement = this.aContainerElement.parentNode;

this.pageElement = getElementByClassName( this.slideElement, aPageClassName );
assert( this.pageElement,
'MetaSlide: page element <' + this.slideId + '> not found.' );

this.masterPage = this.initMasterPage();

this.nAreMasterObjectsVisible     = this.initVisibilityProperty( aOOOAttrMasterObjectsVisibility,  VISIBLE );
this.nIsBackgroundVisible         = this.initVisibilityProperty( aOOOAttrBackgroundVisibility,     VISIBLE );
this.nIsPageNumberVisible         = this.initVisibilityProperty( aOOOAttrPageNumberVisibility,     HIDDEN );
this.nIsDateTimeVisible           = this.initVisibilityProperty( aOOOAttrDateTimeVisibility,       VISIBLE );
this.nIsFooterVisible             = this.initVisibilityProperty( aOOOAttrFooterVisibility,         VISIBLE );
this.nIsHeaderVisible             = this.initVisibilityProperty( aOOOAttrHeaderVisibility,         VISIBLE );

this.bIsDateTimeVariable = undefined;

this.aTextFieldContentProviderSet = {};
this.aTextFieldContentProviderSet[aSlideNumberClassName]   = this.initSlideNumberFieldContentProvider();
this.aTextFieldContentProviderSet[aDateTimeClassName]      = this.initDateTimeFieldContentProvider( aOOOAttrDateTimeField );
this.aTextFieldContentProviderSet[aFooterClassName]        = this.initFixedTextFieldContentProvider( aOOOAttrFooterField );
this.aTextFieldContentProviderSet[aHeaderClassName]        = this.initFixedTextFieldContentProvider( aOOOAttrHeaderField );

this.fDuration = this.initSlideDuration();

this.aTransitionHandler = null;
this.bHasTransition = this.initHasTransition() || true;
if( this.bHasTransition )
{
this.aTransitionHandler = new SlideTransition( this.getSlideAnimationsRoot(), this.slideId );
}

this.aSlideAnimationsHandler = new SlideAnimations( aSlideShow.getContext() );
this.aSlideAnimationsHandler.importAnimations( this.getSlideAnimationsRoot() );
this.aSlideAnimationsHandler.parseElements();

if( false && this.aSlideAnimationsHandler.aRootNode )
log( this.aSlideAnimationsHandler.aRootNode.info( true ) );

this.aTextShapeSet = this.collectTextShapes();

this.aHyperlinkSet = this.initHyperlinks();

}

MetaSlide.prototype =
{

show : function()
{
this.updateMasterPageView();
this.aVisibilityStatusElement.setAttribute( 'visibility', 'inherit' );
},

hide : function()
{
this.aVisibilityStatusElement.setAttribute( 'visibility', 'hidden' );
},

updateMasterPageView : function()
{
if( !this.aMasterPageView )
{
this.aMasterPageView = new MasterPageView( this );
this.aMasterPageView.attachToSlide();
}
this.aMasterPageView.update();
},

initMasterPage : function()
{
var sMasterPageId = this.element.getAttributeNS( NSS['ooo'], aOOOAttrMaster );

if( !this.theMetaDoc.aMasterPageSet.hasOwnProperty( sMasterPageId ) )
{
this.theMetaDoc.aMasterPageSet[ sMasterPageId ] = new MasterPage( sMasterPageId, this );

this.theMetaDoc.aTextFieldHandlerSet[ sMasterPageId ] = {};
}
return this.theMetaDoc.aMasterPageSet[ sMasterPageId ];
},

initSlideDuration : function()
{
var sSlideDuration = this.element.getAttributeNS( NSS['ooo'], aOOOAttrSlideDuration );
if( sSlideDuration && sSlideDuration.length > 0 )
return parseFloat( sSlideDuration );
else
return -1;
},

initHasTransition : function()
{
var sHasTransition = this.element.getAttributeNS( NSS['ooo'], aOOOAttrHasTransition );
return ( sHasTransition === 'true' );
},

initVisibilityProperty : function( aVisibilityAttribute, nDefaultValue )
{
var nVisibility = nDefaultValue;
var sVisibility = getOOOAttribute( this.element, aVisibilityAttribute );
if( sVisibility )
nVisibility = aVisibilityValue[ sVisibility ];
return nVisibility;
},

initSlideNumberFieldContentProvider : function()
{
return this.theMetaDoc.aSlideNumberProvider;
},

initDateTimeFieldContentProvider : function( aOOOAttrDateTimeField )
{
var sTextFieldId = getOOOAttribute( this.element, aOOOAttrDateTimeField );
if( !sTextFieldId )  return null;

var nLength = aOOOElemTextField.length + 1;
var nIndex = parseInt(sTextFieldId.substring( nLength ) );
if( typeof nIndex != 'number') return null;

if( !this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ] )
{
var aTextField;
var aTextFieldElem = document.getElementById( sTextFieldId );
var sClassName = getClassAttribute( aTextFieldElem );
if( sClassName == 'FixedDateTimeField' )
{
aTextField = new FixedTextProvider( aTextFieldElem );
this.bIsDateTimeVariable = false;
}
else if( sClassName == 'VariableDateTimeField' )
{
aTextField = new CurrentDateTimeProvider( aTextFieldElem );
this.bIsDateTimeVariable = true;
}
else
{
aTextField = null;
}
this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ] = aTextField;
}
return this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ];
},

initFixedTextFieldContentProvider : function( aOOOAttribute )
{
var sTextFieldId = getOOOAttribute( this.element, aOOOAttribute );
if( !sTextFieldId ) return null;

var nLength = aOOOElemTextField.length + 1;
var nIndex = parseInt( sTextFieldId.substring( nLength ) );
if( typeof nIndex != 'number') return null;

if( !this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ] )
{
var aTextFieldElem = document.getElementById( sTextFieldId );
this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ]
= new FixedTextProvider( aTextFieldElem );
}
return this.theMetaDoc.aTextFieldContentProviderSet[ nIndex ];
},

collectTextShapes : function()
{
var aTextShapeSet = [];
var aTextShapeIndexElem = getElementByClassName( document, 'TextShapeIndex' );
if( aTextShapeIndexElem )
{
var aIndexEntryList = getElementChildren( aTextShapeIndexElem );
var i;
for( i = 0; i < aIndexEntryList.length; ++i )
{
var sSlideId = getOOOAttribute( aIndexEntryList[i], 'slide' );
if( sSlideId === this.slideId )
{
var sTextShapeIds = getOOOAttribute( aIndexEntryList[i], 'id-list' );
if( sTextShapeIds )
{
var aTextShapeIdSet =  sTextShapeIds.split( ' ' );
var j;
for( j = 0; j < aTextShapeIdSet.length; ++j )
{
var aTextShapeElem = document.getElementById( aTextShapeIdSet[j] );
if( aTextShapeElem )
{
aTextShapeSet.push( aTextShapeElem );
}
else
{
log( 'warning: MetaSlide.collectTextShapes: text shape with id <' + aTextShapeIdSet[j] + '> is not valid.'  );
}
}
}
break;
}
}
}
return aTextShapeSet;
},

initHyperlinks : function()
{
var aHyperlinkSet = {};
var i;
for( i = 0; i < this.aTextShapeSet.length; ++i )
{
if( this.aTextShapeSet[i] )
{
var aHyperlinkIdList = getElementByClassName( this.aTextShapeSet[i], 'HyperlinkIdList' );
if( aHyperlinkIdList )
{
var sHyperlinkIds = aHyperlinkIdList.textContent;
if( sHyperlinkIds )
{
var aHyperlinkIdSet = sHyperlinkIds.trim().split( ' ' );
var j;
for( j = 0; j < aHyperlinkIdSet.length; ++j )
{
var sId = aHyperlinkIdSet[j];
aHyperlinkSet[ sId ] = new HyperlinkElement( sId, this.aSlideAnimationsHandler.aEventMultiplexer );
}
}
}
}
}
return aHyperlinkSet;
},

getSlideAnimationsRoot : function()
{
return this.theMetaDoc.aSlideAnimationsMap[ this.slideId ];
}

}; // end MetaSlide prototype

function MasterPage( sMasterPageId, aMetaSlide )
{
this.id = sMasterPageId;
this.metaSlide = aMetaSlide;

this.element = document.getElementById( this.id );
assert( this.element,
'MasterPage: master page element <' + this.id + '> not found.' );

this.background = getElementByClassName( this.element, 'Background' );
if( this.background )
{
this.backgroundId = this.background.getAttribute( 'id' );
this.backgroundVisibility = initVisibilityProperty( this.background );
}
else
{
this.backgroundId = '';
log( 'MasterPage: the background element is not valid.' );
}

this.backgroundObjects = getElementByClassName( this.element, 'BackgroundObjects' );
if( this.backgroundObjects )
{
this.backgroundObjectsId = this.backgroundObjects.getAttribute( 'id' );
this.backgroundObjectsVisibility = initVisibilityProperty( this.backgroundObjects );

if( this.backgroundObjectsVisibility != HIDDEN )
{
var aBackgroundObjectList = getElementChildren( this.backgroundObjects );
var nFrom = 0;
var nCount = 0;
var nSubGroupId = 1;
var sClass;
var sId = '';
this.aBackgroundObjectSubGroupIdList = [];
var i = 0;
for( ; i < aBackgroundObjectList.length; ++i )
{
sClass = aBackgroundObjectList[i].getAttribute( 'class' );
if( !sClass || ( ( sClass !== aDateTimeClassName ) && ( sClass !== aFooterClassName )
&& ( sClass !== aHeaderClassName ) && ( sClass !== aSlideNumberClassName ) ) )
{
if( nCount === 0 )
{
nFrom = i;
sId = this.backgroundObjectsId + '.' + nSubGroupId;
++nSubGroupId;
this.aBackgroundObjectSubGroupIdList.push( sId );
}
++nCount;
}
else
{
this.aBackgroundObjectSubGroupIdList.push( sClass );
if( nCount !== 0 )
{
createElementGroup( this.backgroundObjects, aBackgroundObjectList, nFrom, nCount, 'BackgroundObjectSubgroup', sId );
nCount = 0;
}
}
}
if( nCount !== 0 )
{
createElementGroup( this.backgroundObjects, aBackgroundObjectList, nFrom, nCount, 'BackgroundObjectSubgroup', sId );
}
}
}
else
{
this.backgroundObjectsId = '';
log( 'MasterPage: the background objects element is not valid.' );
}

this.aPlaceholderShapeSet = {};
this.initPlaceholderShapes();
}

MasterPage.prototype =
{

initPlaceholderShapes : function()
{
this.aPlaceholderShapeSet[ aSlideNumberClassName ] = new PlaceholderShape( this, aSlideNumberClassName );
this.aPlaceholderShapeSet[ aDateTimeClassName ] = new PlaceholderShape( this, aDateTimeClassName );
this.aPlaceholderShapeSet[ aFooterClassName ] = new PlaceholderShape( this, aFooterClassName );
this.aPlaceholderShapeSet[ aHeaderClassName ] = new PlaceholderShape( this, aHeaderClassName );
}

}; // end MasterPage prototype

function PlaceholderShape( aMasterPage, sClassName )
{
this.masterPage = aMasterPage;
this.className = sClassName;

this.element = null;
this.textElement = null;
this.init();
}

PlaceholderShape.prototype.isValid = function()
{
return ( this.element && this.textElement );
};


PlaceholderShape.prototype.init = function()
{

var aTextFieldElement = getElementByClassName( this.masterPage.backgroundObjects, this.className );
if( aTextFieldElement )
{
var aPlaceholderElement = getElementByClassName( aTextFieldElement, 'PlaceholderText' );
if( aPlaceholderElement )
{
var aSVGRectElem = getElementByClassName( aTextFieldElement, 'BoundingBox' );
if( aSVGRectElem )
{
var aRect = new Rectangle( aSVGRectElem );
var sTextAdjust = getOOOAttribute( aTextFieldElement, aOOOAttrTextAdjust ) || 'left';
var sTextAnchor, sX;
if( sTextAdjust == 'left' )
{
sTextAnchor = 'start';
sX = String( aRect.left );
}
else if( sTextAdjust == 'right' )
{
sTextAnchor = 'end';
sX = String( aRect.right );
}
else if( sTextAdjust == 'center' )
{
sTextAnchor = 'middle';
var nMiddle = ( aRect.left + aRect.right ) / 2;
sX = String( parseInt( String( nMiddle ) ) );
}
if( sTextAnchor )
aPlaceholderElement.setAttribute( 'text-anchor', sTextAnchor );
if( sX )
aPlaceholderElement.setAttribute( 'x', sX );
}

if( this.masterPage.metaSlide.theMetaDoc.bIsUsePositionedChars )
{
var aTextLineGroupElem = aPlaceholderElement.parentNode.parentNode;
if( aTextLineGroupElem )
{
var sFontFamilyAttr = aTextLineGroupElem.getAttribute( 'font-family' );
if( sFontFamilyAttr )
{
var aChildSet = getElementChildren( aTextLineGroupElem );
if( aChildSet.length > 1  )
var i = 1;
for( ; i < aChildSet.length; ++i )
{
aTextLineGroupElem.removeChild( aChildSet[i] );
}
}
}
}
this.element = aTextFieldElement;
this.textElement = aPlaceholderElement;
}
}
};

function MasterPageView( aMetaSlide )
{
this.aMetaSlide = aMetaSlide;
this.aSlideElement = aMetaSlide.slideElement;
this.aPageElement = aMetaSlide.pageElement;
this.aMasterPage = aMetaSlide.masterPage;
this.aMPVElement = this.createElement();
this.bIsAttached = false;
}


MasterPageView.prototype.attachToSlide = function()
{
if( !this.bIsAttached )
{
var aInsertedElement = this.aSlideElement.insertBefore( this.aMPVElement, this.aPageElement );
assert( aInsertedElement === this.aMPVElement,
'MasterPageView.attachToSlide: aInsertedElement != this.aMPVElement' );

this.bIsAttached = true;
}
};

MasterPageView.prototype.detachFromSlide = function()
{
if( this.bIsAttached )
{
this.aSlideElement.removeChild( this.aMPVElement );
this.bIsAttached = false;
}
};

MasterPageView.prototype.update = function()
{
if( this.aDateTimeFieldHandler && this.aMetaSlide.bIsDateTimeVariable )
this.aDateTimeFieldHandler.update();
};


MasterPageView.prototype.createElement = function()
{
var theDocument = document;
var aMasterPageViewElement = theDocument.createElementNS( NSS['svg'], 'g' );
assert( aMasterPageViewElement,
'MasterPageView.createElement: failed to create a master page view element.' );
aMasterPageViewElement.setAttribute( 'class', 'MasterPageView' );

var aWhiteRect = theDocument.createElementNS( NSS['svg'], 'rect' );
var nWidthExt = WIDTH / 1000;
var nHeightExt = HEIGHT / 1000;
aWhiteRect.setAttribute( 'x', String( -nWidthExt / 2 ) );
aWhiteRect.setAttribute( 'y', String( -nHeightExt / 2 ) );
aWhiteRect.setAttribute( 'width', String( WIDTH + nWidthExt ) );
aWhiteRect.setAttribute( 'height', String( HEIGHT + nHeightExt ) );
aWhiteRect.setAttribute( 'fill', '#FFFFFF' );
aMasterPageViewElement.appendChild( aWhiteRect );

if( this.aMetaSlide.nIsBackgroundVisible )
{
this.aBackgroundElement = theDocument.createElementNS( NSS['svg'], 'use' );
this.aBackgroundElement.setAttribute( 'class', 'Background' );
setNSAttribute( 'xlink', this.aBackgroundElement,
'href', '#' + this.aMasterPage.backgroundId );

aMasterPageViewElement.appendChild( this.aBackgroundElement );
}

if( this.aMetaSlide.nAreMasterObjectsVisible )
{
this.aBackgroundObjectsElement = theDocument.createElementNS( NSS['svg'], 'g' );
this.aBackgroundObjectsElement.setAttribute( 'class', 'BackgroundObjects' );

var aBackgroundObjectSubGroupIdList = this.aMasterPage.aBackgroundObjectSubGroupIdList;
this.aBackgroundSubGroupElementSet = [];
var aPlaceholderShapeSet = this.aMasterPage.aPlaceholderShapeSet;
var aTextFieldContentProviderSet = this.aMetaSlide.aTextFieldContentProviderSet;
var aDefsElement = this.aMetaSlide.element.parentNode;
var aTextFieldHandlerSet = this.aMetaSlide.theMetaDoc.aTextFieldHandlerSet;
var sMasterSlideId = this.aMasterPage.id;

var i = 0;
var sId;
for( ; i < aBackgroundObjectSubGroupIdList.length; ++i )
{
sId = aBackgroundObjectSubGroupIdList[i];
if( sId === aSlideNumberClassName )
{
if( aPlaceholderShapeSet[aSlideNumberClassName] &&
aPlaceholderShapeSet[aSlideNumberClassName].isValid() &&
this.aMetaSlide.nIsPageNumberVisible &&
aTextFieldContentProviderSet[aSlideNumberClassName] )
{
this.aSlideNumberFieldHandler =
new SlideNumberFieldHandler( aPlaceholderShapeSet[aSlideNumberClassName],
aTextFieldContentProviderSet[aSlideNumberClassName] );
this.aSlideNumberFieldHandler.update( this.aMetaSlide.nSlideNumber );
this.aSlideNumberFieldHandler.appendTo( this.aBackgroundObjectsElement );
}
}
else if( sId === aDateTimeClassName )
{
if( this.aMetaSlide.nIsDateTimeVisible )
{
this.aDateTimeFieldHandler =
this.initTextFieldHandler( aDateTimeClassName, aPlaceholderShapeSet,
aTextFieldContentProviderSet, aDefsElement,
aTextFieldHandlerSet, sMasterSlideId );
}
}
else if( sId === aFooterClassName )
{
if( this.aMetaSlide.nIsFooterVisible )
{
this.aFooterFieldHandler =
this.initTextFieldHandler( aFooterClassName, aPlaceholderShapeSet,
aTextFieldContentProviderSet, aDefsElement,
aTextFieldHandlerSet, sMasterSlideId );
}
}
else if( sId === aHeaderClassName )
{
if( this.aMetaSlide.nIsHeaderVisible )
{
this.aHeaderFieldHandler =
this.initTextFieldHandler( aHeaderClassName, aPlaceholderShapeSet,
aTextFieldContentProviderSet, aDefsElement,
aTextFieldHandlerSet, sMasterSlideId );
}
}
else
{
var aBackgroundSubGroupElement = theDocument.createElementNS( NSS['svg'], 'use' );
aBackgroundSubGroupElement.setAttribute( 'class', 'BackgroundObjectSubGroup' );
setNSAttribute( 'xlink', aBackgroundSubGroupElement,
'href', '#' + sId );
this.aBackgroundSubGroupElementSet.push( aBackgroundSubGroupElement );
this.aBackgroundObjectsElement.appendChild( aBackgroundSubGroupElement );
}

}
aMasterPageViewElement.appendChild( this.aBackgroundObjectsElement );
}

return aMasterPageViewElement;
};

MasterPageView.prototype.initTextFieldHandler =
function( sClassName, aPlaceholderShapeSet, aTextFieldContentProviderSet,
aDefsElement, aTextFieldHandlerSet, sMasterSlideId )
{
var aTextFieldHandler = null;
if( aPlaceholderShapeSet[sClassName] &&
aPlaceholderShapeSet[sClassName].isValid()
&& aTextFieldContentProviderSet[sClassName] )
{
var sTextFieldContentProviderId = aTextFieldContentProviderSet[sClassName].sId;
if ( !aTextFieldHandlerSet[ sMasterSlideId ][ sTextFieldContentProviderId ] )
{
aTextFieldHandlerSet[ sMasterSlideId ][ sTextFieldContentProviderId ] =
new TextFieldHandler( aPlaceholderShapeSet[sClassName],
aTextFieldContentProviderSet[sClassName] );
aTextFieldHandler = aTextFieldHandlerSet[ sMasterSlideId ][ sTextFieldContentProviderId ];
aTextFieldHandler.update();
aTextFieldHandler.appendTo( aDefsElement );
}
else
{
aTextFieldHandler = aTextFieldHandlerSet[ sMasterSlideId ][ sTextFieldContentProviderId ];
}

var aTextFieldElement = document.createElementNS( NSS['svg'], 'use' );
aTextFieldElement.setAttribute( 'class', sClassName );
setNSAttribute( 'xlink', aTextFieldElement,
'href', '#' + aTextFieldHandler.sId );
this.aBackgroundObjectsElement.appendChild( aTextFieldElement );
}
return aTextFieldHandler;
};

function TextFieldHandler( aPlaceholderShape, aTextContentProvider )
{
this.aPlaceHolderShape = aPlaceholderShape;
this.aTextContentProvider = aTextContentProvider;
assert( this.aTextContentProvider,
'TextFieldHandler: text content provider not defined.' );
this.sId = 'tf' + String( TextFieldHandler.getUniqueId() );
this.aTextFieldElement = null;
this.aTextPlaceholderElement = null;
this.cloneElement();
}


TextFieldHandler.CURR_UNIQUE_ID = 0;

TextFieldHandler.getUniqueId = function()
{
++TextFieldHandler.CURR_UNIQUE_ID;
return TextFieldHandler.CURR_UNIQUE_ID;
};

TextFieldHandler.prototype.cloneElement = function()
{
assert( this.aPlaceHolderShape && this.aPlaceHolderShape.isValid(),
'TextFieldHandler.cloneElement: placeholder shape is not valid.' );
this.aTextFieldElement = this.aPlaceHolderShape.element.cloneNode( true /* deep clone */ );
assert( this.aTextFieldElement,
'TextFieldHandler.cloneElement: aTextFieldElement is not defined' );
this.aTextFieldElement.setAttribute( 'id', this.sId );
this.aTextFieldElement.removeAttribute( 'visibility' );
this.aTextPlaceholderElement = getElementByClassName( this.aTextFieldElement, 'PlaceholderText' );
assert( this.aTextPlaceholderElement,
'TextFieldHandler.cloneElement: aTextPlaceholderElement is not defined' );
};


TextFieldHandler.prototype.appendTo = function( aParentNode )
{
if( !this.aTextFieldElement )
{
log( 'TextFieldHandler.appendTo: aTextFieldElement is not defined' );
return;
}
if( !aParentNode )
{
log( 'TextFieldHandler.appendTo: parent node is not defined' );
return;
}

aParentNode.appendChild( this.aTextFieldElement );
};

TextFieldHandler.prototype.setTextContent = function( sText )
{
if( !this.aTextPlaceholderElement )
{
log( 'PlaceholderShape.setTextContent: text element is not valid in placeholder of type '
+ this.className + ' that belongs to master slide ' + this.masterPage.id );
return;
}
this.aTextPlaceholderElement.textContent = sText;
};

TextFieldHandler.prototype.update = function()
{
if( !this.aTextContentProvider )
log('TextFieldHandler.update: text content provider not defined.');
else
this.aTextContentProvider.update( this );
};

function SlideNumberFieldHandler( aPlaceholderShape, aTextContentProvider )
{
SlideNumberFieldHandler.superclass.constructor.call( this, aPlaceholderShape, aTextContentProvider );
}
extend( SlideNumberFieldHandler, TextFieldHandler );


SlideNumberFieldHandler.prototype.update = function( nPageNumber )
{
if( !this.aTextContentProvider )
log('TextFieldHandler.update: text content provider not defined.');
else
this.aTextContentProvider.update( this, nPageNumber );
};


function TextFieldContentProvider( aTextFieldContentElement )
{
if( aTextFieldContentElement )
this.sId = aTextFieldContentElement.getAttribute( 'id' );
}

function FixedTextProvider( aTextFieldContentElement )
{
FixedTextProvider.superclass.constructor.call( this, aTextFieldContentElement );
this.text = aTextFieldContentElement.textContent;
}
extend( FixedTextProvider, TextFieldContentProvider );


FixedTextProvider.prototype.update = function( aFixedTextField )
{
aFixedTextField.setTextContent( this.text );
};

function CurrentDateTimeProvider( aTextFieldContentElement )
{
CurrentDateTimeProvider.superclass.constructor.call( this, aTextFieldContentElement );
this.dateTimeFormat = getOOOAttribute( aTextFieldContentElement, aOOOAttrDateTimeFormat );
}
extend( CurrentDateTimeProvider, TextFieldContentProvider );


CurrentDateTimeProvider.prototype.update = function( aDateTimeField )
{
var sText = this.createDateTimeText( this.dateTimeFormat );
aDateTimeField.setTextContent( sText );
};


CurrentDateTimeProvider.prototype.createDateTimeText = function( /*sDateTimeFormat*/ )
{
var aDate = new Date();
var sDate = aDate.toLocaleString();
return sDate;
};

function SlideNumberProvider( nInitialSlideNumber, sPageNumberingType )
{
SlideNumberProvider.superclass.constructor.call( this, null );
this.nInitialSlideNumber = nInitialSlideNumber;
this.pageNumberingType = sPageNumberingType;

}
extend( SlideNumberProvider, TextFieldContentProvider );


SlideNumberProvider.prototype.getNumberingType = function()
{
return this.pageNumberingType;
};


SlideNumberProvider.prototype.update = function( aSlideNumberField, nSlideNumber )
{
if( nSlideNumber === undefined )
{
if( nCurSlide === undefined )
nSlideNumber = this.nInitialSlideNumber;
else
nSlideNumber = nCurSlide + 1;
}
var sText = this.createSlideNumberText( nSlideNumber, this.getNumberingType() );
aSlideNumberField.setTextContent( sText );
};


SlideNumberProvider.prototype.createSlideNumberText = function( nSlideNumber /*, sNumberingType*/ )
{
return String( nSlideNumber );
};


function SlideIndexPage()
{
this.pageElementId = 'slide_index';
this.pageBgColor = 'rgb(252,252,252)';
this.pageElement = this.createPageElement();
assert( this.pageElement, 'SlideIndexPage: pageElement is not valid' );
this.indexColumns = INDEX_COLUMNS_DEFAULT;
this.totalThumbnails = this.indexColumns * this.indexColumns;
this.selectedSlideIndex = undefined;

this.xSpacingFactor = 600/28000;
this.ySpacingFactor = 450/21000;
this.xSpacing = WIDTH * this.xSpacingFactor;
this.ySpacing = HEIGHT * this.ySpacingFactor;
this.halfBorderWidthFactor = ( 300/28000 ) * ( this.indexColumns / 3 );
this.halfBorderWidth = WIDTH * this.halfBorderWidthFactor;
this.borderWidth = 2 * this.halfBorderWidth;
this.scaleFactor = ( 1 - ( this.indexColumns + 1 ) * this.xSpacingFactor ) /
( this.indexColumns * ( 1 + 2 * this.halfBorderWidthFactor ) );

this.thumbnailMouseAreaTemplateId = 'thumbnail_mouse_area';
this.thumbnailMouseAreaTemplateElement = null;
this.thumbnailBorderTemplateId = 'thumbnail_border';
this.thumbnailBorderTemplateElement = null;
this.createTemplateElements();

this.aThumbnailSet = new Array( this.totalThumbnails );
for( var i = 0; i < this.totalThumbnails; ++i )
{
this.aThumbnailSet[i] = new Thumbnail( this, i );
this.aThumbnailSet[i].updateView();
}

this.curThumbnailIndex = 0;
}


SlideIndexPage.prototype.getTotalThumbnails = function()
{
return this.totalThumbnails;
};

SlideIndexPage.prototype.show = function()
{
this.pageElement.setAttribute( 'display', 'inherit' );
};

SlideIndexPage.prototype.hide = function()
{
this.pageElement.setAttribute( 'display', 'none' );
};

SlideIndexPage.prototype.setSelection = function( nIndex )
{
nIndex = getSafeIndex( nIndex, 0, this.getTotalThumbnails() - 1 );
if( this.curThumbnailIndex != nIndex )
{
this.aThumbnailSet[ this.curThumbnailIndex ].unselect();
this.aThumbnailSet[ nIndex ].select();
this.curThumbnailIndex = nIndex;
}
this.selectedSlideIndex = this.aThumbnailSet[ nIndex ].slideIndex;
};

SlideIndexPage.prototype.createPageElement = function()
{
var aPageElement = document.createElementNS( NSS['svg'], 'g' );
aPageElement.setAttribute( 'id', this.pageElementId );
aPageElement.setAttribute( 'display', 'none' );
aPageElement.setAttribute( 'visibility', 'visible' );

var sPageBgColor = this.pageBgColor + ';';
var aRectElement = document.createElementNS( NSS['svg'], 'rect' );
aRectElement.setAttribute( 'x', 0 );
aRectElement.setAttribute( 'y', 0 );
aRectElement.setAttribute( 'width', WIDTH );
aRectElement.setAttribute( 'height', HEIGHT );
aRectElement.setAttribute( 'style', 'stroke:none;fill:' + sPageBgColor );

aPageElement.appendChild( aRectElement );
ROOT_NODE.appendChild( aPageElement );
return( document.getElementById( this.pageElementId ) );
};

SlideIndexPage.prototype.createTemplateElements = function()
{
var aDefsElement = document.createElementNS( NSS['svg'], 'defs' );
var aRectElement = document.createElementNS( NSS['svg'], 'rect' );
aRectElement.setAttribute( 'id', this.thumbnailBorderTemplateId );
aRectElement.setAttribute( 'x', -this.halfBorderWidth );
aRectElement.setAttribute( 'y', -this.halfBorderWidth );
aRectElement.setAttribute( 'rx', this.halfBorderWidth );
aRectElement.setAttribute( 'ry', this.halfBorderWidth );
aRectElement.setAttribute( 'width', WIDTH + this.halfBorderWidth );
aRectElement.setAttribute( 'height', HEIGHT + this.halfBorderWidth );
aRectElement.setAttribute( 'stroke-width', this.borderWidth );
aRectElement.setAttribute( 'fill', 'none' );
aDefsElement.appendChild( aRectElement );

aRectElement = document.createElementNS( NSS['svg'], 'rect' );
aRectElement.setAttribute( 'id', this.thumbnailMouseAreaTemplateId );
aRectElement.setAttribute( 'x', 0 );
aRectElement.setAttribute( 'y', 0 );
aRectElement.setAttribute( 'width', WIDTH );
aRectElement.setAttribute( 'height', HEIGHT );
aRectElement.setAttribute( 'fill', this.pageBgColor );
aDefsElement.appendChild( aRectElement );

this.pageElement.appendChild( aDefsElement );

this.thumbnailMouseAreaTemplateElement = document.getElementById( this.thumbnailMouseAreaTemplateId );
this.thumbnailBorderTemplateElement = document.getElementById( this.thumbnailBorderTemplateId );
};

SlideIndexPage.prototype.decreaseNumberOfColumns  = function()
{
this.setNumberOfColumns( this.indexColumns - 1 );
};

SlideIndexPage.prototype.increaseNumberOfColumns  = function()
{
this.setNumberOfColumns( this.indexColumns + 1 );
};

SlideIndexPage.prototype.resetNumberOfColumns  = function()
{
this.setNumberOfColumns( INDEX_COLUMNS_DEFAULT );
};

SlideIndexPage.prototype.setNumberOfColumns  = function( nNumberOfColumns )
{
if( this.indexColumns == nNumberOfColumns )  return;
if( nNumberOfColumns < 2 || nNumberOfColumns > 6 ) return;

var suspendHandle = ROOT_NODE.suspendRedraw(500);

var nOldTotalThumbnails = this.totalThumbnails;
this.indexColumns = nNumberOfColumns;
this.totalThumbnails = nNumberOfColumns * nNumberOfColumns;

this.aThumbnailSet[this.curThumbnailIndex].unselect();

var i;
for( i = this.totalThumbnails; i < nOldTotalThumbnails; ++i )
{
this.aThumbnailSet[i].removeElement();
}

for( i = nOldTotalThumbnails; i < this.totalThumbnails; ++i )
{
this.aThumbnailSet[i] = new Thumbnail( this, i );
}

this.halfBorderWidthFactor = ( 300/28000 ) * ( this.indexColumns / 3 );
this.halfBorderWidth = WIDTH * this.halfBorderWidthFactor;
this.borderWidth = 2 * this.halfBorderWidth;
this.scaleFactor = ( 1 - ( this.indexColumns + 1 ) * this.xSpacingFactor ) /
( this.indexColumns * ( 1 + 2 * this.halfBorderWidthFactor ) );

var aRectElement = this.thumbnailBorderTemplateElement;
aRectElement.setAttribute( 'x', -this.halfBorderWidth );
aRectElement.setAttribute( 'y', -this.halfBorderWidth );
aRectElement.setAttribute( 'rx', this.halfBorderWidth );
aRectElement.setAttribute( 'ry', this.halfBorderWidth );
aRectElement.setAttribute( 'width', WIDTH + this.halfBorderWidth );
aRectElement.setAttribute( 'height', HEIGHT + this.halfBorderWidth );
aRectElement.setAttribute( 'stroke-width', this.borderWidth );

for( i = 0; i < this.totalThumbnails; ++i )
{
this.aThumbnailSet[i].updateView();
}

this.curThumbnailIndex = this.selectedSlideIndex % this.totalThumbnails;
this.aThumbnailSet[this.curThumbnailIndex].select();

INDEX_OFFSET = -1;
indexSetPageSlide( this.selectedSlideIndex );

ROOT_NODE.unsuspendRedraw( suspendHandle );
ROOT_NODE.forceRedraw();
};


function Thumbnail( aSlideIndexPage, nIndex )
{
this.container = aSlideIndexPage;
this.index = nIndex;//= getSafeIndex( nIndex, 0, this.container.getTotalThumbnails() );
this.pageElement = this.container.pageElement;
this.thumbnailId = 'thumbnail' + this.index;
this.thumbnailElement = this.createThumbnailElement();
this.slideElement = getElementByClassName( this.thumbnailElement, 'Slide' );
this.borderElement = getElementByClassName( this.thumbnailElement, 'Border' );
this.mouseAreaElement = getElementByClassName( this.thumbnailElement, 'MouseArea' );
this.aTransformSet = new Array( 3 );
this.visibility = VISIBLE;
this.isSelected = false;
}

Thumbnail.prototype.sNormalBorderColor = 'rgb(216,216,216)';
Thumbnail.prototype.sSelectionBorderColor = 'rgb(92,92,255)';

Thumbnail.prototype.removeElement = function()
{
if( this.thumbnailElement )
this.container.pageElement.removeChild( this.thumbnailElement );
};

Thumbnail.prototype.show = function()
{
if( this.visibility == HIDDEN )
{
this.thumbnailElement.setAttribute( 'display', 'inherit' );
this.visibility = VISIBLE;
}
};

Thumbnail.prototype.hide = function()
{
if( this.visibility == VISIBLE )
{
this.thumbnailElement.setAttribute( 'display', 'none' );
this.visibility = HIDDEN;
}
};

Thumbnail.prototype.select = function()
{
if( !this.isSelected )
{
this.borderElement.setAttribute( 'stroke', this.sSelectionBorderColor );
this.isSelected = true;
}
};

Thumbnail.prototype.unselect = function()
{
if( this.isSelected )
{
this.borderElement.setAttribute( 'stroke', this.sNormalBorderColor );
this.isSelected = false;
}
};

Thumbnail.prototype.updateView = function()
{
this.column = this.index % this.container.indexColumns;
this.row = ( this.index - this.column ) / this.container.indexColumns;
this.halfBorderWidth = this.container.halfBorderWidth;
this.borderWidth = this.container.borderWidth;
this.width = ( WIDTH + this.borderWidth ) * this.container.scaleFactor;
this.height = ( HEIGHT + this.borderWidth ) * this.container.scaleFactor;
this.aTransformSet[2] = 'translate(' + this.halfBorderWidth + ' ' + this.halfBorderWidth + ')';
this.aTransformSet[1] = 'scale(' + this.container.scaleFactor + ')';
var sTransformAttrValue = this.computeTransform();
this.thumbnailElement.setAttribute( 'transform', sTransformAttrValue );
this.mouseAreaElement.setAttribute( 'onmouseover', 'theSlideIndexPage.aThumbnailSet[' + this.index  + '].onMouseOver()' );
};

Thumbnail.prototype.update = function( nIndex )
{
if( this.slideIndex == nIndex )  return;

var aMetaSlide = theMetaDoc.aMetaSlideSet[nIndex];
aMetaSlide.updateMasterPageView();
setNSAttribute( 'xlink', this.slideElement, 'href', '#' + aMetaSlide.slideId );
this.slideIndex = nIndex;
};

Thumbnail.prototype.clear = function( )
{
setNSAttribute( 'xlink', this.slideElement, 'href', '' );
};

Thumbnail.prototype.createThumbnailElement = function()
{
var aThumbnailElement = document.createElementNS( NSS['svg'], 'g' );
aThumbnailElement.setAttribute( 'id', this.thumbnailId );
aThumbnailElement.setAttribute( 'display', 'inherit' );

var aSlideElement = document.createElementNS( NSS['svg'], 'use' );
setNSAttribute( 'xlink', aSlideElement, 'href', '' );
aSlideElement.setAttribute( 'class', 'Slide' );
aThumbnailElement.appendChild( aSlideElement );

var aMouseAreaElement = document.createElementNS( NSS['svg'], 'use' );
setNSAttribute( 'xlink', aMouseAreaElement, 'href', '#' + this.container.thumbnailMouseAreaTemplateId );
aMouseAreaElement.setAttribute( 'class', 'MouseArea' );
aMouseAreaElement.setAttribute( 'opacity', 0.0 );
aThumbnailElement.appendChild( aMouseAreaElement );

var aBorderElement = document.createElementNS( NSS['svg'], 'use' );
setNSAttribute( 'xlink', aBorderElement, 'href', '#' + this.container.thumbnailBorderTemplateId );
aBorderElement.setAttribute( 'stroke', this.sNormalBorderColor );
aBorderElement.setAttribute( 'class', 'Border' );
aThumbnailElement.appendChild( aBorderElement );

this.container.pageElement.appendChild( aThumbnailElement );
return( document.getElementById( this.thumbnailId ) );
};

Thumbnail.prototype.computeTransform = function()
{
var nXSpacing = this.container.xSpacing;
var nYSpacing = this.container.ySpacing;

var nXOffset = nXSpacing + ( this.width + nXSpacing ) * this.column;
var nYOffset = nYSpacing + ( this.height + nYSpacing ) * this.row;

this.aTransformSet[0] = 'translate(' + nXOffset + ' ' + nYOffset + ')';

var sTransform = this.aTransformSet.join( ' ' );

return sTransform;
};

Thumbnail.prototype.onMouseOver = function()
{
if( ( currentMode == INDEX_MODE ) && ( this.container.curThumbnailIndex !=  this.index ) )
{
this.container.setSelection( this.index );
}
};


function init()
{
var VIEWBOX = ROOT_NODE.getAttribute('viewBox');

if( VIEWBOX )
{
WIDTH = ROOT_NODE.viewBox.animVal.width;
HEIGHT = ROOT_NODE.viewBox.animVal.height;
}

aSlideShow = new SlideShow();
theMetaDoc =  new MetaDocument();
aSlideShow.bIsEnabled = theMetaDoc.bIsAnimated;
theSlideIndexPage = new SlideIndexPage();
aSlideShow.displaySlide( theMetaDoc.nStartSlideNumber, false );

var hammer = new Hammer(ROOT_NODE);
hammer.on('swipeleft', function() {
switchSlide(1, false);
});
hammer.on('swiperight', function() {
switchSlide(-1, false);
});
hammer.get('swipe').set({ direction: Hammer.DIRECTION_ALL });
hammer.on('swipeup', function() {
aSlideShow.exitSlideShowInApp();
});
hammer.on('swipedown', function() {
aSlideShow.exitSlideShowInApp();
});
}

function presentationEngineStop(message)
{
alert( message + '\nThe presentation engine will be stopped' );
document.onkeydown = null;
document.onkeypress = null;
document.onclick = null;
window.onmousewheel = null;
}

function assert( condition, message )
{
if (!condition)
{
presentationEngineStop( message );
if (typeof console == 'object')
console.trace();
throw new Error( message );
}
}

function dispatchEffects(dir)
{

if( dir == 1 )
{
var bRet = aSlideShow.nextEffect();

if( !bRet )
{
switchSlide( 1, false );
}
}
else
{
switchSlide( dir, false );
}
}

function skipAllEffects()
{
var bRet = aSlideShow.skipAllEffects();
if( !bRet )
{
switchSlide( 1, true );
}
}

function skipEffects(dir)
{
if( dir == 1 )
{
var bRet = aSlideShow.skipPlayingOrNextEffect();

if( !bRet )
{
switchSlide( 1, true );
}
}
else
{
switchSlide( dir, true );
}
}

function switchSlide( nOffset, bSkipTransition )
{
var nNextSlide = nCurSlide + nOffset;
aSlideShow.displaySlide( nNextSlide, bSkipTransition );
}

function displayIndex( offsetNumber )
{
var aMetaSlideSet = theMetaDoc.aMetaSlideSet;
offsetNumber = getSafeIndex( offsetNumber, 0, aMetaSlideSet.length - 1 );

var nTotalThumbnails = theSlideIndexPage.getTotalThumbnails();
var nEnd = Math.min( offsetNumber + nTotalThumbnails, aMetaSlideSet.length);

var aThumbnailSet = theSlideIndexPage.aThumbnailSet;
var j = 0;
for( var i = offsetNumber; i < nEnd; ++i, ++j )
{
aThumbnailSet[j].update( i );
aThumbnailSet[j].show();
}
for( ; j < nTotalThumbnails; ++j )
{
aThumbnailSet[j].hide();
}

if (INDEX_OFFSET != offsetNumber)
INDEX_OFFSET = offsetNumber;
}

function toggleSlideIndex()
{
if( currentMode == SLIDE_MODE )
{

theMetaDoc.getCurrentSlide().hide();
INDEX_OFFSET = -1;
indexSetPageSlide( nCurSlide );
theSlideIndexPage.show();
currentMode = INDEX_MODE;
}
else if( currentMode == INDEX_MODE )
{
theSlideIndexPage.hide();
var nNewSlide = theSlideIndexPage.selectedSlideIndex;

aSlideShow.displaySlide( nNewSlide, true );
currentMode = SLIDE_MODE;
}
}

function abandonIndexMode()
{
theSlideIndexPage.selectedSlideIndex = nCurSlide;
toggleSlideIndex();
}


var CURR_UNIQUE_ID = 0;

function getUniqueId()
{
++CURR_UNIQUE_ID;
return CURR_UNIQUE_ID;
}

function mem_fn( sMethodName )
{
return  function( aObject )
{
var aMethod = aObject[ sMethodName ];
if( aMethod )
aMethod.call( aObject );
else
log( 'method sMethodName not found' );
};
}

function bind( aObject, aMethod )
{
return  function()
{
return aMethod.call( aObject, arguments[0] );
};
}

function bind2( aFunction )
{
if( !aFunction  )
log( 'bind2: passed function is not valid.' );

var aBoundArgList = arguments;

var aResultFunction = null;

switch( aBoundArgList.length )
{
case 1: aResultFunction = function()
{
return aFunction.call( arguments[0], arguments[1],
arguments[2], arguments[3],
arguments[4] );
};
break;
case 2: aResultFunction = function()
{
return aFunction.call( aBoundArgList[1], arguments[0],
arguments[1], arguments[2],
arguments[3] );
};
break;
case 3: aResultFunction = function()
{
return aFunction.call( aBoundArgList[1], aBoundArgList[2],
arguments[0], arguments[1],
arguments[2] );
};
break;
case 4: aResultFunction = function()
{
return aFunction.call( aBoundArgList[1], aBoundArgList[2],
aBoundArgList[3], arguments[0],
arguments[1] );
};
break;
case 5: aResultFunction = function()
{
return aFunction.call( aBoundArgList[1], aBoundArgList[2],
aBoundArgList[3], aBoundArgList[4],
arguments[0] );
};
break;
default:
log( 'bind2: arity not handled.' );
}

return aResultFunction;
}

function getCurrentSystemTime()
{
return ( new Date() ).getTime();
}

function getSlideAnimationsRoot( sSlideId )
{
return theMetaDoc.aSlideAnimationsMap[ sSlideId ];
}

function getElementChildren( aElement )
{
var aChildrenArray = [];

var nSize = aElement.childNodes.length;

for( var i = 0; i < nSize; ++i )
{
if( aElement.childNodes[i].nodeType == 1 )
aChildrenArray.push( aElement.childNodes[i] );
}

return aChildrenArray;
}

function removeWhiteSpaces( str )
{
if( !str )
return '';

var re = / */;
var aSplitString = str.split( re );
return aSplitString.join('');
}

function clamp( nValue, nMinimum, nMaximum )
{
if( nValue < nMinimum )
{
return nMinimum;
}
else if( nValue > nMaximum )
{
return nMaximum;
}
else
{
return nValue;
}
}

function makeMatrixString( a, b, c, d, e, f )
{
var s = 'matrix(';
s += a + ', ';
s += b + ', ';
s += c + ', ';
s += d + ', ';
s += e + ', ';
s += f + ')';

return s;
}

function matrixToString( aSVGMatrix )
{
return makeMatrixString( aSVGMatrix.a, aSVGMatrix.b, aSVGMatrix.c,
aSVGMatrix.d, aSVGMatrix.e, aSVGMatrix.f );
}


function numberParser( sValue )
{
if( sValue === '.' )
return undefined;
var reFloatNumber = /^[+-]?[0-9]*[.]?[0-9]*$/;

if( reFloatNumber.test( sValue ) )
return parseFloat( sValue );
else
return undefined;
}

function booleanParser( sValue )
{
sValue = sValue.toLowerCase();
if( sValue === 'true' )
return true;
else if( sValue === 'false' )
return false;
else
return undefined;
}

function colorParser( sValue )
{

function hsl( nHue, nSaturation, nLuminance )
{
return new HSLColor( nHue, nSaturation / 100, nLuminance / 100 );
}

function rgb( nRed, nGreen, nBlue )
{
return new RGBColor( nRed / 255, nGreen / 255, nBlue / 255 );
}

function prgb( nRed, nGreen, nBlue )
{
return new RGBColor( nRed / 100, nGreen / 100, nBlue / 100 );
}

var sCommaPattern = ' *[,] *';
var sIntegerPattern = '[+-]?[0-9]+';
var sHexDigitPattern = '[0-9A-Fa-f]';

var sHexColorPattern = '#(' + sHexDigitPattern + '{2})('
+ sHexDigitPattern + '{2})('
+ sHexDigitPattern + '{2})';

var sRGBIntegerPattern = 'rgb[(] *' + sIntegerPattern + sCommaPattern
+ sIntegerPattern + sCommaPattern
+ sIntegerPattern + ' *[)]';

var sRGBPercentPattern = 'rgb[(] *' + sIntegerPattern + '%' + sCommaPattern
+ sIntegerPattern + '%' + sCommaPattern
+ sIntegerPattern + '%' + ' *[)]';

var sHSLPercentPattern = 'hsl[(] *' + sIntegerPattern + sCommaPattern
+ sIntegerPattern + '%' + sCommaPattern
+ sIntegerPattern + '%' + ' *[)]';

var reHexColor = new RegExp( sHexColorPattern );
var reRGBInteger = new RegExp( sRGBIntegerPattern );
var reRGBPercent = new RegExp( sRGBPercentPattern );
var reHSLPercent = new RegExp( sHSLPercentPattern );

if( reHexColor.test( sValue ) )
{
var aRGBTriple = reHexColor.exec( sValue );

var nRed    = parseInt( aRGBTriple[1], 16 ) / 255;
var nGreen  = parseInt( aRGBTriple[2], 16 ) / 255;
var nBlue   = parseInt( aRGBTriple[3], 16 ) / 255;

return new RGBColor( nRed, nGreen, nBlue );
}
else if( reHSLPercent.test( sValue ) )
{
sValue = sValue.replace( '%', '' ).replace( '%', '' );
return eval( sValue );
}
else if( reRGBInteger.test( sValue ) )
{
return eval( sValue );
}
else if( reRGBPercent.test( sValue ) )
{
sValue = 'p' + sValue.replace( '%', '' ).replace( '%', '' ).replace( '%', '' );
return eval( sValue );
}
else
{
return null;
}
}


function RGBColor( nRed, nGreen, nBlue )
{
this.eColorSpace = COLOR_SPACE_RGB;
this.nRed = nRed;
this.nGreen = nGreen;
this.nBlue = nBlue;
}


RGBColor.prototype.clone = function()
{
return new RGBColor( this.nRed, this.nGreen, this.nBlue );
};

RGBColor.prototype.equal = function( aRGBColor )
{
return ( this.nRed == aRGBColor.nRed ) &&
( this.nGreen == aRGBColor.nGreen ) &&
( this.nBlue == aRGBColor.nBlue );
};

RGBColor.prototype.add = function( aRGBColor )
{
this.nRed += aRGBColor.nRed;
this.nGreen += aRGBColor.nGreen;
this.nBlue += aRGBColor.nBlue;
return this;
};

RGBColor.prototype.scale = function( aT )
{
this.nRed *= aT;
this.nGreen *= aT;
this.nBlue *= aT;
return this;
};

RGBColor.clamp = function( aRGBColor )
{
var aClampedRGBColor = new RGBColor( 0, 0, 0 );

aClampedRGBColor.nRed   = clamp( aRGBColor.nRed, 0.0, 1.0 );
aClampedRGBColor.nGreen = clamp( aRGBColor.nGreen, 0.0, 1.0 );
aClampedRGBColor.nBlue  = clamp( aRGBColor.nBlue, 0.0, 1.0 );

return aClampedRGBColor;
};

RGBColor.prototype.convertToHSL = function()
{
var nRed   = clamp( this.nRed, 0.0, 1.0 );
var nGreen = clamp( this.nGreen, 0.0, 1.0 );
var nBlue  = clamp( this.nBlue, 0.0, 1.0 );

var nMax = Math.max( nRed, nGreen, nBlue );
var nMin = Math.min( nRed, nGreen, nBlue );
var nDelta = nMax - nMin;

var nLuminance  = ( nMax + nMin ) / 2.0;
var nSaturation = 0.0;
var nHue = 0.0;
if( nDelta !== 0 )
{
nSaturation = ( nLuminance > 0.5 ) ?
( nDelta / ( 2.0 - nMax - nMin) ) :
( nDelta / ( nMax + nMin ) );

if( nRed == nMax )
nHue = ( nGreen - nBlue ) / nDelta;
else if( nGreen == nMax )
nHue = 2.0 + ( nBlue - nRed ) / nDelta;
else if( nBlue == nMax )
nHue = 4.0 + ( nRed - nGreen ) / nDelta;

nHue *= 60.0;

if( nHue < 0.0 )
nHue += 360.0;
}

return new HSLColor( nHue, nSaturation, nLuminance );

};

RGBColor.prototype.toString = function( bClamped )
{
var aRGBColor;
if( bClamped )
{
aRGBColor = RGBColor.clamp( this );
}
else
{
aRGBColor = this;
}

var nRed = Math.round( aRGBColor.nRed * 255 );
var nGreen = Math.round( aRGBColor.nGreen * 255 );
var nBlue = Math.round( aRGBColor.nBlue * 255 );

return ( 'rgb(' + nRed + ',' + nGreen + ',' + nBlue + ')' );
};

RGBColor.interpolate = function( aStartRGB , aEndRGB, nT )
{
var aResult = aStartRGB.clone();
var aTEndRGB = aEndRGB.clone();
aResult.scale( 1.0 - nT );
aTEndRGB.scale( nT );
aResult.add( aTEndRGB );

return aResult;
};


function HSLColor( nHue, nSaturation, nLuminance )
{
this.eColorSpace = COLOR_SPACE_HSL;
this.nHue = nHue;
this.nSaturation = nSaturation;
this.nLuminance = nLuminance;

this.normalizeHue();
}


HSLColor.prototype.clone = function()
{
return new HSLColor( this.nHue, this.nSaturation, this.nLuminance );
};

HSLColor.prototype.equal = function( aHSLColor )
{
return ( this.nHue == aHSLColor.nHue ) &&
( this.nSaturation += aHSLColor.nSaturation ) &&
( this.nLuminance += aHSLColor.nLuminance );
};

HSLColor.prototype.add = function( aHSLColor )
{
this.nHue += aHSLColor.nHue;
this.nSaturation += aHSLColor.nSaturation;
this.nLuminance += aHSLColor.nLuminance;
this.normalizeHue();
return this;
};

HSLColor.prototype.scale = function( aT )
{
this.nHue *= aT;
this.nSaturation *= aT;
this.nLuminance *= aT;
this.normalizeHue();
return this;
};

HSLColor.clamp = function( aHSLColor )
{
var aClampedHSLColor = new HSLColor( 0, 0, 0 );

aClampedHSLColor.nHue = aHSLColor.nHue % 360;
if( aClampedHSLColor.nHue < 0 )
aClampedHSLColor.nHue += 360;
aClampedHSLColor.nSaturation = clamp( aHSLColor.nSaturation, 0.0, 1.0 );
aClampedHSLColor.nLuminance = clamp( aHSLColor.nLuminance, 0.0, 1.0 );
};

HSLColor.prototype.normalizeHue = function()
{
this.nHue = this.nHue % 360;
if( this.nHue < 0 ) this.nHue += 360;
};

HSLColor.prototype.toString = function()
{
return 'hsl(' + this.nHue.toFixed( 3 ) + ','
+ this.nSaturation.toFixed( 3 ) + ','
+ this.nLuminance.toFixed( 3 ) + ')';
};

HSLColor.prototype.convertToRGB = function()
{

var nHue = this.nHue % 360;
if( nHue < 0 ) nHue += 360;
var nSaturation =  clamp( this.nSaturation, 0.0, 1.0 );
var nLuminance = clamp( this.nLuminance, 0.0, 1.0 );


if( nSaturation === 0 )
{
return new RGBColor( nLuminance, nLuminance, nLuminance );
}

var nVal1 = ( nLuminance <= 0.5 ) ?
( nLuminance * (1.0 + nSaturation) ) :
( nLuminance + nSaturation - nLuminance * nSaturation );

var nVal2 = 2.0 * nLuminance - nVal1;

var nRed    = HSLColor.hsl2rgbHelper( nVal2, nVal1, nHue + 120 );
var nGreen  = HSLColor.hsl2rgbHelper( nVal2, nVal1, nHue );
var nBlue   = HSLColor.hsl2rgbHelper( nVal2, nVal1, nHue - 120 );

return new RGBColor( nRed, nGreen, nBlue );
};

HSLColor.hsl2rgbHelper = function( nValue1, nValue2, nHue )
{
nHue = nHue % 360;
if( nHue < 0 )
nHue += 360;

if( nHue < 60.0 )
return nValue1 + ( nValue2 - nValue1 ) * nHue / 60.0;
else if( nHue < 180.0 )
return nValue2;
else if( nHue < 240.0 )
return ( nValue1 + ( nValue2 - nValue1 ) * ( 240.0 - nHue ) / 60.0 );
else
return nValue1;
};

HSLColor.interpolate = function( aFrom, aTo, nT, bCCW )
{
var nS = 1.0 - nT;

var nHue = 0.0;
if( aFrom.nHue <= aTo.nHue && !bCCW )
{
nHue = nS * (aFrom.nHue + 360.0) + nT * aTo.nHue;
}
else if( aFrom.nHue > aTo.nHue && bCCW )
{
nHue = nS * aFrom.nHue + nT * (aTo.nHue + 360.0);
}
else
{
nHue = nS * aFrom.nHue + nT * aTo.nHue;
}

var nSaturation = nS * aFrom.nSaturation + nT * aTo.nSaturation;
var nLuminance = nS * aFrom.nLuminance + nT * aTo.nLuminance;

return new HSLColor( nHue, nSaturation, nLuminance );
};


var SVGIdentityMatrix = document.documentElement.createSVGMatrix();

SVGMatrix.prototype.setToIdentity = function()
{
this.a = this.d = 1;
this.b = this.c = this.d = this.e = 0;
};

SVGMatrix.prototype.setToRotationAroundPoint = function( nX, nY, nAngle )
{
nAngle = Math.PI * nAngle / 180;
var nSin = Math.sin( nAngle );
var nCos = Math.cos( nAngle );

this.a = nCos; this.c = -nSin; this.e = nX * (1 - nCos) + nY * nSin;
this.b = nSin; this.d =  nCos; this.f = nY * (1 - nCos) - nX * nSin;
};


SVGPathElement.prototype.prependPath = function( aPath )
{
var sPathData = aPath.getAttribute( 'd' );
sPathData += ( ' ' + this.getAttribute( 'd' ) );
this.setAttribute( 'd', sPathData );
};

SVGPathElement.prototype.appendPath = function( aPath )
{
var sPathData = this.getAttribute( 'd' );
sPathData += ( ' ' + aPath.getAttribute( 'd' ) );
this.setAttribute( 'd', sPathData );
};

function flipOnYAxis( aPath )
{
var aPolyPath = aPath.cloneNode(true);
var aTransform = document.documentElement.createSVGMatrix();
aTransform.a = -1;
aTransform.e = 1;
aPolyPath.matrixTransform(aTransform);
return aPolyPath;
}

function flipOnXAxis( aPath )
{
var aPolyPath = aPath.cloneNode(true);
var aTransform = document.documentElement.createSVGMatrix();
aTransform.d = -1;
aTransform.f = 1;
aPolyPath.matrixTransform(aTransform);
return aPolyPath;
}

SVGPathElement.prototype.matrixTransform = function( aSVGMatrix )
{
if( SVGPathSegList.prototype.matrixTransform )
{
this.pathSegList.matrixTransform( aSVGMatrix );
return;
}

var aPathSegList = this.pathSegList;
var nLength = aPathSegList.numberOfItems;
var i;
for( i = 0; i < nLength; ++i )
{
aPathSegList.getItem( i ).matrixTransform( aSVGMatrix );
}
};

SVGPathElement.prototype.changeOrientation = function()
{
var aPathSegList = this.pathSegList;
var nLength = aPathSegList.numberOfItems;
if( nLength == 0 ) return;

if( SVGPathSegList.prototype.changeOrientation )
{
aPathSegList.changeOrientation();
return;
}

var nCurrentX = 0;
var nCurrentY = 0;

var aPathSeg = aPathSegList.getItem( 0 );
if( aPathSeg.pathSegTypeAsLetter == 'M' )
{
nCurrentX = aPathSeg.x;
nCurrentY = aPathSeg.y;
aPathSegList.removeItem( 0 );
--nLength;
}

var i;
for( i = 0; i < nLength; ++i )
{
aPathSeg = aPathSegList.getItem( i );
var aPoint = aPathSeg.changeOrientation( nCurrentX, nCurrentY );
nCurrentX = aPoint.x;
nCurrentY = aPoint.y;
}


for( i = nLength - 2; i >= 0; --i )
{
aPathSeg = aPathSegList.removeItem( i );
aPathSegList.appendItem( aPathSeg );
}

var aMovePathSeg = this.createSVGPathSegMovetoAbs( nCurrentX, nCurrentY );
aPathSegList.insertItemBefore( aMovePathSeg, 0 );

};


try
{   // Firefox, Google Chrome, Internet Explorer, Safari.

SVGPathSegMovetoAbs.prototype.matrixTransform = function( aSVGMatrix )
{
SVGPathMatrixTransform( this, aSVGMatrix );
};

SVGPathSegLinetoAbs.prototype.matrixTransform = function( aSVGMatrix )
{
SVGPathMatrixTransform( this, aSVGMatrix );
};

SVGPathSegCurvetoQuadraticAbs.prototype.matrixTransform = function( aSVGMatrix )
{
SVGPathMatrixTransform( this, aSVGMatrix );
var nX = this.x1;
this.x1 = aSVGMatrix.a * nX + aSVGMatrix.c * this.y1 + aSVGMatrix.e;
this.y1 = aSVGMatrix.b * nX + aSVGMatrix.d * this.y1 + aSVGMatrix.f;
};

SVGPathSegCurvetoCubicAbs.prototype.matrixTransform = function( aSVGMatrix )
{
SVGPathMatrixTransform( this, aSVGMatrix );
var nX = this.x1;
this.x1 = aSVGMatrix.a * nX + aSVGMatrix.c * this.y1 + aSVGMatrix.e;
this.y1 = aSVGMatrix.b * nX + aSVGMatrix.d * this.y1 + aSVGMatrix.f;
nX = this.x2;
this.x2 = aSVGMatrix.a * nX + aSVGMatrix.c * this.y2 + aSVGMatrix.e;
this.y2 = aSVGMatrix.b * nX + aSVGMatrix.d * this.y2 + aSVGMatrix.f;
};


SVGPathSegMovetoAbs.prototype.changeOrientation = function( nCurrentX, nCurrentY )
{
var aPoint = { x: this.x, y: this.y };
this.x = nCurrentX;
this.y = nCurrentY;
return aPoint;
};

SVGPathSegLinetoAbs.prototype.changeOrientation = function( nCurrentX, nCurrentY )
{
var aPoint = { x: this.x, y: this.y };
this.x = nCurrentX;
this.y = nCurrentY;
return aPoint;
};

SVGPathSegCurvetoQuadraticAbs.prototype.changeOrientation = function( nCurrentX, nCurrentY )
{
var aPoint = { x: this.x, y: this.y };
this.x = nCurrentX;
this.y = nCurrentY;
return aPoint;
};

SVGPathSegCurvetoCubicAbs.prototype.changeOrientation = function( nCurrentX, nCurrentY )
{
var aPoint = { x: this.x, y: this.y };
this.x = nCurrentX;
this.y = nCurrentY;
var nX = this.x1;
this.x1 = this.x2;
this.x2 = nX;
var nY = this.y1;
this.y1 = this.y2;
this.y2 = nY;
return aPoint;
};

}
catch( e )
{   // Opera

if( e.name == 'ReferenceError' )
{
SVGPathSeg.prototype.matrixTransform = function( aSVGMatrix )
{
var nX;
switch( this.pathSegTypeAsLetter )
{
case 'C':
nX = this.x2;
this.x2 = aSVGMatrix.a * nX + aSVGMatrix.c * this.y2 + aSVGMatrix.e;
this.y2 = aSVGMatrix.b * nX + aSVGMatrix.d * this.y2 + aSVGMatrix.f;
case 'Q':
nX = this.x1;
this.x1 = aSVGMatrix.a * nX + aSVGMatrix.c * this.y1 + aSVGMatrix.e;
this.y1 = aSVGMatrix.b * nX + aSVGMatrix.d * this.y1 + aSVGMatrix.f;
case 'M':
case 'L':
SVGPathMatrixTransform( this, aSVGMatrix );
break;
default:
log( 'SVGPathSeg.matrixTransform: unexpected path segment type: '
+ this.pathSegTypeAsLetter );
}
};

SVGPathSeg.prototype.changeOrientation = function( nCurrentX, nCurrentY )
{
switch( this.pathSegTypeAsLetter )
{
case 'C':
var nX = this.x1;
this.x1 = this.x2;
this.x2 = nX;
var nY = this.y1;
this.y1 = this.y2;
this.y2 = nY;
case 'M':
case 'L':
case 'Q':
var aPoint = { x: this.x, y: this.y };
this.x = nCurrentX;
this.y = nCurrentY;
return aPoint;
default:
log( 'SVGPathSeg.changeOrientation: unexpected path segment type: '
+ this.pathSegTypeAsLetter );
return null;
}
}
}
else throw e;
}

function SVGPathMatrixTransform( aPath, aSVGMatrix )
{
var nX = aPath.x;
aPath.x = aSVGMatrix.a * nX + aSVGMatrix.c * aPath.y + aSVGMatrix.e;
aPath.y = aSVGMatrix.b * nX + aSVGMatrix.d * aPath.y + aSVGMatrix.f;
}


function PriorityQueue( aCompareFunc )
{
this.aSequence = [];
this.aCompareFunc = aCompareFunc;
}

PriorityQueue.prototype.clone = function()
{
var aCopy = new PriorityQueue( this.aCompareFunc );
var src = this.aSequence;
var dest = [];
var i, l;
for( i = 0, l = src.length; i < l; ++i )
{
if( i in src )
{
dest.push( src[i] );
}
}
aCopy.aSequence = dest;
return aCopy;
};

PriorityQueue.prototype.top = function()
{
return this.aSequence[this.aSequence.length - 1];
};

PriorityQueue.prototype.isEmpty = function()
{
return ( this.aSequence.length === 0 );
};

PriorityQueue.prototype.push = function( aValue )
{
this.aSequence.unshift( aValue );
this.aSequence.sort(this.aCompareFunc);
};

PriorityQueue.prototype.clear = function()
{
this.aSequence = [];
};

PriorityQueue.prototype.pop = function()
{
return this.aSequence.pop();
};


var ANIMATION_NODE_CUSTOM               = 0;
var ANIMATION_NODE_PAR                  = 1;
var ANIMATION_NODE_SEQ                  = 2;
var ANIMATION_NODE_ITERATE              = 3;
var ANIMATION_NODE_ANIMATE              = 4;
var ANIMATION_NODE_SET                  = 5;
var ANIMATION_NODE_ANIMATEMOTION        = 6;
var ANIMATION_NODE_ANIMATECOLOR         = 7;
var ANIMATION_NODE_ANIMATETRANSFORM     = 8;
var ANIMATION_NODE_TRANSITIONFILTER     = 9;
var ANIMATION_NODE_AUDIO                = 10;
var ANIMATION_NODE_COMMAND              = 11;

var aAnimationNodeTypeInMap = {
'par'               : ANIMATION_NODE_PAR,
'seq'               : ANIMATION_NODE_SEQ,
'iterate'           : ANIMATION_NODE_ITERATE,
'animate'           : ANIMATION_NODE_ANIMATE,
'set'               : ANIMATION_NODE_SET,
'animatemotion'     : ANIMATION_NODE_ANIMATEMOTION,
'animatecolor'      : ANIMATION_NODE_ANIMATECOLOR,
'animatetransform'  : ANIMATION_NODE_ANIMATETRANSFORM,
'transitionfilter'  : ANIMATION_NODE_TRANSITIONFILTER,
'audio'             : ANIMATION_NODE_AUDIO,
'command'           : ANIMATION_NODE_COMMAND
};


function getAnimationElementType( aElement )
{
var sName = aElement.localName.toLowerCase();

if( sName && aAnimationNodeTypeInMap[ sName ] )
return aAnimationNodeTypeInMap[ sName ];
else
return ANIMATION_NODE_CUSTOM;
}


var INVALID_NODE                = 0;
var UNRESOLVED_NODE             = 1;
var RESOLVED_NODE               = 2;
var ACTIVE_NODE                 = 4;
var FROZEN_NODE                 = 8;
var ENDED_NODE                  = 16;

function getNodeStateName( eNodeState )
{
switch( eNodeState )
{
case INVALID_NODE:
return 'INVALID';
case UNRESOLVED_NODE:
return 'UNRESOLVED';
case RESOLVED_NODE:
return 'RESOLVED';
case ACTIVE_NODE:
return 'ACTIVE';
case FROZEN_NODE:
return 'FROZEN';
case ENDED_NODE:
return 'ENDED';
default:
return 'UNKNOWN';
}
}


var IMPRESS_DEFAULT_NODE                    = 0;
var IMPRESS_ON_CLICK_NODE                   = 1;
var IMPRESS_WITH_PREVIOUS_NODE              = 2;
var IMPRESS_AFTER_PREVIOUS_NODE             = 3;
var IMPRESS_MAIN_SEQUENCE_NODE              = 4;
var IMPRESS_TIMING_ROOT_NODE                = 5;
var IMPRESS_INTERACTIVE_SEQUENCE_NODE       = 6;

var aImpressNodeTypeInMap = {
'on-click'                  : IMPRESS_ON_CLICK_NODE,
'with-previous'             : IMPRESS_WITH_PREVIOUS_NODE,
'after-previous'            : IMPRESS_AFTER_PREVIOUS_NODE,
'main-sequence'             : IMPRESS_MAIN_SEQUENCE_NODE,
'timing-root'               : IMPRESS_TIMING_ROOT_NODE,
'interactive-sequence'      : IMPRESS_INTERACTIVE_SEQUENCE_NODE
};

var aImpressNodeTypeOutMap = [ 'default', 'on-click', 'with-previous', 'after-previous',
'main-sequence', 'timing-root', 'interactive-sequence' ];


var aPresetClassInMap = {};


var aPresetIdInMap = {};


var RESTART_MODE_DEFAULT            = 0;
var RESTART_MODE_INHERIT            = 0; // eslint-disable-line no-unused-vars
var RESTART_MODE_ALWAYS             = 1;
var RESTART_MODE_WHEN_NOT_ACTIVE    = 2;
var RESTART_MODE_NEVER              = 3;

var aRestartModeInMap = {
'inherit'       : RESTART_MODE_DEFAULT,
'always'        : RESTART_MODE_ALWAYS,
'whenNotActive' : RESTART_MODE_WHEN_NOT_ACTIVE,
'never'         : RESTART_MODE_NEVER
};

var aRestartModeOutMap = [ 'inherit','always', 'whenNotActive', 'never' ];


var FILL_MODE_DEFAULT           = 0;
var FILL_MODE_INHERIT           = 0; // eslint-disable-line no-unused-vars
var FILL_MODE_REMOVE            = 1;
var FILL_MODE_FREEZE            = 2;
var FILL_MODE_HOLD              = 3;
var FILL_MODE_TRANSITION        = 4;
var FILL_MODE_AUTO              = 5;

var aFillModeInMap = {
'inherit'       : FILL_MODE_DEFAULT,
'remove'        : FILL_MODE_REMOVE,
'freeze'        : FILL_MODE_FREEZE,
'hold'          : FILL_MODE_HOLD,
'transition'    : FILL_MODE_TRANSITION,
'auto'          : FILL_MODE_AUTO
};

var aFillModeOutMap = [ 'inherit', 'remove', 'freeze', 'hold', 'transition', 'auto' ];


var ADDITIVE_MODE_UNKNOWN       = 0; // eslint-disable-line no-unused-vars
var ADDITIVE_MODE_BASE          = 1;
var ADDITIVE_MODE_SUM           = 2;
var ADDITIVE_MODE_REPLACE       = 3;
var ADDITIVE_MODE_MULTIPLY      = 4;
var ADDITIVE_MODE_NONE          = 5;

var aAddittiveModeInMap = {
'base'          : ADDITIVE_MODE_BASE,
'sum'           : ADDITIVE_MODE_SUM,
'replace'       : ADDITIVE_MODE_REPLACE,
'multiply'      : ADDITIVE_MODE_MULTIPLY,
'none'          : ADDITIVE_MODE_NONE
};

var aAddittiveModeOutMap = [ 'unknown', 'base', 'sum', 'replace', 'multiply', 'none' ];


var ACCUMULATE_MODE_NONE        = 0;
var ACCUMULATE_MODE_SUM         = 1;

var aAccumulateModeOutMap = [ 'none', 'sum' ];

var CALC_MODE_DISCRETE          = 1;
var CALC_MODE_LINEAR            = 2;
var CALC_MODE_PACED             = 3;
var CALC_MODE_SPLINE            = 4;

var aCalcModeInMap = {
'discrete'      : CALC_MODE_DISCRETE,
'linear'        : CALC_MODE_LINEAR,
'paced'         : CALC_MODE_PACED,
'spline'        : CALC_MODE_SPLINE
};

var aCalcModeOutMap = [ 'unknown', 'discrete', 'linear', 'paced', 'spline' ];


var COLOR_SPACE_RGB = 0;
var COLOR_SPACE_HSL = 1;

var aColorSpaceInMap = { 'rgb': COLOR_SPACE_RGB, 'hsl': COLOR_SPACE_HSL };

var aColorSpaceOutMap = [ 'rgb', 'hsl' ];


var CLOCKWISE               = 0;
var COUNTERCLOCKWISE        = 1;

var aClockDirectionInMap = { 'clockwise': CLOCKWISE, 'counter-clockwise': COUNTERCLOCKWISE };

var aClockDirectionOutMap = [ 'clockwise', 'counter-clockwise' ];


var UNKNOWN_PROPERTY        = 0; // eslint-disable-line no-unused-vars
var NUMBER_PROPERTY         = 1;
var ENUM_PROPERTY           = 2;
var COLOR_PROPERTY          = 3;
var STRING_PROPERTY         = 4;
var BOOL_PROPERTY           = 5;

var aValueTypeOutMap = [ 'unknown', 'number', 'enum', 'color', 'string', 'boolean' ];


var aAttributeMap =
{
'height':           {   'type':         NUMBER_PROPERTY,
'get':          'getHeight',
'set':          'setHeight',
'getmod':       'makeScaler( 1/nHeight )',
'setmod':       'makeScaler( nHeight)'          },

'opacity':          {   'type':         NUMBER_PROPERTY,
'get':          'getOpacity',
'set':          'setOpacity'                    },

'rotate':           {   'type':         NUMBER_PROPERTY,
'get':          'getRotationAngle',
'set':          'setRotationAngle'              },

'width':            {   'type':         NUMBER_PROPERTY,
'get':          'getWidth',
'set':          'setWidth',
'getmod':       'makeScaler( 1/nWidth )',
'setmod':       'makeScaler( nWidth)'           },

'x':                {   'type':         NUMBER_PROPERTY,
'get':          'getX',
'set':          'setX',
'getmod':       'makeScaler( 1/nWidth )',
'setmod':       'makeScaler( nWidth)'           },

'y':                {   'type':         NUMBER_PROPERTY,
'get':          'getY',
'set':          'setY',
'getmod':       'makeScaler( 1/nHeight )',
'setmod':       'makeScaler( nHeight)'          },

'fill':             {   'type':         ENUM_PROPERTY,
'get':          'getFillStyle',
'set':          'setFillStyle'                  },

'stroke':           {   'type':         ENUM_PROPERTY,
'get':          'getStrokeStyle',
'set':          'setStrokeStyle'                },

'visibility':       {   'type':         ENUM_PROPERTY,
'get':          'getVisibility',
'set':          'setVisibility'                 },

'fill-color':       {   'type':         COLOR_PROPERTY,
'get':          'getFillColor',
'set':          'setFillColor'                  },

'stroke-color':     {   'type':         COLOR_PROPERTY,
'get':          'getStrokeColor',
'set':          'setStrokeColor'                },

'color':            {   'type':         COLOR_PROPERTY,
'get':          'getFontColor',
'set':          'setFontColor'                  }

};


var TRANSITION_INVALID              = 0;    // Invalid type
var TRANSITION_CLIP_POLYPOLYGON     = 1;    // Transition expressed by parametric clip polygon
var TRANSITION_SPECIAL              = 2;    // Transition expressed by hand-crafted function


var BARWIPE_TRANSITION              = 1;
var BOXWIPE_TRANSITION              = 2;
var FOURBOXWIPE_TRANSITION          = 3;
var ELLIPSEWIPE_TRANSITION          = 4; // 17
var CLOCKWIPE_TRANSITION            = 5; // 22
var PINWHEELWIPE_TRANSITION         = 6; // 23
var PUSHWIPE_TRANSITION             = 7; // 35
var SLIDEWIPE_TRANSITION            = 8; // 36
var FADE_TRANSITION                 = 9; // 37
var RANDOMBARWIPE_TRANSITION        = 10; // 38
var CHECKERBOARDWIPE_TRANSITION     = 11; // 39
var DISSOLVE_TRANSITION             = 12; // 40
var SNAKEWIPE_TRANSITION            = 13; // 30
var PARALLELSNAKESWIPE_TRANSITION   = 14; // 32
var IRISWIPE_TRANSITION             = 15; // 12
var BARNDOORWIPE_TRANSITION         = 16; // 4
var VEEWIPE_TRANSITION              = 17; // 8
var ZIGZAGWIPE_TRANSITION           = 18; // 10
var BARNZIGZAGWIPE_TRANSITION       = 19; // 11
var FANWIPE_TRANSITION              = 20; // 25
var SINGLESWEEPWIPE_TRANSITION      = 21; // 24
var WATERFALLWIPE_TRANSITION        = 22; // 34
var SPIRALWIPE_TRANSITION           = 23; // 31
var MISCDIAGONALWIPE_TRANSITION     = 24; // 7
var BOXSNAKESWIPE_TRANSITION        = 25; // 33

var aTransitionTypeInMap = {
'barWipe'           : BARWIPE_TRANSITION,
'boxWipe'           : BOXWIPE_TRANSITION,
'barnDoorWipe'      : BARNDOORWIPE_TRANSITION,
'fourBoxWipe'       : FOURBOXWIPE_TRANSITION,
'ellipseWipe'       : ELLIPSEWIPE_TRANSITION,
'clockWipe'         : CLOCKWIPE_TRANSITION,
'pinWheelWipe'      : PINWHEELWIPE_TRANSITION,
'miscDiagonalWipe'  : MISCDIAGONALWIPE_TRANSITION,
'pushWipe'          : PUSHWIPE_TRANSITION,
'slideWipe'         : SLIDEWIPE_TRANSITION,
'fade'              : FADE_TRANSITION,
'fanWipe'           : FANWIPE_TRANSITION,
'randomBarWipe'     : RANDOMBARWIPE_TRANSITION,
'checkerBoardWipe'  : CHECKERBOARDWIPE_TRANSITION,
'dissolve'          : DISSOLVE_TRANSITION,
'singleSweepWipe'   : SINGLESWEEPWIPE_TRANSITION,
'snakeWipe'         : SNAKEWIPE_TRANSITION,
'parallelSnakesWipe': PARALLELSNAKESWIPE_TRANSITION,
'spiralWipe'        : SPIRALWIPE_TRANSITION,
'boxSnakesWipe'     : BOXSNAKESWIPE_TRANSITION,
'irisWipe'          : IRISWIPE_TRANSITION,
'veeWipe'           : VEEWIPE_TRANSITION,
'zigZagWipe'        : ZIGZAGWIPE_TRANSITION,
'barnZigZagWipe'    : BARNZIGZAGWIPE_TRANSITION,
'waterfallWipe'     : WATERFALLWIPE_TRANSITION
};

var DEFAULT_TRANS_SUBTYPE                       = 0;
var LEFTTORIGHT_TRANS_SUBTYPE                   = 1;
var TOPTOBOTTOM_TRANS_SUBTYPE                   = 2;
var CORNERSIN_TRANS_SUBTYPE                     = 3; // 11
var CORNERSOUT_TRANS_SUBTYPE                    = 4;
var VERTICAL_TRANS_SUBTYPE                      = 5;
var HORIZONTAL_TRANS_SUBTYPE                    = 6; // 14
var DOWN_TRANS_SUBTYPE                          = 7; // 19
var CIRCLE_TRANS_SUBTYPE                        = 8; // 27
var CLOCKWISETWELVE_TRANS_SUBTYPE               = 9; // 33
var CLOCKWISETHREE_TRANS_SUBTYPE                = 10;
var CLOCKWISESIX_TRANS_SUBTYPE                  = 11;
var CLOCKWISENINE_TRANS_SUBTYPE                 = 12;
var TWOBLADEVERTICAL_TRANS_SUBTYPE              = 13;
var TWOBLADEHORIZONTAL_TRANS_SUBTYPE            = 14;
var FOURBLADE_TRANS_SUBTYPE                     = 15; // 39
var FROMLEFT_TRANS_SUBTYPE                      = 16; // 97
var FROMTOP_TRANS_SUBTYPE                       = 17;
var FROMRIGHT_TRANS_SUBTYPE                     = 18;
var FROMBOTTOM_TRANS_SUBTYPE                    = 19;
var CROSSFADE_TRANS_SUBTYPE                     = 20;
var FADETOCOLOR_TRANS_SUBTYPE                   = 21;
var FADEFROMCOLOR_TRANS_SUBTYPE                 = 22;
var FADEOVERCOLOR_TRANS_SUBTYPE                 = 23;
var THREEBLADE_TRANS_SUBTYPE                    = 24;
var EIGHTBLADE_TRANS_SUBTYPE                    = 25;
var ONEBLADE_TRANS_SUBTYPE                      = 26; // 107
var ACROSS_TRANS_SUBTYPE                        = 27;
var TOPLEFTVERTICAL_TRANS_SUBTYPE               = 28; // 109
var TOPLEFTHORIZONTAL_TRANS_SUBTYPE             = 29; // 64
var TOPLEFTDIAGONAL_TRANS_SUBTYPE               = 30; // 65
var TOPRIGHTDIAGONAL_TRANS_SUBTYPE              = 31; // 66
var BOTTOMRIGHTDIAGONAL_TRANS_SUBTYPE           = 32; // 67
var BOTTOMLEFTDIAGONAL_TRANS_SUBTYPE            = 33; // 68
var RECTANGLE_TRANS_SUBTYPE                     = 34; // 101
var DIAMOND_TRANS_SUBTYPE                       = 35; // 102
var TOPLEFT_TRANS_SUBTYPE                       = 36; // 3
var TOPRIGHT_TRANS_SUBTYPE                      = 37; // 4
var BOTTOMRIGHT_TRANS_SUBTYPE                   = 38; // 5
var BOTTOMLEFT_TRANS_SUBTYPE                    = 39; // 6
var TOPCENTER_TRANS_SUBTYPE                     = 40; // 7
var RIGHTCENTER_TRANS_SUBTYPE                   = 41; // 8
var BOTTOMCENTER_TRANS_SUBTYPE                  = 42; // 9
var LEFTCENTER_TRANS_SUBTYPE                    = 43; // 10
var LEFT_TRANS_SUBTYPE                          = 44; // 20
var UP_TRANS_SUBTYPE                            = 45; // 21
var RIGHT_TRANS_SUBTYPE                         = 46; // 22
var DIAGONALBOTTOMLEFT_TRANS_SUBTYPE            = 47; // 15
var DIAGONALTOPLEFT_TRANS_SUBTYPE               = 48; // 16
var CENTERTOP_TRANS_SUBTYPE                     = 49; // 48
var CENTERRIGHT_TRANS_SUBTYPE                   = 50; // 49
var TOP_TRANS_SUBTYPE                           = 51; // 50
var BOTTOM_TRANS_SUBTYPE                        = 52; // 52
var CLOCKWISETOP_TRANS_SUBTYPE                  = 53; // 40
var CLOCKWISERIGHT_TRANS_SUBTYPE                = 54; // 41
var CLOCKWISEBOTTOM_TRANS_SUBTYPE               = 55; // 42
var CLOCKWISELEFT_TRANS_SUBTYPE                 = 56; // 43
var CLOCKWISETOPLEFT_TRANS_SUBTYPE              = 57; // 44
var COUNTERCLOCKWISEBOTTOMLEFT_TRANS_SUBTYPE    = 58; // 45
var CLOCKWISEBOTTOMRIGHT_TRANS_SUBTYPE          = 59; // 46
var COUNTERCLOCKWISETOPRIGHT_TRANS_SUBTYPE      = 60; // 47
var VERTICALLEFT_TRANS_SUBTYPE                  = 61; // 93
var VERTICALRIGHT_TRANS_SUBTYPE                 = 62; // 94
var HORIZONTALLEFT_TRANS_SUBTYPE                = 63; // 95
var HORIZONTALRIGHT_TRANS_SUBTYPE               = 64; // 96
var TOPLEFTCLOCKWISE_TRANS_SUBTYPE              = 65; // 69
var TOPRIGHTCLOCKWISE_TRANS_SUBTYPE             = 66; // 70
var BOTTOMRIGHTCLOCKWISE_TRANS_SUBTYPE          = 67; // 71
var BOTTOMLEFTCLOCKWISE_TRANS_SUBTYPE           = 68; // 72
var TOPLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE       = 69; // 73
var TOPRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE      = 70; // 74
var BOTTOMRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE   = 71; // 75
var BOTTOMLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE    = 72; // 76
var DOUBLEBARNDOOR_TRANS_SUBTYPE                = 73; // 17
var DOUBLEDIAMOND_TRANS_SUBTYPE                 = 74; // 18
var VERTICALTOPSAME_TRANS_SUBTYPE               = 75; // 77
var VERTICALBOTTOMSAME_TRANS_SUBTYPE            = 76; // 78
var VERTICALTOPLEFTOPPOSITE_TRANS_SUBTYPE       = 77; // 79
var VERTICALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE    = 78; // 80
var HORIZONTALLEFTSAME_TRANS_SUBTYPE            = 79; // 81
var HORIZONTALRIGHTSAME_TRANS_SUBTYPE           = 80; // 82
var HORIZONTALTOPLEFTOPPOSITE_TRANS_SUBTYPE     = 81; // 83
var HORIZONTALTOPRIGHTOPPOSITE_TRANS_SUBTYPE    = 82; // 84
var DIAGONALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE    = 83; // 85
var DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE       = 84; // 86
var TWOBOXTOP_TRANS_SUBTYPE                     = 85; // 87
var TWOBOXBOTTOM_TRANS_SUBTYPE                  = 86; // 88
var TWOBOXLEFT_TRANS_SUBTYPE                    = 87; // 89
var TWOBOXRIGHT_TRANS_SUBTYPE                   = 88; // 90
var FOURBOXVERTICAL_TRANS_SUBTYPE               = 89; // 91
var FOURBOXHORIZONTAL_TRANS_SUBTYPE             = 90; // 92

var aTransitionSubtypeInMap = {
'default'                       : DEFAULT_TRANS_SUBTYPE,
'leftToRight'                   : LEFTTORIGHT_TRANS_SUBTYPE,
'topToBottom'                   : TOPTOBOTTOM_TRANS_SUBTYPE,
'cornersIn'                     : CORNERSIN_TRANS_SUBTYPE,
'cornersOut'                    : CORNERSOUT_TRANS_SUBTYPE,
'vertical'                      : VERTICAL_TRANS_SUBTYPE,
'centerTop'                     : CENTERTOP_TRANS_SUBTYPE,
'centerRight'                   : CENTERRIGHT_TRANS_SUBTYPE,
'top'                           : TOP_TRANS_SUBTYPE,
'right'                         : RIGHT_TRANS_SUBTYPE,
'bottom'                        : BOTTOM_TRANS_SUBTYPE,
'left'                          : LEFT_TRANS_SUBTYPE,
'horizontal'                    : HORIZONTAL_TRANS_SUBTYPE,
'down'                          : DOWN_TRANS_SUBTYPE,
'circle'                        : CIRCLE_TRANS_SUBTYPE,
'clockwiseTwelve'               : CLOCKWISETWELVE_TRANS_SUBTYPE,
'clockwiseThree'                : CLOCKWISETHREE_TRANS_SUBTYPE,
'clockwiseSix'                  : CLOCKWISESIX_TRANS_SUBTYPE,
'clockwiseNine'                 : CLOCKWISENINE_TRANS_SUBTYPE,
'clockwiseRight'                : CLOCKWISERIGHT_TRANS_SUBTYPE,
'clockwiseTop'                  : CLOCKWISETOP_TRANS_SUBTYPE,
'clockwiseBottom'               : CLOCKWISEBOTTOM_TRANS_SUBTYPE,
'clockwiseLeft'                 : CLOCKWISELEFT_TRANS_SUBTYPE,
'clockwiseTopLeft'              : CLOCKWISETOPLEFT_TRANS_SUBTYPE,
'counterClockwiseBottomLeft'    : COUNTERCLOCKWISEBOTTOMLEFT_TRANS_SUBTYPE,
'clockwiseBottomRight'          : CLOCKWISEBOTTOMRIGHT_TRANS_SUBTYPE,
'counterClockwiseTopRight'      : COUNTERCLOCKWISETOPRIGHT_TRANS_SUBTYPE,
'twoBladeVertical'              : TWOBLADEVERTICAL_TRANS_SUBTYPE,
'twoBladeHorizontal'            : TWOBLADEHORIZONTAL_TRANS_SUBTYPE,
'fourBlade'                     : FOURBLADE_TRANS_SUBTYPE,
'fromLeft'                      : FROMLEFT_TRANS_SUBTYPE,
'fromTop'                       : FROMTOP_TRANS_SUBTYPE,
'fromRight'                     : FROMRIGHT_TRANS_SUBTYPE,
'fromBottom'                    : FROMBOTTOM_TRANS_SUBTYPE,
'crossfade'                     : CROSSFADE_TRANS_SUBTYPE,
'fadeToColor'                   : FADETOCOLOR_TRANS_SUBTYPE,
'fadeFromColor'                 : FADEFROMCOLOR_TRANS_SUBTYPE,
'fadeOverColor'                 : FADEOVERCOLOR_TRANS_SUBTYPE,
'threeBlade'                    : THREEBLADE_TRANS_SUBTYPE,
'eightBlade'                    : EIGHTBLADE_TRANS_SUBTYPE,
'oneBlade'                      : ONEBLADE_TRANS_SUBTYPE,
'across'                        : ACROSS_TRANS_SUBTYPE,
'topLeftVertical'               : TOPLEFTVERTICAL_TRANS_SUBTYPE,
'topLeftHorizontal'             : TOPLEFTHORIZONTAL_TRANS_SUBTYPE,
'topLeftDiagonal'               : TOPLEFTDIAGONAL_TRANS_SUBTYPE,
'topRightDiagonal'              : TOPRIGHTDIAGONAL_TRANS_SUBTYPE,
'bottomRightDiagonal'           : BOTTOMRIGHTDIAGONAL_TRANS_SUBTYPE,
'topLeftClockwise'              : TOPLEFTCLOCKWISE_TRANS_SUBTYPE,
'topRightClockwise'             : TOPRIGHTCLOCKWISE_TRANS_SUBTYPE,
'bottomRightClockwise'          : BOTTOMRIGHTCLOCKWISE_TRANS_SUBTYPE,
'bottomLeftClockwise'           : BOTTOMLEFTCLOCKWISE_TRANS_SUBTYPE,
'topLeftCounterClockwise'       : TOPLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE,
'topRightCounterClockwise'      : TOPRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE,
'bottomRightCounterClockwise'   : BOTTOMRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE,
'bottomLeftCounterClockwise'    : BOTTOMLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE,
'bottomLeftDiagonal'            : BOTTOMLEFTDIAGONAL_TRANS_SUBTYPE,
'rectangle'                     : RECTANGLE_TRANS_SUBTYPE,
'diamond'                       : DIAMOND_TRANS_SUBTYPE,
'topLeft'                       : TOPLEFT_TRANS_SUBTYPE,
'topRight'                      : TOPRIGHT_TRANS_SUBTYPE,
'bottomRight'                   : BOTTOMRIGHT_TRANS_SUBTYPE,
'bottomLeft'                    : BOTTOMLEFT_TRANS_SUBTYPE,
'topCenter'                     : TOPCENTER_TRANS_SUBTYPE,
'rightCenter'                   : RIGHTCENTER_TRANS_SUBTYPE,
'bottomCenter'                  : BOTTOMCENTER_TRANS_SUBTYPE,
'leftCenter'                    : LEFTCENTER_TRANS_SUBTYPE,
'up'                            : UP_TRANS_SUBTYPE,
'diagonalBottomLeft'            : DIAGONALBOTTOMLEFT_TRANS_SUBTYPE,
'diagonalTopLeft'               : DIAGONALTOPLEFT_TRANS_SUBTYPE,
'verticalLeft'                  : VERTICALLEFT_TRANS_SUBTYPE,
'verticalRight'                 : VERTICALRIGHT_TRANS_SUBTYPE,
'horizontalLeft'                : HORIZONTALLEFT_TRANS_SUBTYPE,
'horizontalRight'               : HORIZONTALRIGHT_TRANS_SUBTYPE,
'doubleBarnDoor'                : DOUBLEBARNDOOR_TRANS_SUBTYPE,
'doubleDiamond'                 : DOUBLEDIAMOND_TRANS_SUBTYPE,
'verticalTopSame'               : VERTICALTOPSAME_TRANS_SUBTYPE,
'verticalBottomSame'            : VERTICALBOTTOMSAME_TRANS_SUBTYPE,
'verticalTopLeftOpposite'       : VERTICALTOPLEFTOPPOSITE_TRANS_SUBTYPE,
'verticalBottomLeftOpposite'    : VERTICALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE,
'horizontalLeftSame'            : HORIZONTALLEFTSAME_TRANS_SUBTYPE,
'horizontalRightSame'           : HORIZONTALRIGHTSAME_TRANS_SUBTYPE,
'horizontalTopLeftOpposite'     : HORIZONTALTOPLEFTOPPOSITE_TRANS_SUBTYPE,
'horizontalTopRightOpposite'    : HORIZONTALTOPRIGHTOPPOSITE_TRANS_SUBTYPE,
'diagonalBottomLeftOpposite'    : DIAGONALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE,
'diagonalTopLeftOpposite'       : DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE,
'twoBoxTop'                     : TWOBOXTOP_TRANS_SUBTYPE,
'twoBoxBottom'                  : TWOBOXBOTTOM_TRANS_SUBTYPE,
'twoBoxLeft'                    : TWOBOXLEFT_TRANS_SUBTYPE,
'twoBoxRight'                   : TWOBOXRIGHT_TRANS_SUBTYPE,
'fourBoxVertical'               : FOURBOXVERTICAL_TRANS_SUBTYPE,
'fourBoxHorizontal'             : FOURBOXHORIZONTAL_TRANS_SUBTYPE
};

var TRANSITION_MODE_IN  = 1;
var TRANSITION_MODE_OUT = 0;

var aTransitionModeOutMap = [ 'out', 'in' ];


var REVERSEMETHOD_IGNORE                    = 0;
var REVERSEMETHOD_INVERT_SWEEP              = 1;
var REVERSEMETHOD_SUBTRACT_POLYGON          = 2;
var REVERSEMETHOD_SUBTRACT_AND_INVERT       = 3;
var REVERSEMETHOD_ROTATE_180                = 4;
var REVERSEMETHOD_FLIP_X                    = 5;
var REVERSEMETHOD_FLIP_Y                    = 6;

var aReverseMethodOutMap = ['ignore', 'invert sweep', 'subtract polygon',
'subtract and invert', 'rotate 180', 'flip x', 'flip y'];


var aTransitionInfoTable = {};

aTransitionInfoTable[0] = {};
aTransitionInfoTable[0][0] =
{
'class' : TRANSITION_INVALID,
'rotationAngle' : 0.0,
'scaleX' : 0.0,
'scaleY' : 0.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : false,
'scaleIsotropically' : false
};

aTransitionInfoTable[SNAKEWIPE_TRANSITION] = {};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][TOPLEFTVERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][TOPLEFTHORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][TOPLEFTDIAGONAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][TOPRIGHTDIAGONAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][BOTTOMRIGHTDIAGONAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SNAKEWIPE_TRANSITION][BOTTOMLEFTDIAGONAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertSweep' : true,
'scaleIsotropically' : false
}

aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION] = {};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][VERTICALTOPSAME_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][VERTICALBOTTOMSAME_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][VERTICALTOPLEFTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][VERTICALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][HORIZONTALLEFTSAME_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][HORIZONTALRIGHTSAME_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][HORIZONTALTOPLEFTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][HORIZONTALTOPRIGHTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[PARALLELSNAKESWIPE_TRANSITION][DIAGONALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[SPIRALWIPE_TRANSITION] = {};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][TOPLEFTCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][TOPRIGHTCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][BOTTOMRIGHTCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][BOTTOMLEFTCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 270.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][TOPLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][TOPRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][BOTTOMRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 270.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SPIRALWIPE_TRANSITION][BOTTOMLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION] = {};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][TWOBOXTOP_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][TWOBOXBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][TWOBOXLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][TWOBOXRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][FOURBOXVERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXSNAKESWIPE_TRANSITION][FOURBOXHORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[BARNDOORWIPE_TRANSITION] = {};
aTransitionInfoTable[BARNDOORWIPE_TRANSITION][VERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 0.0,
'scaleX': 1.0,
'scaleY': 1.0,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};
aTransitionInfoTable[BARNDOORWIPE_TRANSITION][HORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 90.0,
'scaleX': 1.0,
'scaleY': 1.0,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};
aTransitionInfoTable[BARNDOORWIPE_TRANSITION][DIAGONALBOTTOMLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 45.0,
'scaleX': Math.SQRT2,
'scaleY': Math.SQRT2,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};
aTransitionInfoTable[BARNDOORWIPE_TRANSITION][DIAGONALTOPLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': -45.0,
'scaleX': Math.SQRT2,
'scaleY': Math.SQRT2,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};

aTransitionInfoTable[MISCDIAGONALWIPE_TRANSITION] = {};
aTransitionInfoTable[MISCDIAGONALWIPE_TRANSITION][DOUBLEBARNDOOR_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 45.0,
'scaleX': Math.SQRT2,
'scaleY': Math.SQRT2,
'reverseMethod': REVERSEMETHOD_IGNORE,
'outInvertsSweep': true,
'scaleIsotropically': false
};
aTransitionInfoTable[MISCDIAGONALWIPE_TRANSITION][DOUBLEDIAMOND_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 0.0,
'scaleX': 1,
'scaleY': 1,
'reverseMethod': REVERSEMETHOD_IGNORE,
'outInvertsSweep': true,
'scaleIsotropically': false
};

aTransitionInfoTable[IRISWIPE_TRANSITION] = {};
aTransitionInfoTable[IRISWIPE_TRANSITION][RECTANGLE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 0.0,
'scaleX': 1.0,
'scaleY': 1.0,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};

aTransitionInfoTable[IRISWIPE_TRANSITION][DIAMOND_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle': 45.0,
'scaleX': Math.SQRT2,
'scaleY': Math.SQRT2,
'reverseMethod': REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep': true,
'scaleIsotropically': false
};

aTransitionInfoTable[ZIGZAGWIPE_TRANSITION] = {};
aTransitionInfoTable[ZIGZAGWIPE_TRANSITION][LEFTTORIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[ZIGZAGWIPE_TRANSITION][TOPTOBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[BARNZIGZAGWIPE_TRANSITION] = {};
aTransitionInfoTable[BARNZIGZAGWIPE_TRANSITION][VERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BARNZIGZAGWIPE_TRANSITION][HORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[BARWIPE_TRANSITION] = {};
aTransitionInfoTable[BARWIPE_TRANSITION][LEFTTORIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : false,
'scaleIsotropically' : false
};
aTransitionInfoTable[BARWIPE_TRANSITION][TOPTOBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : false,
'scaleIsotropically' : false
};

aTransitionInfoTable[WATERFALLWIPE_TRANSITION] = {};
aTransitionInfoTable[WATERFALLWIPE_TRANSITION][VERTICALLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[WATERFALLWIPE_TRANSITION][VERTICALRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[WATERFALLWIPE_TRANSITION][HORIZONTALLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[WATERFALLWIPE_TRANSITION][HORIZONTALRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_ROTATE_180,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[BOXWIPE_TRANSITION] = {};
aTransitionInfoTable[BOXWIPE_TRANSITION][TOPLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][TOPRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][BOTTOMRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][BOTTOMLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][TOPCENTER_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][RIGHTCENTER_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][BOTTOMCENTER_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[BOXWIPE_TRANSITION][LEFTCENTER_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[FOURBOXWIPE_TRANSITION] = {};
aTransitionInfoTable[FOURBOXWIPE_TRANSITION][CORNERSIN_TRANS_SUBTYPE] =
aTransitionInfoTable[FOURBOXWIPE_TRANSITION][CORNERSOUT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[ELLIPSEWIPE_TRANSITION] = {};
aTransitionInfoTable[ELLIPSEWIPE_TRANSITION][CIRCLE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : true
};
aTransitionInfoTable[ELLIPSEWIPE_TRANSITION][HORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[ELLIPSEWIPE_TRANSITION][VERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[CLOCKWIPE_TRANSITION] = {};
aTransitionInfoTable[CLOCKWIPE_TRANSITION][CLOCKWISETWELVE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[CLOCKWIPE_TRANSITION][CLOCKWISETHREE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[CLOCKWIPE_TRANSITION][CLOCKWISESIX_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[CLOCKWIPE_TRANSITION][CLOCKWISENINE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 270.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[VEEWIPE_TRANSITION] = {};
aTransitionInfoTable[VEEWIPE_TRANSITION][DOWN_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[VEEWIPE_TRANSITION][LEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[VEEWIPE_TRANSITION][UP_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[VEEWIPE_TRANSITION][RIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[FANWIPE_TRANSITION] = {};
aTransitionInfoTable[FANWIPE_TRANSITION][CENTERTOP_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[FANWIPE_TRANSITION][CENTERRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[FANWIPE_TRANSITION][TOP_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[FANWIPE_TRANSITION][RIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[FANWIPE_TRANSITION][BOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[FANWIPE_TRANSITION][LEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};


aTransitionInfoTable[PINWHEELWIPE_TRANSITION] = {};
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][ONEBLADE_TRANS_SUBTYPE] =
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][TWOBLADEVERTICAL_TRANS_SUBTYPE] =
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][THREEBLADE_TRANS_SUBTYPE] =
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][FOURBLADE_TRANS_SUBTYPE] =
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][EIGHTBLADE_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : true
};
aTransitionInfoTable[PINWHEELWIPE_TRANSITION][TWOBLADEHORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : -90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : true
};

aTransitionInfoTable[PUSHWIPE_TRANSITION] = {};
aTransitionInfoTable[PUSHWIPE_TRANSITION][FROMLEFT_TRANS_SUBTYPE] =
aTransitionInfoTable[PUSHWIPE_TRANSITION][FROMTOP_TRANS_SUBTYPE] =
aTransitionInfoTable[PUSHWIPE_TRANSITION][FROMRIGHT_TRANS_SUBTYPE] =
aTransitionInfoTable[PUSHWIPE_TRANSITION][FROMBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_SPECIAL,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};


aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION] = {};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISETOP_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISERIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISEBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISELEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 270.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISETOPLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][COUNTERCLOCKWISEBOTTOMLEFT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][CLOCKWISEBOTTOMRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 180.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[SINGLESWEEPWIPE_TRANSITION][COUNTERCLOCKWISETOPRIGHT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_SUBTRACT_AND_INVERT,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[SLIDEWIPE_TRANSITION] = {};
aTransitionInfoTable[SLIDEWIPE_TRANSITION][FROMLEFT_TRANS_SUBTYPE] =
aTransitionInfoTable[SLIDEWIPE_TRANSITION][FROMTOP_TRANS_SUBTYPE] =
aTransitionInfoTable[SLIDEWIPE_TRANSITION][FROMRIGHT_TRANS_SUBTYPE] =
aTransitionInfoTable[SLIDEWIPE_TRANSITION][FROMBOTTOM_TRANS_SUBTYPE] =
{
'class' : TRANSITION_SPECIAL,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[FADE_TRANSITION] = {};
aTransitionInfoTable[FADE_TRANSITION][CROSSFADE_TRANS_SUBTYPE] =
aTransitionInfoTable[FADE_TRANSITION][FADETOCOLOR_TRANS_SUBTYPE] =
aTransitionInfoTable[FADE_TRANSITION][FADEFROMCOLOR_TRANS_SUBTYPE] =
aTransitionInfoTable[FADE_TRANSITION][FADEOVERCOLOR_TRANS_SUBTYPE] =
{
'class' : TRANSITION_SPECIAL,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};


aTransitionInfoTable[RANDOMBARWIPE_TRANSITION] = {};
aTransitionInfoTable[RANDOMBARWIPE_TRANSITION][VERTICAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[RANDOMBARWIPE_TRANSITION][HORIZONTAL_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[CHECKERBOARDWIPE_TRANSITION] = {};
aTransitionInfoTable[CHECKERBOARDWIPE_TRANSITION][DOWN_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 90.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_Y,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};
aTransitionInfoTable[CHECKERBOARDWIPE_TRANSITION][ACROSS_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_FLIP_X,
'outInvertsSweep' : true,
'scaleIsotropically' : false
};

aTransitionInfoTable[DISSOLVE_TRANSITION] = {};
aTransitionInfoTable[DISSOLVE_TRANSITION][DEFAULT_TRANS_SUBTYPE] =
{
'class' : TRANSITION_CLIP_POLYPOLYGON,
'rotationAngle' : 0.0,
'scaleX' : 1.0,
'scaleY' : 1.0,
'reverseMethod' : REVERSEMETHOD_IGNORE,
'outInvertsSweep' : true,
'scaleIsotropically' : true
};


function createStateTransitionTable()
{
var aSTT = {};

aSTT[RESTART_MODE_NEVER] = {};
aSTT[RESTART_MODE_WHEN_NOT_ACTIVE] = {};
aSTT[RESTART_MODE_ALWAYS] = {};

var aTable =
aSTT[RESTART_MODE_NEVER][FILL_MODE_REMOVE] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = ENDED_NODE;
aTable[FROZEN_NODE]         = INVALID_NODE;  // this state is unreachable here
aTable[ENDED_NODE]          = ENDED_NODE;    // this state is a sink here (cannot restart)

aTable =
aSTT[RESTART_MODE_NEVER][FILL_MODE_FREEZE] =
aSTT[RESTART_MODE_NEVER][FILL_MODE_HOLD] =
aSTT[RESTART_MODE_NEVER][FILL_MODE_TRANSITION] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = FROZEN_NODE | ENDED_NODE;
aTable[FROZEN_NODE]         = ENDED_NODE;
aTable[ENDED_NODE]          = ENDED_NODE;   // this state is a sink here (cannot restart)

aTable =
aSTT[RESTART_MODE_WHEN_NOT_ACTIVE][FILL_MODE_REMOVE] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = ENDED_NODE;
aTable[FROZEN_NODE]         = INVALID_NODE;  // this state is unreachable here
aTable[ENDED_NODE]          = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible

aTable =
aSTT[RESTART_MODE_WHEN_NOT_ACTIVE][FILL_MODE_FREEZE] =
aSTT[RESTART_MODE_WHEN_NOT_ACTIVE][FILL_MODE_HOLD] =
aSTT[RESTART_MODE_WHEN_NOT_ACTIVE][FILL_MODE_TRANSITION] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = FROZEN_NODE | ENDED_NODE;
aTable[FROZEN_NODE]         = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible
aTable[ENDED_NODE]          = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible

aTable =
aSTT[RESTART_MODE_ALWAYS][FILL_MODE_REMOVE] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible
aTable[FROZEN_NODE]         = INVALID_NODE;  // this state is unreachable here
aTable[ENDED_NODE]          = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible

aTable =
aSTT[RESTART_MODE_ALWAYS][FILL_MODE_FREEZE] =
aSTT[RESTART_MODE_ALWAYS][FILL_MODE_HOLD] =
aSTT[RESTART_MODE_ALWAYS][FILL_MODE_TRANSITION] = {};
aTable[INVALID_NODE]        = INVALID_NODE;
aTable[UNRESOLVED_NODE]     = RESOLVED_NODE | ENDED_NODE;
aTable[RESOLVED_NODE]       = ACTIVE_NODE | ENDED_NODE;
aTable[ACTIVE_NODE]         = RESOLVED_NODE | ACTIVE_NODE | FROZEN_NODE | ENDED_NODE;
aTable[FROZEN_NODE]         = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible
aTable[ENDED_NODE]          = RESOLVED_NODE | ACTIVE_NODE | ENDED_NODE;  // restart is possible

return aSTT;
}

var aStateTransitionTable = createStateTransitionTable();


function getTransitionTable( eRestartMode, eFillMode )
{
if( eRestartMode == RESTART_MODE_DEFAULT )
{
log( 'getTransitionTable: unexpected restart mode: ' + eRestartMode
+ '. Used NEVER instead.');
eRestartMode = RESTART_MODE_NEVER;
}

if( eFillMode == FILL_MODE_DEFAULT ||
eFillMode == FILL_MODE_AUTO )
{
eFillMode = FILL_MODE_REMOVE;
}

return aStateTransitionTable[eRestartMode][eFillMode];
}


var EVENT_TRIGGER_UNKNOWN               = 0;
var EVENT_TRIGGER_ON_SLIDE_BEGIN        = 1; // eslint-disable-line no-unused-vars
var EVENT_TRIGGER_ON_SLIDE_END          = 2; // eslint-disable-line no-unused-vars
var EVENT_TRIGGER_BEGIN_EVENT           = 3;
var EVENT_TRIGGER_END_EVENT             = 4;
var EVENT_TRIGGER_ON_CLICK              = 5;
var EVENT_TRIGGER_ON_DBL_CLICK          = 6; // eslint-disable-line no-unused-vars
var EVENT_TRIGGER_ON_MOUSE_ENTER        = 7; // eslint-disable-line no-unused-vars
var EVENT_TRIGGER_ON_MOUSE_LEAVE        = 8; // eslint-disable-line no-unused-vars
var EVENT_TRIGGER_ON_NEXT_EFFECT        = 9;
var EVENT_TRIGGER_ON_PREV_EFFECT        = 10;
var EVENT_TRIGGER_REPEAT                = 11; // eslint-disable-line no-unused-vars

var aEventTriggerOutMap = [ 'unknown', 'slideBegin', 'slideEnd', 'begin', 'end', 'click',
'doubleClick', 'mouseEnter', 'mouseLeave', 'next', 'previous', 'repeat' ];


function getEventTriggerType( sEventTrigger )
{
if( sEventTrigger == 'begin' )
return EVENT_TRIGGER_BEGIN_EVENT;
else if( sEventTrigger == 'end' )
return EVENT_TRIGGER_END_EVENT;
else if( sEventTrigger == 'next' )
return EVENT_TRIGGER_ON_NEXT_EFFECT;
else if( sEventTrigger == 'prev' )
return EVENT_TRIGGER_ON_PREV_EFFECT;
else if( sEventTrigger == 'click' )
return EVENT_TRIGGER_ON_CLICK;
else
return EVENT_TRIGGER_UNKNOWN;
}


var UNKNOWN_TIMING          = 0;
var OFFSET_TIMING           = 1;
var WALLCLOCK_TIMING        = 2; // eslint-disable-line no-unused-vars
var INDEFINITE_TIMING       = 3;
var EVENT_TIMING            = 4;
var SYNCBASE_TIMING         = 5;
var MEDIA_TIMING            = 6; // eslint-disable-line no-unused-vars

var aTimingTypeOutMap = [ 'unknown', 'offset', 'wallclock', 'indefinite', 'event', 'syncbase', 'media' ];


var CHARCODE_PLUS       = '+'.charCodeAt(0);
var CHARCODE_MINUS      = '-'.charCodeAt(0);
var CHARCODE_0          = '0'.charCodeAt(0);
var CHARCODE_9          = '9'.charCodeAt(0);


function Timing( aAnimationNode, sTimingAttribute )
{
this.aAnimationNode = aAnimationNode;     // the node, the timing attribute belongs to
this.sTimingDescription = removeWhiteSpaces( sTimingAttribute );
this.eTimingType = UNKNOWN_TIMING;
this.nOffset = 0.0;                       // in seconds
this.sEventBaseElementId = '';            // the element id for event based timing
this.eEventType = EVENT_TRIGGER_UNKNOWN;  // the event type
}

Timing.prototype.getAnimationNode = function()
{
return this.aAnimationNode;
};

Timing.prototype.getType = function()
{
return this.eTimingType;
};

Timing.prototype.getOffset = function()
{
return this.nOffset;
};

Timing.prototype.getEventBaseElementId = function()
{
return this.sEventBaseElementId;
};

Timing.prototype.getEventType = function()
{
return this.eEventType;
};

Timing.prototype.parse = function()
{
if( !this.sTimingDescription )
{
this.eTimingType = OFFSET_TIMING;
return;
}

if( this.sTimingDescription == 'indefinite' )
this.eTimingType = INDEFINITE_TIMING;
else
{
var nFirstCharCode = this.sTimingDescription.charCodeAt(0);
var bPositiveOffset = !( nFirstCharCode == CHARCODE_MINUS );
if ( ( nFirstCharCode == CHARCODE_PLUS ) ||
( nFirstCharCode == CHARCODE_MINUS ) ||
( ( nFirstCharCode >= CHARCODE_0 ) && ( nFirstCharCode <= CHARCODE_9 ) ) )
{
var sClockValue
= ( ( nFirstCharCode == CHARCODE_PLUS ) || ( nFirstCharCode == CHARCODE_MINUS ) )
? this.sTimingDescription.substr( 1 )
: this.sTimingDescription;

var TimeInSec = Timing.parseClockValue( sClockValue );
if( TimeInSec != undefined )
{
this.eTimingType = OFFSET_TIMING;
this.nOffset = bPositiveOffset ? TimeInSec : -TimeInSec;
}
}
else
{
var aTimingSplit = [];
bPositiveOffset = true;
if( this.sTimingDescription.indexOf( '+' ) != -1 )
{
aTimingSplit = this.sTimingDescription.split( '+' );
}
else if( this.sTimingDescription.indexOf( '-' ) != -1 )
{
aTimingSplit = this.sTimingDescription.split( '-' );
bPositiveOffset = false;
}
else
{
aTimingSplit[0] = this.sTimingDescription;
aTimingSplit[1] = '';
}

if( aTimingSplit[0].indexOf( '.' ) != -1 )
{
var aEventSplit = aTimingSplit[0].split( '.' );
this.sEventBaseElementId = aEventSplit[0];
this.eEventType = getEventTriggerType( aEventSplit[1] );
}
else
{
this.eEventType = getEventTriggerType( aTimingSplit[0] );
}

if( this.eEventType == EVENT_TRIGGER_UNKNOWN )
return;

if( ( this.eEventType == EVENT_TRIGGER_BEGIN_EVENT ) ||
( this.eEventType == EVENT_TRIGGER_END_EVENT ) )
{
this.eTimingType = SYNCBASE_TIMING;
}
else
{
this.eTimingType = EVENT_TIMING;
}

if( aTimingSplit[1] )
{
sClockValue = aTimingSplit[1];
TimeInSec = Timing.parseClockValue( sClockValue );
if( TimeInSec != undefined )
{
this.nOffset = ( bPositiveOffset ) ? TimeInSec : -TimeInSec;
}
else
{
this.eTimingType = UNKNOWN_TIMING;
}

}
}
}

};

Timing.parseClockValue = function( sClockValue )
{
if( !sClockValue )
return 0.0;

var nTimeInSec = undefined;

var reFullClockValue = /^([0-9]+):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?$/;
var rePartialClockValue = /^([0-5][0-9]):([0-5][0-9])(.[0-9]+)?$/;
var reTimeCountValue = /^([0-9]+)(.[0-9]+)?(h|min|s|ms)?$/;

if( reFullClockValue.test( sClockValue ) )
{
var aClockTimeParts = reFullClockValue.exec( sClockValue );

var nHours = parseInt( aClockTimeParts[1] );
var nMinutes = parseInt( aClockTimeParts[2] );
var nSeconds = parseInt( aClockTimeParts[3] );
if( aClockTimeParts[4] )
nSeconds += parseFloat( aClockTimeParts[4] );

nTimeInSec = ( ( nHours * 60 ) +  nMinutes ) * 60 + nSeconds;

}
else if( rePartialClockValue.test( sClockValue ) )
{
aClockTimeParts = rePartialClockValue.exec( sClockValue );

nMinutes = parseInt( aClockTimeParts[1] );
nSeconds = parseInt( aClockTimeParts[2] );
if( aClockTimeParts[3] )
nSeconds += parseFloat( aClockTimeParts[3] );

nTimeInSec = nMinutes * 60 + nSeconds;
}
else if( reTimeCountValue.test( sClockValue ) )
{
aClockTimeParts = reTimeCountValue.exec( sClockValue );

var nTimeCount = parseInt( aClockTimeParts[1] );
if( aClockTimeParts[2] )
nTimeCount += parseFloat( aClockTimeParts[2] );

if( aClockTimeParts[3] )
{
if( aClockTimeParts[3] == 'h' )
{
nTimeInSec = nTimeCount * 3600;
}
else if( aClockTimeParts[3] == 'min' )
{
nTimeInSec = nTimeCount * 60;
}
else if( aClockTimeParts[3] == 's' )
{
nTimeInSec = nTimeCount;
}
else if( aClockTimeParts[3] == 'ms' )
{
nTimeInSec = nTimeCount / 1000;
}
}
else
{
nTimeInSec = nTimeCount;
}

}

if( nTimeInSec )
nTimeInSec = parseFloat( nTimeInSec.toFixed( 3 ) );
return nTimeInSec;
};

Timing.prototype.info = function( bVerbose )
{

var sInfo = '';

if( bVerbose )
{
sInfo = 'description: ' + this.sTimingDescription + ', ';

sInfo += ', type: ' +  aTimingTypeOutMap[ this.getType() ];
sInfo += ', offset: ' + this.getOffset();
sInfo += ', event base element id: ' + this.getEventBaseElementId();
sInfo += ', timing event type: ' + aEventTriggerOutMap[ this.getEventType() ];
}
else
{
switch( this.getType() )
{
case INDEFINITE_TIMING:
sInfo += 'indefinite';
break;
case OFFSET_TIMING:
sInfo += this.getOffset();
break;
case EVENT_TIMING:
case SYNCBASE_TIMING:
if( this.getEventBaseElementId() )
sInfo += this.getEventBaseElementId() + '.';
sInfo += aEventTriggerOutMap[ this.getEventType() ];
if( this.getOffset() )
{
if( this.getOffset() > 0 )
sInfo += '+';
sInfo += this.getOffset();
}
}
}

return sInfo;
};


function Duration( sDurationAttribute )
{
this.bIndefinite = false;
this.bMedia = false;
this.nValue = undefined;
this.bDefined = false;

if( !sDurationAttribute )
return;

if( sDurationAttribute == 'indefinite' )
this.bIndefinite = true;
else if( sDurationAttribute == 'media' )
this.bMedia = true;
else
{
this.nValue = Timing.parseClockValue( sDurationAttribute );
if( this.nValue <= 0.0 )
this.nValue = 0.001;  // duration must be always greater than 0
}
this.bDefined = true;
}


Duration.prototype.isSet = function()
{
return this.bDefined;
};

Duration.prototype.isIndefinite = function()
{
return this.bIndefinite;
};

Duration.prototype.isMedia = function()
{
return this.bMedia;
};

Duration.prototype.isValue = function()
{
return this.nValue != undefined;
};

Duration.prototype.getValue= function()
{
return this.nValue;
};

Duration.prototype.info= function()
{
var sInfo;

if( this.isIndefinite() )
sInfo = 'indefinite';
else if( this.isMedia() )
sInfo = 'media';
else if( this.getValue() )
sInfo = this.getValue();

return sInfo;
};


function AnimationNode()
{
}

AnimationNode.prototype.init = function() {};
AnimationNode.prototype.resolve = function() {};
AnimationNode.prototype.activate = function() {};
AnimationNode.prototype.deactivate = function() {};
AnimationNode.prototype.end = function() {};
AnimationNode.prototype.getState = function() {};
AnimationNode.prototype.registerDeactivatingListener = function() {};
AnimationNode.prototype.notifyDeactivating = function() {};


function NodeContext( aSlideShowContext )
{
this.aContext = aSlideShowContext;
this.aAnimationNodeMap = null;
this.aAnimatedElementMap = null;
this.aSourceEventElementMap = null;
this.nStartDelay = 0.0;
this.bFirstRun = undefined;
this.aSlideHeight = HEIGHT;
this.aSlideWidth = WIDTH;
}


NodeContext.prototype.makeSourceEventElement = function( sId, aEventBaseElem )
{
if( !aEventBaseElem )
{
log( 'NodeContext.makeSourceEventElement: event base element is not valid' );
return null;
}

if( !this.aContext.aEventMultiplexer )
{
log( 'NodeContext.makeSourceEventElement: event multiplexer not initialized' );
return null;
}

if( !this.aSourceEventElementMap[ sId ] )
{
this.aSourceEventElementMap[ sId ] = new SourceEventElement( sId, aEventBaseElem, this.aContext.aEventMultiplexer );
}
return this.aSourceEventElementMap[ sId ];
};


function StateTransition( aBaseNode )
{
this.aNode = aBaseNode;
this.eToState = INVALID_NODE;
}

StateTransition.prototype.enter = function( eNodeState, bForce )
{
if( !bForce ) bForce = false;

if( this.eToState != INVALID_NODE )
{
log( 'StateTransition.enter: commit() before enter()ing again!' );
return false;
}
if( !bForce && !this.aNode.isTransition( this.aNode.getState(), eNodeState  ) )
return false;

if( ( this.aNode.nCurrentStateTransition & eNodeState ) != 0 )
return false; // already in wanted transition

this.aNode.nCurrentStateTransition |= eNodeState;
this.eToState = eNodeState;
return true;
};

StateTransition.prototype.commit = function()
{
if( this.eToState != INVALID_NODE )
{
this.aNode.eCurrentState = this.eToState;
this.clear();
}
};

StateTransition.prototype.clear = function()
{
if( this.eToState != INVALID_NODE )
{
this.aNode.nCurrentStateTransition &= ~this.eToState;
this.eToState = INVALID_NODE;
}
};


function BaseNode( aAnimElem, aParentNode, aNodeContext )
{
this.nId = getUniqueId();
this.sClassName = 'BaseNode';

if( !aAnimElem )
log( 'BaseNode(id:' + this.nId + ') constructor: aAnimElem is not valid' );

if( !aNodeContext )
log( 'BaseNode(id:' + this.nId + ') constructor: aNodeContext is not valid' );

if( !aNodeContext.aContext )
log( 'BaseNode(id:' + this.nId + ') constructor: aNodeContext.aContext is not valid' );


this.bIsContainer = false;
this.aElement = aAnimElem;
this.aParentNode = aParentNode;
this.aNodeContext = aNodeContext;
this.aContext = aNodeContext.aContext;
this.nStartDelay = aNodeContext.nStartDelay;
this.eCurrentState = UNRESOLVED_NODE;
this.nCurrentStateTransition = 0;
this.aDeactivatingListenerArray = [];
this.aActivationEvent = null;
this.aDeactivationEvent = null;

this.aBegin = null;
this.aDuration = null;
this.aEnd = null;
this.bMainSequenceRootNode = false;
this.bInteractiveSequenceRootNode = false;
this.eFillMode = FILL_MODE_FREEZE;
this.eRestartMode = RESTART_MODE_NEVER;
this.nReapeatCount = undefined;
this.nAccelerate = 0.0;
this.nDecelerate = 0.0;
this.bAutoReverse = false;

}
extend( BaseNode, AnimationNode );


BaseNode.prototype.getId = function()
{
return this.nId;
};

BaseNode.prototype.parseElement = function()
{
var aAnimElem = this.aElement;

var sIdAttr = aAnimElem.getAttributeNS( NSS['xml'], 'id' );
if( sIdAttr )
this.aNodeContext.aAnimationNodeMap[ sIdAttr ] = this;

this.aBegin = null;
var sBeginAttr = aAnimElem.getAttributeNS( NSS['smil'], 'begin' );
this.aBegin = new Timing( this, sBeginAttr );
this.aBegin.parse();

this.aEnd = null;
var sEndAttr = aAnimElem.getAttributeNS( NSS['smil'], 'end' );
if( sEndAttr )
{
this.aEnd = new Timing( this, sEndAttr );
this.aEnd.parse();
}

this.aDuration = null;
var sDurAttr = aAnimElem.getAttributeNS( NSS['smil'], 'dur' );
this.aDuration = new Duration( sDurAttr );
if( !this.aDuration.isSet() )
{
if( this.isContainer() )
this.aDuration = null;
else
this.aDuration = new Duration( 'indefinite' );
}

var sFillAttr = aAnimElem.getAttributeNS( NSS['smil'], 'fill' );
if( sFillAttr && aFillModeInMap[ sFillAttr ])
this.eFillMode = aFillModeInMap[ sFillAttr ];
else
this.eFillMode = FILL_MODE_DEFAULT;

var sRestartAttr = aAnimElem.getAttributeNS( NSS['smil'], 'restart' );
if( sRestartAttr && aRestartModeInMap[ sRestartAttr ] )
this.eRestartMode = aRestartModeInMap[ sRestartAttr ];
else
this.eRestartMode = RESTART_MODE_DEFAULT;

var sRepeatCount = aAnimElem.getAttributeNS( NSS['smil'], 'repeatCount' );
if( !sRepeatCount )
this.nReapeatCount = 1;
else
this.nReapeatCount = parseFloat( sRepeatCount );
if( ( isNaN(this.nReapeatCount) ) && ( sRepeatCount != 'indefinite' ) )
this.nReapeatCount = 1;

this.nAccelerate = 0.0;
var sAccelerateAttr = aAnimElem.getAttributeNS( NSS['smil'], 'accelerate' );
if( sAccelerateAttr )
this.nAccelerate = parseFloat( sAccelerateAttr );
if( isNaN(this.nAccelerate) )
this.nAccelerate = 0.0;

this.nDecelerate = 0.0;
var sDecelerateAttr = aAnimElem.getAttributeNS( NSS['smil'], 'decelerate' );
if( sDecelerateAttr )
this.nDecelerate = parseFloat( sDecelerateAttr );
if( isNaN(this.nDecelerate) )
this.nDecelerate = 0.0;

this.bAutoreverse = false;
var sAutoReverseAttr = aAnimElem.getAttributeNS( NSS['smil'], 'autoReverse' );
if( sAutoReverseAttr == 'true' )
this.bAutoreverse = true;


if( this.eFillMode == FILL_MODE_DEFAULT )
if( this.getParentNode() )
this.eFillMode = this.getParentNode().getFillMode();
else
this.eFillMode = FILL_MODE_AUTO;

if( this.eFillMode ==  FILL_MODE_AUTO ) // see SMIL recommendation document
{
this.eFillMode = ( this.aEnd ||
( this.nReapeatCount != 1) ||
( this.aDuration && !this.aDuration.isIndefinite() ) )
? FILL_MODE_REMOVE
: FILL_MODE_FREEZE;
}

if( this.eRestartMode == RESTART_MODE_DEFAULT )
if( this.getParentNode() )
this.eRestartMode = this.getParentNode().getRestartMode();
else
this.eRestartMode = RESTART_MODE_ALWAYS;

if( ( this.nAccelerate + this.nDecelerate ) > 1.0 )
{
this.nAccelerate = 0.0;
this.nDecelerate = 0.0;
}

this.aStateTransTable = getTransitionTable( this.getRestartMode(), this.getFillMode() );

return true;
};

BaseNode.prototype.getParentNode = function()
{
return this.aParentNode;
};

BaseNode.prototype.init = function()
{
this.DBG( this.callInfo( 'init' ) );
if( ! this.checkValidNode() )
return false;
if( this.aActivationEvent )
this.aActivationEvent.dispose();
if( this.aDeactivationEvent )
this.aDeactivationEvent.dispose();

this.eCurrentState = UNRESOLVED_NODE;

return this.init_st();
};

BaseNode.prototype.resolve = function()
{
if( ! this.checkValidNode() )
return false;

this.DBG( this.callInfo( 'resolve' ) );

if( this.eCurrentState == RESOLVED_NODE )
log( 'BaseNode.resolve: already in RESOLVED state' );

var aStateTrans = new StateTransition( this );

if( aStateTrans.enter( RESOLVED_NODE ) &&
this.isTransition( RESOLVED_NODE, ACTIVE_NODE ) &&
this.resolve_st() )
{
aStateTrans.commit();

if( this.aActivationEvent )
{
this.aActivationEvent.charge();
}
else
{
this.aActivationEvent = makeDelay( bind( this, this.activate ), this.getBegin().getOffset() + this.nStartDelay );
}
registerEvent( this.getId(), this.getBegin(), this.aActivationEvent, this.aNodeContext );

return true;
}

return false;
};

BaseNode.prototype.activate = function()
{
if( ! this.checkValidNode() )
return false;

if( this.eCurrentState == ACTIVE_NODE )
log( 'BaseNode.activate: already in ACTIVE state' );

this.DBG( this.callInfo( 'activate' ), getCurrentSystemTime() );

var aStateTrans = new StateTransition( this );

if( aStateTrans.enter( ACTIVE_NODE ) )
{
this.activate_st();
aStateTrans.commit();
if( !this.aContext.aEventMultiplexer )
log( 'BaseNode.activate: this.aContext.aEventMultiplexer is not valid' );
this.aContext.aEventMultiplexer.notifyEvent( EVENT_TRIGGER_BEGIN_EVENT, this.getId() );
return true;
}
return false;
};

BaseNode.prototype.deactivate = function()
{
if( this.inStateOrTransition( ENDED_NODE | FROZEN_NODE ) || !this.checkValidNode() )
return;

if( this.isTransition( this.eCurrentState, FROZEN_NODE ) )
{
this.DBG( this.callInfo( 'deactivate' ), getCurrentSystemTime() );

var aStateTrans = new StateTransition( this );
if( aStateTrans.enter( FROZEN_NODE, true /* FORCE */ ) )
{
this.deactivate_st( FROZEN_NODE );
aStateTrans.commit();

this.notifyEndListeners();

if( this.aActivationEvent )
this.aActivationEvent.dispose();
if( this.aDeactivationEvent )
this.aDeactivationEvent.dispose();
}
}
else
{
this.end();
}
};

BaseNode.prototype.end = function()
{
var bIsFrozenOrInTransitionToFrozen = this.inStateOrTransition( FROZEN_NODE );
if( this.inStateOrTransition( ENDED_NODE ) || !this.checkValidNode() )
return;

if( !(this.isTransition( this.eCurrentState, ENDED_NODE ) ) )
log( 'BaseNode.end: end state not reachable in transition table' );

this.DBG( this.callInfo( 'end' ), getCurrentSystemTime() );

var aStateTrans = new StateTransition( this );
if( aStateTrans.enter( ENDED_NODE, true /* FORCE */ ) )
{
this.deactivate_st( ENDED_NODE );
aStateTrans.commit();

if( !bIsFrozenOrInTransitionToFrozen )
this.notifyEndListeners();

if( this.aActivationEvent )
this.aActivationEvent.dispose();
if( this.aDeactivationEvent )
this.aDeactivationEvent.dispose();
}
};

BaseNode.prototype.dispose = function()
{
if( this.aActivationEvent )
this.aActivationEvent.dispose();
if( this.aDeactivationEvent )
this.aDeactivationEvent.dispose();
this.aDeactivatingListenerArray = [];
};

BaseNode.prototype.getState = function()
{
return this.eCurrentState;
};

BaseNode.prototype.registerDeactivatingListener = function( aNotifiee )
{
if (! this.checkValidNode())
return false;

if( !aNotifiee )
{
log( 'BaseNode.registerDeactivatingListener(): invalid notifiee' );
return false;
}
this.aDeactivatingListenerArray.push( aNotifiee );

return true;
};

BaseNode.prototype.notifyDeactivating = function( aNotifier )
{
assert( ( aNotifier.getState() == FROZEN_NODE ) || ( aNotifier.getState() == ENDED_NODE ),
'BaseNode.notifyDeactivating: Notifier node is neither in FROZEN nor in ENDED state' );
};

BaseNode.prototype.isMainSequenceRootNode = function()
{
return this.bMainSequenceRootNode;
};

BaseNode.prototype.isInteractiveSequenceRootNode = function()
{
return this.bInteractiveSequenceRootNode;
};

BaseNode.prototype.makeDeactivationEvent = function( nDelay )
{
if( this.aDeactivationEvent )
{
this.aDeactivationEvent.charge();
}
else
{
if( typeof( nDelay ) == typeof(0) )
this.aDeactivationEvent = makeDelay( bind( this, this.deactivate ), nDelay );
else
this.aDeactivationEvent = null;
}
return this.aDeactivationEvent;
};

BaseNode.prototype.scheduleDeactivationEvent = function( aEvent )
{
this.DBG( this.callInfo( 'scheduleDeactivationEvent' ) );

if( !aEvent )
{
if( this.getDuration() && this.getDuration().isValue() )
aEvent = this.makeDeactivationEvent( this.getDuration().getValue() );
}
if( aEvent )
{
this.aContext.aTimerEventQueue.addEvent( aEvent );
}
};

BaseNode.prototype.checkValidNode = function()
{
return ( this.eCurrentState != INVALID_NODE );
};

BaseNode.prototype.init_st = function()
{
return true;
};

BaseNode.prototype.resolve_st = function()
{
return true;
};

BaseNode.prototype.activate_st = function()
{
this.scheduleDeactivationEvent();
};

BaseNode.prototype.deactivate_st = function( /*aNodeState*/ )
{
};

BaseNode.prototype.notifyEndListeners = function()
{
var nDeactivatingListenerCount = this.aDeactivatingListenerArray.length;

for( var i = 0; i < nDeactivatingListenerCount; ++i )
{
this.aDeactivatingListenerArray[i].notifyDeactivating( this );
}

this.aContext.aEventMultiplexer.notifyEvent( EVENT_TRIGGER_END_EVENT, this.getId() );
if( this.getParentNode() && this.getParentNode().isMainSequenceRootNode() )
this.aContext.aEventMultiplexer.notifyNextEffectEndEvent();

if( this.isMainSequenceRootNode() )
this.aContext.aEventMultiplexer.notifyAnimationsEndEvent();
};

BaseNode.prototype.getContext = function()
{
return this.aContext;
};

BaseNode.prototype.isTransition = function( eFromState, eToState )
{
return ( ( this.aStateTransTable[ eFromState ] & eToState ) != 0 );
};

BaseNode.prototype.inStateOrTransition = function( nMask )
{
return ( ( ( this.eCurrentState & nMask ) != 0 ) || ( ( this.nCurrentStateTransition & nMask ) != 0 ) );
};

BaseNode.prototype.isContainer = function()
{
return this.bIsContainer;
};

BaseNode.prototype.getBegin = function()
{
return this.aBegin;
};

BaseNode.prototype.getDuration = function()
{
return this.aDuration;
};

BaseNode.prototype.getEnd = function()
{
return this.aEnd;
};

BaseNode.prototype.getFillMode = function()
{
return this.eFillMode;
};

BaseNode.prototype.getRestartMode = function()
{
return this.eRestartMode;
};

BaseNode.prototype.getRepeatCount = function()
{
return this.nReapeatCount;
};

BaseNode.prototype.getAccelerateValue = function()
{
return this.nAccelerate;
};

BaseNode.prototype.getDecelerateValue = function()
{
return this.nDecelerate;
};

BaseNode.prototype.isAutoReverseEnabled = function()
{
return this.bAutoreverse;
};

BaseNode.prototype.info = function( bVerbose )
{
var sInfo = 'class name: ' + this.sClassName;
sInfo += ';  element name: ' + this.aElement.localName;
sInfo += ';  id: ' + this.getId();
sInfo += ';  state: ' + getNodeStateName( this.getState() );

if( bVerbose )
{
sInfo += ';  is container: ' + this.isContainer();

if( this.getBegin() )
sInfo += ';  begin: ' + this.getBegin().info();

if( this.getDuration() )
sInfo += ';  dur: ' + this.getDuration().info();

if( this.getEnd() )
sInfo += ';  end: ' + this.getEnd().info();

if( this.getFillMode() )
sInfo += ';  fill: ' + aFillModeOutMap[ this.getFillMode() ];

if( this.getRestartMode() )
sInfo += ';  restart: ' + aRestartModeOutMap[ this.getRestartMode() ];

if( this.getRepeatCount() && ( this.getRepeatCount() != 1.0 ) )
sInfo += ';  repeatCount: ' + this.getRepeatCount();

if( this.getAccelerateValue() )
sInfo += ';  accelerate: ' + this.getAccelerateValue();

if( this.getDecelerateValue() )
sInfo += ';  decelerate: ' + this.getDecelerateValue();

if( this.isAutoReverseEnabled() )
sInfo += ';  autoReverse: true';

}

return sInfo;
};

BaseNode.prototype.callInfo = function( sMethodName )
{
var sInfo = this.sClassName +
'( ' + this.getId() +
', ' + getNodeStateName( this.getState() ) +
' ).' + sMethodName;
return sInfo;
};

BaseNode.prototype.DBG = function( sMessage, nTime )
{
ANIMDBG.print( sMessage, nTime );
};


function AnimationBaseNode( aAnimElem, aParentNode, aNodeContext )
{
AnimationBaseNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'AnimationBaseNode';
this.bIsContainer = false;
this.aTargetElement = null;
this.bIsTargetTextElement = false;
this.aAnimatedElement = null;
this.aActivity = null;

this.nMinFrameCount = undefined;
this.eAdditiveMode = undefined;

}
extend( AnimationBaseNode, BaseNode );


AnimationBaseNode.prototype.parseElement = function()
{
var bRet = AnimationBaseNode.superclass.parseElement.call( this );

var aAnimElem = this.aElement;

this.aTargetElement = null;
var sTargetElementAttr = aAnimElem.getAttributeNS( NSS['smil'], 'targetElement' );
if( sTargetElementAttr )
this.aTargetElement = document.getElementById( sTargetElementAttr );

if( !this.aTargetElement )
{
this.eCurrentState = INVALID_NODE;
log( 'AnimationBaseNode.parseElement: target element not found: ' + sTargetElementAttr );
}

var sSubItemAttr = aAnimElem.getAttributeNS( NSS['anim'], 'sub-item' );
this.bIsTargetTextElement = ( sSubItemAttr && ( sSubItemAttr === 'text' ) );

var sAdditiveAttr = aAnimElem.getAttributeNS( NSS['smil'], 'additive' );
if( sAdditiveAttr && aAddittiveModeInMap[sAdditiveAttr] )
this.eAdditiveMode = aAddittiveModeInMap[sAdditiveAttr];
else
this.eAdditiveMode = ADDITIVE_MODE_REPLACE;

this.nMinFrameCount = ( this.getDuration().isValue() )
? ( this.getDuration().getValue() * MINIMUM_FRAMES_PER_SECONDS )
: MINIMUM_FRAMES_PER_SECONDS;
if( this.nMinFrameCount < 1.0 )
this.nMinFrameCount = 1;
else if( this.nMinFrameCount > MINIMUM_FRAMES_PER_SECONDS )
this.nMinFrameCount = MINIMUM_FRAMES_PER_SECONDS;


if( this.aTargetElement )
{
if( aAnimElem.getAttributeNS( NSS['smil'], 'attributeName' ) === 'visibility' )
{
if( aAnimElem.getAttributeNS( NSS['smil'], 'to' ) === 'visible' )
this.aTargetElement.setAttribute( 'visibility', 'hidden' );
}

if( !this.aNodeContext.aAnimatedElementMap[ sTargetElementAttr ] )
{
if( this.bIsTargetTextElement )
{
this.aNodeContext.aAnimatedElementMap[ sTargetElementAttr ]
= new AnimatedTextElement( this.aTargetElement );
}
else
{
this.aNodeContext.aAnimatedElementMap[ sTargetElementAttr ]
= new AnimatedElement( this.aTargetElement );
}
}
this.aAnimatedElement = this.aNodeContext.aAnimatedElementMap[ sTargetElementAttr ];

this.aAnimatedElement.setAdditiveMode( this.eAdditiveMode );
}


return bRet;
};

AnimationBaseNode.prototype.init_st = function()
{
if( this.aActivity )
this.aActivity.activate( makeEvent( bind( this, this.deactivate ) ) );
else
this.aActivity = this.createActivity();
return true;
};

AnimationBaseNode.prototype.resolve_st = function()
{
return true;
};

AnimationBaseNode.prototype.activate_st = function()
{
if( this.aActivity )
{
this.saveStateOfAnimatedElement();
this.aActivity.setTargets( this.getAnimatedElement() );
if( this.getContext().bIsSkipping  )
{
this.aActivity.end();
}
else
{
this.getContext().aActivityQueue.addActivity( this.aActivity );
}
}
else
{
AnimationBaseNode.superclass.scheduleDeactivationEvent.call( this );
}
};

AnimationBaseNode.prototype.deactivate_st = function( eDestState )
{
if( eDestState == FROZEN_NODE )
{
if( this.aActivity )
this.aActivity.end();
}
if( eDestState == ENDED_NODE )
{
if( this.aActivity )
this.aActivity.dispose();
if( ( this.getFillMode() == FILL_MODE_REMOVE ) && this.getAnimatedElement()  )
this.removeEffect();
}
};

AnimationBaseNode.prototype.createActivity = function()
{
log( 'AnimationBaseNode.createActivity: abstract method called' );
};

AnimationBaseNode.prototype.fillActivityParams = function()
{

var nDuration = 0.001;
if( this.getDuration().isValue() )
{
nDuration = this.getDuration().getValue();
}
else
{
log( 'AnimationBaseNode.fillActivityParams: duration is not a number' );
}

var aActivityParamSet = new ActivityParamSet();

aActivityParamSet.aEndEvent             = makeEvent( bind( this, this.deactivate ) );
aActivityParamSet.aTimerEventQueue      = this.aContext.aTimerEventQueue;
aActivityParamSet.aActivityQueue        = this.aContext.aActivityQueue;
aActivityParamSet.nMinDuration          = nDuration;
aActivityParamSet.nMinNumberOfFrames    = this.getMinFrameCount();
aActivityParamSet.bAutoReverse          = this.isAutoReverseEnabled();
aActivityParamSet.nRepeatCount          = this.getRepeatCount();
aActivityParamSet.nAccelerationFraction = this.getAccelerateValue();
aActivityParamSet.nDecelerationFraction = this.getDecelerateValue();
aActivityParamSet.nSlideWidth           = this.aNodeContext.aSlideWidth;
aActivityParamSet.nSlideHeight          = this.aNodeContext.aSlideHeight;

return aActivityParamSet;
};

AnimationBaseNode.prototype.hasPendingAnimation = function()
{
return true;
};

AnimationBaseNode.prototype.saveStateOfAnimatedElement = function()
{
this.getAnimatedElement().saveState( this.getId() );
};

AnimationBaseNode.prototype.removeEffect = function()
{
this.getAnimatedElement().restoreState( this.getId() );
};

AnimationBaseNode.prototype.getTargetElement = function()
{
return this.aTargetElement;
};

AnimationBaseNode.prototype.getAnimatedElement = function()
{
return this.aAnimatedElement;
};

AnimationBaseNode.prototype.dispose= function()
{
if( this.aActivity )
this.aActivity.dispose();

AnimationBaseNode.superclass.dispose.call( this );
};

AnimationBaseNode.prototype.getMinFrameCount = function()
{
return this.nMinFrameCount;
};

AnimationBaseNode.prototype.getAdditiveMode = function()
{
return this.eAdditiveMode;
};

AnimationBaseNode.prototype.info = function( bVerbose )
{
var sInfo = AnimationBaseNode.superclass.info.call( this, bVerbose );

if( bVerbose )
{
if( this.getMinFrameCount() )
sInfo += ';  min frame count: ' + this.getMinFrameCount();

sInfo += ';  additive: ' + aAddittiveModeOutMap[ this.getAdditiveMode() ];

if( this.getTargetElement() )
{
var sElemId = this.getTargetElement().getAttribute( 'id' );
sInfo += ';  targetElement: ' +  sElemId;
}
}

return sInfo;
};


function AnimationBaseNode2( aAnimElem, aParentNode, aNodeContext )
{
AnimationBaseNode2.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sAttributeName = '';
this.aToValue = null;

}
extend( AnimationBaseNode2, AnimationBaseNode );


AnimationBaseNode2.prototype.parseElement = function()
{
var bRet = AnimationBaseNode2.superclass.parseElement.call( this );

var aAnimElem = this.aElement;

this.sAttributeName = aAnimElem.getAttributeNS( NSS['smil'], 'attributeName' );
if( !this.sAttributeName )
{
this.eCurrentState = INVALID_NODE;
log( 'AnimationBaseNode2.parseElement: target attribute name not found: ' + this.sAttributeName );
}

this.aToValue = aAnimElem.getAttributeNS( NSS['smil'], 'to' );

return bRet;
};

AnimationBaseNode2.prototype.getAttributeName = function()
{
return this.sAttributeName;
};

AnimationBaseNode2.prototype.getToValue = function()
{
return this.aToValue;
};

AnimationBaseNode2.prototype.info = function( bVerbose )
{
var sInfo = AnimationBaseNode2.superclass.info.call( this, bVerbose );

if( bVerbose )
{
if( this.getAttributeName() )
sInfo += ';  attributeName: ' + this.getAttributeName();

if( this.getToValue() )
sInfo += ';  to: ' + this.getToValue();
}

return sInfo;
};


function AnimationBaseNode3( aAnimElem, aParentNode, aNodeContext )
{
AnimationBaseNode3.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.eAccumulate = undefined;
this.eCalcMode = undefined;
this.aFromValue = null;
this.aByValue = null;
this.aKeyTimes = null;
this.aValues = null;
this.aFormula= null;
}
extend( AnimationBaseNode3, AnimationBaseNode2 );


AnimationBaseNode3.prototype.parseElement = function()
{
var bRet = AnimationBaseNode3.superclass.parseElement.call( this );

var aAnimElem = this.aElement;

this.eAccumulate = ACCUMULATE_MODE_NONE;
var sAccumulateAttr = aAnimElem.getAttributeNS( NSS['smil'], 'accumulate' );
if( sAccumulateAttr == 'sum' )
this.eAccumulate = ACCUMULATE_MODE_SUM;

this.eCalcMode = CALC_MODE_LINEAR;
var sCalcModeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'calcMode' );
if( sCalcModeAttr && aCalcModeInMap[ sCalcModeAttr ] )
this.eCalcMode = aCalcModeInMap[ sCalcModeAttr ];

this.aFromValue = aAnimElem.getAttributeNS( NSS['smil'], 'from' );

this.aByValue = aAnimElem.getAttributeNS( NSS['smil'], 'by' );

this.aKeyTimes = [];
var sKeyTimesAttr = aAnimElem.getAttributeNS( NSS['smil'], 'keyTimes' );
sKeyTimesAttr = removeWhiteSpaces( sKeyTimesAttr );
if( sKeyTimesAttr )
{
var aKeyTimes = sKeyTimesAttr.split( ';' );
for( var i = 0; i < aKeyTimes.length; ++i )
this.aKeyTimes.push( parseFloat( aKeyTimes[i] ) );
}

var sValuesAttr = aAnimElem.getAttributeNS( NSS['smil'], 'values' );
if( sValuesAttr )
{
this.aValues = sValuesAttr.split( ';' );
}
else
{
this.aValues = [];
}

this.aFormula = aAnimElem.getAttributeNS( NSS['anim'], 'formula' );

return bRet;
};

AnimationBaseNode3.prototype.getAccumulate = function()
{
return this.eAccumulate;
};

AnimationBaseNode3.prototype.getCalcMode = function()
{
return this.eCalcMode;
};

AnimationBaseNode3.prototype.getFromValue = function()
{
return this.aFromValue;
};

AnimationBaseNode3.prototype.getByValue = function()
{
return this.aByValue;
};

AnimationBaseNode3.prototype.getKeyTimes = function()
{
return this.aKeyTimes;
};

AnimationBaseNode3.prototype.getValues = function()
{
return this.aValues;
};

AnimationBaseNode3.prototype.getFormula = function()
{
return this.aFormula;
};

AnimationBaseNode3.prototype.info = function( bVerbose )
{
var sInfo = AnimationBaseNode3.superclass.info.call( this, bVerbose );

if( bVerbose )
{
if( this.getAccumulate() )
sInfo += ';  accumulate: ' + aAccumulateModeOutMap[ this.getAccumulate() ];

sInfo += ';  calcMode: ' + aCalcModeOutMap[ this.getCalcMode() ];

if( this.getFromValue() )
sInfo += ';  from: ' + this.getFromValue();

if( this.getByValue() )
sInfo += ';  by: ' + this.getByValue();

if( this.getKeyTimes().length )
sInfo += ';  keyTimes: ' + this.getKeyTimes().join( ',' );

if( this.getValues().length )
sInfo += ';  values: ' + this.getValues().join( ',' );

if( this.getFormula() )
sInfo += ';  formula: ' + this.getFormula();
}

return sInfo;
};


function BaseContainerNode( aAnimElem, aParentNode, aNodeContext )
{
BaseContainerNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'BaseContainerNode';
this.bIsContainer = true;
this.aChildrenArray = [];
this.nFinishedChildren = 0;
this.bDurationIndefinite = false;
this.nLeftIterations = 1;

this.eImpressNodeType = undefined;
this.ePresetClass =  undefined;
this.ePresetId =  undefined;
}
extend( BaseContainerNode, BaseNode );


BaseContainerNode.prototype.parseElement= function()
{
var bRet = BaseContainerNode.superclass.parseElement.call( this );

var aAnimElem = this.aElement;

this.eImpressNodeType = IMPRESS_DEFAULT_NODE;
var sNodeTypeAttr = aAnimElem.getAttributeNS( NSS['presentation'], 'node-type' );
if( sNodeTypeAttr && aImpressNodeTypeInMap[ sNodeTypeAttr ] )
this.eImpressNodeType = aImpressNodeTypeInMap[ sNodeTypeAttr ];
this.bMainSequenceRootNode = ( this.eImpressNodeType == IMPRESS_MAIN_SEQUENCE_NODE );
this.bInteractiveSequenceRootNode = ( this.eImpressNodeType == IMPRESS_INTERACTIVE_SEQUENCE_NODE );

this.ePresetClass =  undefined;
var sPresetClassAttr = aAnimElem.getAttributeNS( NSS['presentation'], 'preset-class' );
if( sPresetClassAttr && aPresetClassInMap[ sPresetClassAttr ] )
this.ePresetClass = aPresetClassInMap[ sPresetClassAttr ];

this.ePresetId =  undefined;
var sPresetIdAttr = aAnimElem.getAttributeNS( NSS['presentation'], 'preset-id' );
if( sPresetIdAttr && aPresetIdInMap[ sPresetIdAttr ] )
this.ePresetId = aPresetIdInMap[ sPresetIdAttr ];


var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
this.aChildrenArray[i].parseElement();
}


this.bDurationIndefinite
= ( !this.getDuration() || this.getDuration().isIndefinite()  ) &&
( !this.getEnd() || ( this.getEnd().getType() != OFFSET_TIMING ) );

return bRet;
};

BaseContainerNode.prototype.appendChildNode = function( aAnimationNode )
{
if( ! this.checkValidNode() )
return ;

if( aAnimationNode.registerDeactivatingListener( this ) )
this.aChildrenArray.push( aAnimationNode );
};

BaseContainerNode.prototype.removeAllChildrenNodes = function()
{
this.aChildrenArray = [];
};

BaseContainerNode.prototype.init_st = function()
{
this.nLeftIterations = this.getRepeatCount();

return this.init_children();
};

BaseContainerNode.prototype.init_children = function()
{
this.nFinishedChildren = 0;
var nChildrenCount = this.aChildrenArray.length;
var nInitChildren = 0;
for( var i = 0; i < nChildrenCount; ++i )
{
if( this.aChildrenArray[i].init() )
{
++nInitChildren;
}
}
return ( nChildrenCount == nInitChildren );
};


BaseContainerNode.prototype.deactivate_st = function( eDestState )
{
this.nLeftIterations = 0;
if( eDestState == FROZEN_NODE )
{
this.forEachChildNode( mem_fn( 'deactivate' ), ~( FROZEN_NODE | ENDED_NODE ) );
}
else
{
this.forEachChildNode( mem_fn( 'end' ), ~ENDED_NODE );
if( this.getFillMode() == FILL_MODE_REMOVE )
this.removeEffect();
}
};

BaseContainerNode.prototype.hasPendingAnimation = function()
{
var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
if( this.aChildrenArray[i].hasPendingAnimation() )
return true;
}
return false;
};

BaseContainerNode.prototype.activate_st = function()
{
log( 'BaseContainerNode.activate_st: abstract method called' );
};

BaseContainerNode.prototype.notifyDeactivating = function( /*aAnimationNode*/ )
{
log( 'BaseContainerNode.notifyDeactivating: abstract method called' );
};

BaseContainerNode.prototype.isDurationIndefinite = function()
{
return this.bDurationIndefinite;
};

BaseContainerNode.prototype.isChildNode = function( aAnimationNode )
{
var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
if( this.aChildrenArray[i].getId() == aAnimationNode.getId() )
return true;
}
return false;
};

BaseContainerNode.prototype.notifyDeactivatedChild = function( aChildNode )
{
assert( ( aChildNode.getState() == FROZEN_NODE ) || ( aChildNode.getState() == ENDED_NODE ),
'BaseContainerNode.notifyDeactivatedChild: passed child node is neither in FROZEN nor in ENDED state' );

assert( this.getState() != INVALID_NODE,
'BaseContainerNode.notifyDeactivatedChild: this node is invalid' );

if( !this.isChildNode( aChildNode ) )
{
log( 'BaseContainerNode.notifyDeactivatedChild: unknown child notifier!' );
return false;
}

var nChildrenCount = this.aChildrenArray.length;

assert( ( this.nFinishedChildren < nChildrenCount ),
'BaseContainerNode.notifyDeactivatedChild: assert(this.nFinishedChildren < nChildrenCount) failed' );

++this.nFinishedChildren;
var bFinished = ( this.nFinishedChildren >= nChildrenCount );

if( bFinished && this.isDurationIndefinite() )
{
if( this.nLeftIterations >= 1.0 )
{
this.nLeftIterations -= 1.0;
}
if( this.nLeftIterations >= 1.0 )
{
bFinished = false;
var aRepetitionEvent = makeDelay( bind( this, this.repeat ), 0.0 );
this.aContext.aTimerEventQueue.addEvent( aRepetitionEvent );
}
else
{
this.deactivate();
}
}

return bFinished;
};

BaseContainerNode.prototype.repeat = function()
{
this.forEachChildNode( mem_fn( 'end' ), ~ENDED_NODE );
this.removeEffect();
var bInitialized = this.init_children();
if( bInitialized )
this.activate_st();
return bInitialized;
};

BaseContainerNode.prototype.removeEffect = function()
{
var nChildrenCount = this.aChildrenArray.length;
if( nChildrenCount == 0 )
return;
for( var i = nChildrenCount - 1; i >= 0; --i )
{
if( ( this.aChildrenArray[i].getState() & ( FROZEN_NODE | ENDED_NODE ) ) == 0 )
{
log( 'BaseContainerNode.removeEffect: child(id:'
+ this.aChildrenArray[i].getId() + ') is neither frozen nor ended;'
+ ' state: '
+ aTransitionModeOutMap[ this.aChildrenArray[i].getState() ] );
continue;
}
this.aChildrenArray[i].removeEffect();
}
};

BaseContainerNode.prototype.saveStateOfAnimatedElement = function()
{
var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
this.aChildrenArray[i].saveStateOfAnimatedElement();
}
};

BaseContainerNode.prototype.forEachChildNode = function( aFunction, eNodeStateMask )
{
if( !eNodeStateMask )
eNodeStateMask = -1;

var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
if( ( eNodeStateMask != -1 ) && ( ( this.aChildrenArray[i].getState() & eNodeStateMask ) == 0 ) )
continue;
aFunction( this.aChildrenArray[i] );
}
};

BaseContainerNode.prototype.dispose = function()
{
var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
this.aChildrenArray[i].dispose();
}

BaseContainerNode.superclass.dispose.call( this );
};

BaseContainerNode.prototype.getImpressNodeType = function()
{
return this.eImpressNodeType;
};

BaseContainerNode.prototype.info = function( bVerbose )
{
var sInfo = BaseContainerNode.superclass.info.call( this, bVerbose );

if( bVerbose )
{
if( this.getImpressNodeType() )
sInfo += ';  node-type: ' + aImpressNodeTypeOutMap[ this.getImpressNodeType() ];
}

var nChildrenCount = this.aChildrenArray.length;
for( var i = 0; i < nChildrenCount; ++i )
{
sInfo += '\n';
sInfo += this.aChildrenArray[i].info( bVerbose );
}

return sInfo;
};


function ParallelTimeContainer( aAnimElem, aParentNode, aNodeContext )
{
ParallelTimeContainer.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'ParallelTimeContainer';
}
extend( ParallelTimeContainer, BaseContainerNode );


ParallelTimeContainer.prototype.activate_st = function()
{
var nChildrenCount = this.aChildrenArray.length;
var nResolvedChildren = 0;
for( var i = 0; i < nChildrenCount; ++i )
{
if( this.aChildrenArray[i].resolve() )
{
++nResolvedChildren;
}
}

if( nChildrenCount != nResolvedChildren )
{
log( 'ParallelTimeContainer.activate_st: resolving all children failed' );
return;
}


if( this.isDurationIndefinite() && ( nChildrenCount == 0  ) )
{
this.scheduleDeactivationEvent( this.makeDeactivationEvent( 0.0 ) );
}
else
{
this.scheduleDeactivationEvent();
}
};

ParallelTimeContainer.prototype.notifyDeactivating = function( aAnimationNode )
{
this.notifyDeactivatedChild( aAnimationNode );
};


function SequentialTimeContainer( aAnimElem, aParentNode, aNodeContext )
{
SequentialTimeContainer.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'SequentialTimeContainer';
this.bIsRewinding = false;
this.aCurrentSkipEvent = null;
this.aRewindCurrentEffectEvent = null;
this.aRewindLastEffectEvent = null;
}
extend( SequentialTimeContainer, BaseContainerNode );


SequentialTimeContainer.prototype.activate_st = function()
{
var nChildrenCount = this.aChildrenArray.length;
for( ; this.nFinishedChildren < nChildrenCount; ++this.nFinishedChildren )
{
if( this.resolveChild( this.aChildrenArray[ this.nFinishedChildren ] ) )
break;
else
log( 'SequentialTimeContainer.activate_st: resolving child failed!' );
}

if( this.isDurationIndefinite() && ( ( nChildrenCount == 0 ) || ( this.nFinishedChildren >= nChildrenCount ) ) )
{
this.scheduleDeactivationEvent( this.makeDeactivationEvent( 0.0 ) );
}
else
{
this.scheduleDeactivationEvent();
}
};

SequentialTimeContainer.prototype.notifyDeactivating = function( aNotifier )
{
if( this.bIsRewinding )
return;

if( this.notifyDeactivatedChild( aNotifier ) )
return;

assert( this.nFinishedChildren < this.aChildrenArray.length,
'SequentialTimeContainer.notifyDeactivating: assertion (this.nFinishedChildren < this.aChildrenArray.length) failed' );

var aNextChild = this.aChildrenArray[ this.nFinishedChildren ];

assert( aNextChild.getState() == UNRESOLVED_NODE,
'SequentialTimeContainer.notifyDeactivating: assertion (aNextChild.getState == UNRESOLVED_NODE) failed' );

if( !this.resolveChild( aNextChild ) )
{
this.deactivate();
}
};

SequentialTimeContainer.prototype.skipEffect = function( aChildNode )
{
if( this.isChildNode( aChildNode ) )
{
this.getContext().aActivityQueue.endAll();
this.getContext().bIsSkipping = true;
this.getContext().aTimerEventQueue.forceEmpty();
this.getContext().bIsSkipping = false;
var aEvent = makeEvent( bind2( aChildNode.deactivate, aChildNode ) );
this.getContext().aTimerEventQueue.addEvent( aEvent );
}
else
{
log( 'SequentialTimeContainer.skipEffect: unknown child: '
+ aChildNode.getId() );
}
};

SequentialTimeContainer.prototype.rewindCurrentEffect = function( aChildNode )
{
if( this.isChildNode( aChildNode ) )
{
assert( !this.bIsRewinding,
'SequentialTimeContainer.rewindCurrentEffect: is already rewinding.' );

this.bIsRewinding = true;
this.getContext().aActivityQueue.endAll();
this.getContext().bIsSkipping = true;
this.getContext().aTimerEventQueue.forceEmpty();
this.getContext().bIsSkipping = false;
this.getContext().aActivityQueue.endAll();

aChildNode.end();
aChildNode.removeEffect();
aChildNode.init();
this.resolveChild( aChildNode );
this.notifyRewindedEvent( aChildNode );
this.bIsRewinding = false;
}
else
{
log( 'SequentialTimeContainer.rewindCurrentEffect: unknown child: '
+ aChildNode.getId() );
}
};

SequentialTimeContainer.prototype.rewindLastEffect = function( aChildNode )
{
if( this.isChildNode( aChildNode ) )
{
assert( !this.bIsRewinding,
'SequentialTimeContainer.rewindLastEffect: is already rewinding.' );

this.bIsRewinding = true;
this.getContext().aTimerEventQueue.forceEmpty();
this.getContext().aActivityQueue.clear();
aChildNode.end();

--this.nFinishedChildren;
var aPreviousChildNode = this.aChildrenArray[ this.nFinishedChildren ];

aPreviousChildNode.removeEffect();
aPreviousChildNode.init();
aChildNode.init();
this.resolveChild( aPreviousChildNode );
this.notifyRewindedEvent( aChildNode );
this.bIsRewinding = false;
}
else
{
log( 'SequentialTimeContainer.rewindLastEffect: unknown child: '
+ aChildNode.getId() );
}
};

SequentialTimeContainer.prototype.resolveChild = function( aChildNode )
{
var bResolved = aChildNode.resolve();

if( bResolved && ( this.isMainSequenceRootNode() || this.isInteractiveSequenceRootNode() ) )
{
if( this.aCurrentSkipEvent )
this.aCurrentSkipEvent.dispose();
this.aCurrentSkipEvent = makeEvent( bind2( SequentialTimeContainer.prototype.skipEffect, this, aChildNode ) );

if( this.aRewindCurrentEffectEvent )
this.aRewindCurrentEffectEvent.dispose();
this.aRewindCurrentEffectEvent = makeEvent( bind2( SequentialTimeContainer.prototype.rewindCurrentEffect, this, aChildNode ) );

if( this.aRewindLastEffectEvent )
this.aRewindLastEffectEvent.dispose();
this.aRewindLastEffectEvent = makeEvent( bind2( SequentialTimeContainer.prototype.rewindLastEffect, this, aChildNode ) );

if( this.isMainSequenceRootNode() )
{
this.aContext.aEventMultiplexer.registerSkipEffectEvent( this.aCurrentSkipEvent );
this.aContext.aEventMultiplexer.registerRewindCurrentEffectEvent( this.aRewindCurrentEffectEvent );
this.aContext.aEventMultiplexer.registerRewindLastEffectEvent( this.aRewindLastEffectEvent );
}
else if( this.isInteractiveSequenceRootNode() )
{
this.aContext.aEventMultiplexer.registerSkipInteractiveEffectEvent( aChildNode.getId(), this.aCurrentSkipEvent );
this.aContext.aEventMultiplexer.registerRewindRunningInteractiveEffectEvent( aChildNode.getId(), this.aRewindCurrentEffectEvent );
this.aContext.aEventMultiplexer.registerRewindEndedInteractiveEffectEvent( aChildNode.getId(), this.aRewindLastEffectEvent );
}
}
return bResolved;
};

SequentialTimeContainer.prototype.notifyRewindedEvent = function( aChildNode )
{
if( this.isInteractiveSequenceRootNode() )
{
this.aContext.aEventMultiplexer.notifyRewindedEffectEvent( aChildNode.getId() );

var sId = aChildNode.getBegin().getEventBaseElementId();
if( sId )
{
this.aContext.aEventMultiplexer.notifyRewindedEffectEvent( sId );
}
}
};

SequentialTimeContainer.prototype.dispose = function()
{
if( this.aCurrentSkipEvent )
this.aCurrentSkipEvent.dispose();

SequentialTimeContainer.superclass.dispose.call( this );
};


function PropertyAnimationNode(  aAnimElem, aParentNode, aNodeContext )
{
PropertyAnimationNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'PropertyAnimationNode';
}
extend( PropertyAnimationNode, AnimationBaseNode3 );


PropertyAnimationNode.prototype.createActivity = function()
{
var aActivityParamSet = this.fillActivityParams();

var aAnimation = createPropertyAnimation( this.getAttributeName(),
this.getAnimatedElement(),
this.aNodeContext.aSlideWidth,
this.aNodeContext.aSlideHeight );

var aInterpolator = null;  // createActivity will compute it;
return createActivity( aActivityParamSet, this, aAnimation, aInterpolator );
};


function AnimationSetNode(  aAnimElem, aParentNode, aNodeContext )
{
AnimationSetNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'AnimationSetNode';
}
extend( AnimationSetNode, AnimationBaseNode2 );


AnimationSetNode.prototype.createActivity = function()
{
var aAnimation = createPropertyAnimation( this.getAttributeName(),
this.getAnimatedElement(),
this.aNodeContext.aSlideWidth,
this.aNodeContext.aSlideHeight );

var aActivityParamSet = this.fillActivityParams();

return new SetActivity( aActivityParamSet, aAnimation, this.getToValue() );
};


function AnimationColorNode(  aAnimElem, aParentNode, aNodeContext )
{
AnimationColorNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'AnimationColorNode';

this.eColorInterpolation = undefined;
this.eColorInterpolationDirection = undefined;
}
extend( AnimationColorNode, AnimationBaseNode3 );


AnimationColorNode.prototype.parseElement = function()
{
var bRet = AnimationColorNode.superclass.parseElement.call( this );

var aAnimElem = this.aElement;

this.eColorInterpolation = COLOR_SPACE_RGB;
var sColorInterpolationAttr = aAnimElem.getAttributeNS( NSS['anim'], 'color-interpolation' );
if( sColorInterpolationAttr && aColorSpaceInMap[ sColorInterpolationAttr ] )
this.eColorInterpolation = aColorSpaceInMap[ sColorInterpolationAttr ];

this.eColorInterpolationDirection = CLOCKWISE;
var sColorInterpolationDirectionAttr = aAnimElem.getAttributeNS( NSS['anim'], 'color-interpolation-direction' );
if( sColorInterpolationDirectionAttr && aClockDirectionInMap[ sColorInterpolationDirectionAttr ] )
this.eColorInterpolationDirection = aClockDirectionInMap[ sColorInterpolationDirectionAttr ];

return bRet;
};

AnimationColorNode.prototype.createActivity = function()
{
var aActivityParamSet = this.fillActivityParams();

var aAnimation = createPropertyAnimation( this.getAttributeName(),
this.getAnimatedElement(),
this.aNodeContext.aSlideWidth,
this.aNodeContext.aSlideHeight );

var aColorAnimation;
var aInterpolator;
if( this.getColorInterpolation() === COLOR_SPACE_HSL )
{
ANIMDBG.print( 'AnimationColorNode.createActivity: color space hsl'  );
aColorAnimation = new HSLAnimationWrapper( aAnimation );
var aInterpolatorMaker = aInterpolatorHandler.getInterpolator( this.getCalcMode(),
COLOR_PROPERTY,
COLOR_SPACE_HSL );
aInterpolator = aInterpolatorMaker( this.getColorInterpolationDirection() );
}
else
{
ANIMDBG.print( 'AnimationColorNode.createActivity: color space rgb'  );
aColorAnimation = aAnimation;
aInterpolator = aInterpolatorHandler.getInterpolator( this.getCalcMode(),
COLOR_PROPERTY,
COLOR_SPACE_RGB );
}

return createActivity( aActivityParamSet, this, aColorAnimation, aInterpolator );
};

AnimationColorNode.prototype.getColorInterpolation = function()
{
return this.eColorInterpolation;
};

AnimationColorNode.prototype.getColorInterpolationDirection = function()
{
return this.eColorInterpolationDirection;
};

AnimationColorNode.prototype.info = function( bVerbose )
{
var sInfo = AnimationColorNode.superclass.info.call( this, bVerbose );

if( bVerbose )
{
sInfo += ';  color-interpolation: ' + aColorSpaceOutMap[ this.getColorInterpolation() ];

sInfo += ';  color-interpolation-direction: ' + aClockDirectionOutMap[ this.getColorInterpolationDirection() ];
}
return sInfo;
};


function AnimationTransitionFilterNode(  aAnimElem, aParentNode, aNodeContext )
{
AnimationTransitionFilterNode.superclass.constructor.call( this, aAnimElem, aParentNode, aNodeContext );

this.sClassName = 'AnimationTransitionFilterNode';

this.eTransitionType = undefined;
this.eTransitionSubType = undefined;
this.bReverseDirection = undefined;
this.eTransitionMode = undefined;
}
extend( AnimationTransitionFilterNode, AnimationBaseNode );


AnimationTransitionFilterNode.prototype.createActivity = function()
{
var aActivityParamSet = this.fillActivityParams();

return createShapeTransition( aActivityParamSet,
this.getAnimatedElement(),
this.aNodeContext.aSlideWidth,
this.aNodeContext.aSlideHeight,
this );
};

AnimationTransitionFilterNode.prototype.parseElement = function()
{
var bRet = AnimationTransitionFilterNode.superclass.parseElement.call( this );
var bIsValidTransition = true;

var aAnimElem = this.aElement;

this.eTransitionType = undefined;
var sTypeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'type' );
if( sTypeAttr && aTransitionTypeInMap[ sTypeAttr ] )
{
this.eTransitionType = aTransitionTypeInMap[ sTypeAttr ];
}
else
{
bIsValidTransition = false;
log( 'AnimationTransitionFilterNode.parseElement: transition type not valid: ' + sTypeAttr );
}

this.eTransitionSubType = undefined;
var sSubTypeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'subtype' );
if( sSubTypeAttr === null )
sSubTypeAttr = 'default';
if( sSubTypeAttr && ( aTransitionSubtypeInMap[ sSubTypeAttr ] !== undefined  ) )
{
this.eTransitionSubType = aTransitionSubtypeInMap[ sSubTypeAttr ];
}
else
{
bIsValidTransition = false;
log( 'AnimationTransitionFilterNode.parseElement: transition subtype not valid: ' + sSubTypeAttr );
}

if( !bIsValidTransition )
{
this.eTransitionType = FADE_TRANSITION;
this.eTransitionSubType = CROSSFADE_TRANS_SUBTYPE;
log( 'AnimationTransitionFilterNode.parseElement: in place of the invalid transition a crossfade transition is used' );
}

this.bReverseDirection = false;
var sDirectionAttr = aAnimElem.getAttributeNS( NSS['smil'], 'direction' );
if( sDirectionAttr == 'reverse' )
this.bReverseDirection = true;

this.eTransitionMode = TRANSITION_MODE_IN;
var sModeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'mode' );
if( sModeAttr === 'out' )
this.eTransitionMode = TRANSITION_MODE_OUT;

return bRet;
};

AnimationTransitionFilterNode.prototype.getTransitionType = function()
{
return this.eTransitionType;
};

AnimationTransitionFilterNode.prototype.getTransitionSubType = function()
{
return this.eTransitionSubType;
};

AnimationTransitionFilterNode.prototype.getTransitionMode = function()
{
return this.eTransitionMode;
};

AnimationTransitionFilterNode.prototype.getReverseDirection = function()
{
return this.bReverseDirection;
};

AnimationTransitionFilterNode.prototype.info = function( bVerbose )
{
var sInfo = AnimationTransitionFilterNode.superclass.info.call( this, bVerbose );

if( bVerbose )
{
sInfo += ';  type: ' + getKeyByValue(aTransitionTypeInMap, this.getTransitionType());

sInfo += ';  subtype: ' + getKeyByValue(aTransitionSubtypeInMap, this.getTransitionSubType());

if( this.getReverseDirection() )
sInfo += ';  direction: reverse';
}

return sInfo;
};


function createAnimationTree( aRootElement, aNodeContext )
{
return createAnimationNode( aRootElement, null, aNodeContext );
}


function createAnimationNode( aElement, aParentNode, aNodeContext )
{
assert( aElement, 'createAnimationNode: invalid animation element' );

var eAnimationNodeType = getAnimationElementType( aElement );

var aCreatedNode = null;
var aCreatedContainer = null;

switch( eAnimationNodeType )
{
case ANIMATION_NODE_PAR:
aCreatedNode = aCreatedContainer =
new ParallelTimeContainer( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_ITERATE:
aCreatedNode = aCreatedContainer =
new ParallelTimeContainer( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_SEQ:
aCreatedNode = aCreatedContainer =
new SequentialTimeContainer( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_ANIMATE:
aCreatedNode = new PropertyAnimationNode( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_SET:
aCreatedNode = new AnimationSetNode( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_ANIMATEMOTION:
log( 'createAnimationNode: ANIMATEMOTION not implemented' );
return null;
case ANIMATION_NODE_ANIMATECOLOR:
aCreatedNode = new AnimationColorNode( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_ANIMATETRANSFORM:
log( 'createAnimationNode: ANIMATETRANSFORM not implemented' );
return null;
case ANIMATION_NODE_TRANSITIONFILTER:
aCreatedNode = new AnimationTransitionFilterNode( aElement, aParentNode, aNodeContext );
break;
case ANIMATION_NODE_AUDIO:
log( 'createAnimationNode: AUDIO not implemented' );
return null;
case ANIMATION_NODE_COMMAND:
log( 'createAnimationNode: COMMAND not implemented' );
return null;
default:
log( 'createAnimationNode: invalid Animation Node Type: ' + eAnimationNodeType );
return null;
}

if( aCreatedContainer )
{
if( eAnimationNodeType == ANIMATION_NODE_ITERATE )
{
createIteratedNodes( aElement, aCreatedContainer, aNodeContext );
}
else
{
var aChildrenArray = getElementChildren( aElement );
for( var i = 0; i < aChildrenArray.length; ++i )
{
if( !createChildNode( aChildrenArray[i], aCreatedContainer, aNodeContext ) )
{
aCreatedContainer.removeAllChildrenNodes();
break;
}
}
}
}

return aCreatedNode;
}


function createChildNode( aElement, aParentNode, aNodeContext )
{
var aChildNode = createAnimationNode( aElement, aParentNode, aNodeContext );

if( !aChildNode )
{
log( 'createChildNode: child node creation failed' );
return false;
}
else
{
aParentNode.appendChildNode( aChildNode );
return true;
}
}


function createIteratedNodes( /*aElement, aContainerNode, aNodeContext*/ )
{
}


function makeScaler( nScale )
{
if( ( typeof( nScale ) !== typeof( 0 ) ) || !isFinite( nScale ) )
{
log( 'makeScaler: not valid param passed: ' + nScale );
return null;
}

return  function( nValue )
{
return ( nScale * nValue );
};
}


function createPropertyAnimation( sAttrName, aAnimatedElement, nWidth, nHeight )
{
if( !aAttributeMap[ sAttrName ] )
{
log( 'createPropertyAnimation: attribute is unknown' );
return null;
}


var aFunctorSet = aAttributeMap[ sAttrName ];

var sGetValueMethod =   aFunctorSet.get;
var sSetValueMethod =   aFunctorSet.set;

if( !sGetValueMethod || !sSetValueMethod  )
{
log( 'createPropertyAnimation: attribute is not handled' );
return null;
}

var aGetModifier =  eval( aFunctorSet.getmod );
var aSetModifier =  eval( aFunctorSet.setmod );


return new GenericAnimation( bind( aAnimatedElement, aAnimatedElement[ sGetValueMethod ] ),
bind( aAnimatedElement, aAnimatedElement[ sSetValueMethod ] ),
aGetModifier,
aSetModifier);
}


function createShapeTransition( aActivityParamSet, aAnimatedElement,
nSlideWidth, nSlideHeight,
aAnimatedTransitionFilterNode )
{
if( !aAnimatedTransitionFilterNode )
{
log( 'createShapeTransition: the animated transition filter node is not valid.' );
return null;
}
var eTransitionType = aAnimatedTransitionFilterNode.getTransitionType();
var eTransitionSubType = aAnimatedTransitionFilterNode.getTransitionSubType();
var bDirectionForward = ! aAnimatedTransitionFilterNode.getReverseDirection();
var bModeIn = ( aAnimatedTransitionFilterNode.getTransitionMode() == FORWARD );

var aTransitionInfo = aTransitionInfoTable[eTransitionType][eTransitionSubType];
var eTransitionClass = aTransitionInfo['class'];

switch( eTransitionClass )
{
default:
case TRANSITION_INVALID:
log( 'createShapeTransition: transition class: TRANSITION_INVALID' );
return null;

case TRANSITION_CLIP_POLYPOLYGON:
var aParametricPolyPolygon
= createClipPolyPolygon( eTransitionType, eTransitionSubType );
var aClippingAnimation
= new ClippingAnimation( aParametricPolyPolygon, aTransitionInfo,
bDirectionForward, bModeIn );
return new SimpleActivity( aActivityParamSet, aClippingAnimation, true );

case TRANSITION_SPECIAL:
switch( eTransitionType )
{
default:
var aAnimation
= createPropertyAnimation( 'opacity',
aAnimatedElement,
nSlideWidth,
nSlideHeight );
return new SimpleActivity( aActivityParamSet, aAnimation, bModeIn );
}
}

}


function ClippingAnimation( aParametricPolyPolygon, aTransitionInfo,
bDirectionForward, bModeIn )
{
this.aClippingFunctor = new ClippingFunctor( aParametricPolyPolygon,
aTransitionInfo,
bDirectionForward, bModeIn );
this.bAnimationStarted = false;
}

ClippingAnimation.prototype.start = function( aAnimatableElement )
{
assert( aAnimatableElement,
'ClippingAnimation.start: animatable element is not valid' );
this.aAnimatableElement = aAnimatableElement;
this.aAnimatableElement.initClipPath();
this.aAnimatableElement.notifyAnimationStart();

if( !this.bAnimationStarted )
this.bAnimationStarted = true;

};

ClippingAnimation.prototype.end = function()
{
if( this.bAnimationStarted )
{
this.aAnimatableElement.cleanClipPath();
this.bAnimationStarted = false;
this.aAnimatableElement.notifyAnimationEnd();
}
};

ClippingAnimation.prototype.perform = function( nValue )
{
var nWidth = this.aAnimatableElement.aClippingBBox.width;
var nHeight = this.aAnimatableElement.aClippingBBox.height;
var aPolyPolygonElement = this.aClippingFunctor.perform( nValue, nWidth, nHeight );
this.aAnimatableElement.setClipPath( aPolyPolygonElement );
};

ClippingAnimation.prototype.getUnderlyingValue = function()
{
return 0.0;
};


function GenericAnimation( aGetValueFunc, aSetValueFunc, aGetModifier, aSetModifier )
{
assert( aGetValueFunc && aSetValueFunc,
'GenericAnimation constructor: get value functor and/or set value functor are not valid' );

this.aGetValueFunc = aGetValueFunc;
this.aSetValueFunc = aSetValueFunc;
this.aGetModifier = aGetModifier;
this.aSetModifier = aSetModifier;
this.aAnimatableElement = null;
this.bAnimationStarted = false;
}


GenericAnimation.prototype.start = function( aAnimatableElement )
{
assert( aAnimatableElement, 'GenericAnimation.start: animatable element is not valid' );

this.aAnimatableElement = aAnimatableElement;
this.aAnimatableElement.notifyAnimationStart();

if( !this.bAnimationStarted )
this.bAnimationStarted = true;
};

GenericAnimation.prototype.end = function()
{
if( this.bAnimationStarted )
{
this.bAnimationStarted = false;
this.aAnimatableElement.notifyAnimationEnd();
}
};

GenericAnimation.prototype.perform = function( aValue )
{
if( this.aSetModifier )
aValue = this.aSetModifier( aValue );

this.aSetValueFunc( aValue );
};

GenericAnimation.prototype.getUnderlyingValue = function()
{
var aValue = this.aGetValueFunc();
if( this.aGetModifier )
aValue = this.aGetModifier( aValue );
return aValue;
};


function HSLAnimationWrapper( aColorAnimation )
{
assert( aColorAnimation,
'HSLAnimationWrapper constructor: invalid color animation delegate' );

this.aAnimation = aColorAnimation;
}


HSLAnimationWrapper.prototype.start = function( aAnimatableElement )
{
this.aAnimation.start( aAnimatableElement );
};

HSLAnimationWrapper.prototype.end = function()
{
this.aAnimation.end();
};
HSLAnimationWrapper.prototype.perform = function( aHSLValue )
{
this.aAnimation.perform( aHSLValue.convertToRGB() );
};

HSLAnimationWrapper.prototype.getUnderlyingValue = function()
{
return this.aAnimation.getUnderlyingValue().convertToHSL();
};


function SlideChangeBase(aLeavingSlide, aEnteringSlide)
{
this.aLeavingSlide = aLeavingSlide;
this.aEnteringSlide = aEnteringSlide;
this.bIsFinished = false;
}

SlideChangeBase.prototype.start = function()
{
};

SlideChangeBase.prototype.end = function()
{
if( this.bIsFinished )
return;

this.aLeavingSlide.hide();
this.aEnteringSlide.reset();
this.aLeavingSlide.reset();

this.bIsFinished = true;
};

SlideChangeBase.prototype.perform = function( nValue )
{
if( this.bIsFinished ) return false;

if( this.aLeavingSlide )
this.performOut( nValue );

if( this.aEnteringSlide )
this.performIn( nValue );

return true;
};

SlideChangeBase.prototype.getUnderlyingValue = function()
{
return 0.0;
};

SlideChangeBase.prototype.performIn = function( )
{
log( 'SlideChangeBase.performIn: abstract method called' );
};

SlideChangeBase.prototype.performOut = function( )
{
log( 'SlideChangeBase.performOut: abstract method called' );
};


function FadingSlideChange( aLeavingSlide, aEnteringSlide )
{
FadingSlideChange.superclass.constructor.call( this, aLeavingSlide, aEnteringSlide );
this.bFirstRun = true;
}
extend( FadingSlideChange, SlideChangeBase );

FadingSlideChange.prototype.start = function()
{
FadingSlideChange.superclass.start.call( this );
this.aEnteringSlide.notifyUsedAttribute( 'opacity' );
this.aLeavingSlide.notifyUsedAttribute( 'opacity' );
this.aEnteringSlide.setOpacity( 0.0 );
this.aEnteringSlide.show();
};

FadingSlideChange.prototype.performIn = function( nT )
{
this.aEnteringSlide.setOpacity( nT );
};

FadingSlideChange.prototype.performOut = function( nT )
{

this.aLeavingSlide.setOpacity( 1 - nT );
};


function FadingOverColorSlideChange( aLeavingSlide, aEnteringSlide, sFadeColor )
{
FadingSlideChange.superclass.constructor.call( this, aLeavingSlide, aEnteringSlide );
this.sFadeColor = sFadeColor;
if( !this.sFadeColor )
{
log( 'FadingOverColorSlideChange: sFadeColor not valid.' );
this.sFadeColor = '#000000';
}
this.aColorPlaneElement = this.createColorPlaneElement();
}
extend( FadingOverColorSlideChange, SlideChangeBase );

FadingOverColorSlideChange.prototype.start = function()
{
FadingOverColorSlideChange.superclass.start.call( this );
this.aEnteringSlide.notifyUsedAttribute( 'opacity' );
this.aLeavingSlide.notifyUsedAttribute( 'opacity' );
this.aLeavingSlide.insertBefore( this.aColorPlaneElement );
this.aEnteringSlide.setOpacity( 0.0 );
this.aEnteringSlide.show();
};

FadingOverColorSlideChange.prototype.end = function()
{
FadingOverColorSlideChange.superclass.end.call( this );
this.aLeavingSlide.removeElement( this.aColorPlaneElement );
};

FadingOverColorSlideChange.prototype.performIn = function( nT )
{
this.aEnteringSlide.setOpacity( (nT > 0.55) ? 2.0*(nT-0.55) : 0.0 );
};

FadingOverColorSlideChange.prototype.performOut = function( nT )
{
this.aLeavingSlide.setOpacity( (nT > 0.45) ? 0.0 : 2.0*(0.45-nT) );
};

FadingOverColorSlideChange.prototype.createColorPlaneElement = function()
{
var aColorPlaneElement = document.createElementNS( NSS['svg'], 'rect' );
aColorPlaneElement.setAttribute( 'width', String( this.aLeavingSlide.getWidth() ) );
aColorPlaneElement.setAttribute( 'height', String( this.aLeavingSlide.getHeight() ) );
aColorPlaneElement.setAttribute( 'fill', this.sFadeColor );
return aColorPlaneElement;
};


function MovingSlideChange( aLeavingSlide, aEnteringSlide,
aLeavingDirection, aEnteringDirection )
{
MovingSlideChange.superclass.constructor.call( this, aLeavingSlide, aEnteringSlide );
this.aLeavingDirection = aLeavingDirection;
this.aEnteringDirection = aEnteringDirection;
}
extend( MovingSlideChange, SlideChangeBase );

MovingSlideChange.prototype.start = function()
{
MovingSlideChange.superclass.start.call( this );
this.aEnteringSlide.notifyUsedAttribute( 'transform' );
this.aLeavingSlide.notifyUsedAttribute( 'transform' );
this.performIn( 0 );
this.aEnteringSlide.show();
};

MovingSlideChange.prototype.performIn = function( nT )
{
var nS = nT - 1;
var dx = nS * this.aEnteringDirection.x * this.aEnteringSlide.getWidth();
var dy = nS * this.aEnteringDirection.y * this.aEnteringSlide.getHeight();
this.aEnteringSlide.translate( dx, dy );
};

MovingSlideChange.prototype.performOut = function( nT )
{
var dx = nT * this.aLeavingDirection.x * this.aLeavingSlide.getWidth();
var dy = nT * this.aLeavingDirection.y * this.aLeavingSlide.getHeight();
this.aLeavingSlide.translate( dx, dy );
};


function ClippedSlideChange( aLeavingSlide, aEnteringSlide, aParametricPolyPolygon,
aTransitionInfo, bIsDirectionForward )
{
ClippedSlideChange.superclass.constructor.call( this, aLeavingSlide, aEnteringSlide );

var bIsModeIn = true;
this.aClippingFunctor= new ClippingFunctor( aParametricPolyPolygon, aTransitionInfo,
bIsDirectionForward, bIsModeIn );
}
extend( ClippedSlideChange, SlideChangeBase );

ClippedSlideChange.prototype.start = function()
{
ClippedSlideChange.superclass.start.call( this );
this.aEnteringSlide.notifyUsedAttribute( 'clip-path' );
this.performIn( 0 );
this.aEnteringSlide.show();
};

ClippedSlideChange.prototype.performIn = function( nT )
{
var nWidth = this.aEnteringSlide.getWidth();
var nHeight = this.aEnteringSlide.getHeight();
var aPolyPolygonElement = this.aClippingFunctor.perform( nT, nWidth, nHeight );
this.aEnteringSlide.setClipPath( aPolyPolygonElement );
};

ClippedSlideChange.prototype.performOut = function( )
{
};


function ClippingFunctor( aParametricPolyPolygon, aTransitionInfo,
bIsDirectionForward, bIsModeIn)
{
this.aParametricPolyPolygon = aParametricPolyPolygon;
this.aStaticTransformation = null;
this.bForwardParameterSweep = true;
this.bSubtractPolygon = false;
this.bScaleIsotropically = aTransitionInfo.scaleIsotropically;
this.bFlip = false;

assert( this.aParametricPolyPolygon,
'ClippingFunctor: parametric polygon is not valid' );

if( aTransitionInfo.rotationAngle != 0.0 ||
aTransitionInfo.scaleX != 1.0 ||  aTransitionInfo.scaleY != 1.0 )
{
this.aStaticTransformation = SVGIdentityMatrix.translate( 0.5, 0.5 );
if( aTransitionInfo.scaleX != 1.0 ||  aTransitionInfo.scaleY != 1.0 )
this.aStaticTransformation
= this.aStaticTransformation.scaleNonUniform( aTransitionInfo.scaleX,
aTransitionInfo.scaleY );
if( aTransitionInfo.rotationAngle != 0.0 )
this.aStaticTransformation
= this.aStaticTransformation.rotate( aTransitionInfo.rotationAngle );
this.aStaticTransformation = this.aStaticTransformation.translate( -0.5, -0.5 );
}
else
{
this.aStaticTransformation = document.documentElement.createSVGMatrix();
}

if( !bIsDirectionForward )
{
var aMatrix = null;
switch( aTransitionInfo.reverseMethod )
{
default:
log( 'ClippingFunctor: unexpected reverse method.' );
break;
case REVERSEMETHOD_IGNORE:
break;
case REVERSEMETHOD_INVERT_SWEEP:
this.bForwardParameterSweep = !this.bForwardParameterSweep;
break;
case REVERSEMETHOD_SUBTRACT_POLYGON:
this.bSubtractPolygon = !this.bSubtractPolygon;
break;
case REVERSEMETHOD_SUBTRACT_AND_INVERT:
this.bForwardParameterSweep = !this.bForwardParameterSweep;
this.bSubtractPolygon = !this.bSubtractPolygon;
break;
case REVERSEMETHOD_ROTATE_180:
aMatrix = document.documentElement.createSVGMatrix();
aMatrix.setToRotationAroundPoint( 0.5, 0.5, 180 );
this.aStaticTransformation = aMatrix.multiply( this.aStaticTransformation );
break;
case REVERSEMETHOD_FLIP_X:
aMatrix = document.documentElement.createSVGMatrix();
aMatrix.a = -1; aMatrix.e = 1.0;
this.aStaticTransformation = aMatrix.multiply( this.aStaticTransformation );
this.bFlip = true;
break;
case REVERSEMETHOD_FLIP_Y:
aMatrix = document.documentElement.createSVGMatrix();
aMatrix.d = -1; aMatrix.f = 1.0;
this.aStaticTransformation = aMatrix.multiply( this.aStaticTransformation );
this.bFlip = true;
break;
}
}

if( !bIsModeIn )
{
if( aTransitionInfo.outInvertsSweep )
{
this.bForwardParameterSweep = !this.bForwardParameterSweep;
}
else
{
this.bSubtractPolygon = !this.bSubtractPolygon;
}
}
}

ClippingFunctor.aBoundingPath = document.createElementNS( NSS['svg'], 'path' );
ClippingFunctor.aBoundingPath.setAttribute( 'd', 'M -1 -1 L 2 -1 L 2 2 L -1 2 L -1 -1' );

ClippingFunctor.prototype.perform = function( nT, nWidth, nHeight )
{
var aClipPoly = this.aParametricPolyPolygon.perform( this.bForwardParameterSweep ? nT : (1 - nT) );


if( this.bSubtractPolygon )
{
aClipPoly.changeOrientation();
aClipPoly.prependPath( ClippingFunctor.aBoundingPath );
}

var aMatrix;
if( this.bScaleIsotropically )
{
var nScaleFactor = Math.max( nWidth, nHeight );
aMatrix = SVGIdentityMatrix.translate( -( nScaleFactor - nWidth ) / 2.0,
-( nScaleFactor - nHeight ) / 2.0 );
aMatrix = aMatrix.scale( nScaleFactor );
aMatrix = aMatrix.multiply( this.aStaticTransformation );
}
else
{
aMatrix = SVGIdentityMatrix.scaleNonUniform( nWidth, nHeight );
aMatrix = aMatrix.multiply( this.aStaticTransformation );
}

aClipPoly.matrixTransform( aMatrix );

return aClipPoly;
};


function createClipPolyPolygon( nType, nSubtype )
{
switch( nType )
{
default:
log( 'createClipPolyPolygon: unknown transition type: ' + nType );
return null;
case BARWIPE_TRANSITION:
return new BarWipePath( 1 );
case FOURBOXWIPE_TRANSITION:
return new FourBoxWipePath( nSubtype === CORNERSOUT_TRANS_SUBTYPE );
case BOXWIPE_TRANSITION:
return new BoxWipePath( nSubtype == LEFTCENTER_TRANS_SUBTYPE ||
nSubtype == TOPCENTER_TRANS_SUBTYPE ||
nSubtype == RIGHTCENTER_TRANS_SUBTYPE ||
nSubtype == BOTTOMCENTER_TRANS_SUBTYPE );
case ELLIPSEWIPE_TRANSITION:
return new EllipseWipePath( nSubtype );
case FANWIPE_TRANSITION:
return new FanWipePath(nSubtype == CENTERTOP_TRANS_SUBTYPE ||
nSubtype == CENTERRIGHT_TRANS_SUBTYPE, true, false);
case PINWHEELWIPE_TRANSITION:
var nBlades;
switch( nSubtype )
{
case ONEBLADE_TRANS_SUBTYPE:
nBlades = 1;
break;
case DEFAULT_TRANS_SUBTYPE:
case TWOBLADEVERTICAL_TRANS_SUBTYPE:
nBlades = 2;
break;
case TWOBLADEHORIZONTAL_TRANS_SUBTYPE:
nBlades = 2;
break;
case THREEBLADE_TRANS_SUBTYPE:
nBlades = 3;
break;
case FOURBLADE_TRANS_SUBTYPE:
nBlades = 4;
break;
case EIGHTBLADE_TRANS_SUBTYPE:
nBlades = 8;
break;
default:
log( 'createClipPolyPolygon: unknown subtype: ' + nSubtype );
return null;
}
return new PinWheelWipePath( nBlades );
case CLOCKWIPE_TRANSITION:
return new ClockWipePath();
case RANDOMBARWIPE_TRANSITION:
return new RandomWipePath( 128, true /* bars */ );
case CHECKERBOARDWIPE_TRANSITION:
return new CheckerBoardWipePath( 10 );
case ZIGZAGWIPE_TRANSITION:
return new ZigZagWipePath( 5 );
case BARNZIGZAGWIPE_TRANSITION:
return new BarnZigZagWipePath( 5 );
case IRISWIPE_TRANSITION:
switch(nSubtype)
{
case RECTANGLE_TRANS_SUBTYPE:
return new IrisWipePath(0);
case DIAMOND_TRANS_SUBTYPE:
return new IrisWipePath(1);
default:
log( 'createClipPolyPolygon: unknown subtype: ' + nSubtype );
return null;
}
case BARNDOORWIPE_TRANSITION:
return new BarnDoorWipePath(false);
case SINGLESWEEPWIPE_TRANSITION:
return new SweepWipePath(
nSubtype == CLOCKWISETOP_TRANS_SUBTYPE ||
nSubtype == CLOCKWISERIGHT_TRANS_SUBTYPE ||
nSubtype == CLOCKWISEBOTTOM_TRANS_SUBTYPE ||
nSubtype == CLOCKWISELEFT_TRANS_SUBTYPE,
true,
false,
nSubtype == COUNTERCLOCKWISEBOTTOMLEFT_TRANS_SUBTYPE ||
nSubtype == COUNTERCLOCKWISETOPRIGHT_TRANS_SUBTYPE );
case WATERFALLWIPE_TRANSITION:
return new WaterfallWipePath(128, // flipOnYAxis
nSubtype == VERTICALRIGHT_TRANS_SUBTYPE ||
nSubtype == HORIZONTALLEFT_TRANS_SUBTYPE);
case MISCDIAGONALWIPE_TRANSITION:
switch(nSubtype) {
case DOUBLEBARNDOOR_TRANS_SUBTYPE:
return new BarnDoorWipePath(true /* Doubled */);
case DOUBLEDIAMOND_TRANS_SUBTYPE:
return new DoubleDiamondWipePath();
default:
log( 'createClipPolyPolygon: unhandled subtype: ' + nSubtype );
return null;
}
case DISSOLVE_TRANSITION:
return new RandomWipePath( 16 * 16, false /* dissolve */ );
case VEEWIPE_TRANSITION:
return new VeeWipePath();
case SNAKEWIPE_TRANSITION:
return new SnakeWipePath( 8 * 8, // diagonal
nSubtype == TOPLEFTDIAGONAL_TRANS_SUBTYPE     ||
nSubtype == TOPRIGHTDIAGONAL_TRANS_SUBTYPE    ||
nSubtype == BOTTOMRIGHTDIAGONAL_TRANS_SUBTYPE ||
nSubtype == BOTTOMLEFTDIAGONAL_TRANS_SUBTYPE   ,
nSubtype == TOPLEFTVERTICAL_TRANS_SUBTYPE     ||
nSubtype == TOPRIGHTDIAGONAL_TRANS_SUBTYPE    ||
nSubtype == BOTTOMLEFTDIAGONAL_TRANS_SUBTYPE
);
case PARALLELSNAKESWIPE_TRANSITION:
return new ParallelSnakesWipePath(
8 * 8, // elements
nSubtype == DIAGONALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE ||
nSubtype == DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE,
nSubtype == VERTICALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE ||
nSubtype == HORIZONTALTOPLEFTOPPOSITE_TRANS_SUBTYPE  ||
nSubtype == DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE,
nSubtype == VERTICALTOPLEFTOPPOSITE_TRANS_SUBTYPE    ||
nSubtype == VERTICALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE ||
nSubtype == HORIZONTALTOPLEFTOPPOSITE_TRANS_SUBTYPE  ||
nSubtype == HORIZONTALTOPRIGHTOPPOSITE_TRANS_SUBTYPE ||
nSubtype == DIAGONALBOTTOMLEFTOPPOSITE_TRANS_SUBTYPE ||
nSubtype == DIAGONALTOPLEFTOPPOSITE_TRANS_SUBTYPE
);

case SPIRALWIPE_TRANSITION:
return new SpiralWipePath(
8 * 8, // elements
nSubtype == TOPLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE     ||
nSubtype == TOPRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE    ||
nSubtype == BOTTOMRIGHTCOUNTERCLOCKWISE_TRANS_SUBTYPE ||
nSubtype == BOTTOMLEFTCOUNTERCLOCKWISE_TRANS_SUBTYPE );

case BOXSNAKESWIPE_TRANSITION:
return new BoxSnakesWipePath(
8 * 8,
nSubtype == FOURBOXVERTICAL_TRANS_SUBTYPE ||
nSubtype == FOURBOXHORIZONTAL_TRANS_SUBTYPE );
}
}


function createUnitSquarePath()
{
var aPath = document.createElementNS( NSS['svg'], 'path' );
var sD = 'M 0 0 L 1 0 L 1 1 L 0 1 L 0 0';
aPath.setAttribute( 'd', sD );
return aPath;
}

function createEmptyPath()
{
var aPath = document.createElementNS( NSS['svg'], 'path' );
var sD = 'M 0 0 L 0 0';
aPath.setAttribute( 'd', sD );
return aPath;
}

function pruneScaleValue( nVal )
{
if( nVal < 0.0 )
return (nVal < -0.00001 ? nVal : -0.00001);
else
return (nVal > 0.00001 ? nVal : 0.00001);
}


function BarWipePath( nBars /* nBars > 1: blinds effect */ )
{
this.nBars = nBars;
if( this.nBars === undefined || this.nBars < 1 )
this.nBars = 1;
this.aBasePath = createUnitSquarePath();
}

BarWipePath.prototype.perform = function( nT )
{

var aMatrix = SVGIdentityMatrix.scaleNonUniform( pruneScaleValue( nT / this.nBars ), 1.0 );

var aPolyPath = this.aBasePath.cloneNode( true );
aPolyPath.matrixTransform( aMatrix );

if( this.nBars > 1 )
{
var i;
var aTransform;
var aPath;
for( i = this.nBars - 1; i > 0; --i )
{
aTransform = SVGIdentityMatrix.translate( i / this.nBars, 0.0 );
aTransform = aTransform.multiply( aMatrix );
aPath = this.aBasePath.cloneNode( true );
aPath.matrixTransform( aTransform );
aPolyPath.appendPath( aPath );
}
}
return aPolyPath;
};


function BoxWipePath(bIsTopCentered) {
this.bIsTopCentered = bIsTopCentered;
this.aBasePath = createUnitSquarePath();
}

BoxWipePath.prototype.perform = function( nT ) {
var d = pruneScaleValue(nT);
var aTransform = SVGIdentityMatrix;
if(this.bIsTopCentered) {
aTransform = aTransform.translate(-0.5, 0.0).scale(d, d).translate(0.5, 0.0);
}
else {
aTransform = aTransform.scale(d, d);
}
var aPath = this.aBasePath.cloneNode(true);
aPath.matrixTransform(aTransform);
return aPath;
}

function SweepWipePath(bCenter, bSingle, bOppositeVertical, bFlipOnYAxis) {
this.bCenter = bCenter;
this.bSingle = bSingle;
this.bOppositeVertical = bOppositeVertical;
this.bFlipOnYAxis = bFlipOnYAxis;
this.aBasePath = createUnitSquarePath();
}

SweepWipePath.prototype.perform = function( nT ) {
nT /= 2.0;
if(!this.bCenter)
nT /= 2.0;
if(!this.bSingle && !this.bOppositeVertical)
nT /= 2.0;

var poly = PinWheelWipePath.calcCenteredClock( nT + 0.25, 1.0 );
var aTransform;

if(this.bCenter) {
aTransform = SVGIdentityMatrix.translate(0.5, 0.0);
poly.matrixTransform(aTransform);
}
var res = poly;

if(!this.bSingle) {
if(this.bOppositeVertical) {
aTransform = SVGIdentityMatrix.scale(1.0, -1.0);
aTransform.translate(0.0, 1.0);
poly.matrixTransform(aTransform);
poly.changeOrientation();
}
else {
aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform.rotate(Math.PI);
aTransform.translate(0.5, 0.5);
poly.matrixTransform(aTransform);
}
res.appendPath(poly);
}
return this.bFlipOnYAxis ? flipOnYAxis(res) : res;
}

function FourBoxWipePath( bCornersOut )
{
this.bCornersOut = bCornersOut;
this.aBasePath = createUnitSquarePath();
}

FourBoxWipePath.prototype.perform = function( nT )
{
var aMatrix;
var d = pruneScaleValue( nT / 2.0 );

if( this.bCornersOut )
{
aMatrix = SVGIdentityMatrix.translate( -0.25, -0.25 ).scale( d ).translate( -0.5, -0.5 );
}
else
{
aMatrix = SVGIdentityMatrix.translate( -0.5, -0.5 ).scale( d );
}


var aTransform = aMatrix;
var aSquare = this.aBasePath.cloneNode( true );
aSquare.matrixTransform( aTransform );
var aPolyPath = aSquare;
aMatrix = SVGIdentityMatrix.flipY();
aTransform = aMatrix.multiply( aTransform );
aSquare = this.aBasePath.cloneNode( true );
aSquare.matrixTransform( aTransform );
aSquare.changeOrientation();
aPolyPath.appendPath( aSquare );
aMatrix = SVGIdentityMatrix.flipX();
aTransform = aMatrix.multiply( aTransform );
aSquare = this.aBasePath.cloneNode( true );
aSquare.matrixTransform( aTransform );
aPolyPath.appendPath( aSquare );
aMatrix = SVGIdentityMatrix.flipY();
aTransform = aMatrix.multiply( aTransform );
aSquare = this.aBasePath.cloneNode( true );
aSquare.matrixTransform( aTransform );
aSquare.changeOrientation();
aPolyPath.appendPath( aSquare );

aMatrix = SVGIdentityMatrix.translate( 0.5, 0.5 );
aMatrix = aMatrix.scale( 1.1 );
aPolyPath.matrixTransform( aMatrix );

return aPolyPath;
};


function EllipseWipePath( eSubtype )
{
this.eSubtype = eSubtype;

var sPathData = 'M 0.5 -0.207107 ' +
'C 0.687536 -0.207107 0.867392 -0.132608 1 0 ' +
'C 1.13261 0.132608 1.20711 0.312464 1.20711 0.5 ' +
'C 1.20711 0.687536 1.13261 0.867392 1 1 ' +
'C 0.867392 1.13261 0.687536 1.20711 0.5 1.20711 ' +
'C 0.312464 1.20711 0.132608 1.13261 0 1 ' +
'C -0.132608 0.867392 -0.207107 0.687536 -0.207107 0.5 ' +
'C -0.207107 0.312464 -0.132608 0.132608 0 0 ' +
'C 0.132608 -0.132608 0.312464 -0.207107 0.5 -0.207107';

this.aBasePath = document.createElementNS( NSS['svg'], 'path' );
this.aBasePath.setAttribute( 'd', sPathData );
}

EllipseWipePath.prototype.perform = function( nT )
{

var aTransform = SVGIdentityMatrix.translate( 0.5, 0.5 ).scale( nT ).translate( -0.5, -0.5 );
var aEllipse = this.aBasePath.cloneNode( true );
aEllipse.matrixTransform( aTransform );

return aEllipse;
};

function FanWipePath(bIsCenter, bIsSingle, bIsFanIn) {
this.bCenter = bIsCenter;
this.bSingle = bIsSingle;
this.bFanIn  = bIsFanIn;
this.aBasePath = createUnitSquarePath();
}

FanWipePath.prototype.perform = function( nT ) {
var res = this.aBasePath.cloneNode(true);
var poly = PinWheelWipePath.calcCenteredClock(
nT / ((this.bCenter && this.bSingle) ? 2.0 : 4.0), 1.0);
res.appendPath(poly);
var aTransform = SVGIdentityMatrix.flipY();
aTransform = aTransform.scaleNonUniform(-1.0, 1.0);
poly.matrixTransform(aTransform);
res.appendPath(poly);

if(this.bCenter) {
aTransform = SVGIdentityMatrix.scaleNonUniform(0.5, 0.5).translate(0.5, 0.5);
res.matrixTransform(aTransform);

if(!this.bSingle)
res.appendPath(flipOnXAxis(res));
}
else {
aTransform = SVGIdentityMatrix.scaleNonUniform(0.5, 1.0).translate(0.5, 1.0);
res.matrixTransform(aTransform);
}
return res;
}

function ClockWipePath() { }

ClockWipePath.prototype.perform = function( nT ) {
const aTransform = SVGIdentityMatrix.scaleNonUniform(0.5, 0.5).translate(0.5, 0.5);
var aPolyPath = PinWheelWipePath.calcCenteredClock(nT, 1.0);
aPolyPath.matrixTransform( aTransform );

return aPolyPath;
}

function PinWheelWipePath( nBlades )
{
this.nBlades = nBlades;
if( !this.nBlades || this.nBlades < 1 )
this.nBlades = 1;
}

PinWheelWipePath.calcCenteredClock = function( nT, nE )
{
var nMAX_EDGE = 2;

var aTransform = SVGIdentityMatrix.rotate( nT * 360 );

var aPoint = document.documentElement.createSVGPoint();
aPoint.y = -nMAX_EDGE;
aPoint = aPoint.matrixTransform( aTransform );

var sPathData = 'M ' + aPoint.x + ' ' + aPoint.y + ' ';
if( nT >= 0.875 )
sPathData += 'L ' + '-' + nE + ' -' + nE + ' ';
if( nT >= 0.625 )
sPathData += 'L ' + '-' + nE + ' ' + nE + ' ';
if( nT >= 0.375 )
sPathData += 'L ' + nE + ' ' + nE + ' ';
if( nT >= 0.125 )
sPathData += 'L ' + nE + ' -' + nE + ' ';

sPathData += 'L 0 -' + nE + ' ';
sPathData += 'L 0 0 ';
sPathData += 'L '  + aPoint.x + ' ' + aPoint.y;

var aPath = document.createElementNS( NSS['svg'], 'path' );
aPath.setAttribute( 'd', sPathData );
return aPath;
};

PinWheelWipePath.prototype.perform = function( nT )
{
var aBasePath = PinWheelWipePath.calcCenteredClock( nT / this.nBlades,
2.0 /* max edge when rotating */  );

var aPolyPath = aBasePath.cloneNode( true );
var aPath;
var aRotation;
var i;
for( i = this.nBlades - 1; i > 0; --i )
{
aRotation = SVGIdentityMatrix.rotate( (i * 360) / this.nBlades );
aPath = aBasePath.cloneNode( true );
aPath.matrixTransform( aRotation );
aPolyPath.appendPath( aPath );
}

var aTransform = SVGIdentityMatrix.translate( 0.5, 0.5 ).scale( 0.5 );
aPolyPath.matrixTransform( aTransform );

return aPolyPath;
};

function BarnDoorWipePath(doubled) {
this.aBasePath = createUnitSquarePath();
this.doubled   = doubled;
}

BarnDoorWipePath.prototype.perform = function( nT ) {
if(this.doubled)
nT /= 2.0;
var aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform = aTransform.scaleNonUniform(pruneScaleValue(nT), 1.0).translate(0.5, 0.5);
var aPath = this.aBasePath.cloneNode(true);
aPath.matrixTransform(aTransform);
var res = aPath;

if(this.doubled) {
aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform = aTransform.rotate(Math.PI / 2).translate(0.5, 0.5);
aPath.matrixTransform(aTransform);
res.appendPath(aPath);
}
return res;
}

function WaterfallWipePath(nElements, bFlipOnYAxis) {
this.bFlipOnYAxis = bFlipOnYAxis;

var sqrtElements = Math.floor(Math.sqrt(nElements));
var elementEdge = 1.0/sqrtElements;

var aPath = 'M '+ 0.0 + ' ' + -1.0 + ' ';
for(var pos = sqrtElements; pos--; ) {
var xPos = sqrtElements - pos - 1;
var yPos = pruneScaleValue( ((pos+1) * elementEdge) - 1.0);

aPath += 'L ' + pruneScaleValue(xPos * elementEdge) + ' ' + yPos + ' ';
aPath += 'L ' + pruneScaleValue((xPos+1)*elementEdge) + ' ' + yPos + ' ';
}
aPath += 'L ' + 1.0 + ' ' + -1.0 + ' ';
aPath += 'L ' + 0.0 + ' ' + -1.0 + ' ';
this.aBasePath = document.createElementNS( NSS['svg'], 'path');
this.aBasePath.setAttribute('d', aPath);
}

WaterfallWipePath.prototype.perform = function( nT ) {
var poly = this.aBasePath.cloneNode(true);
var aTransform = SVGIdentityMatrix.translate(0.0, pruneScaleValue(2.0 * nT));
poly.matrixTransform(aTransform);
var aHead = 'M ' + 0.0 + ' ' + -1.0 + ' ';
var aHeadPath= document.createElementNS( NSS['svg'], 'path');
aHeadPath.setAttribute('d', aHead);

var aTail = 'M ' + 1.0 + ' ' + -1.0 + ' ';
var aTailPath = document.createElementNS( NSS['svg'], 'path');
aTailPath.setAttribute('d', aTail);

poly.prependPath(aHeadPath);
poly.appendPath(aTailPath);

return this.bFlipOnYAxis ? flipOnYAxis(poly) : poly;
}

function DoubleDiamondWipePath() { }

DoubleDiamondWipePath.prototype.perform = function( nT ) {
var a = pruneScaleValue(0.25 + (nT * 0.75));
var aPath = 'M ' + (0.5 + a) + ' ' + 0.5 + ' ';
aPath += 'L ' + 0.5 + ' ' + (0.5 - a) + ' ';
aPath += 'L ' + (0.5 - a) + ' ' + 0.5 + ' ';
aPath += 'L ' + 0.5 + ' ' + (0.5 + a) + ' ';
aPath += 'L ' + (0.5 + a) + ' ' + 0.5 + ' ';
var poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
var res = poly.cloneNode(true);

var b = pruneScaleValue( (1.0 - nT) * 0.25);
aPath = 'M ' + (0.5 + b) + ' ' + 0.5 + ' ';
aPath += 'L ' + 0.5 + ' ' + (0.5 + b) + ' ';
aPath += 'L ' + (0.5 - b) + ' ' + 0.5 + ' ';
aPath += 'L ' + 0.5 + ' ' + (0.5 - b) + ' ';
aPath += 'L ' + (0.5 + b) + ' ' + 0.5 + ' ';
poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
res.appendPath(poly);

return res;
}

function IrisWipePath(unitRect) {
this.unitRect = unitRect;
this.aBasePath = createUnitSquarePath();
}


IrisWipePath.prototype.perform = function( nT ) {
var d = pruneScaleValue(nT);
var aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform = aTransform.multiply(SVGIdentityMatrix.scaleNonUniform(d, d).translate(0.5, 0.5));
var aPath = this.aBasePath.cloneNode(true);
aPath.matrixTransform(aTransform);
return aPath;
}

function ZigZagWipePath(nZigs) {
this.zigEdge = 1.0/nZigs;
const d = this.zigEdge;
const d2 = (d / 2.0);
this.aBasePath = 'M ' + (-1.0 - d) + ' ' + -d + ' ';
this.aBasePath += 'L ' + (-1.0 - d) + ' ' + (1.0 + d) + ' ';
this.aBasePath += 'L ' + -d + ' ' + (1.0 + d) + ' ';

for(var pos = (nZigs + 2); pos--; ) {
this.aBasePath += 'L ' + 0.0 + ' ' + ((pos - 1) * d + d2) + ' ';
this.aBasePath += 'L ' + -d + ' ' + (pos - 1) * d + ' ';
}
this.aBasePath += 'L ' + (-1.0 - d) + ' ' + -d + ' ';
}

ZigZagWipePath.prototype.perform = function( nT ) {
var res = document.createElementNS( NSS['svg'], 'path');
res.setAttribute('d', this.aBasePath);
res.matrixTransform(SVGIdentityMatrix.translate((1.0 + this.zigEdge) * nT, 0.0));
return res;
}

function BarnZigZagWipePath( nZigs ) { ZigZagWipePath.call(this, nZigs); }

BarnZigZagWipePath.prototype = Object.create(ZigZagWipePath);

BarnZigZagWipePath.prototype.perform = function( nT ) {
var res = createEmptyPath();
var poly = document.createElementNS( NSS['svg'], 'path');
var aTransform = SVGIdentityMatrix.translate(
((1.0 + this.zigEdge) * (1.0 - nT)) / 2.0, 0.0);
poly.setAttribute('d', this.aBasePath);
poly.changeOrientation();
poly.matrixTransform(aTransform);
res.appendPath(poly);

aTransform = SVGIdentityMatrix.scale(-1.0, 1.0);
aTransform.translate(1.0, this.zigEdge / 2.0);
poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', this.aBasePath);
poly.matrixTransform(aTransform);
res.appendPath(poly);

return res;
}

function CheckerBoardWipePath( unitsPerEdge )
{
this.unitsPerEdge = unitsPerEdge;
if( this.unitsPerEdge === undefined || this.unitsPerEdge < 1 )
this.unitsPerEdge = 10;
this.aBasePath = createUnitSquarePath();
}

CheckerBoardWipePath.prototype.perform = function( nT )
{
var d = pruneScaleValue(1.0 / this.unitsPerEdge);
var aMatrix = SVGIdentityMatrix.scaleNonUniform(pruneScaleValue( d*2.0*nT ),
pruneScaleValue( d ) );

var aPolyPath = null;
var i, j;
var aTransform;
var aPath;
for ( i = this.unitsPerEdge; i--; )
{
aTransform = SVGIdentityMatrix;

if ((i % 2) == 1) // odd line
aTransform = aTransform.translate( -d, 0.0 );

aTransform = aTransform.multiply( aMatrix );

for ( j = (this.unitsPerEdge / 2) + 1; j--;)
{
aPath = this.aBasePath.cloneNode( true );
aPath.matrixTransform( aTransform );
if (aPolyPath == null) aPolyPath = aPath;
else aPolyPath.appendPath( aPath );
aTransform = SVGIdentityMatrix.translate( d*2.0, 0.0 ).multiply( aTransform );
}

aMatrix = SVGIdentityMatrix.translate( 0.0, d ).multiply( aMatrix ); // next line
}

return aPolyPath;
};


function RandomWipePath( nElements, bRandomBars )
{
this.nElements = nElements;
this.aBasePath = createUnitSquarePath();
this.aPositionArray = new Array( nElements );
this.aClipPath = createEmptyPath();
this.nAlreadyAppendedElements = 0;

var fEdgeLength, nPos, aTransform;

if( bRandomBars ) // random bar wipe
{
fEdgeLength = 1.0 / nElements;
for( nPos = 0; nPos < nElements; ++nPos )
{
this.aPositionArray[nPos] = { x: 0.0, y: pruneScaleValue( nPos * fEdgeLength ) }
}
aTransform = SVGIdentityMatrix.scaleNonUniform( 1.0, pruneScaleValue( fEdgeLength ) );
}
else // dissolve wipe
{
var nSqrtElements = Math.round( Math.sqrt( nElements ) );
fEdgeLength = 1.0 / nSqrtElements;
for( nPos = 0; nPos < nElements; ++nPos )
{
this.aPositionArray[nPos] = {
x: pruneScaleValue( ( nPos % nSqrtElements ) * fEdgeLength ),
y: pruneScaleValue( ( nPos / nSqrtElements ) * fEdgeLength ) }
}
aTransform = SVGIdentityMatrix.scale( pruneScaleValue( fEdgeLength ) );
}
this.aBasePath.matrixTransform( aTransform );

var nPos1, nPos2;
var tmp;
for( nPos1 = nElements - 1; nPos1 > 0; --nPos1 )
{
nPos2 = getRandomInt( nPos1 + 1 );
tmp = this.aPositionArray[nPos1];
this.aPositionArray[nPos1] = this.aPositionArray[nPos2];
this.aPositionArray[nPos2] = tmp;
}
}

RandomWipePath.prototype.perform = function( nT )
{
var aPolyPath = createEmptyPath();
var aPoint;
var aPath;
var aTransform;
var nElements = Math.round( nT * this.nElements );
if( nElements === 0 )
{
return aPolyPath;
}
if( this.nAlreadyAppendedElements >= nElements )
{
this.nAlreadyAppendedElements = 0;
this.aClipPath = createEmptyPath();
}
var nPos;
for( nPos = this.nAlreadyAppendedElements; nPos < nElements; ++nPos )
{
aPoint = this.aPositionArray[nPos];
aPath = this.aBasePath.cloneNode( true );
aTransform = SVGIdentityMatrix.translate( aPoint.x, aPoint.y );
aPath.matrixTransform( aTransform );
aPolyPath.appendPath( aPath );
}

this.nAlreadyAppendedElements = nElements;
this.aClipPath.appendPath( aPolyPath );

return this.aClipPath.cloneNode( true );
};

function SnakeWipePath(nElements, bDiagonal, bflipOnYAxis)
{
this.sqrtElements = Math.floor(Math.sqrt(nElements));
this.elementEdge  = (1.0 / this.sqrtElements);
this.diagonal     = bDiagonal;
this.flipOnYAxis  = bflipOnYAxis;
this.aBasePath    = createUnitSquarePath();
}

SnakeWipePath.prototype.calcSnake = function(t)
{
var aPolyPath = createEmptyPath();
const area   = (t * this.sqrtElements * this.sqrtElements);
const line_  = Math.floor(area) / this.sqrtElements;
const line   = pruneScaleValue(line_ / this.sqrtElements);
const col    = pruneScaleValue((area - (line_ * this.sqrtElements)) / this.sqrtElements);

if(line != 0) {
let aPath = 'M '+ 0.0 + ' ' + 0.0 + ' ';
aPath += 'L ' + 0.0 + ' ' + line + ' ';
aPath += 'L ' + 1.0 + ' ' + line + ' ';
aPath += 'L ' + 1.0 + ' ' + 0.0 + ' ';
aPath += 'L 0 0 ';
let poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
aPolyPath.appendPath(poly);
}
if(col != 0) {
var offset = 0.0;
if((line_ & 1) == 1) {
offset = (1.0 - col);
}
let aPath = 'M ' + offset + ' ' + line + ' ';
aPath += 'L '+ offset + ' ' + (line + this.elementEdge) + ' ';
aPath += 'L ' + (offset+col) + ' ' + (line + this.elementEdge) + ' ';
aPath += 'L ' + (offset+col) + ' ' + line + ' ';
aPath += 'L ' + offset + ' ' + line + ' ';
let poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
aPolyPath.appendPath(poly);
}

return aPolyPath;
}

SnakeWipePath.prototype.calcHalfDiagonalSnake = function(nT, bIn) {
var res = createEmptyPath();

if(bIn) {
const sqrtArea2 = Math.sqrt(nT * this.sqrtElements * this.sqrtElements);
const edge = pruneScaleValue(sqrtArea2 / this.sqrtElements);

var aPath, aPoint = document.documentElement.createSVGPoint();
if(edge) {
aPath = 'M ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = edge;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = edge;
aPoint.y = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
const poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
res.appendPath(poly);
}
const a = (Math.SQRT1_2 / this.sqrtElements);
const d = (sqrtArea2 - Math.floor(sqrtArea2));
const len = (nT * Math.SQRT1_2 * d);
const height = pruneScaleValue(Math.SQRT1_2 / this.sqrtElements);
aPath = 'M ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = height;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = len + a;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
const poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
let aTransform;

if((Math.floor(sqrtArea2) & 1) == 1) {
aTransform = SVGIdentityMatrix.rotate((Math.PI)/2 + (Math.PI)/4);
aTransform.translate(edge + this.elementEdge, 0.0);
}
else {
aTransform = SVGIdentityMatrix.translate(-a, 0.0);
aTransform.rotate(-(Math.PI/4));
aTransform.translate(0.0, edge);
}

poly.matrixTransform(aTransform);
res.appendPath(poly);
}
else { //out
const sqrtArea2 = Math.sqrt(nT * this.sqrtElements * this.sqrtElements);
const edge = pruneScaleValue(Math.floor(sqrtArea2)/this.sqrtElements);

let aPath, aPoint = document.documentElement.createSVGPoint();
if(edge != 0) {
aPoint.y = 1.0;
aPath = 'M ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = edge;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = 1.0;
aPoint.y = edge;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
const poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
res.appendPath(poly);
}
const a = (Math.SQRT1_2 / this.sqrtElements);
const d = (sqrtArea2 - Math.floor(sqrtArea2));
const len = ((1.0 - nT) * Math.SQRT2 * d);
const height = pruneScaleValue(Math.SQRT1_2 / this.sqrtElements);
aPath = 'M ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = height;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = len + a;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.y = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
aPoint.x = 0.0;
aPath += 'L ' + aPoint.x + ' ' + aPoint.y + ' ';
const poly = document.createElementNS( NSS['svg'], 'path');
poly.setAttribute('d', aPath);
let aTransform;

if((Math.floor(sqrtArea2) & 1) == 1) {
aTransform = SVGIdentityMatrix.translate(0.0, -height);
aTransform.rotate(Math.PI/2 + Math.PI/4);
aTransform.translate(1.0, edge);
}
else {
aTransform = SVGIdentityMatrix.rotate(-(Math.PI/4));
aTransform = aTransform.translate(edge, 1.0);
}
poly.matrixTransform(aTransform);
res.appendPath(poly);
}
return res;
}

SnakeWipePath.prototype.perform = function(nT) {
var res = createEmptyPath();
if(this.diagonal) {
if(nT >= 0.5) {
res.appendPath(this.calcHalfDiagonalSnake(1.0, true));
res.appendPath(this.calcHalfDiagonalSnake(2.0*(nT-0.5), false));
}
else
res.appendPath(this.calcHalfDiagonalSnake(2.0*nT, true));
}
else
res = this.calcSnake(nT);

return this.flipOnYAxis ? flipOnYAxis(res) : res;
}

function ParallelSnakesWipePath(nElements, bDiagonal, bFlipOnYAxis, bOpposite) {
SnakeWipePath.call(this, nElements, bDiagonal, bFlipOnYAxis);
this.bOpposite = bOpposite;
}

ParallelSnakesWipePath.prototype = Object.create(SnakeWipePath);

ParallelSnakesWipePath.prototype.perform = function( nT ) {
var res = createEmptyPath(), half, aTransform;
if(this.diagonal) {
assert(this.bOpposite);
half = SnakeWipePath.prototype.calcHalfDiagonalSnake.call(this, nT, false);
aTransform = SVGIdentityMatrix.scale(1, -1);
aTransform.translate(-0.5, 0.5);
aTransform.rotate(Math.PI/2);
aTransform.translate(0.5, 0.5);
half.matrixTransform(aTransform);
half.changeOrientation();
res.appendPath(half);

aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform.rotate(Math.PI);
aTransform.translate(0.5, 0.5);
half.matrixTransform(aTransform);
res.appendPath(half);
}
else {
half = SnakeWipePath.prototype.calcSnake.call(this, nT / 2.0 );
aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
aTransform = aTransform.rotate(Math.PI/2);
aTransform = aTransform.translate(0.5, 0.5);
half.matrixTransform(aTransform);
res.appendPath(flipOnYAxis(half));
res.appendPath(this.bOpposite ? flipOnXAxis(half) : half);
}

return this.flipOnYAxis ? flipOnYAxis(res) : res;
}

function SpiralWipePath(nElements, bFlipOnYAxis) {
this.nElements    = nElements;
this.sqrtElements = Math.floor(Math.sqrt(nElements));
this.bFlipOnYAxis = bFlipOnYAxis;
}

SpiralWipePath.prototype.calcNegSpiral = function( nT ) {
var area  = nT * this.nElements;
var e     = (Math.sqrt(area) / 2.0);
var edge  = Math.floor(e) * 2;

var aTransform = SVGIdentityMatrix.translate(-0.5, -0.5);
var edge_ = pruneScaleValue(edge / this.sqrtElements);

aTransform = aTransform.scale(edge_, edge_);
aTransform = aTransform.translate(0.5, 0.5);
var poly = createUnitSquarePath();
poly.matrixTransform(aTransform);
var res = poly.cloneNode(true);

if(1.0 - nT != 0) {
var edge1 = edge + 1;
var len   = Math.floor( (e - edge/2) * edge1 * 4);
var w     = Math.PI / 2;

while(len > 0) {
var alen = Math.min(len, edge1);
len -= alen;
poly = createUnitSquarePath();
aTransform = SVGIdentityMatrix.scale(
pruneScaleValue( alen / this.sqrtElements ),
pruneScaleValue( 1.0 / this.sqrtElements ));
aTransform = aTransform.translate(
- pruneScaleValue( (edge / 2) / this.sqrtElements ),
pruneScaleValue( (edge / 2) / this.sqrtElements ));
aTransform = aTransform.rotate( w );
w -= Math.PI / 2;
aTransform = aTransform.translate(0.5, 0.5);
poly.matrixTransform(aTransform);
res.appendPath(poly);
}
}

return res;
}

SpiralWipePath.prototype.perform = function( nT ) {
var res         = createUnitSquarePath();
var innerSpiral = this.calcNegSpiral( 1.0 - nT );
innerSpiral.changeOrientation();
res.appendPath(innerSpiral);

return this.bFlipOnYAxis ? flipOnYAxis(res) : res;
}

function BoxSnakesWipePath(nElements, bFourBox) {
SpiralWipePath.call(this, nElements);
this.bFourBox = bFourBox;
}

BoxSnakesWipePath.prototype = Object.create(SpiralWipePath);

BoxSnakesWipePath.prototype.perform = function( nT ) {
var res = createUnitSquarePath(), aTransform;
var innerSpiral = SpiralWipePath.prototype.calcNegSpiral.call(this, 1.0 - nT);
innerSpiral.changeOrientation();

if(this.bFourBox) {
aTransform = SVGIdentityMatrix.scale(0.5, 0.5);
innerSpiral.matrixTransform(aTransform);
res.appendPath(innerSpiral);
res.appendPath(flipOnXAxis(innerSpiral));
innerSpiral = flipOnYAxis(innerSpiral);
res.appendPath(innerSpiral);
res.appendPath(flipOnXAxis(innerSpiral));
}
else {
aTransform = SVGIdentityMatrix.scale(1.0, 0.5);
innerSpiral.matrixTransform(aTransform);
res.appendPath(innerSpiral);
res.appendPath(flipOnXAxis(innerSpiral));
}
return this.bFlipOnYAxis ? flipOnYAxis(res) : res;
}

function VeeWipePath() { }

VeeWipePath.prototype.perform = function( nT ) {
const d = pruneScaleValue(2.0 * nT);
var polyPath = 'M ' + 0.0 + ' ' + -1.0 + ' ';
polyPath += 'L ' + 0.0 + ' ' + (d - 1.0) + ' ';
polyPath += 'L ' + 0.5 + ' ' + d + ' ';
polyPath += 'L ' + 1.0 + ' ' + (d - 1.0) + ' ';
polyPath += 'L ' + 1.0 + ' ' + -1.0 + ' ';
polyPath += 'L ' + 0.0 + ' ' + -1.0 + ' ';

var aPolyPolyPath = document.createElementNS( NSS['svg'], 'path');
aPolyPolyPath.setAttribute('d', polyPath);
return aPolyPolyPath;
}


function AnimatedSlide( aMetaSlide )
{
if( !aMetaSlide )
{
log( 'AnimatedSlide constructor: meta slide is not valid' );
}

this.aMetaSlide = aMetaSlide;
this.aSlideElement = this.aMetaSlide.slideElement;
this.sSlideId = this.aMetaSlide.slideId;

this.aUsedAttributeSet = [];

this.aClipPathElement = null;
this.aClipPathContent = null;
this.bIsClipped = false;
}

AnimatedSlide.prototype.show = function()
{
this.aMetaSlide.show();
};

AnimatedSlide.prototype.hide = function()
{
this.aMetaSlide.hide();
};

AnimatedSlide.prototype.notifyUsedAttribute = function( sName )
{
if( sName == 'clip-path' )
{
this.initClipPath();
this.bIsClipped = true;
}
else
{
this.aUsedAttributeSet.push( sName );
}
};

AnimatedSlide.prototype.reset = function()
{
if( this.bIsClipped )
{
this.cleanClipPath();
this.bIsClipped = false;
}

var i;
for( i = 0; i < this.aUsedAttributeSet.length; ++i )
{
var sAttrName = this.aUsedAttributeSet[i];
this.aSlideElement.removeAttribute( sAttrName );
}
this.aUsedAttributeSet = [];
};

AnimatedSlide.prototype.initClipPath = function()
{
this.aClipPathElement = document.createElementNS( NSS['svg'], 'clipPath' );

var sId = 'clip-path-' + this.sSlideId;
this.aClipPathElement.setAttribute( 'id', sId );
this.aClipPathElement.setAttribute( 'clipPathUnits', 'userSpaceOnUse' );

this.aClipPathContent = document.createElementNS( NSS['svg'], 'path' );
var sPathData = 'M 0 0 h ' + WIDTH + ' v ' + HEIGHT + ' h -' + WIDTH + ' z';
this.aClipPathContent.setAttribute( 'd', sPathData );
this.aClipPathElement.appendChild( this.aClipPathContent );

var aClipPathGroup = theMetaDoc.aClipPathGroup;
aClipPathGroup.appendChild( this.aClipPathElement );

var sRef = 'url(#' + sId + ')';
this.aSlideElement.parentNode.setAttribute( 'clip-path', sRef );
};

AnimatedSlide.prototype.cleanClipPath = function()
{
this.aSlideElement.parentNode.removeAttribute( 'clip-path' );

if( this.aClipPathElement )
{
var aClipPathGroup = theMetaDoc.aClipPathGroup;
aClipPathGroup.removeChild( this.aClipPathElement );
this.aClipPathElement = null;
this.aClipPathContent = null;
}
};

AnimatedSlide.prototype.insertBefore = function( aElement )
{
if( aElement )
{
this.aSlideElement.parentNode.insertBefore( aElement, this.aSlideElement );
}
};

AnimatedSlide.prototype.appendElement = function( aElement )
{
if( aElement )
{
this.aSlideElement.parentNode.appendChild( aElement );
}
};

AnimatedSlide.prototype.removeElement = function( aElement )
{
if( aElement )
{
this.aSlideElement.parentNode.removeChild( aElement );
}
};

AnimatedSlide.prototype.getWidth = function()
{
return WIDTH;
};

AnimatedSlide.prototype.getHeight = function()
{
return HEIGHT;
};

AnimatedSlide.prototype.setOpacity = function( nValue )
{
this.aSlideElement.setAttribute( 'opacity', nValue );
};

AnimatedSlide.prototype.translate = function( nDx, nDy )
{
var sTransformAttr = 'translate(' + nDx + ',' + nDy + ')';
this.aSlideElement.setAttribute( 'transform', sTransformAttr );
};

AnimatedSlide.prototype.setClipPath = function( aClipPathContent )
{
if( this.aClipPathContent )
{
var sPathData = aClipPathContent.getAttribute( 'd' );
this.aClipPathContent.setAttribute( 'd', sPathData );
}
};


function AnimatedElement( aElement )
{
if( !aElement )
{
log( 'AnimatedElement constructor: element is not valid' );
}

this.aSlideShowContext = null;

this.aBaseElement = aElement.cloneNode( true );
this.aActiveElement = aElement;
this.sElementId = this.aActiveElement.getAttribute( 'id' );

this.aBaseBBox = this.aActiveElement.getBBox();
this.nBaseCenterX = this.aBaseBBox.x + this.aBaseBBox.width / 2;
this.nBaseCenterY = this.aBaseBBox.y + this.aBaseBBox.height / 2;


this.aClipPathElement = null;
this.aClipPathContent = null;

this.aPreviousElement = null;
this.aStateSet = {};

this.eAdditiveMode = ADDITIVE_MODE_REPLACE;
this.bIsUpdated = true;

this.aTMatrix = document.documentElement.createSVGMatrix();
this.aCTM = document.documentElement.createSVGMatrix();
this.aICTM = document.documentElement.createSVGMatrix();

this.initElement();
}

AnimatedElement.prototype.initElement = function()
{
this.nCenterX = this.nBaseCenterX;
this.nCenterY = this.nBaseCenterY;
this.nScaleFactorX = 1.0;
this.nScaleFactorY = 1.0;
this.nRotationAngle = 0.0;

this.aActiveElement.setAttribute( 'transform', makeMatrixString( 1, 0, 0, 1, 0, 0 ) );
};

AnimatedElement.prototype.initClipPath = function()
{
this.aClipPathElement = document.createElementNS( NSS['svg'], 'clipPath' );

var sId = 'clip-path-' + this.sElementId;
this.aClipPathElement.setAttribute( 'id', sId );
this.aClipPathElement.setAttribute( 'clipPathUnits', 'userSpaceOnUse' );

this.aClipPathContent = document.createElementNS( NSS['svg'], 'path' );
this.aClippingBBox = this.getBBoxWithStroke();
var nWidth = this.aClippingBBox.width;
var nHeight = this.aClippingBBox.height;
var sPathData = 'M ' + this.aClippingBBox.x + ' ' + this.aClippingBBox.y +
' h ' + nWidth + ' v ' + nHeight + ' h -' + nWidth + ' z';
this.aClipPathContent.setAttribute( 'd', sPathData );
this.aClipPathElement.appendChild( this.aClipPathContent );

var aClipPathGroup = theMetaDoc.aClipPathGroup;
aClipPathGroup.appendChild( this.aClipPathElement );

var sRef = 'url(#' + sId + ')';
this.aActiveElement.setAttribute( 'clip-path', sRef );
};

AnimatedElement.prototype.cleanClipPath = function()
{
this.aActiveElement.removeAttribute( 'clip-path' );

if( this.aClipPathElement )
{
var aClipPathGroup = theMetaDoc.aClipPathGroup;
aClipPathGroup.removeChild( this.aClipPathElement );
this.aClipPathElement = null;
this.aClipPathContent = null;
}
};

AnimatedElement.prototype.getId = function()
{
return this.aActiveElement.getAttribute( 'id' );
};

AnimatedElement.prototype.getAdditiveMode = function()
{
return this.eAdditiveMode;
};

AnimatedElement.prototype.setAdditiveMode = function( eAdditiveMode )
{
this.eAdditiveMode = eAdditiveMode;
};

AnimatedElement.prototype.setToElement = function( aElement )
{
if( !aElement )
{
log( 'AnimatedElement(' + this.getId() + ').setToElement: element is not valid' );
return false;
}

var aClone = aElement.cloneNode( true );
this.aPreviousElement = this.aActiveElement.parentNode.replaceChild( aClone, this.aActiveElement );
this.aActiveElement = aClone;

return true;
};

AnimatedElement.prototype.notifySlideStart = function( aSlideShowContext )
{
if( !aSlideShowContext )
{
log( 'AnimatedElement.notifySlideStart: slideshow context is not valid' );
}
this.aSlideShowContext = aSlideShowContext;

var aClone = this.aBaseElement.cloneNode( true );
this.aActiveElement.parentNode.replaceChild( aClone, this.aActiveElement );
this.aActiveElement = aClone;

this.initElement();
this.DBG( '.notifySlideStart invoked' );
};

AnimatedElement.prototype.notifySlideEnd = function()
{
};

AnimatedElement.prototype.notifyAnimationStart = function()
{
};

AnimatedElement.prototype.notifyAnimationEnd = function()
{
};

AnimatedElement.prototype.notifyNextEffectStart = function( /*nEffectIndex*/ )
{
};

AnimatedElement.prototype.saveState = function( nAnimationNodeId )
{
ANIMDBG.print( 'AnimatedElement(' + this.getId() + ').saveState(' + nAnimationNodeId +')' );
if( !this.aStateSet[ nAnimationNodeId ] )
{
this.aStateSet[ nAnimationNodeId ] = {};
}
var aState = this.aStateSet[ nAnimationNodeId ];
aState.aElement = this.aActiveElement.cloneNode( true );
aState.nCenterX = this.nCenterX;
aState.nCenterY = this.nCenterY;
aState.nScaleFactorX = this.nScaleFactorX;
aState.nScaleFactorY = this.nScaleFactorY;
aState.nRotationAngle = this.nRotationAngle;

};

AnimatedElement.prototype.restoreState = function( nAnimationNodeId )
{
if( !this.aStateSet[ nAnimationNodeId ] )
{
log( 'AnimatedElement(' + this.getId() + ').restoreState: state '
+nAnimationNodeId  + ' is not valid' );
return false;
}

ANIMDBG.print( 'AnimatedElement(' + this.getId() + ').restoreState(' + nAnimationNodeId +')' );
var aState = this.aStateSet[ nAnimationNodeId ];
var bRet = this.setToElement( aState.aElement );
if( bRet )
{
this.nCenterX = aState.nCenterX;
this.nCenterY = aState.nCenterY;
this.nScaleFactorX = aState.nScaleFactorX;
this.nScaleFactorY = aState.nScaleFactorY;
this.nRotationAngle = aState.nRotationAngle;
}
return bRet;
};

AnimatedElement.prototype.getBaseBBox = function()
{
return this.aBaseBBox;
};

AnimatedElement.prototype.getBaseCenterX = function()
{
return this.nBaseCenterX;
};

AnimatedElement.prototype.getBaseCenterY = function()
{
return this.nBaseCenterY;
};

AnimatedElement.prototype.getBBox = function()
{
return this.aActiveElement.parentNode.getBBox();
};

AnimatedElement.prototype.getBBoxWithStroke = function()
{
var aBBox = this.aActiveElement.parentNode.getBBox();

var aChildrenSet = this.aActiveElement.childNodes;

var sStroke, sStrokeWidth;
var nStrokeWidth = 0;
var i;
for( i = 0; i < aChildrenSet.length; ++i )
{
if( ! aChildrenSet[i].getAttribute  )
continue;

sStroke = aChildrenSet[i].getAttribute( 'stroke' );
if( sStroke && sStroke != 'none' )
{
sStrokeWidth = aChildrenSet[i].getAttribute( 'stroke-width' );
var nSW = parseFloat( sStrokeWidth );
if( nSW > nStrokeWidth )
nStrokeWidth = nSW;
}
}

if( nStrokeWidth == 0 )
{
sStrokeWidth = ROOT_NODE.getAttribute( 'stroke-width' );
nStrokeWidth = parseFloat( sStrokeWidth );
}
if( nStrokeWidth != 0 )
{
nStrokeWidth *= 1.1;
var nHalfStrokeWidth = nStrokeWidth / 2;
var nDoubleStrokeWidth = nStrokeWidth * 2;

var aEBBox = document.documentElement.createSVGRect();
aEBBox.x = aBBox.x - nHalfStrokeWidth;
aEBBox.y = aBBox.y - nHalfStrokeWidth;
aEBBox.width = aBBox.width + nDoubleStrokeWidth;
aEBBox.height = aBBox.height + nDoubleStrokeWidth;
aBBox = aEBBox;
}
return aBBox;
};

AnimatedElement.prototype.setClipPath = function( aClipPathContent )
{
if( this.aClipPathContent )
{
var aTranslation = SVGIdentityMatrix.translate( this.aClippingBBox.x,
this.aClippingBBox.y);
aClipPathContent.matrixTransform( aTranslation );
var sPathData = aClipPathContent.getAttribute( 'd' );
this.aClipPathContent.setAttribute( 'd', sPathData );
}
};


AnimatedElement.prototype.getX = function()
{
return this.nCenterX;
};

AnimatedElement.prototype.getY = function()
{
return this.nCenterY;
};

AnimatedElement.prototype.getWidth = function()
{
return this.nScaleFactorX * this.getBaseBBox().width;
};

AnimatedElement.prototype.getHeight = function()
{
return this.nScaleFactorY * this.getBaseBBox().height;
};

AnimatedElement.prototype.updateTransformAttribute = function()
{
this.aTransformAttrList = this.aActiveElement.transform.baseVal;
this.aTransformAttr = this.aTransformAttrList.getItem( 0 );
this.aTransformAttr.setMatrix( this.aTMatrix );
};

AnimatedElement.prototype.setX = function( nNewCenterX )
{
if( nNewCenterX === this.nCenterX ) return;

this.aTransformAttrList = this.aActiveElement.transform.baseVal;
this.aTransformAttr = this.aTransformAttrList.getItem( 0 );
this.aTMatrix = this.aTransformAttr.matrix.translate( nNewCenterX - this.nCenterX, 0 );
this.aTransformAttr.setMatrix( this.aTMatrix );
this.nCenterX = nNewCenterX;
};

AnimatedElement.prototype.setY = function( nNewCenterY )
{
if( nNewCenterY === this.nCenterY ) return;

this.aTransformAttrList = this.aActiveElement.transform.baseVal;
this.aTransformAttr = this.aTransformAttrList.getItem( 0 );
this.aTMatrix = this.aTransformAttr.matrix.translate( 0, nNewCenterY - this.nCenterY );
this.aTransformAttr.setMatrix( this.aTMatrix );
this.nCenterY = nNewCenterY;
};

AnimatedElement.prototype.setWidth = function( nNewWidth )
{
ANIMDBG.print( 'AnimatedElement.setWidth: nNewWidth = ' + nNewWidth );
if( nNewWidth < 0 )
{
log('AnimatedElement(' + this.getId() + ').setWidth: negative height!');
nNewWidth = 0;
}

var nBaseWidth = this.getBaseBBox().width;
var nScaleFactorX = nNewWidth / nBaseWidth;

if( nScaleFactorX < 1e-5 ) nScaleFactorX = 1e-5;
if( nScaleFactorX == this.nScaleFactorX ) return;

this.aTMatrix = document.documentElement.createSVGMatrix()
.translate( this.nCenterX, this.nCenterY )
.rotate(this.nRotationAngle)
.scaleNonUniform( nScaleFactorX, this.nScaleFactorY )
.translate( -this.nBaseCenterX, -this.nBaseCenterY );
this.updateTransformAttribute();

this.nScaleFactorX = nScaleFactorX;
};

AnimatedElement.prototype.setHeight = function( nNewHeight )
{
ANIMDBG.print( 'AnimatedElement.setWidth: nNewHeight = ' + nNewHeight );
if( nNewHeight < 0 )
{
log('AnimatedElement(' + this.getId() + ').setWidth: negative height!');
nNewHeight = 0;
}

var nBaseHeight = this.getBaseBBox().height;
var nScaleFactorY = nNewHeight / nBaseHeight;

if( nScaleFactorY < 1e-5 ) nScaleFactorY = 1e-5;
if( nScaleFactorY == this.nScaleFactorY ) return;

this.aTMatrix = document.documentElement.createSVGMatrix()
.translate( this.nCenterX, this.nCenterY )
.rotate(this.nRotationAngle)
.scaleNonUniform( this.nScaleFactorX, nScaleFactorY )
.translate( -this.nBaseCenterX, -this.nBaseCenterY );
this.updateTransformAttribute();

this.nScaleFactorY = nScaleFactorY;
};

AnimatedElement.prototype.getOpacity = function()
{
return this.aActiveElement.getAttribute( 'opacity' );
};

AnimatedElement.prototype.setOpacity = function( nValue )
{
this.aActiveElement.setAttribute( 'opacity', nValue );
};

AnimatedElement.prototype.getRotationAngle = function()
{
return this.nRotationAngle;
};

AnimatedElement.prototype.setRotationAngle = function( nNewRotAngle )
{
this.aTMatrix = document.documentElement.createSVGMatrix()
.translate( this.nCenterX, this.nCenterY )
.rotate(nNewRotAngle)
.scaleNonUniform( this.nScaleFactorX, this.nScaleFactorY )
.translate( -this.nBaseCenterX, -this.nBaseCenterY );
this.updateTransformAttribute();

this.nRotationAngle = nNewRotAngle;
};

AnimatedElement.prototype.getVisibility = function()
{

var sVisibilityValue = this.aActiveElement.getAttribute( 'visibility' );
if( !sVisibilityValue || ( sVisibilityValue === 'inherit' ) )
return 'visible'; // TODO: look for parent visibility!
else
return sVisibilityValue;
};

AnimatedElement.prototype.setVisibility = function( sValue )
{
if( sValue == 'visible' )
sValue = 'inherit';
this.aActiveElement.setAttribute( 'visibility', sValue );
};

AnimatedElement.prototype.getStrokeStyle = function()
{
return 'solid';
};

AnimatedElement.prototype.setStrokeStyle = function( sValue )
{
ANIMDBG.print( 'AnimatedElement.setStrokeStyle(' + sValue + ')' );
};

AnimatedElement.prototype.getFillStyle = function()
{
return 'solid';
};

AnimatedElement.prototype.setFillStyle = function( sValue )
{
ANIMDBG.print( 'AnimatedElement.setFillStyle(' + sValue + ')' );
};

AnimatedElement.prototype.getFillColor = function()
{
var aChildSet = getElementChildren( this.aActiveElement );
var sFillColorValue = '';
for( var i = 0; i <  aChildSet.length; ++i )
{
sFillColorValue = aChildSet[i].getAttribute( 'fill' );
if( sFillColorValue && ( sFillColorValue !== 'none' ) )
break;
}

return colorParser( sFillColorValue );
};

AnimatedElement.prototype.setFillColor = function( aRGBValue )
{
assert( aRGBValue instanceof RGBColor,
'AnimatedElement.setFillColor: value argument is not an instance of RGBColor' );

var sValue = aRGBValue.toString( true /* clamped values */ );
var aChildSet = getElementChildren( this.aActiveElement );

var sFillColorValue = '';
for( var i = 0; i <  aChildSet.length; ++i )
{
sFillColorValue = aChildSet[i].getAttribute( 'fill' );
if( sFillColorValue && ( sFillColorValue !== 'none' ) )
{
aChildSet[i].setAttribute( 'fill', sValue );
}
}
};

AnimatedElement.prototype.getStrokeColor = function()
{
var aChildSet = getElementChildren( this.aActiveElement );
var sStrokeColorValue = '';
for( var i = 0; i <  aChildSet.length; ++i )
{
sStrokeColorValue = aChildSet[i].getAttribute( 'stroke' );
if( sStrokeColorValue && ( sStrokeColorValue !== 'none' ) )
break;
}

return colorParser( sStrokeColorValue );
};

AnimatedElement.prototype.setStrokeColor = function( aRGBValue )
{
assert( aRGBValue instanceof RGBColor,
'AnimatedElement.setFillColor: value argument is not an instance of RGBColor' );

var sValue = aRGBValue.toString( true /* clamped values */ );
var aChildSet = getElementChildren( this.aActiveElement );

var sStrokeColorValue = '';
for( var i = 0; i <  aChildSet.length; ++i )
{
sStrokeColorValue = aChildSet[i].getAttribute( 'stroke' );
if( sStrokeColorValue && ( sStrokeColorValue !== 'none' ) )
{
aChildSet[i].setAttribute( 'stroke', sValue );
}
}
};

AnimatedElement.prototype.getFontColor = function()
{
return new RGBColor( 0, 0, 0 );
};

AnimatedElement.prototype.setFontColor = function( sValue )
{
ANIMDBG.print( 'AnimatedElement.setFontColor(' + sValue + ')' );
};

AnimatedElement.prototype.DBG = function( sMessage, nTime )
{
aAnimatedElementDebugPrinter.print( 'AnimatedElement(' + this.getId() + ')' + sMessage, nTime );
};


function AnimatedTextElement( aElement, aEventMultiplexer )
{
var theDocument = document;

var sTextType = aElement.getAttribute( 'class' );
var bIsListItem = ( sTextType === 'ListItem' );
if( ( sTextType !== 'TextParagraph' ) && !bIsListItem )
{
log( 'AnimatedTextElement: passed element is not a paragraph.' );
return;
}
var aTextShapeElement = aElement.parentNode;
sTextType = aTextShapeElement.getAttribute( 'class' );
if( sTextType !== 'TextShape' )
{
log( 'AnimatedTextElement: element parent is not a text shape.' );
return;
}
var aTextShapeGroup = aTextShapeElement.parentNode;
var aAnimatedElementGroup = getElementByClassName( aTextShapeGroup, 'AnimatedElements' );
if( !aAnimatedElementGroup )
{
aAnimatedElementGroup = theDocument.createElementNS( NSS['svg'], 'g' );
aAnimatedElementGroup.setAttribute( 'class', 'AnimatedElements' );
aTextShapeGroup.appendChild( aAnimatedElementGroup );
}

var aAnimatableElement = theDocument.createElementNS( NSS['svg'], 'g' );
var aTextElement = theDocument.createElementNS( NSS['svg'], 'text' );
var aParagraphElement = aElement.cloneNode( true );

this.aGraphicGroupElement = theDocument.createElementNS( NSS['svg'], 'g' );
this.aGraphicGroupElement.setAttribute( 'class', 'GraphicGroup' );

var aBulletCharClone = null;
var aBulletCharElem = null;
var bIsBulletCharStyle =
( aElement.getAttributeNS( NSS['ooo'], aOOOAttrListItemNumberingType ) === 'bullet-style' );
if( bIsBulletCharStyle )
{
var aBulletCharGroupElem = getElementByClassName( aTextShapeGroup, 'BulletChars' );
if( aBulletCharGroupElem )
{
var aBulletPlaceholderElem = getElementByClassName( aElement, 'BulletPlaceholder' );
if( aBulletPlaceholderElem )
{
var sId = aBulletPlaceholderElem.getAttribute( 'id' );
sId = 'bullet-char(' + sId + ')';
aBulletCharElem = theDocument.getElementById( sId );
if( aBulletCharElem )
{
aBulletCharClone = aBulletCharElem.cloneNode( true );
}
else
{
log( 'AnimatedTextElement: ' + sId + ' not found.' );
}
}
else
{
log( 'AnimatedTextElement: no bullet placeholder found' );
}
}
else
{
log( 'AnimatedTextElement: no bullet char group found' );
}
}

var aBitmapElemSet = [];
var aBitmapCloneSet = [];
var aBitmapPlaceholderSet = getElementsByClassName( aElement, 'BitmapPlaceholder' );
var i;
if( aBitmapPlaceholderSet )
{
for( i = 0; i < aBitmapPlaceholderSet.length; ++i )
{
sId = aBitmapPlaceholderSet[i].getAttribute( 'id' );
var sBitmapChecksum = sId.substring( 'bitmap-placeholder'.length + 1, sId.length - 1 );
sId = 'embedded-bitmap(' + sBitmapChecksum + ')';
aBitmapElemSet[i] = theDocument.getElementById( sId );
if( aBitmapElemSet[i] )
{
aBitmapCloneSet[i] = aBitmapElemSet[i].cloneNode( true );
}
else
{
log( 'AnimatedTextElement: ' + sId + ' not found.' );
}
}
}


this.sParagraphId = sId = aParagraphElement.getAttribute( 'id' );
aParagraphElement.removeAttribute( 'id' );
aAnimatableElement.setAttribute( 'id', sId +'.a' );
if( aBulletCharClone )
aBulletCharClone.removeAttribute( 'id' );
for( i = 0; i < aBitmapCloneSet.length; ++i )
{
if( aBitmapCloneSet[i] )
aBitmapCloneSet[i].removeAttribute( 'id' );
}

var sVisibilityAttr = aElement.getAttribute( 'visibility' );
if( !sVisibilityAttr )
sVisibilityAttr = 'inherit';
aAnimatableElement.setAttribute( 'visibility', sVisibilityAttr );
aParagraphElement.setAttribute( 'visibility', 'inherit' );
this.aGraphicGroupElement.setAttribute( 'visibility', 'inherit' );
if( aBulletCharElem )
aBulletCharElem.setAttribute( 'visibility', 'hidden' );
for( i = 0; i < aBitmapCloneSet.length; ++i )
{
if( aBitmapElemSet[i] )
aBitmapElemSet[i].setAttribute( 'visibility', 'hidden' );
}


aTextElement.appendChild( aParagraphElement );
aAnimatableElement.appendChild( aTextElement );

if( aBulletCharClone )
this.aGraphicGroupElement.appendChild( aBulletCharClone );
for( i = 0; i < aBitmapCloneSet.length; ++i )
{
if( aBitmapCloneSet[i] )
this.aGraphicGroupElement.appendChild( aBitmapCloneSet[i] );
}
aAnimatableElement.appendChild( this.aGraphicGroupElement );
aAnimatedElementGroup.appendChild( aAnimatableElement );

this.aParentTextElement = aElement.parentNode;
this.aParagraphElement = aElement;
this.aAnimatedElementGroup = aAnimatedElementGroup;
this.nRunningAnimations = 0;

this.aHyperlinkIdSet = [];
var aHyperlinkElementSet = getElementsByClassName( this.aParagraphElement, 'UrlField' );
var sHyperlinkId;
for( i = 0; i < aHyperlinkElementSet.length; ++i )
{
sHyperlinkId = aHyperlinkElementSet[i].getAttribute( 'id' );
if( sHyperlinkId )
this.aHyperlinkIdSet.push( sHyperlinkId );
else
log( 'error: AnimatedTextElement constructor: hyperlink element has no id' );
}

AnimatedTextElement.superclass.constructor.call( this, aAnimatableElement, aEventMultiplexer );

}
extend( AnimatedTextElement, AnimatedElement );


AnimatedTextElement.prototype.setToElement = function( aElement )
{
var bRet = AnimatedTextElement.superclass.setToElement.call( this, aElement );
if( bRet )
{
this.aGraphicGroupElement = getElementByClassName( this.aActiveElement, 'GraphicGroup' );
}
return ( bRet && this.aGraphicGroupElement );
};

AnimatedTextElement.prototype.notifySlideStart = function( aSlideShowContext )
{
DBGLOG( 'AnimatedTextElement.notifySlideStart' );
AnimatedTextElement.superclass.notifySlideStart.call( this, aSlideShowContext );
this.aGraphicGroupElement = getElementByClassName( this.aActiveElement, 'GraphicGroup' );
this.restoreBaseTextParagraph();
};

AnimatedTextElement.prototype.notifySlideEnd = function()
{
DBGLOG( 'AnimatedTextElement.notifySlideEnd' );
this.aGraphicGroupElement.setAttribute( 'visibility', 'inherit' );
};

AnimatedTextElement.prototype.restoreBaseTextParagraph = function()
{
var aActiveParagraphElement = this.aActiveElement.firstElementChild.firstElementChild;
if( aActiveParagraphElement )
{
var sVisibilityAttr = this.aActiveElement.getAttribute( 'visibility' );
if( !sVisibilityAttr || ( sVisibilityAttr === 'visible' ) )
sVisibilityAttr = 'inherit';
if( sVisibilityAttr === 'inherit' )
this.aGraphicGroupElement.setAttribute( 'visibility', 'visible' );
else
this.aGraphicGroupElement.setAttribute( 'visibility', 'hidden' );

var aParagraphClone = aActiveParagraphElement.cloneNode( true );
aParagraphClone.setAttribute( 'id', this.sParagraphId );
aParagraphClone.setAttribute( 'visibility', sVisibilityAttr );
this.aParentTextElement.replaceChild( aParagraphClone, this.aParagraphElement );
this.aParagraphElement = aParagraphClone;


var aEventMultiplexer = this.aSlideShowContext.aEventMultiplexer;
var aHyperlinkIdSet = this.aHyperlinkIdSet;
var aHyperlinkElementSet = getElementsByClassName( this.aParagraphElement, 'UrlField' );
var i = 0;
for( ; i < aHyperlinkIdSet.length; ++i )
{
aEventMultiplexer.notifyElementChangedEvent( aHyperlinkIdSet[i], aHyperlinkElementSet[i] );
}
}
this.aActiveElement.setAttribute( 'visibility', 'hidden' );
};

AnimatedTextElement.prototype.notifyAnimationStart = function()
{
DBGLOG( 'AnimatedTextElement.notifyAnimationStart' );
if( this.nRunningAnimations === 0 )
{
var sVisibilityAttr = this.aParagraphElement.getAttribute( 'visibility' );
if( !sVisibilityAttr )
sVisibilityAttr = 'inherit';
this.aActiveElement.setAttribute( 'visibility', sVisibilityAttr );
this.aGraphicGroupElement.setAttribute( 'visibility', 'inherit' );
this.aParagraphElement.setAttribute( 'visibility', 'hidden' );
}
++this.nRunningAnimations;
};

AnimatedTextElement.prototype.notifyAnimationEnd = function()
{
DBGLOG( 'AnimatedTextElement.notifyAnimationEnd' );
--this.nRunningAnimations;
if( this.nRunningAnimations === 0 )
{
this.restoreBaseTextParagraph();
}
};

AnimatedTextElement.prototype.saveState = function( nAnimationNodeId )
{
if( this.nRunningAnimations === 0 )
{
var sVisibilityAttr = this.aParagraphElement.getAttribute( 'visibility' );
this.aActiveElement.setAttribute( 'visibility', sVisibilityAttr );
this.aGraphicGroupElement.setAttribute( 'visibility', 'inherit' );
}
AnimatedTextElement.superclass.saveState.call( this, nAnimationNodeId );
};

AnimatedTextElement.prototype.restoreState = function( nAnimationNodeId )
{
var bRet = AnimatedTextElement.superclass.restoreState.call( this, nAnimationNodeId );
if( bRet )
this.restoreBaseTextParagraph();
return bRet;
};


function SlideTransition( aAnimationsRootElement, aSlideId )
{
this.sSlideId = aSlideId;
this.bIsValid = false;
this.eTransitionType = undefined;
this.eTransitionSubType = undefined;
this.bReverseDirection = false;
this.eTransitionMode = TRANSITION_MODE_IN;
this.sFadeColor = null;
this.aDuration = null;
this.nMinFrameCount = undefined;

if( aAnimationsRootElement )
{
if( aAnimationsRootElement.firstElementChild &&
( aAnimationsRootElement.firstElementChild.getAttributeNS( NSS['smil'], 'begin' ) === (this.sSlideId + '.begin') ) )
{
var aTransitionFilterElement = aAnimationsRootElement.firstElementChild.firstElementChild;
if( aTransitionFilterElement && ( aTransitionFilterElement.localName === 'transitionFilter' ) )
{
this.aElement = aTransitionFilterElement;
this.parseElement();
}
aAnimationsRootElement.removeChild( aAnimationsRootElement.firstElementChild );
}
}
}

SlideTransition.prototype.createSlideTransition = function( aLeavingSlide, aEnteringSlide )
{
if( !this.isValid() )
return null;
if( this.eTransitionType == 0 )
return null;

if( !aEnteringSlide )
{
log( 'SlideTransition.createSlideTransition: invalid entering slide.' );
return null;
}

var aTransitionInfo = aTransitionInfoTable[this.eTransitionType][this.eTransitionSubType];
var eTransitionClass = aTransitionInfo['class'];

switch( eTransitionClass )
{
default:
case TRANSITION_INVALID:
log( 'SlideTransition.createSlideTransition: transition class: TRANSITION_INVALID' );
return null;

case TRANSITION_CLIP_POLYPOLYGON:
var aParametricPolyPolygon
= createClipPolyPolygon( this.eTransitionType, this.eTransitionSubType );
return new ClippedSlideChange( aLeavingSlide, aEnteringSlide, aParametricPolyPolygon,
aTransitionInfo, this.isDirectionForward() );

case TRANSITION_SPECIAL:
switch( this.eTransitionType )
{
default:
log( 'SlideTransition.createSlideTransition: ' +
'transition class: TRANSITION_SPECIAL, ' +
'unknown transition type: ' + this.eTransitionType );
return null;

case PUSHWIPE_TRANSITION:
{
var aDirection = null;
switch( this.eTransitionSubType )
{
default:
log( 'SlideTransition.createSlideTransition: ' +
'transition type: PUSHWIPE_TRANSITION, ' +
'unknown transition subtype: ' + this.eTransitionSubType );
return null;
case FROMTOP_TRANS_SUBTYPE:
aDirection = { x: 0.0, y: 1.0 };
break;
case FROMBOTTOM_TRANS_SUBTYPE:
aDirection = { x: 0.0, y: -1.0 };
break;
case FROMLEFT_TRANS_SUBTYPE:
aDirection = { x: 1.0, y: 0.0 };
break;
case FROMRIGHT_TRANS_SUBTYPE:
aDirection = { x: -1.0, y: 0.0 };
break;
}
return new MovingSlideChange( aLeavingSlide, aEnteringSlide, aDirection, aDirection );
}

case SLIDEWIPE_TRANSITION:
{
var aInDirection = null;
switch( this.eTransitionSubType )
{
default:
log( 'SlideTransition.createSlideTransition: ' +
'transition type: SLIDEWIPE_TRANSITION, ' +
'unknown transition subtype: ' + this.eTransitionSubType );
return null;
case FROMTOP_TRANS_SUBTYPE:
aInDirection = { x: 0.0, y: 1.0 };
break;
case FROMBOTTOM_TRANS_SUBTYPE:
aInDirection = { x: 0.0, y: -1.0 };
break;
case FROMLEFT_TRANS_SUBTYPE:
aInDirection = { x: 1.0, y: 0.0 };
break;
case FROMRIGHT_TRANS_SUBTYPE:
aInDirection = { x: -1.0, y: 0.0 };
break;
}
var aNoDirection = { x: 0.0, y: 0.0 };
if( !this.bReverseDirection )
{
return new MovingSlideChange( aLeavingSlide, aEnteringSlide, aNoDirection, aInDirection );
}
else
{
return new MovingSlideChange( aLeavingSlide, aEnteringSlide, aInDirection, aNoDirection );
}
}

case FADE_TRANSITION:
switch( this.eTransitionSubType )
{
default:
log( 'SlideTransition.createSlideTransition: ' +
'transition type: FADE_TRANSITION, ' +
'unknown transition subtype: ' + this.eTransitionSubType );
return null;
case CROSSFADE_TRANS_SUBTYPE:
return new FadingSlideChange( aLeavingSlide, aEnteringSlide );
case FADEOVERCOLOR_TRANS_SUBTYPE:
return new FadingOverColorSlideChange( aLeavingSlide, aEnteringSlide, this.getFadeColor() );
}
}
}
};

SlideTransition.prototype.parseElement = function()
{
this.bIsValid = true;
var aAnimElem = this.aElement;

this.eTransitionType = undefined;
var sTypeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'type' );
if( sTypeAttr && aTransitionTypeInMap[ sTypeAttr ] )
{
this.eTransitionType = aTransitionTypeInMap[ sTypeAttr ];
}
else
{
this.bIsValid = false;
log( 'SlideTransition.parseElement: transition type not valid: ' + sTypeAttr );
}

this.eTransitionSubType = undefined;
var sSubTypeAttr = aAnimElem.getAttributeNS( NSS['smil'], 'subtype' );
if( sSubTypeAttr === null )
sSubTypeAttr = 'default';
if( sSubTypeAttr && ( aTransitionSubtypeInMap[ sSubTypeAttr ] !== undefined ) )
{
this.eTransitionSubType = aTransitionSubtypeInMap[ sSubTypeAttr ];
}
else
{
this.bIsValid = false;
log( 'SlideTransition.parseElement: transition subtype not valid: ' + sSubTypeAttr );
}

if( this.bIsValid && aTransitionInfoTable[this.eTransitionType][this.eTransitionSubType] === undefined )
{
this.bIsValid = false;
log( 'SlideTransition.parseElement: transition not valid: type: ' + sTypeAttr + ' subtype: ' + sSubTypeAttr );
}

this.bReverseDirection = false;
var sDirectionAttr = aAnimElem.getAttributeNS( NSS['smil'], 'direction' );
if( sDirectionAttr == 'reverse' )
this.bReverseDirection = true;

this.sFadeColor = null;
if( this.eTransitionType == FADE_TRANSITION &&
( this.eTransitionSubType == FADEFROMCOLOR_TRANS_SUBTYPE ||
this.eTransitionSubType == FADEOVERCOLOR_TRANS_SUBTYPE ||
this.eTransitionSubType == FADETOCOLOR_TRANS_SUBTYPE ) )
{
var sColorAttr = aAnimElem.getAttributeNS( NSS['smil'], 'fadeColor' );
if( sColorAttr )
this.sFadeColor = sColorAttr;
else
this.sFadeColor='#000000';
}


this.aDuration = null;
var sDurAttr = aAnimElem.getAttributeNS( NSS['smil'], 'dur' );
this.aDuration = new Duration( sDurAttr );
if( !this.aDuration.isSet() )
{
this.aDuration = new Duration( null ); // duration == 0.0
}

this.nMinFrameCount = ( this.getDuration().isValue() )
? ( this.getDuration().getValue() * MINIMUM_FRAMES_PER_SECONDS )
: MINIMUM_FRAMES_PER_SECONDS;
if( this.nMinFrameCount < 1.0 )
this.nMinFrameCount = 1;
else if( this.nMinFrameCount > MINIMUM_FRAMES_PER_SECONDS )
this.nMinFrameCount = MINIMUM_FRAMES_PER_SECONDS;

};

SlideTransition.prototype.isValid = function()
{
return this.bIsValid;
};

SlideTransition.prototype.getTransitionType = function()
{
return this.eTransitionType;
};

SlideTransition.prototype.getTransitionSubType = function()
{
return this.eTransitionSubType;
};

SlideTransition.prototype.getTransitionMode = function()
{
return this.eTransitionMode;
};

SlideTransition.prototype.getFadeColor = function()
{
return this.sFadeColor;
};

SlideTransition.prototype.isDirectionForward = function()
{
return !this.bReverseDirection;
};

SlideTransition.prototype.getDuration = function()
{
return this.aDuration;
};

SlideTransition.prototype.getMinFrameCount = function()
{
return this.nMinFrameCount;
};

SlideTransition.prototype.info = function()
{

var sInfo ='slide transition <' + this.sSlideId + '>: ';
sInfo += ';  type: ' + getKeyByValue(aTransitionTypeInMap, this.getTransitionType());

sInfo += ';  subtype: ' + getKeyByValue(aTransitionSubtypeInMap, this.getTransitionSubType());

if( !this.isDirectionForward() )
sInfo += ';  direction: reverse';

sInfo += '; mode: ' + aTransitionModeOutMap[ this.getTransitionMode() ];

if( this.getDuration() )
sInfo += '; duration: ' + this.getDuration().info();

return sInfo;
};


function SlideAnimations( aSlideShowContext )
{
this.aContext = new NodeContext( aSlideShowContext );
this.aAnimationNodeMap = {};
this.aAnimatedElementMap = {};
this.aSourceEventElementMap = {};
this.aNextEffectEventArray = new NextEffectEventArray();
this.aInteractiveAnimationSequenceMap = {};
this.aEventMultiplexer = new EventMultiplexer( aSlideShowContext.aTimerEventQueue );
this.aRootNode = null;
this.bElementsParsed = false;

this.aContext.aAnimationNodeMap = this.aAnimationNodeMap;
this.aContext.aAnimatedElementMap = this.aAnimatedElementMap;
this.aContext.aSourceEventElementMap = this.aSourceEventElementMap;

this.aEventMultiplexer.registerMouseClickHandler( document, 100 );
}


SlideAnimations.prototype.importAnimations = function( aAnimationRootElement )
{
if( !aAnimationRootElement )
return false;

this.aRootNode = createAnimationTree( aAnimationRootElement, this.aContext );

return ( this.aRootNode ? true : false );
};

SlideAnimations.prototype.parseElements = function()
{
if( !this.aRootNode )
return false;

if( !this.aRootNode.parseElement() )
return false;
else
this.bElementsParsed = true;
};

SlideAnimations.prototype.elementsParsed = function()
{
return this.bElementsParsed;
};

SlideAnimations.prototype.isFirstRun = function()
{
return this.aContext.bFirstRun;
};

SlideAnimations.prototype.isAnimated = function()
{
if( !this.bElementsParsed )
return false;

return this.aRootNode.hasPendingAnimation();
};

SlideAnimations.prototype.start = function()
{
if( !this.bElementsParsed )
return false;

this.chargeSourceEvents();
this.chargeInterAnimEvents();

aSlideShow.setSlideEvents( this.aNextEffectEventArray,
this.aInteractiveAnimationSequenceMap,
this.aEventMultiplexer );

if( this.aContext.bFirstRun == undefined )
this.aContext.bFirstRun = true;
else if( this.aContext.bFirstRun )
this.aContext.bFirstRun = false;

if( !this.aRootNode.init() )
return false;

return this.aRootNode.resolve();
};

SlideAnimations.prototype.end = function( bLeftEffectsSkipped )
{
if( !this.bElementsParsed )
return; // no animations there

this.aRootNode.deactivate();
this.aRootNode.end();

if( bLeftEffectsSkipped && this.isFirstRun() )
{
this.aContext.bFirstRun = undefined;
}
else if( this.isFirstRun() )
{
this.aContext.bFirstRun = false;
}

};

SlideAnimations.prototype.dispose = function()
{
if( this.aRootNode )
{
this.aRootNode.dispose();
}
};

SlideAnimations.prototype.clearNextEffectEvents = function()
{
ANIMDBG.print( 'SlideAnimations.clearNextEffectEvents: current slide: ' + nCurSlide );
this.aNextEffectEventArray.clear();
this.aContext.bFirstRun = undefined;
};

SlideAnimations.prototype.chargeSourceEvents = function()
{
for( var id in this.aSourceEventElementMap )
{
this.aSourceEventElementMap[id].charge();
}
};

SlideAnimations.prototype.chargeInterAnimEvents = function()
{
for( var id in this.aInteractiveAnimationSequenceMap )
{
this.aInteractiveAnimationSequenceMap[id].chargeEvents();
}
};


function Event()
{
this.nId = Event.getUniqueId();
}


Event.CURR_UNIQUE_ID = 0;

Event.getUniqueId = function()
{
++Event.CURR_UNIQUE_ID;
return Event.CURR_UNIQUE_ID;
};

Event.prototype.getId = function()
{
return this.nId;
};


function DelayEvent( aFunctor, nTimeout )
{
DelayEvent.superclass.constructor.call( this );

this.aFunctor = aFunctor;
this.nTimeout = nTimeout;
this.bWasFired = false;
}
extend( DelayEvent, Event );


DelayEvent.prototype.fire = function()
{
assert( this.isCharged(), 'DelayEvent.fire: assertion isCharged failed' );

this.bWasFired = true;
this.aFunctor();
return true;
};

DelayEvent.prototype.isCharged = function()
{
return !this.bWasFired;
};

DelayEvent.prototype.getActivationTime = function( nCurrentTime )
{
return ( this.nTimeout + nCurrentTime );
};

DelayEvent.prototype.dispose = function()
{
if( this.isCharged() )
this.bWasFired = true;
};

DelayEvent.prototype.charge = function()
{
if( !this.isCharged() )
this.bWasFired = false;
};


function WakeupEvent( aTimer, aActivityQueue )
{
WakeupEvent.superclass.constructor.call( this );

this.aTimer = new ElapsedTime( aTimer );
this.nNextTime = 0.0;
this.aActivity = null;
this.aActivityQueue = aActivityQueue;
}
extend( WakeupEvent, Event );


WakeupEvent.prototype.clone = function()
{
var aWakeupEvent = new WakeupEvent( this.aTimer.getTimeBase(), this.aActivityQueue );
aWakeupEvent.nNextTime = this.nNextTime;
aWakeupEvent.aActivity = this.aActivity;
return aWakeupEvent;
};

WakeupEvent.prototype.dispose = function()
{
this.aActivity = null;
};

WakeupEvent.prototype.fire = function()
{
if( !this.aActivity )
return false;

return this.aActivityQueue.addActivity( this.aActivity );
};

WakeupEvent.prototype.isCharged = function()
{
return true;
};

WakeupEvent.prototype.getActivationTime = function( nCurrentTime )
{
var nElapsedTime = this.aTimer.getElapsedTime();

return Math.max( nCurrentTime, nCurrentTime - nElapsedTime + this.nNextTime );
};

WakeupEvent.prototype.start = function()
{
this.aTimer.reset();
};

WakeupEvent.prototype.setNextTimeout = function( nNextTime )
{
this.nNextTime = nNextTime;
};

WakeupEvent.prototype.setActivity = function( aActivity )
{
this.aActivity = aActivity;
};


function makeEvent( aFunctor )
{
return new DelayEvent( aFunctor, 0.0 );
}


function makeDelay( aFunctor, nTimeout )
{
return new DelayEvent( aFunctor, nTimeout );
}


function registerEvent( nNodeId, aTiming, aEvent, aNodeContext )
{
var aSlideShowContext = aNodeContext.aContext;
var eTimingType = aTiming.getType();

registerEvent.DBG( aTiming );

if( eTimingType == OFFSET_TIMING )
{
aSlideShowContext.aTimerEventQueue.addEvent( aEvent );
}
else if ( aNodeContext.bFirstRun )
{
var aEventMultiplexer = aSlideShowContext.aEventMultiplexer;
if( !aEventMultiplexer )
{
log( 'registerEvent: event multiplexer not initialized' );
return;
}
var aNextEffectEventArray = aSlideShowContext.aNextEffectEventArray;
if( !aNextEffectEventArray )
{
log( 'registerEvent: next effect event array not initialized' );
return;
}
var aInteractiveAnimationSequenceMap =
aSlideShowContext.aInteractiveAnimationSequenceMap;
if( !aInteractiveAnimationSequenceMap )
{
log( 'registerEvent: interactive animation sequence map not initialized' );
return;
}

switch( eTimingType )
{
case EVENT_TIMING:
var eEventType = aTiming.getEventType();
var sEventBaseElemId = aTiming.getEventBaseElementId();
if( sEventBaseElemId )
{
var aEventBaseElem = document.getElementById( sEventBaseElemId );
if( !aEventBaseElem )
{
log( 'generateEvent: EVENT_TIMING: event base element not found: ' + sEventBaseElemId );
return;
}
var aSourceEventElement = aNodeContext.makeSourceEventElement( sEventBaseElemId, aEventBaseElem );

if( !aInteractiveAnimationSequenceMap[ nNodeId ] )
{
aInteractiveAnimationSequenceMap[ nNodeId ] = new InteractiveAnimationSequence(nNodeId);
}

var bEventRegistered = false;
switch( eEventType )
{
case EVENT_TRIGGER_ON_CLICK:
aEventMultiplexer.registerEvent( eEventType, aSourceEventElement.getId(), aEvent );
aEventMultiplexer.registerRewindedEffectHandler( aSourceEventElement.getId(),
bind2( aSourceEventElement.charge, aSourceEventElement ) );
bEventRegistered = true;
break;
default:
log( 'generateEvent: not handled event type: ' + eEventType );
}
if( bEventRegistered )
{
var aStartEvent = aInteractiveAnimationSequenceMap[ nNodeId ].getStartEvent();
var aEndEvent = aInteractiveAnimationSequenceMap[ nNodeId ].getEndEvent();
aEventMultiplexer.registerEvent( eEventType, aSourceEventElement.getId(), aStartEvent );
aEventMultiplexer.registerEvent( EVENT_TRIGGER_END_EVENT, nNodeId, aEndEvent );
aEventMultiplexer.registerRewindedEffectHandler(
nNodeId,
bind2( InteractiveAnimationSequence.prototype.chargeEvents,
aInteractiveAnimationSequenceMap[ nNodeId ] )
);
}
}
else  // no base event element present
{
switch( eEventType )
{
case EVENT_TRIGGER_ON_NEXT_EFFECT:
aNextEffectEventArray.appendEvent( aEvent );
break;
default:
log( 'generateEvent: not handled event type: ' + eEventType );
}
}
break;
case SYNCBASE_TIMING:
eEventType = aTiming.getEventType();
sEventBaseElemId = aTiming.getEventBaseElementId();
if( sEventBaseElemId )
{
var aAnimationNode = aNodeContext.aAnimationNodeMap[ sEventBaseElemId ];
if( !aAnimationNode )
{
log( 'generateEvent: SYNCBASE_TIMING: event base element not found: ' + sEventBaseElemId );
return;
}
aEventMultiplexer.registerEvent( eEventType, aAnimationNode.getId(), aEvent );
}
else
{
log( 'generateEvent: SYNCBASE_TIMING: event base element not specified' );
}
break;
default:
log( 'generateEvent: not handled timing type: ' + eTimingType );
}
}
}

registerEvent.DEBUG = aRegisterEventDebugPrinter.isEnabled();

registerEvent.DBG = function( aTiming, nTime )
{
if( registerEvent.DEBUG )
{
aRegisterEventDebugPrinter.print( 'registerEvent( timing: ' + aTiming.info() + ' )', nTime );
}
};


function SourceEventElement( sId, aElement, aEventMultiplexer )
{
this.sId = sId;
this.aElement = aElement;
this.aEventMultiplexer = aEventMultiplexer;

this.aEventMultiplexer.registerMouseClickHandler( this, 1000 );

this.bClickHandled = false;
this.bIsPointerOver = false;
this.aElement.addEventListener( 'mouseover', bind2( SourceEventElement.prototype.onMouseEnter, this), false );
this.aElement.addEventListener( 'mouseout', bind2( SourceEventElement.prototype.onMouseLeave, this), false );
}

SourceEventElement.prototype.getId = function()
{
return this.sId;
};

SourceEventElement.prototype.onMouseEnter = function()
{
this.bIsPointerOver = true;
this.setPointerCursor();
};

SourceEventElement.prototype.onMouseLeave = function()
{
this.bIsPointerOver = false;
this.setDefaultCursor();
};

SourceEventElement.prototype.charge = function()
{
this.bClickHandled = false;
this.setPointerCursor();
};

SourceEventElement.prototype.handleClick = function( /*aMouseEvent*/ )
{
if( !this.bIsPointerOver ) return false;

if( this.bClickHandled )
return false;

this.aEventMultiplexer.notifyEvent( EVENT_TRIGGER_ON_CLICK, this.getId() );
aSlideShow.update();
this.bClickHandled = true;
this.setDefaultCursor();
return true;
};

SourceEventElement.prototype.setPointerCursor = function()
{
if( this.bClickHandled )
return;

this.aElement.setAttribute( 'style', 'cursor: pointer' );
};

SourceEventElement.prototype.setDefaultCursor = function()
{
this.aElement.setAttribute( 'style', 'cursor: default' );
};


function HyperlinkElement( sId, aEventMultiplexer )
{
var aElement = document.getElementById( sId );
if( !aElement )
{
log( 'error: HyperlinkElement: no element with id: <' + sId + '> found' );
return;
}
if( !aEventMultiplexer )
{
log( 'AnimatedElement constructor: event multiplexer is not valid' );
}

this.sId = sId;
this.aElement = aElement;
this.aEventMultiplexer = aEventMultiplexer;
this.nTargetSlideIndex = undefined;

this.sURL = getNSAttribute( 'xlink', this.aElement, 'href' );
if( this.sURL )
{
if( this.sURL[0] === '#' )
{
if( this.sURL.substr(1, 5) === 'Slide' )
{
var sSlideIndex = this.sURL.split( ' ' )[1];
this.nTargetSlideIndex = parseInt( sSlideIndex ) - 1;
}
}

this.aEventMultiplexer.registerElementChangedHandler( this.sId, bind2( HyperlinkElement.prototype.onElementChanged, this) );
this.aEventMultiplexer.registerMouseClickHandler( this, 1100 );

this.bIsPointerOver = false;
this.mouseEnterHandler = bind2( HyperlinkElement.prototype.onMouseEnter, this);
this.mouseLeaveHandler = bind2( HyperlinkElement.prototype.onMouseLeave, this);
this.aElement.addEventListener( 'mouseover', this.mouseEnterHandler, false );
this.aElement.addEventListener( 'mouseout', this.mouseLeaveHandler, false );
}
else
{
log( 'warning: HyperlinkElement(' + this.sId + '): url is empty' );
}
}

HyperlinkElement.prototype.onElementChanged = function( aElement )
{
if( !aElement )
{
log( 'error: HyperlinkElement: passed element is not valid' );
return;
}

if( this.sURL )
{
this.aElement.removeEventListener( 'mouseover', this.mouseEnterHandler, false );
this.aElement.removeEventListener( 'mouseout', this.mouseLeaveHandler, false );
this.aElement = aElement;
this.aElement.addEventListener( 'mouseover', this.mouseEnterHandler, false );
this.aElement.addEventListener( 'mouseout', this.mouseLeaveHandler, false );
}
};

HyperlinkElement.prototype.onMouseEnter = function()
{
this.bIsPointerOver = true;
this.setPointerCursor();
};

HyperlinkElement.prototype.onMouseLeave = function()
{
this.bIsPointerOver = false;
this.setDefaultCursor();
};

HyperlinkElement.prototype.handleClick = function( )
{
if( !this.bIsPointerOver ) return false;

if( this.nTargetSlideIndex !== undefined )
{
aSlideShow.displaySlide( this.nTargetSlideIndex, true );
}
else
{
var aWindowObject = document.defaultView;
if( aWindowObject )
{
aWindowObject.open( this.sURL, this.sId );
}
else
{
log( 'error: HyperlinkElement.handleClick: invalid window object.' );
}
}

return true;
};

HyperlinkElement.prototype.setPointerCursor = function()
{
if( this.bClickHandled )
return;

this.aElement.setAttribute( 'style', 'cursor: pointer' );
};

HyperlinkElement.prototype.setDefaultCursor = function()
{
this.aElement.setAttribute( 'style', 'cursor: default' );
};


function InteractiveAnimationSequence( nId )
{
this.nId = nId;
this.bIsRunning = false;
this.aStartEvent = null;
this.aEndEvent = null;
}

InteractiveAnimationSequence.prototype.getId = function()
{
return this.nId;
};

InteractiveAnimationSequence.prototype.getStartEvent = function()
{
if( !this.aStartEvent )
{
this.aStartEvent =
makeEvent( bind2( InteractiveAnimationSequence.prototype.start, this ) );
}
return this.aStartEvent;
};

InteractiveAnimationSequence.prototype.getEndEvent = function()
{
if( !this.aEndEvent )
{
this.aEndEvent =
makeEvent( bind2( InteractiveAnimationSequence.prototype.end, this ) );
}
return this.aEndEvent;
};

InteractiveAnimationSequence.prototype.chargeEvents = function()
{
if( this.aStartEvent )      this.aStartEvent.charge();
if( this.aEndEvent )        this.aEndEvent.charge();
};

InteractiveAnimationSequence.prototype.isRunning = function()
{
return this.bIsRunning;
};

InteractiveAnimationSequence.prototype.start = function()
{
aSlideShow.notifyInteractiveAnimationSequenceStart( this.getId() );
this.bIsRunning = true;
};

InteractiveAnimationSequence.prototype.end = function()
{
aSlideShow.notifyInteractiveAnimationSequenceEnd( this.getId() );
this.bIsRunning = false;
};


function PriorityEntry( aValue, nPriority )
{
this.aValue = aValue;
this.nPriority = nPriority;
}

PriorityEntry.compare = function( aLhsEntry, aRhsEntry )
{
if ( aLhsEntry.nPriority < aRhsEntry.nPriority )
{
return -1;
}
else if (aLhsEntry.nPriority > aRhsEntry.nPriority)
{
return 1;
}
else
{
return 0;
}
};


function EventMultiplexer( aTimerEventQueue )
{
this.nId = EventMultiplexer.getUniqueId();
this.aTimerEventQueue = aTimerEventQueue;
this.aEventMap = {};
this.aAnimationsEndHandler = null;
this.aSkipEffectEndHandlerSet = [];
this.aMouseClickHandlerSet = new PriorityQueue( PriorityEntry.compare );
this.aSkipEffectEvent = null;
this.aRewindCurrentEffectEvent = null;
this.aRewindLastEffectEvent = null;
this.aSkipInteractiveEffectEventSet = {};
this.aRewindRunningInteractiveEffectEventSet = {};
this.aRewindEndedInteractiveEffectEventSet = {};
this.aRewindedEffectHandlerSet = {};
this.aElementChangedHandlerSet = {};
}

EventMultiplexer.CURR_UNIQUE_ID = 0;

EventMultiplexer.getUniqueId = function()
{
++EventMultiplexer.CURR_UNIQUE_ID;
return EventMultiplexer.CURR_UNIQUE_ID;
};

EventMultiplexer.prototype.getId = function()
{
return this.nId;
};

EventMultiplexer.prototype.hasRegisteredMouseClickHandlers = function()
{
return !this.aMouseClickHandlerSet.isEmpty();
};

EventMultiplexer.prototype.registerMouseClickHandler = function( aHandler, nPriority )
{
var aHandlerEntry = new PriorityEntry( aHandler, nPriority );
this.aMouseClickHandlerSet.push( aHandlerEntry );
};

EventMultiplexer.prototype.notifyMouseClick = function( aMouseEvent )
{
var aMouseClickHandlerSet = this.aMouseClickHandlerSet.clone();
while( !aMouseClickHandlerSet.isEmpty() )
{
var aHandlerEntry = aMouseClickHandlerSet.top();
aMouseClickHandlerSet.pop();
if( aHandlerEntry.aValue.handleClick( aMouseEvent ) )
break;
}
};

EventMultiplexer.prototype.registerEvent = function( eEventType, aNotifierId, aEvent )
{
this.DBG( 'registerEvent', eEventType, aNotifierId );
if( !this.aEventMap[ eEventType ] )
{
this.aEventMap[ eEventType ] = {};
}
if( !this.aEventMap[ eEventType ][ aNotifierId ] )
{
this.aEventMap[ eEventType ][ aNotifierId ] = [];
}
this.aEventMap[ eEventType ][ aNotifierId ].push( aEvent );
};


EventMultiplexer.prototype.notifyEvent = function( eEventType, aNotifierId )
{
this.DBG( 'notifyEvent', eEventType, aNotifierId );
if( this.aEventMap[ eEventType ] )
{
if( this.aEventMap[ eEventType ][ aNotifierId ] )
{
var aEventArray = this.aEventMap[ eEventType ][ aNotifierId ];
var nSize = aEventArray.length;
for( var i = 0; i < nSize; ++i )
{
this.aTimerEventQueue.addEvent( aEventArray[i] );
}
}
}
};

EventMultiplexer.prototype.registerAnimationsEndHandler = function( aHandler )
{
this.aAnimationsEndHandler = aHandler;
};

EventMultiplexer.prototype.notifyAnimationsEndEvent = function()
{
if( this.aAnimationsEndHandler )
this.aAnimationsEndHandler();
};

EventMultiplexer.prototype.registerNextEffectEndHandler = function( aHandler )
{
this.aSkipEffectEndHandlerSet.push( aHandler );
};

EventMultiplexer.prototype.notifyNextEffectEndEvent = function()
{
var nSize = this.aSkipEffectEndHandlerSet.length;
for( var i = 0; i < nSize; ++i )
{
(this.aSkipEffectEndHandlerSet[i])();
}
this.aSkipEffectEndHandlerSet = [];
};

EventMultiplexer.prototype.registerSkipEffectEvent = function( aEvent )
{
this.aSkipEffectEvent = aEvent;
};

EventMultiplexer.prototype.notifySkipEffectEvent = function()
{
if( this.aSkipEffectEvent )
{
this.aTimerEventQueue.addEvent( this.aSkipEffectEvent );
this.aSkipEffectEvent = null;
}
};

EventMultiplexer.prototype.registerRewindCurrentEffectEvent = function( aEvent )
{
this.aRewindCurrentEffectEvent = aEvent;
};

EventMultiplexer.prototype.notifyRewindCurrentEffectEvent = function()
{
if( this.aRewindCurrentEffectEvent )
{
this.aTimerEventQueue.addEvent( this.aRewindCurrentEffectEvent );
this.aRewindCurrentEffectEvent = null;
}
};

EventMultiplexer.prototype.registerRewindLastEffectEvent = function( aEvent )
{
this.aRewindLastEffectEvent = aEvent;
};

EventMultiplexer.prototype.notifyRewindLastEffectEvent = function()
{
if( this.aRewindLastEffectEvent )
{
this.aTimerEventQueue.addEvent( this.aRewindLastEffectEvent );
this.aRewindLastEffectEvent = null;
}
};

EventMultiplexer.prototype.registerSkipInteractiveEffectEvent = function( nNotifierId, aEvent )
{
this.aSkipInteractiveEffectEventSet[ nNotifierId ] = aEvent;
};

EventMultiplexer.prototype.notifySkipInteractiveEffectEvent = function( nNotifierId )
{
if( this.aSkipInteractiveEffectEventSet[ nNotifierId ] )
{
this.aTimerEventQueue.addEvent( this.aSkipInteractiveEffectEventSet[ nNotifierId ] );
}
};

EventMultiplexer.prototype.registerRewindRunningInteractiveEffectEvent = function( nNotifierId, aEvent )
{
this.aRewindRunningInteractiveEffectEventSet[ nNotifierId ] = aEvent;
};

EventMultiplexer.prototype.notifyRewindRunningInteractiveEffectEvent = function( nNotifierId )
{
if( this.aRewindRunningInteractiveEffectEventSet[ nNotifierId ] )
{
this.aTimerEventQueue.addEvent( this.aRewindRunningInteractiveEffectEventSet[ nNotifierId ] );
}
};

EventMultiplexer.prototype.registerRewindEndedInteractiveEffectEvent = function( nNotifierId, aEvent )
{
this.aRewindEndedInteractiveEffectEventSet[ nNotifierId ] = aEvent;
};

EventMultiplexer.prototype.notifyRewindEndedInteractiveEffectEvent = function( nNotifierId )
{
if( this.aRewindEndedInteractiveEffectEventSet[ nNotifierId ] )
{
this.aTimerEventQueue.addEvent( this.aRewindEndedInteractiveEffectEventSet[ nNotifierId ] );
}
};

EventMultiplexer.prototype.registerRewindedEffectHandler = function( aNotifierId, aHandler )
{
this.aRewindedEffectHandlerSet[ aNotifierId ] = aHandler;
};

EventMultiplexer.prototype.notifyRewindedEffectEvent = function( aNotifierId )
{
if( this.aRewindedEffectHandlerSet[ aNotifierId ] )
{
(this.aRewindedEffectHandlerSet[ aNotifierId ])();
}
};

EventMultiplexer.prototype.registerElementChangedHandler = function( aNotifierId, aHandler )
{
this.aElementChangedHandlerSet[ aNotifierId ] = aHandler;
};

EventMultiplexer.prototype.notifyElementChangedEvent = function( aNotifierId, aElement )
{
if( this.aElementChangedHandlerSet[ aNotifierId ] )
{
(this.aElementChangedHandlerSet[ aNotifierId ])( aElement );
}
};

EventMultiplexer.DEBUG = aEventMultiplexerDebugPrinter.isEnabled();

EventMultiplexer.prototype.DBG = function( sMethodName, eEventType, aNotifierId, nTime )
{
if( EventMultiplexer.DEBUG )
{
var sInfo = 'EventMultiplexer.' + sMethodName;
sInfo += '( type: ' + aEventTriggerOutMap[ eEventType ];
sInfo += ', notifier: ' + aNotifierId + ' )';
aEventMultiplexerDebugPrinter.print( sInfo, nTime );
}
};


var aInterpolatorHandler = {};

aInterpolatorHandler.getInterpolator = function( eCalcMode, eValueType, eValueSubtype )
{
var bHasSubtype = ( typeof( eValueSubtype ) === typeof( 0 ) );

if( !bHasSubtype && aInterpolatorHandler.aLerpFunctorMap[ eCalcMode ][ eValueType ] )
{
return aInterpolatorHandler.aLerpFunctorMap[ eCalcMode ][ eValueType ];
}
else if( bHasSubtype && aInterpolatorHandler.aLerpFunctorMap[ eCalcMode ][ eValueType ][ eValueSubtype ] )
{
return aInterpolatorHandler.aLerpFunctorMap[ eCalcMode ][ eValueType ][ eValueSubtype ];
}
else
{
log( 'aInterpolatorHandler.getInterpolator: not found any valid interpolator for calc mode '
+ aCalcModeOutMap[eCalcMode]  + ' and value type ' + aValueTypeOutMap[eValueType]  );
return null;
}
};

aInterpolatorHandler.aLerpFunctorMap = [];
aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_DISCRETE ] = [];
aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_LINEAR ] = [];


aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_LINEAR ][ NUMBER_PROPERTY ] =
function ( nFrom, nTo, nT )
{
return ( ( 1.0 - nT )* nFrom + nT * nTo );
};

aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_LINEAR ][ COLOR_PROPERTY ] = [];

aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_LINEAR ][ COLOR_PROPERTY ][ COLOR_SPACE_RGB ] =
function ( nFrom, nTo, nT )
{
return RGBColor.interpolate( nFrom, nTo, nT );
};

aInterpolatorHandler.aLerpFunctorMap[ CALC_MODE_LINEAR ][ COLOR_PROPERTY ][ COLOR_SPACE_HSL ] =
function ( bCCW  )
{
return  function ( nFrom, nTo, nT )
{
return HSLColor.interpolate( nFrom, nTo, nT, bCCW );
};
};


function KeyStopLerp( aValueList )
{
KeyStopLerp.validateInput( aValueList );

this.aKeyStopList = [];
this.nLastIndex = 0;
this.nKeyStopDistance = aValueList[1] - aValueList[0];
if( this.nKeyStopDistance <= 0 )
this.nKeyStopDistance = 0.001;

for( var i = 0; i < aValueList.length; ++i )
this.aKeyStopList.push( aValueList[i] );

this.nUpperBoundIndex = this.aKeyStopList.length - 2;
}


KeyStopLerp.validateInput = function( aValueList )
{
var nSize = aValueList.length;
assert( nSize > 1, 'KeyStopLerp.validateInput: key stop vector must have two entries or more' );

for( var i = 1; i < nSize; ++i )
{
if( aValueList[i-1] > aValueList[i] )
log( 'KeyStopLerp.validateInput: time vector is not sorted in ascending order!' );
}
};

KeyStopLerp.prototype.reset = function()
{
KeyStopLerp.validateInput( this.aKeyStopList );
this.nLastIndex = 0;
this.nKeyStopDistance = this.aKeyStopList[1] - this.aKeyStopList[0];
if( this.nKeyStopDistance <= 0 )
this.nKeyStopDistance = 0.001;

};

KeyStopLerp.prototype.lerp = function( nAlpha )
{
if( nAlpha > this.aKeyStopList[ this.nLastIndex + 1 ] )
{
do
{
var nIndex = this.nLastIndex + 1;
this.nLastIndex = clamp( nIndex, 0, this.nUpperBoundIndex );
this.nKeyStopDistance = this.aKeyStopList[ this.nLastIndex + 1 ] - this.aKeyStopList[ this.nLastIndex ];
}
while( ( this.nKeyStopDistance <= 0 ) && ( this.nLastIndex < this.nUpperBoundIndex ) );
}

var nRawLerp = ( nAlpha - this.aKeyStopList[ this.nLastIndex ] ) / this.nKeyStopDistance;

nRawLerp = clamp( nRawLerp, 0.0, 1.0 );

var aResult = {};
aResult.nIndex = this.nLastIndex;
aResult.nLerp = nRawLerp;

return aResult;
};

KeyStopLerp.prototype.lerp_ported = function( nAlpha )
{
if( ( this.aKeyStopList[ this.nLastIndex ] < nAlpha ) ||
( this.aKeyStopList[ this.nLastIndex + 1 ] >= nAlpha ) )
{
var i = 0;
for( ; i < this.aKeyStopList.length; ++i )
{
if( this.aKeyStopList[i] >= nAlpha )
break;
}
if( this.aKeyStopList[i] > nAlpha )
--i;
var nIndex = i - 1;
this.nLastIndex = clamp( nIndex, 0, this.aKeyStopList.length - 2 );
}

var nRawLerp = ( nAlpha - this.aKeyStopList[ this.nLastIndex ] ) /
( this.aKeyStopList[ this.nLastIndex+1 ] - this.aKeyStopList[ this.nLastIndex ] );

nRawLerp = clamp( nRawLerp, 0.0, 1.0 );

var aResult = {};
aResult.nIndex = this.nLastIndex;
aResult.nLerp = nRawLerp;

return aResult;
};


var aOperatorSetMap = [];

aOperatorSetMap[ NUMBER_PROPERTY ] = {};

aOperatorSetMap[ NUMBER_PROPERTY ].equal = function( a, b )
{
return ( a === b );
};

aOperatorSetMap[ NUMBER_PROPERTY ].add = function( a, b )
{
return ( a + b );
};

aOperatorSetMap[ NUMBER_PROPERTY ].scale = function( k, v )
{
return ( k * v );
};

aOperatorSetMap[ COLOR_PROPERTY ] = {};

aOperatorSetMap[ COLOR_PROPERTY ].equal = function( a, b )
{
return a.equal( b );
};

aOperatorSetMap[ COLOR_PROPERTY ].add = function( a, b )
{
var c = a.clone();
c.add( b );
return c;
};

aOperatorSetMap[ COLOR_PROPERTY ].scale = function( k, v )
{
var r = v.clone();
r.scale( k );
return r;
};

aOperatorSetMap[ ENUM_PROPERTY ] = {};

aOperatorSetMap[ ENUM_PROPERTY ].equal = function( a, b )
{
return ( a === b );
};

aOperatorSetMap[ ENUM_PROPERTY ].add = function( a )
{
return a;
};

aOperatorSetMap[ ENUM_PROPERTY ].scale = function( k, v )
{
return v;
};

aOperatorSetMap[ STRING_PROPERTY ] = aOperatorSetMap[ ENUM_PROPERTY ];

aOperatorSetMap[ BOOL_PROPERTY ] = aOperatorSetMap[ ENUM_PROPERTY ];


function ActivityParamSet()
{
this.aEndEvent = null;
this.aWakeupEvent = null;
this.aTimerEventQueue = null;
this.aActivityQueue = null;
this.nMinDuration = undefined;
this.nMinNumberOfFrames = MINIMUM_FRAMES_PER_SECONDS;
this.bAutoReverse = false;
this.nRepeatCount = 1.0;
this.nAccelerationFraction = 0.0;
this.nDecelerationFraction = 0.0;
this.nSlideWidth = undefined;
this.nSlideHeight = undefined;
this.aFormula = null;
this.aDiscreteTimes = [];
}


function AnimationActivity()
{
this.nId = AnimationActivity.getUniqueId();
}


AnimationActivity.CURR_UNIQUE_ID = 0;

AnimationActivity.getUniqueId = function()
{
++AnimationActivity.CURR_UNIQUE_ID;
return AnimationActivity.CURR_UNIQUE_ID;
};

AnimationActivity.prototype.getId = function()
{
return this.nId;
};


function SetActivity( aCommonParamSet, aAnimation, aToAttr  )
{
SetActivity.superclass.constructor.call( this );

this.aAnimation = aAnimation;
this.aTargetElement = null;
this.aEndEvent = aCommonParamSet.aEndEvent;
this.aTimerEventQueue = aCommonParamSet.aTimerEventQueue;
this.aToAttr = aToAttr;
this.bIsActive = true;
}
extend( SetActivity, AnimationActivity );


SetActivity.prototype.activate = function( aEndEvent )
{
this.aEndEvent = aEndEvent;
this.bIsActive = true;
};

SetActivity.prototype.dispose = function()
{
this.bIsActive = false;
if( this.aEndEvent && this.aEndEvent.isCharged() )
this.aEndEvent.dispose();
};

SetActivity.prototype.calcTimeLag = function()
{
return 0.0;
};

SetActivity.prototype.perform = function()
{
if( !this.isActive() )
return false;

this.bIsActive = false;

if( this.aAnimation && this.aTargetElement )
{
this.aAnimation.start( this.aTargetElement );
this.aAnimation.perform( this.aToAttr );
this.aAnimation.end();
}

if( this.aEndEvent )
this.aTimerEventQueue.addEvent( this.aEndEvent );

};

SetActivity.prototype.isActive = function()
{
return this.bIsActive;
};

SetActivity.prototype.dequeued = function()
{
};

SetActivity.prototype.end = function()
{
this.perform();
};

SetActivity.prototype.setTargets = function( aTargetElement )
{
assert( aTargetElement, 'SetActivity.setTargets: target element is not valid' );
this.aTargetElement = aTargetElement;
};


function ActivityBase( aCommonParamSet )
{
ActivityBase.superclass.constructor.call( this );

this.aTargetElement = null;
this.aEndEvent = aCommonParamSet.aEndEvent;
this.aTimerEventQueue = aCommonParamSet.aTimerEventQueue;
this.nRepeats = aCommonParamSet.nRepeatCount;
this.nAccelerationFraction = aCommonParamSet.nAccelerationFraction;
this.nDecelerationFraction = aCommonParamSet.nDecelerationFraction;
this.bAutoReverse = aCommonParamSet.bAutoReverse;

this.bFirstPerformCall = true;
this.bIsActive = true;

}
extend( ActivityBase, AnimationActivity );


ActivityBase.prototype.activate = function( aEndEvent )
{
this.aEndEvent = aEndEvent;
this.bFirstPerformCall = true;
this.bIsActive = true;
};

ActivityBase.prototype.dispose = function()
{
this.bIsActive = false;

if( this.aEndEvent )
this.aEndEvent.dispose();

this.aEndEvent = null;
};

ActivityBase.prototype.perform = function()
{
if( !this.isActive() )
return false; // no, early exit.

assert( !this.bFirstPerformCall, 'ActivityBase.perform: assertion (!this.FirstPerformCall) failed' );

return true;
};

ActivityBase.prototype.calcTimeLag = function()
{
if( this.isActive() && this.bFirstPerformCall )
{
this.bFirstPerformCall = false;

this.startAnimation();
}
return 0.0;
};

ActivityBase.prototype.isActive = function()
{
return this.bIsActive;
};

ActivityBase.prototype.isDisposed = function()
{
return ( !this.bIsActive && !this.aEndEvent );
};

ActivityBase.prototype.dequeued = function()
{
if( !this.isActive() )
this.endAnimation();
};

ActivityBase.prototype.setTargets = function( aTargetElement )
{
assert( aTargetElement, 'ActivityBase.setTargets: target element is not valid' );

this.aTargetElement = aTargetElement;
};

ActivityBase.prototype.startAnimation = function()
{
throw ( 'ActivityBase.startAnimation: abstract method invoked' );
};

ActivityBase.prototype.endAnimation = function()
{
throw ( 'ActivityBase.endAnimation: abstract method invoked' );
};

ActivityBase.prototype.endActivity = function()
{
this.bIsActive = false;

if( this.aEndEvent )
this.aTimerEventQueue.addEvent( this.aEndEvent );

this.aEndEvent = null;

};

ActivityBase.prototype.calcAcceleratedTime = function( nT )
{


nT = clamp( nT, 0.0, 1.0 );

if( ( this.nAccelerationFraction > 0.0 || this.nDecelerationFraction > 0.0 ) &&
( this.nAccelerationFraction + this.nDecelerationFraction <= 1.0 ) )
{
var nC = 1.0 - 0.5*this.nAccelerationFraction - 0.5*this.nDecelerationFraction;

var nTPrime = 0.0;

if( nT < this.nAccelerationFraction )
{
nTPrime += 0.5 * nT * nT / this.nAccelerationFraction; // partial first interval
}
else
{
nTPrime += 0.5 * this.nAccelerationFraction; // full first interval

if( nT <= ( 1.0 - this.nDecelerationFraction ) )
{
nTPrime += nT - this.nAccelerationFraction; // partial second interval
}
else
{
nTPrime += 1.0 - this.nAccelerationFraction - this.nDecelerationFraction; // full second interval

var nTRelative = nT - 1.0 + this.nDecelerationFraction;

nTPrime += nTRelative - 0.5*nTRelative*nTRelative / this.nDecelerationFraction;
}
}

nT = nTPrime / nC;

}
return nT;
};

ActivityBase.prototype.getEventQueue = function()
{
return this.aTimerEventQueue;
};

ActivityBase.prototype.getTargetElement = function()
{
return this.aTargetElement;
};

ActivityBase.prototype.isRepeatCountValid = function()
{
return !!this.nRepeats; // first ! convert to bool
};

ActivityBase.prototype.getRepeatCount = function()
{
return this.nRepeats;
};

ActivityBase.prototype.isAutoReverse = function()
{
return this.bAutoReverse;
};

ActivityBase.prototype.end = function()
{
if( !this.isActive() || this.isDisposed() )
return;

if( this.bFirstPerformCall )
{
this.bFirstPerformCall = false;
this.startAnimation();
}

this.performEnd();
this.endAnimation();
this.endActivity();
};

ActivityBase.prototype.performEnd = function()
{
throw ( 'ActivityBase.performEnd: abstract method invoked' );
};


function DiscreteActivityBase( aCommonParamSet )
{
DiscreteActivityBase.superclass.constructor.call( this, aCommonParamSet );

this.aOriginalWakeupEvent = aCommonParamSet.aWakeupEvent;
this.aOriginalWakeupEvent.setActivity( this );
this.aWakeupEvent = this.aOriginalWakeupEvent;
this.aWakeupEvent = aCommonParamSet.aWakeupEvent;
this.aDiscreteTimes = aCommonParamSet.aDiscreteTimes;
this.nMinSimpleDuration = aCommonParamSet.nMinDuration;
this.nCurrPerformCalls = 0;
}
extend( DiscreteActivityBase, ActivityBase );


DiscreteActivityBase.prototype.activate = function( aEndElement )
{
DiscreteActivityBase.superclass.activate.call( this, aEndElement );

this.aWakeupEvent = this.aOriginalWakeupEvent;
this.aWakeupEvent.setNextTimeout( 0 );
this.nCurrPerformCalls = 0;
};

DiscreteActivityBase.prototype.startAnimation = function()
{
this.aWakeupEvent.start();
};

DiscreteActivityBase.prototype.calcFrameIndex = function( nCurrCalls, nVectorSize )
{
if( this.isAutoReverse() )
{
var nFrameIndex = nCurrCalls % (2 * nVectorSize);

if( nFrameIndex >= nVectorSize )
nFrameIndex = 2*nVectorSize - nFrameIndex; // invert sweep

return nFrameIndex;
}
else
{
return nCurrCalls % nVectorSize;
}
};

DiscreteActivityBase.prototype.calcRepeatCount = function( nCurrCalls, nVectorSize )
{
if( this.isAutoReverse() )
{
return Math.floor( nCurrCalls / (2*nVectorSize) ); // we've got 2 cycles per repeat
}
else
{
return Math.floor( nCurrCalls / nVectorSize );
}
};

DiscreteActivityBase.prototype.performDiscreteHook = function( /*nFrame, nRepeatCount*/ )
{
throw ( 'DiscreteActivityBase.performDiscreteHook: abstract method invoked' );
};

DiscreteActivityBase.prototype.perform = function()
{
if( !SimpleContinuousActivityBase.superclass.perform.call( this ) )
return false; // done, we're ended

var nVectorSize = this.aDiscreteTimes.length;

var nFrameIndex = this.calcFrameIndex(this.nCurrPerformCalls, nVectorSize);
var nRepeatCount = this.calcRepeatCount( this.nCurrPerformCalls, nVectorSize );
this.performDiscreteHook( nFrameIndex, nRepeatCount );

++this.nCurrPerformCalls;

var nCurrRepeat = this.nCurrPerformCalls / nVectorSize;

if( this.isAutoReverse() )
nCurrRepeat /= 2;

if( !this.isRepeatCountValid() || nCurrRepeat < this.getRepeatCount() )
{


nFrameIndex = this.calcFrameIndex(this.nCurrPerformCalls, nVectorSize);
var nCurrentRepeatTime = this.aDiscreteTimes[nFrameIndex];
nRepeatCount = this.calcRepeatCount( this.nCurrPerformCalls, nVectorSize );
var nNextTimeout = this.nMinSimpleDuration * ( nRepeatCount + this.calcAcceleratedTime( nCurrentRepeatTime ) );
this.aWakeupEvent.setNextTimeout( nNextTimeout );

this.getEventQueue().addEvent( this.aWakeupEvent );
}
else
{
this.aWakeupEvent = null;

this.endActivity();
}

return false; // remove from queue, will be added back by the wakeup event.
};

DiscreteActivityBase.prototype.dispose = function()
{
if( this.aWakeupEvent )
this.aWakeupEvent.dispose();

this.aWakeupEvent = null;

DiscreteActivityBase.superclass.dispose.call(this);
};


function SimpleContinuousActivityBase( aCommonParamSet )
{
SimpleContinuousActivityBase.superclass.constructor.call( this, aCommonParamSet );

this.aTimer = new ElapsedTime( aCommonParamSet.aActivityQueue.getTimer() );
this.nMinSimpleDuration = aCommonParamSet.nMinDuration;
this.nMinNumberOfFrames = aCommonParamSet.nMinNumberOfFrames;
this.nCurrPerformCalls = 0;

}
extend( SimpleContinuousActivityBase, ActivityBase );


SimpleContinuousActivityBase.prototype.startAnimation = function()
{
this.aTimer.reset();
};

SimpleContinuousActivityBase.prototype.calcTimeLag = function()
{
SimpleContinuousActivityBase.superclass.calcTimeLag.call( this );

if( !this.isActive() )
return 0.0;

var nCurrElapsedTime = this.aTimer.getElapsedTime();


var nFractionElapsedTime = nCurrElapsedTime / this.nMinSimpleDuration;

var nFractionRequiredCalls = this.nCurrPerformCalls / this.nMinNumberOfFrames;


if( nFractionElapsedTime < nFractionRequiredCalls )
{
return 0.0;
}
else
{
return ( ( nFractionElapsedTime - nFractionRequiredCalls ) * this.nMinSimpleDuration );
}
};

SimpleContinuousActivityBase.prototype.perform = function()
{
if( !SimpleContinuousActivityBase.superclass.perform.call( this ) )
return false; // done, we're ended

var nCurrElapsedTime = this.aTimer.getElapsedTime();
var nT = nCurrElapsedTime / this.nMinSimpleDuration;


var bActivityEnding = false;

if( this.isRepeatCountValid() )
{

var nRepeatCount = this.getRepeatCount();
var nEffectiveRepeat = this.isAutoReverse() ? 2.0 * nRepeatCount : nRepeatCount;

if( nEffectiveRepeat <= nT )
{
bActivityEnding = true;

nT = nEffectiveRepeat;
}
}


var nRepeats;
var nRelativeSimpleTime;
if( this.isAutoReverse() )
{
nRepeats = Math.floor( nT );
var nFractionalActiveDuration =  nT - nRepeats;

if( nRepeats % 2 )
{
nRelativeSimpleTime = 1.0 - nFractionalActiveDuration;
}
else
{
nRelativeSimpleTime = nFractionalActiveDuration;
}

nRepeats /= 2;
}
else
{

nRepeats = Math.floor( nT );
nRelativeSimpleTime = nT - nRepeats;

if( this.isRepeatCountValid() && ( nRepeats >= this.getRepeatCount() ) )
{

nRelativeSimpleTime = 1.0;
nRepeats -= 1.0;
}
}


this.simplePerform( nRelativeSimpleTime, nRepeats );

if( bActivityEnding )
this.endActivity();

++this.nCurrPerformCalls;

return this.isActive();
};

SimpleContinuousActivityBase.prototype.simplePerform = function( /*nSimpleTime, nRepeatCount*/ )
{
throw ( 'SimpleContinuousActivityBase.simplePerform: abstract method invoked' );
};


function ContinuousKeyTimeActivityBase( aCommonParamSet )
{
var nSize = aCommonParamSet.aDiscreteTimes.length;
assert( nSize > 1,
'ContinuousKeyTimeActivityBase constructor: assertion (aDiscreteTimes.length > 1) failed' );

assert( aCommonParamSet.aDiscreteTimes[0] == 0.0,
'ContinuousKeyTimeActivityBase constructor: assertion (aDiscreteTimes.front() == 0.0) failed' );

assert( aCommonParamSet.aDiscreteTimes[ nSize - 1 ] <= 1.0,
'ContinuousKeyTimeActivityBase constructor: assertion (aDiscreteTimes.back() <= 1.0) failed' );

ContinuousKeyTimeActivityBase.superclass.constructor.call( this, aCommonParamSet );

this.aLerper = new KeyStopLerp( aCommonParamSet.aDiscreteTimes );
}
extend( ContinuousKeyTimeActivityBase, SimpleContinuousActivityBase );


ContinuousKeyTimeActivityBase.prototype.activate = function( aEndElement )
{
ContinuousKeyTimeActivityBase.superclass.activate.call( this, aEndElement );

this.aLerper.reset();
};

ContinuousKeyTimeActivityBase.prototype.performContinuousHook = function( /*nIndex, nFractionalIndex, nRepeatCount*/ )
{
throw ( 'ContinuousKeyTimeActivityBase.performContinuousHook: abstract method invoked' );
};

ContinuousKeyTimeActivityBase.prototype.simplePerform = function( nSimpleTime, nRepeatCount )
{
var nAlpha = this.calcAcceleratedTime( nSimpleTime );

var aLerpResult = this.aLerper.lerp( nAlpha );

this.performContinuousHook( aLerpResult.nIndex, aLerpResult.nLerp, nRepeatCount );
};


function ContinuousActivityBase( aCommonParamSet )
{
ContinuousActivityBase.superclass.constructor.call( this, aCommonParamSet );

}
extend( ContinuousActivityBase, SimpleContinuousActivityBase );


ContinuousActivityBase.prototype.performContinuousHook = function( /*nModifiedTime, nRepeatCount*/ )
{
throw ( 'ContinuousActivityBase.performContinuousHook: abstract method invoked' );
};

ContinuousActivityBase.prototype.simplePerform = function( nSimpleTime, nRepeatCount )
{
this.performContinuousHook( this.calcAcceleratedTime( nSimpleTime ), nRepeatCount );
};


function SimpleActivity( aCommonParamSet, aNumberAnimation, eDirection )
{
assert( ( eDirection == BACKWARD ) || ( eDirection == FORWARD ),
'SimpleActivity constructor: animation direction is not valid' );

assert( aNumberAnimation, 'SimpleActivity constructor: animation object is not valid' );

SimpleActivity.superclass.constructor.call( this, aCommonParamSet );

this.aAnimation = aNumberAnimation;
this.nDirection = ( eDirection == FORWARD ) ? 1.0 : 0.0;
}
extend( SimpleActivity, ContinuousActivityBase );


SimpleActivity.prototype.startAnimation = function()
{
if( this.isDisposed() || !this.aAnimation )
return;

ANIMDBG.print( 'SimpleActivity.startAnimation invoked' );
SimpleActivity.superclass.startAnimation.call( this );

this.aAnimation.start( this.getTargetElement() );
};

SimpleActivity.prototype.endAnimation = function()
{
if( this.aAnimation )
this.aAnimation.end();

};

SimpleActivity.prototype.performContinuousHook = function( nModifiedTime /*, nRepeatCount*/ )
{

if( this.isDisposed() || !this.aAnimation )
return;

var nT = 1.0 - this.nDirection + nModifiedTime * ( 2.0*this.nDirection - 1.0 );
this.aAnimation.perform( nT );
};

SimpleActivity.prototype.performEnd = function()
{
if( this.aAnimation )
this.aAnimation.perform( this.nDirection );
};


function FromToByActivityTemplate( BaseType ) // template parameter
{

function FromToByActivity( aFromValue, aToValue, aByValue,
aActivityParamSet, aAnimation,
aInterpolator, aOperatorSet, bAccumulate )
{
assert( aAnimation, 'FromToByActivity constructor: invalid animation object' );
assert( ( aToValue != undefined ) || ( aByValue != undefined ),
'FromToByActivity constructor: one of aToValue or aByValue must be valid' );

FromToByActivity.superclass.constructor.call( this, aActivityParamSet );

this.aFrom = aFromValue;
this.aTo = aToValue;
this.aBy = aByValue;
this.aStartValue = null;
this.aEndValue = null;
this.aPreviousValue = null;
this.aStartInterpolationValue = null;
this.aAnimation = aAnimation;
this.aInterpolator = aInterpolator;
this.equal = aOperatorSet.equal;
this.add = aOperatorSet.add;
this.scale = aOperatorSet.scale;
this.bDynamicStartValue = false;
this.nIteration = 0;
this.bCumulative = bAccumulate;
this.aFormula = aActivityParamSet.aFormula;
}
extend( FromToByActivity, BaseType );

FromToByActivity.prototype.initAnimatedElement = function()
{
if( this.aAnimation && this.aFrom )
{
var aValue = this.aFormula ? this.aFormula( this.aFrom ) : this.aFrom;
this.aAnimation.perform(aValue);
}
};

FromToByActivity.prototype.startAnimation = function()
{
if( this.isDisposed() || !this.aAnimation  )
{
log( 'FromToByActivity.startAnimation: activity disposed or not valid animation' );
return;
}

FromToByActivity.superclass.startAnimation.call( this );

this.aAnimation.start( this.getTargetElement() );


var aAnimationStartValue = this.aAnimation.getUnderlyingValue();

if( this.aFrom )
{
if( this.aTo )
{
this.aStartValue = this.aFrom;
this.aEndValue = this.aTo;
}
else if( this.aBy )
{
this.aStartValue = this.aFrom;

this.aEndValue = this.add( this.aStartValue, this.aBy );
}
}
else
{
this.aStartValue = aAnimationStartValue;
this.aStartInterpolationValue = this.aStartValue;

if( this.aTo )
{

this.bDynamicStartValue = true;
this.aPreviousValue = this.aStartValue;
this.aEndValue = this.aTo;
}
else if( this.aBy )
{
this.aStartValue = aAnimationStartValue;

this.aEndValue = this.add( this.aStartValue, this.aBy );
}
}

ANIMDBG.print( 'FromToByActivity.startAnimation: aStartValue = ' + this.aStartValue + ', aEndValue = ' + this.aEndValue );
};

FromToByActivity.prototype.endAnimation = function()
{
if( this.aAnimation )
this.aAnimation.end();
};

FromToByActivity.prototype.performContinuousHook = function( nModifiedTime, nRepeatCount )
{
if( this.isDisposed() || !this.aAnimation  )
{
log( 'FromToByActivity.performContinuousHook: activity disposed or not valid animation' );
return;
}


if( this.bDynamicStartValue )
{
if( this.nIteration != nRepeatCount )
{
this.nIteration = nRepeatCount;
this.aStartInterpolationValue =  this.aStartValue;
}
else
{
var aActualValue = this.aAnimation.getUnderlyingValue();
if( !this.equal( aActualValue, this.aPreviousValue ) )
this.aStartInterpolationValue = aActualValue;
}
}

var aValue = this.aInterpolator( this.aStartInterpolationValue,
this.aEndValue, nModifiedTime );

if( this.bCumulative && !this.bDynamicStartValue )
{
aValue = this.add( this.scale( nRepeatCount, this.aEndValue ), aValue );
}

aValue = this.aFormula ? this.aFormula( aValue ) : aValue;
this.aAnimation.perform( aValue );

if( this.bDynamicStartValue )
{
this.aPreviousValue = this.aAnimation.getUnderlyingValue();
}

};

FromToByActivity.prototype.performDiscreteHook = function( /*nFrame, nRepeatCount*/ )
{
if (this.isDisposed() || !this.aAnimation) {
log('FromToByActivity.performDiscreteHook: activity disposed or not valid animation');
return;
}
};

FromToByActivity.prototype.performEnd = function()
{
if( this.aAnimation )
{
var aValue = this.isAutoReverse() ? this.aStartValue : this.aEndValue;
aValue = this.aFormula ? this.aFormula( aValue ) : aValue;
this.aAnimation.perform( aValue );
}
};

FromToByActivity.prototype.dispose = function()
{
FromToByActivity.superclass.dispose.call( this );
};


return FromToByActivity;
}


var LinearFromToByActivity = instantiate( FromToByActivityTemplate, ContinuousActivityBase );
var DiscreteFromToByActivity = instantiate( FromToByActivityTemplate, DiscreteActivityBase );


function  ValueListActivityTemplate( BaseType ) // template parameter
{

function ValueListActivity( aValueList, aActivityParamSet,
aAnimation, aInterpolator,
aOperatorSet, bAccumulate )
{
assert( aAnimation, 'ValueListActivity constructor: invalid animation object' );
assert( aValueList.length != 0, 'ValueListActivity: value list is empty' );

ValueListActivity.superclass.constructor.call( this, aActivityParamSet );

this.aValueList = aValueList;
this.aAnimation = aAnimation;
this.aInterpolator = aInterpolator;
this.add = aOperatorSet.add;
this.scale = aOperatorSet.scale;
this.bCumulative = bAccumulate;
this.aLastValue = this.aValueList[ this.aValueList.length - 1 ];
this.aFormula = aActivityParamSet.aFormula;
}
extend( ValueListActivity, BaseType );

ValueListActivity.prototype.activate = function( aEndEvent )
{
ValueListActivity.superclass.activate.call( this, aEndEvent );
for( var i = 0; i < this.aValueList.length; ++i )
{
ANIMDBG.print( 'createValueListActivity: value[' + i + '] = ' + this.aValueList[i] );
}
};

ValueListActivity.prototype.initAnimatedElement = function()
{
if( this.aAnimation )
{
var aValue = this.aValueList[0];
aValue = this.aFormula ? this.aFormula( aValue ) : aValue;
this.aAnimation.perform(aValue);
}
};

ValueListActivity.prototype.startAnimation = function()
{
if( this.isDisposed() || !this.aAnimation  )
{
log( 'ValueListActivity.startAnimation: activity disposed or not valid animation' );
return;
}

ValueListActivity.superclass.startAnimation.call( this );

this.aAnimation.start( this.getTargetElement() );
};

ValueListActivity.prototype.endAnimation = function()
{
if( this.aAnimation )
this.aAnimation.end();
};

ValueListActivity.prototype.performContinuousHook = function( nIndex, nFractionalIndex, nRepeatCount )
{
if( this.isDisposed() || !this.aAnimation  )
{
log( 'ValueListActivity.performContinuousHook: activity disposed or not valid animation' );
return;
}

assert( ( nIndex + 1 ) < this.aValueList.length,
'ValueListActivity.performContinuousHook: assertion (nIndex + 1 < this.aValueList.length) failed' );


var aValue = this.aInterpolator( this.aValueList[ nIndex ],
this.aValueList[ nIndex+1 ],
nFractionalIndex );

if( this.bCumulative )
{
aValue = this.add( aValue, this.scale( nRepeatCount, this.aLastValue ) );
}

aValue = this.aFormula ? this.aFormula( aValue ) : aValue;
this.aAnimation.perform( aValue );
};

ValueListActivity.prototype.performDiscreteHook = function( nFrame, nRepeatCount )
{
if( this.isDisposed() || !this.aAnimation  )
{
log( 'ValueListActivity.performDiscreteHook: activity disposed or not valid animation' );
return;
}

assert( nFrame < this.aValueList.length,
'ValueListActivity.performDiscreteHook: assertion ( nFrame < this.aValueList.length) failed' );

var aValue = this.aValueList[nFrame];

if( this.bCumulative )
{
aValue = this.add( aValue, this.scale( nRepeatCount, this.aLastValue ) );
}

aValue = this.aFormula ? this.aFormula( aValue ) : aValue;
this.aAnimation.perform( aValue );
};

ValueListActivity.prototype.performEnd = function()
{
if( this.aAnimation )
{
var aValue = this.aFormula ? this.aFormula( this.aLastValue ) : this.aLastValue;
this.aAnimation.perform( aValue );
}
};

ValueListActivity.prototype.dispose = function()
{
ValueListActivity.superclass.dispose.call( this );
};


return ValueListActivity;
}


var LinearValueListActivity = instantiate( ValueListActivityTemplate, ContinuousKeyTimeActivityBase );
var DiscreteValueListActivity = instantiate( ValueListActivityTemplate, DiscreteActivityBase );


function createActivity( aActivityParamSet, aAnimationNode, aAnimation, aInterpolator )
{
var eCalcMode = aAnimationNode.getCalcMode();

var sAttributeName = aAnimationNode.getAttributeName();
var aAttributeProp = aAttributeMap[ sAttributeName ];

var eValueType = aAttributeProp[ 'type' ];
var eValueSubtype = aAttributeProp[ 'subtype' ];

if( ! aInterpolator )
{
aInterpolator = aInterpolatorHandler.getInterpolator( eCalcMode,
eValueType,
eValueSubtype );
}

var bAccumulate = ( aAnimationNode.getAccumulate() === ACCUMULATE_MODE_SUM )
&& !( eValueType === BOOL_PROPERTY ||
eValueType === STRING_PROPERTY ||
eValueType === ENUM_PROPERTY );

if( aAnimationNode.getFormula() )
{
var sFormula =  aAnimationNode.getFormula();
var reMath = /abs|sqrt|asin|acos|atan|sin|cos|tan|exp|log|min|max/g;
sFormula = sFormula.replace(reMath, 'Math.$&');
sFormula = sFormula.replace(/pi(?!\w)/g, 'Math.PI');
sFormula = sFormula.replace(/e(?!\w)/g, 'Math.E');
sFormula = sFormula.replace(/\$/g, '__PARAM0__');

var aAnimatedElement = aAnimationNode.getAnimatedElement();
var aBBox = aAnimatedElement.getBaseBBox();

var width = aBBox.width / aActivityParamSet.nSlideWidth;
var height = aBBox.height / aActivityParamSet.nSlideHeight;
var x = ( aBBox.x + aBBox.width / 2 ) / aActivityParamSet.nSlideWidth;
var y = ( aBBox.y + aBBox.height / 2 ) / aActivityParamSet.nSlideHeight;

aActivityParamSet.aFormula = function( __PARAM0__ ) {

return eval(sFormula);
};
}

aActivityParamSet.aDiscreteTimes = aAnimationNode.getKeyTimes();

var aValueSet = aAnimationNode.getValues();
var nValueSetSize = aValueSet.length;

if( nValueSetSize != 0 )
{

if( aActivityParamSet.aDiscreteTimes.length == 0 )
{
for( var i = 0; i < nValueSetSize; ++i )
aActivityParamSet.aDiscreteTimes[i].push( i / nValueSetSize );
}

switch( eCalcMode )
{
case CALC_MODE_DISCRETE:
aActivityParamSet.aWakeupEvent =
new WakeupEvent( aActivityParamSet.aTimerEventQueue.getTimer(),
aActivityParamSet.aActivityQueue );

return createValueListActivity( aActivityParamSet,
aAnimationNode,
aAnimation,
aInterpolator,
DiscreteValueListActivity,
bAccumulate,
eValueType );

default:
log( 'createActivity: unexpected calculation mode: ' + eCalcMode );
case CALC_MODE_PACED :
case CALC_MODE_SPLINE :
case CALC_MODE_LINEAR:
return createValueListActivity( aActivityParamSet,
aAnimationNode,
aAnimation,
aInterpolator,
LinearValueListActivity,
bAccumulate,
eValueType );
}
}
else
{
switch( eCalcMode )
{
case CALC_MODE_DISCRETE:
log( 'createActivity: discrete calculation case not yet implemented' );
aActivityParamSet.aWakeupEvent =
new WakeupEvent( aActivityParamSet.aTimerEventQueue.getTimer(),
aActivityParamSet.aActivityQueue );
return createFromToByActivity(  aActivityParamSet,
aAnimationNode,
aAnimation,
aInterpolator,
DiscreteFromToByActivity,
bAccumulate,
eValueType );

default:
log( 'createActivity: unexpected calculation mode: ' + eCalcMode );
case CALC_MODE_PACED :
case CALC_MODE_SPLINE :
case CALC_MODE_LINEAR:
return createFromToByActivity(  aActivityParamSet,
aAnimationNode,
aAnimation,
aInterpolator,
LinearFromToByActivity,
bAccumulate,
eValueType );
}
}
}


function createValueListActivity( aActivityParamSet, aAnimationNode, aAnimation,
aInterpolator, ClassTemplateInstance, bAccumulate, eValueType )
{
var aAnimatedElement = aAnimationNode.getAnimatedElement();
var aOperatorSet = aOperatorSetMap[ eValueType ];
assert( aOperatorSet, 'createValueListActivity: no operator set found' );

var aValueSet = aAnimationNode.getValues();

var aValueList = [];

extractAttributeValues( eValueType,
aValueList,
aValueSet,
aAnimatedElement.getBaseBBox(),
aActivityParamSet.nSlideWidth,
aActivityParamSet.nSlideHeight );

for( var i = 0; i < aValueList.length; ++i )
{
ANIMDBG.print( 'createValueListActivity: value[' + i + '] = ' + aValueList[i] );
}

return new ClassTemplateInstance( aValueList, aActivityParamSet, aAnimation,
aInterpolator, aOperatorSet, bAccumulate );
}


function createFromToByActivity( aActivityParamSet, aAnimationNode, aAnimation,
aInterpolator, ClassTemplateInstance, bAccumulate, eValueType )
{

var aAnimatedElement = aAnimationNode.getAnimatedElement();
var aOperatorSet = aOperatorSetMap[ eValueType ];
assert( aOperatorSet, 'createFromToByActivity: no operator set found' );

var aValueSet = [];
aValueSet[0] = aAnimationNode.getFromValue();
aValueSet[1] = aAnimationNode.getToValue();
aValueSet[2] = aAnimationNode.getByValue();

ANIMDBG.print( 'createFromToByActivity: value type: ' + aValueTypeOutMap[eValueType] +
', aFrom = ' + aValueSet[0] +
', aTo = ' + aValueSet[1] +
', aBy = ' + aValueSet[2] );

var aValueList = [];

extractAttributeValues( eValueType,
aValueList,
aValueSet,
aAnimatedElement.getBaseBBox(),
aActivityParamSet.nSlideWidth,
aActivityParamSet.nSlideHeight );

ANIMDBG.print( 'createFromToByActivity: ' +
', aFrom = ' + aValueList[0] +
', aTo = ' + aValueList[1] +
', aBy = ' + aValueList[2] );

return new ClassTemplateInstance( aValueList[0], aValueList[1], aValueList[2],
aActivityParamSet, aAnimation,
aInterpolator, aOperatorSet, bAccumulate );
}


function extractAttributeValues( eValueType, aValueList, aValueSet, aBBox, nSlideWidth, nSlideHeight )
{
var i;
switch( eValueType )
{
case NUMBER_PROPERTY :
evalValuesAttribute( aValueList, aValueSet, aBBox, nSlideWidth, nSlideHeight );
break;
case BOOL_PROPERTY :
for( i = 0; i < aValueSet.length; ++i )
{
var aValue = booleanParser( aValueSet[i] );
aValueList.push( aValue );
}
break;
case STRING_PROPERTY :
for( i = 0; i < aValueSet.length; ++i )
{
aValueList.push( aValueSet[i] );
}
break;
case ENUM_PROPERTY :
for( i = 0; i < aValueSet.length; ++i )
{
aValueList.push( aValueSet[i] );
}
break;
case COLOR_PROPERTY :
for( i = 0; i < aValueSet.length; ++i )
{
aValue = colorParser( aValueSet[i] );
aValueList.push( aValue );
}
break;
default:
log( 'createValueListActivity: unexpected value type: ' + eValueType );
}

}


function evalValuesAttribute( aValueList, aValueSet, aBBox, nSlideWidth, nSlideHeight )
{
var width = aBBox.width / nSlideWidth;
var height = aBBox.height / nSlideHeight;
var x = ( aBBox.x + aBBox.width / 2 ) / nSlideWidth;
var y = ( aBBox.y + aBBox.height / 2 ) / nSlideHeight;

var reMath = /abs|sqrt|asin|acos|atan|sin|cos|tan|exp|log|min|max/g;

for( var i = 0; i < aValueSet.length; ++i )
{
var sValue = aValueSet[i];
sValue = sValue.replace(reMath, 'Math.$&');
sValue = sValue.replace(/pi(?!\w)/g, 'Math.PI');
sValue = sValue.replace(/e(?!\w)/g, 'Math.E');
var aValue =  eval( sValue );
aValueList.push( aValue );
}
}


var BACKWARD    = 0;
var FORWARD     = 1;

var MAXIMUM_FRAME_COUNT                 = 60;
var MINIMUM_TIMEOUT                     = 1.0 / MAXIMUM_FRAME_COUNT;
var MAXIMUM_TIMEOUT                     = 4.0;
var MINIMUM_FRAMES_PER_SECONDS          = 10;
var PREFERRED_FRAMES_PER_SECONDS        = 50;
var PREFERRED_FRAME_RATE                = 1.0 / PREFERRED_FRAMES_PER_SECONDS;


function Effect( nId )
{
this.nId = ( typeof( nId ) === typeof( 1 ) ) ? nId : -1;
this.eState = Effect.NOT_STARTED;
}
Effect.NOT_STARTED = 0;
Effect.PLAYING = 1;
Effect.ENDED = 2;

Effect.prototype.getId = function()
{
return this.nId;
};

Effect.prototype.isMainEffect = function()
{
return ( this.nId === -1 );
};

Effect.prototype.isPlaying = function()
{
return ( this.eState === Effect.PLAYING );
};

Effect.prototype.isEnded = function()
{
return ( this.eState === Effect.ENDED );
};

Effect.prototype.start = function()
{
assert( this.eState === Effect.NOT_STARTED, 'Effect.start: wrong state.' );
this.eState = Effect.PLAYING;
};

Effect.prototype.end = function()
{
assert( this.eState === Effect.PLAYING, 'Effect.end: wrong state.' );
this.eState = Effect.ENDED;
};


function SlideShow()
{
this.aTimer = new ElapsedTime();
this.aFrameSynchronization = new FrameSynchronization( PREFERRED_FRAME_RATE );
this.aTimerEventQueue = new TimerEventQueue( this.aTimer );
this.aActivityQueue = new ActivityQueue( this.aTimer );
this.aNextEffectEventArray = null;
this.aInteractiveAnimationSequenceMap = null;
this.aEventMultiplexer = null;

this.aContext = new SlideShowContext( this.aTimerEventQueue,
this.aEventMultiplexer,
this.aNextEffectEventArray,
this.aInteractiveAnimationSequenceMap,
this.aActivityQueue );
this.bIsIdle = true;
this.bIsEnabled = true;
this.bNoSlideTransition = false;
this.bIsTransitionRunning = false;

this.nCurrentEffect = 0;
this.bIsNextEffectRunning = false;
this.bIsRewinding = false;
this.bIsSkipping = false;
this.bIsSkippingAll = false;
this.nTotalInteractivePlayingEffects = 0;
this.aStartedEffectList = [];
this.aStartedEffectIndexMap = {};
this.aStartedEffectIndexMap[ -1 ] = undefined;
this.automaticAdvanceTimeout = null;
}

SlideShow.prototype.setSlideEvents = function( aNextEffectEventArray,
aInteractiveAnimationSequenceMap,
aEventMultiplexer )
{
if( !aNextEffectEventArray )
log( 'SlideShow.setSlideEvents: aNextEffectEventArray is not valid' );

if( !aInteractiveAnimationSequenceMap )
log( 'SlideShow.setSlideEvents:aInteractiveAnimationSequenceMap  is not valid' );

if( !aEventMultiplexer )
log( 'SlideShow.setSlideEvents: aEventMultiplexer is not valid' );

this.aContext.aNextEffectEventArray = aNextEffectEventArray;
this.aNextEffectEventArray = aNextEffectEventArray;
this.aContext.aInteractiveAnimationSequenceMap = aInteractiveAnimationSequenceMap;
this.aInteractiveAnimationSequenceMap = aInteractiveAnimationSequenceMap;
this.aContext.aEventMultiplexer = aEventMultiplexer;
this.aEventMultiplexer = aEventMultiplexer;
this.nCurrentEffect = 0;
};

SlideShow.prototype.createSlideTransition = function( aSlideTransitionHandler, aLeavingSlide, aEnteringSlide, aTransitionEndEvent )
{
if( !aEnteringSlide )
{
log( 'SlideShow.createSlideTransition: entering slide element is not valid.' );
return null;
}

if( this.bNoSlideTransition ) return null;

var aAnimatedLeavingSlide = null;
if( aLeavingSlide )
aAnimatedLeavingSlide = new AnimatedSlide( aLeavingSlide );
var aAnimatedEnteringSlide = new AnimatedSlide( aEnteringSlide );

var aSlideTransition = aSlideTransitionHandler.createSlideTransition( aAnimatedLeavingSlide, aAnimatedEnteringSlide );
if( !aSlideTransition ) return null;

var nDuration = 0.001;
if( aSlideTransitionHandler.getDuration().isValue() )
{
nDuration = aSlideTransitionHandler.getDuration().getValue();
}
else
{
log( 'SlideShow.createSlideTransition: duration is not a number' );
}

var aCommonParameterSet = new ActivityParamSet();
aCommonParameterSet.aEndEvent = aTransitionEndEvent;
aCommonParameterSet.aTimerEventQueue = this.aTimerEventQueue;
aCommonParameterSet.aActivityQueue = this.aActivityQueue;
aCommonParameterSet.nMinDuration = nDuration;
aCommonParameterSet.nMinNumberOfFrames = aSlideTransitionHandler.getMinFrameCount();
aCommonParameterSet.nSlideWidth = WIDTH;
aCommonParameterSet.nSlideHeight = HEIGHT;

return new SimpleActivity( aCommonParameterSet, aSlideTransition, FORWARD );

};

SlideShow.prototype.isEnabled = function()
{
return this.bIsEnabled;
};

SlideShow.prototype.isRunning = function()
{
return !this.bIsIdle;
};

SlideShow.prototype.isTransitionPlaying = function()
{
return this.bIsTransitionRunning;
};

SlideShow.prototype.isMainEffectPlaying = function()
{
return this.bIsNextEffectRunning;
};

SlideShow.prototype.isInteractiveEffectPlaying = function()
{
return ( this.nTotalInteractivePlayingEffects > 0 );
};

SlideShow.prototype.isAnyEffectPlaying = function()
{
return ( this.isMainEffectPlaying() || this.isInteractiveEffectPlaying() );
};

SlideShow.prototype.hasAnyEffectStarted = function()
{
return ( this.aStartedEffectList.length > 0 );
};

SlideShow.prototype.notifyNextEffectStart = function()
{
assert( !this.bIsNextEffectRunning,
'SlideShow.notifyNextEffectStart: an effect is already started.' );
this.bIsNextEffectRunning = true;
this.aEventMultiplexer.registerNextEffectEndHandler( bind2( SlideShow.prototype.notifyNextEffectEnd, this ) );
var aEffect = new Effect();
aEffect.start();
this.aStartedEffectIndexMap[ -1 ] = this.aStartedEffectList.length;
this.aStartedEffectList.push( aEffect );

var aAnimatedElementMap = theMetaDoc.aMetaSlideSet[nCurSlide].aSlideAnimationsHandler.aAnimatedElementMap;
for( var sId in aAnimatedElementMap )
aAnimatedElementMap[ sId ].notifyNextEffectStart( this.nCurrentEffect );
};

SlideShow.prototype.notifyNextEffectEnd = function()
{
assert( this.bIsNextEffectRunning,
'SlideShow.notifyNextEffectEnd: effect already ended.' );
this.bIsNextEffectRunning = false;

this.aStartedEffectList[ this.aStartedEffectIndexMap[ -1 ] ].end();
if( this.automaticAdvanceTimeout !== null )
{
if( this.automaticAdvanceTimeout['rewindedEffect'] === this.nCurrentEffect )
{
this.automaticAdvanceTimeout = null;
this.notifyAnimationsEnd();
}
}
};

SlideShow.prototype.notifyAnimationsEnd = function()
{
if( nCurSlide + 1 === theMetaDoc.nNumberOfSlides )
return;

assert (this.automaticAdvanceTimeout === null,
'SlideShow.notifyAnimationsEnd: Timeout already set.')

var nTimeout = Math.ceil(theMetaDoc.aMetaSlideSet[nCurSlide].fDuration * 1000);
if( nTimeout < 0 )
return;

this.automaticAdvanceTimeout = window.setTimeout('switchSlide(1, false)', nTimeout);
};

SlideShow.prototype.notifySlideStart = function( nNewSlideIndex, nOldSlideIndex )
{
this.nCurrentEffect = 0;
this.bIsRewinding = false;
this.bIsSkipping = false;
this.bIsSkippingAll = false;
this.nTotalInteractivePlayingEffects = 0;
this.aStartedEffectList = [];
this.aStartedEffectIndexMap = {};
this.aStartedEffectIndexMap[ -1 ] = undefined;

var aAnimatedElementMap;
var sId;
if( nOldSlideIndex !== undefined )
{
aAnimatedElementMap = theMetaDoc.aMetaSlideSet[nOldSlideIndex].aSlideAnimationsHandler.aAnimatedElementMap;
for( sId in aAnimatedElementMap )
aAnimatedElementMap[ sId ].notifySlideEnd();
}

aAnimatedElementMap = theMetaDoc.aMetaSlideSet[nNewSlideIndex].aSlideAnimationsHandler.aAnimatedElementMap;
for( sId in aAnimatedElementMap )
aAnimatedElementMap[ sId ].notifySlideStart( this.aContext );
};

SlideShow.prototype.notifyTransitionEnd = function( nSlideIndex )
{
if( theMetaDoc.getCurrentSlide() )
{
var sRef = 'url(#' + aPresentationClipPathId + ')';
theMetaDoc.getCurrentSlide().slideElement.setAttribute('clip-path', sRef);
}

this.bIsTransitionRunning = false;
if( this.bIsRewinding )
{
theMetaDoc.aMetaSlideSet[nSlideIndex].hide();
var nIndex = nCurSlide !== undefined ? nCurSlide : -1;
this.displaySlide( nIndex, true );
this.skipAllEffects();
this.bIsRewinding = false;
return;
}

theMetaDoc.setCurrentSlide(nSlideIndex);

if( this.aSlideViewElement )
{
theMetaDoc.getCurrentSlide().aVisibilityStatusElement.parentNode.removeChild( this.aSlideViewElement );
this.aSlideViewElement = null;
}
if( this.isEnabled() )
{
this.dispose();

var aCurrentSlide = theMetaDoc.getCurrentSlide();
if( aCurrentSlide.aSlideAnimationsHandler.elementsParsed() )
{
aCurrentSlide.aSlideAnimationsHandler.start();
this.aEventMultiplexer.registerAnimationsEndHandler( bind2( SlideShow.prototype.notifyAnimationsEnd, this ) );
}
else
this.notifyAnimationsEnd();

this.update();
}
else
this.notifyAnimationsEnd();
};

SlideShow.prototype.notifyInteractiveAnimationSequenceStart = function( nNodeId )
{
++this.nTotalInteractivePlayingEffects;
var aEffect = new Effect( nNodeId );
aEffect.start();
this.aStartedEffectIndexMap[ nNodeId ] = this.aStartedEffectList.length;
this.aStartedEffectList.push( aEffect );
};

SlideShow.prototype.notifyInteractiveAnimationSequenceEnd = function( nNodeId )
{
assert( this.isInteractiveEffectPlaying(),
'SlideShow.notifyInteractiveAnimationSequenceEnd: no interactive effect playing.' );

this.aStartedEffectList[ this.aStartedEffectIndexMap[ nNodeId ] ].end();
--this.nTotalInteractivePlayingEffects;
};

SlideShow.prototype.nextEffect = function()
{
if( !this.isEnabled() )
return false;

if( this.isTransitionPlaying() )
{
this.skipTransition();
return true;
}

if( this.isAnyEffectPlaying() )
{
this.skipAllPlayingEffects();
return true;
}

if( !this.aNextEffectEventArray )
return false;

if( this.nCurrentEffect >= this.aNextEffectEventArray.size() )
return false;

this.notifyNextEffectStart();

this.aNextEffectEventArray.at( this.nCurrentEffect ).fire();
++this.nCurrentEffect;
this.update();
return true;
};

SlideShow.prototype.skipTransition  = function()
{
if( this.bIsSkipping || this.bIsRewinding )
return;

this.bIsSkipping = true;

this.aActivityQueue.endAll();
this.aTimerEventQueue.forceEmpty();
this.aActivityQueue.endAll();
this.update();
this.bIsSkipping = false;
};

SlideShow.prototype.skipAllPlayingEffects  = function()
{
if( this.bIsSkipping || this.bIsRewinding )
return true;

this.bIsSkipping = true;
for( var i = 0; i < this.aStartedEffectList.length; ++i )
{
var aEffect = this.aStartedEffectList[i];
if( aEffect.isPlaying() )
{
if( aEffect.isMainEffect() )
this.aEventMultiplexer.notifySkipEffectEvent();
else
this.aEventMultiplexer.notifySkipInteractiveEffectEvent( aEffect.getId() );
}
}
this.update();
this.bIsSkipping = false;
return true;
};

SlideShow.prototype.skipNextEffect = function()
{
if( this.bIsSkipping || this.bIsRewinding )
return true;

assert( !this.isAnyEffectPlaying(),
'SlideShow.skipNextEffect' );

if( !this.aNextEffectEventArray )
return false;

if( this.nCurrentEffect >= this.aNextEffectEventArray.size() )
return false;

this.notifyNextEffectStart();

this.bIsSkipping = true;
this.aNextEffectEventArray.at( this.nCurrentEffect ).fire();
this.aEventMultiplexer.notifySkipEffectEvent();
++this.nCurrentEffect;
this.update();
this.bIsSkipping = false;
return true;
};

SlideShow.prototype.skipPlayingOrNextEffect = function()
{
if( this.isTransitionPlaying() )
{
this.skipTransition();
return true;
}

if( this.isAnyEffectPlaying() )
return this.skipAllPlayingEffects();
else
return this.skipNextEffect();
};


SlideShow.prototype.skipAllEffects = function()
{
if( this.bIsSkippingAll )
return true;

this.bIsSkippingAll = true;

if( this.isTransitionPlaying() )
{
this.skipTransition();
}

if( this.isAnyEffectPlaying() )
{
this.skipAllPlayingEffects();
}
else if( !this.aNextEffectEventArray
|| ( this.nCurrentEffect >= this.aNextEffectEventArray.size() ) )
{
this.bIsSkippingAll = false;
return false;
}

while( this.nCurrentEffect < this.aNextEffectEventArray.size() )
{
this.skipNextEffect();
}
this.bIsSkippingAll = false;
return true;
};

SlideShow.prototype.rewindTransition = function()
{
if( this.bIsSkipping || this.bIsRewinding )
return;

this.bIsRewinding = true;
this.aActivityQueue.endAll();
this.update();
this.bIsRewinding = false;
};

SlideShow.prototype.rewindEffect = function()
{
if( this.bIsSkipping || this.bIsRewinding )
return;

if( this.automaticAdvanceTimeout !== null && !this.automaticAdvanceTimeout['rewindedEffect'] )
{
window.clearTimeout( this.automaticAdvanceTimeout );
this.automaticAdvanceTimeout = { 'rewindedEffect': this.nCurrentEffect };
}

if( !this.hasAnyEffectStarted() )
{
this.rewindToPreviousSlide();
return;
}

this.bIsRewinding = true;

var nFirstPlayingEffectIndex = undefined;

var i = 0;
for( ; i < this.aStartedEffectList.length; ++i )
{
var aEffect = this.aStartedEffectList[i];
if( aEffect.isPlaying() )
{
nFirstPlayingEffectIndex = i;
break;
}
}

if( nFirstPlayingEffectIndex !== undefined )
{
i = this.aStartedEffectList.length - 1;
for( ; i >= nFirstPlayingEffectIndex; --i )
{
aEffect = this.aStartedEffectList[i];
if( aEffect.isPlaying() )
{
if( aEffect.isMainEffect() )
{
this.aEventMultiplexer.notifyRewindCurrentEffectEvent();
if( this.nCurrentEffect > 0 )
--this.nCurrentEffect;
}
else
{
this.aEventMultiplexer.notifyRewindRunningInteractiveEffectEvent( aEffect.getId() );
}
}
else if( aEffect.isEnded() )
{
if( aEffect.isMainEffect() )
{
this.aEventMultiplexer.notifyRewindLastEffectEvent();
if( this.nCurrentEffect > 0 )
--this.nCurrentEffect;
}
else
{
this.aEventMultiplexer.notifyRewindEndedInteractiveEffectEvent( aEffect.getId() );
}
}
}
this.update();

i = this.aStartedEffectList.length - 1;
for( ; i >= nFirstPlayingEffectIndex; --i )
{
aEffect = this.aStartedEffectList.pop();
if( !aEffect.isMainEffect() )
delete this.aStartedEffectIndexMap[ aEffect.getId() ];
}
}
else  // there is no playing effect
{
aEffect = this.aStartedEffectList.pop();
if( !aEffect.isMainEffect() )
delete this.aStartedEffectIndexMap[ aEffect.getId() ];
if( aEffect.isEnded() )  // Well that is almost an assertion.
{
if( aEffect.isMainEffect() )
{
this.aEventMultiplexer.notifyRewindLastEffectEvent();
if( this.nCurrentEffect > 0 )
--this.nCurrentEffect;
}
else
{
this.aEventMultiplexer.notifyRewindEndedInteractiveEffectEvent( aEffect.getId() );
}
}
this.update();
}

this.bIsRewinding = false;
};

SlideShow.prototype.rewindToPreviousSlide = function()
{
if( this.isTransitionPlaying() )
{
this.rewindTransition();
return;
}
if( this.isAnyEffectPlaying() )
return;
var nNewSlide = nCurSlide - 1;
this.displaySlide( nNewSlide, true );
this.skipAllEffects();
};

SlideShow.prototype.rewindAllEffects = function()
{
if( !this.hasAnyEffectStarted() )
{
this.rewindToPreviousSlide();
return;
}

while( this.hasAnyEffectStarted() )
{
this.rewindEffect();
}
};

SlideShow.prototype.exitSlideShowInApp = function()
{
if (window.webkit !== undefined &&
window.webkit.messageHandlers !== undefined &&
window.webkit.messageHandlers.lool !== undefined)
window.webkit.messageHandlers.lool.postMessage('EXITSLIDESHOW', '*');
}

SlideShow.prototype.displaySlide = function( nNewSlide, bSkipSlideTransition )
{
var aMetaDoc = theMetaDoc;
var nSlides = aMetaDoc.nNumberOfSlides;
if( nNewSlide < 0 && nSlides > 0 )
nNewSlide = nSlides - 1;
else if( nNewSlide >= nSlides ) {
nNewSlide = 0;
this.exitSlideShowInApp();
}

if( ( currentMode === INDEX_MODE ) && ( nNewSlide === nCurSlide ) )
{
aMetaDoc.getCurrentSlide().show();
return;
}

if( this.isTransitionPlaying() )
{
this.skipTransition();
}

var nOldSlide = nCurSlide;
if( nOldSlide !== undefined )
{
var oldMetaSlide = aMetaDoc.aMetaSlideSet[nOldSlide];
if( this.isEnabled() )
{
if( oldMetaSlide.aSlideAnimationsHandler.isAnimated() )
{
oldMetaSlide.aSlideAnimationsHandler.end( bSkipSlideTransition );

this.dispose();
}
}

if( this.automaticAdvanceTimeout !== null )
{
window.clearTimeout( this.automaticAdvanceTimeout );
this.automaticAdvanceTimeout = null;
}
}

this.notifySlideStart( nNewSlide, nOldSlide );

if( this.isEnabled() && !bSkipSlideTransition  )
{
if ( ( ( nOldSlide !== undefined ) &&
( ( nNewSlide > nOldSlide ) ||
( ( nNewSlide == 0) && ( nOldSlide == (aMetaDoc.nNumberOfSlides - 1) ) ) ) ) ||
(  ( nOldSlide === undefined ) &&  ( nNewSlide == 0) )  // for transition on first slide
)
{

var aOldMetaSlide = null;
if( nOldSlide === undefined ) // for transition on first slide
{
aOldMetaSlide = aMetaDoc.theMetaDummySlide;
}
else
{
aOldMetaSlide = aMetaDoc.aMetaSlideSet[nOldSlide];
}
var aNewMetaSlide = aMetaDoc.aMetaSlideSet[nNewSlide];

var aSlideTransitionHandler = aNewMetaSlide.aTransitionHandler;
if( aSlideTransitionHandler && aSlideTransitionHandler.isValid() )
{
var sRef = 'url(#' + aPresentationClipPathShrinkId + ')';
aOldMetaSlide.slideElement.setAttribute( 'clip-path', sRef );

if( nOldSlide > nNewSlide )
{
this.aSlideViewElement = document.createElementNS( NSS['svg'], 'use' );
setNSAttribute( 'xlink', this.aSlideViewElement, 'href', '#' + aOldMetaSlide.slideContainerId );
aNewMetaSlide.aVisibilityStatusElement.parentNode.insertBefore( this.aSlideViewElement, aNewMetaSlide.aVisibilityStatusElement );
aOldMetaSlide.hide();
}

var aLeavingSlide = aOldMetaSlide;
var aEnteringSlide = aNewMetaSlide;
var aTransitionEndEvent = makeEvent( bind2( this.notifyTransitionEnd, this, nNewSlide ) );

var aTransitionActivity =
this.createSlideTransition( aSlideTransitionHandler, aLeavingSlide,
aEnteringSlide, aTransitionEndEvent );

if( aTransitionActivity )
{
this.bIsTransitionRunning = true;
this.aActivityQueue.addActivity( aTransitionActivity );
this.update();
}
else
{
this.notifyTransitionEnd( nNewSlide );
}
}
else
{
this.notifyTransitionEnd( nNewSlide );
}
}
else
{
this.notifyTransitionEnd( nNewSlide );
}
}
else
{
this.notifyTransitionEnd( nNewSlide );
}

};

SlideShow.prototype.update = function()
{
this.aTimer.holdTimer();

this.aTimerEventQueue.process();
this.aActivityQueue.process();

this.aFrameSynchronization.synchronize();

this.aActivityQueue.processDequeued();

this.aTimer.releaseTimer();

var bActivitiesLeft = ( ! this.aActivityQueue.isEmpty() );
var bTimerEventsLeft = ( ! this.aTimerEventQueue.isEmpty() );
var bEventsLeft = ( bActivitiesLeft || bTimerEventsLeft );


if( bEventsLeft )
{
var nNextTimeout;
if( bActivitiesLeft )
{
nNextTimeout = MINIMUM_TIMEOUT;
this.aFrameSynchronization.activate();
}
else
{
nNextTimeout = this.aTimerEventQueue.nextTimeout();
if( nNextTimeout < MINIMUM_TIMEOUT )
nNextTimeout = MINIMUM_TIMEOUT;
else if( nNextTimeout > MAXIMUM_TIMEOUT )
nNextTimeout = MAXIMUM_TIMEOUT;
this.aFrameSynchronization.deactivate();
}

this.bIsIdle = false;
window.setTimeout( 'aSlideShow.update()', nNextTimeout * 1000 );
}
else
{
this.bIsIdle = true;
}
};

SlideShow.prototype.dispose = function()
{
this.aTimerEventQueue.clear();
this.aActivityQueue.clear();
this.aNextEffectEventArray = null;
this.aEventMultiplexer = null;
};

SlideShow.prototype.getContext = function()
{
return this.aContext;
};

var aSlideShow = null;


function SlideShowContext( aTimerEventQueue, aEventMultiplexer, aNextEffectEventArray, aInteractiveAnimationSequenceMap, aActivityQueue)
{
this.aTimerEventQueue = aTimerEventQueue;
this.aEventMultiplexer = aEventMultiplexer;
this.aNextEffectEventArray = aNextEffectEventArray;
this.aInteractiveAnimationSequenceMap = aInteractiveAnimationSequenceMap;
this.aActivityQueue = aActivityQueue;
this.bIsSkipping = false;
}


function FrameSynchronization( nFrameDuration )
{
this.nFrameDuration = nFrameDuration;
this.aTimer = new ElapsedTime();
this.nNextFrameTargetTime = 0.0;
this.bIsActive = false;

this.markCurrentFrame();
}


FrameSynchronization.prototype.markCurrentFrame = function()
{
this.nNextFrameTargetTime = this.aTimer.getElapsedTime() + this.nFrameDuration;
};

FrameSynchronization.prototype.synchronize = function()
{
if( this.bIsActive )
{
while( this.aTimer.getElapsedTime() < this.nNextFrameTargetTime )
;
}

this.markCurrentFrame();

};

FrameSynchronization.prototype.activate = function()
{
this.bIsActive = true;
};

FrameSynchronization.prototype.deactivate = function()
{
this.bIsActive = false;
};


function NextEffectEventArray()
{
this.aEventArray = [];
}


NextEffectEventArray.prototype.size = function()
{
return this.aEventArray.length;
};

NextEffectEventArray.prototype.at = function( nIndex )
{
return this.aEventArray[ nIndex ];
};

NextEffectEventArray.prototype.appendEvent = function( aEvent )
{
var nSize = this.size();
for( var i = 0; i < nSize; ++i )
{
if( this.aEventArray[i].getId() == aEvent.getId() )
{
aNextEffectEventArrayDebugPrinter.print( 'NextEffectEventArray.appendEvent: event(' + aEvent.getId() + ') already present' );
return false;
}
}
this.aEventArray.push( aEvent );
aNextEffectEventArrayDebugPrinter.print( 'NextEffectEventArray.appendEvent: event(' + aEvent.getId() + ') appended' );
return true;
};

NextEffectEventArray.prototype.clear = function( )
{
this.aEventArray = [];
};


function TimerEventQueue( aTimer )
{
this.aTimer = aTimer;
this.aEventSet = new PriorityQueue( EventEntry.compare );
}


TimerEventQueue.prototype.addEvent = function( aEvent )
{
this.DBG( 'TimerEventQueue.addEvent event(' + aEvent.getId() + ') appended.' );
if( !aEvent )
{
log( 'TimerEventQueue.addEvent: null event' );
return false;
}

var nTime = aEvent.getActivationTime( this.aTimer.getElapsedTime() );
var aEventEntry = new EventEntry( aEvent, nTime );
this.aEventSet.push( aEventEntry );

return true;
};

TimerEventQueue.prototype.forceEmpty = function()
{
this.process_(true);
};


TimerEventQueue.prototype.process = function()
{
this.process_(false);
};

TimerEventQueue.prototype.process_ = function( bFireAllEvents )
{
var nCurrentTime = this.aTimer.getElapsedTime();

while( !this.isEmpty() && ( bFireAllEvents || ( this.aEventSet.top().nActivationTime <= nCurrentTime ) ) )
{
var aEventEntry = this.aEventSet.top();
this.aEventSet.pop();

var aEvent = aEventEntry.aEvent;
if( aEvent.isCharged() )
aEvent.fire();
}
};

TimerEventQueue.prototype.isEmpty = function()
{
return this.aEventSet.isEmpty();
};

TimerEventQueue.prototype.nextTimeout = function()
{
var nTimeout = Number.MAX_VALUE;
var nCurrentTime = this.aTimer.getElapsedTime();
if( !this.isEmpty() )
nTimeout = this.aEventSet.top().nActivationTime - nCurrentTime;
return nTimeout;
};

TimerEventQueue.prototype.clear = function()
{
this.DBG( 'TimerEventQueue.clear invoked' );
this.aEventSet.clear();
};

TimerEventQueue.prototype.getTimer = function()
{
return this.aTimer;
};

TimerEventQueue.prototype.DBG = function( sMessage, nTime )
{
aTimerEventQueueDebugPrinter.print( sMessage, nTime );
};


TimerEventQueue.prototype.insert = function( aEventEntry )
{
var nHoleIndex = this.aEventSet.length;
var nParent = Math.floor( ( nHoleIndex - 1 ) / 2 );

while( ( nHoleIndex > 0 ) && this.aEventSet[ nParent ].compare( aEventEntry ) )
{
this.aEventSet[ nHoleIndex ] = this.aEventSet[ nParent ];
nHoleIndex = nParent;
nParent = Math.floor( ( nHoleIndex - 1 ) / 2 );
}
this.aEventSet[ nHoleIndex ] = aEventEntry;
};


function EventEntry( aEvent, nTime )
{
this.aEvent = aEvent;
this.nActivationTime = nTime;
}


EventEntry.compare = function( aLhsEventEntry, aRhsEventEntry )
{
if ( aLhsEventEntry.nActivationTime > aRhsEventEntry.nActivationTime )
{
return -1;
}
else if ( aLhsEventEntry.nActivationTime < aRhsEventEntry.nActivationTime )
{
return 1;
}
else
{
return 0;
}
};


function ActivityQueue( aTimer )
{
this.aTimer = aTimer;
this.aCurrentActivityWaitingSet = [];
this.aCurrentActivityReinsertSet = [];
this.aDequeuedActivitySet = [];
}


ActivityQueue.prototype.dispose = function()
{
var nSize = this.aCurrentActivityWaitingSet.length;
var i;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityWaitingSet[i].dispose();

nSize = this.aCurrentActivityReinsertSet.length;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityReinsertSet[i].dispose();
};

ActivityQueue.prototype.addActivity = function( aActivity )
{
if( !aActivity )
{
log( 'ActivityQueue.addActivity: activity is not valid' );
return false;
}

this.aCurrentActivityWaitingSet.push( aActivity );
aActivityQueueDebugPrinter.print( 'ActivityQueue.addActivity: activity appended' );
return true;
};

ActivityQueue.prototype.process = function()
{
var nSize = this.aCurrentActivityWaitingSet.length;
var nLag = 0.0;
for( var i = 0; i < nSize; ++i )
{
nLag = Math.max( nLag,this.aCurrentActivityWaitingSet[i].calcTimeLag()  );
}

if( nLag > 0.0 )
this.aTimer.adjustTimer( -nLag, true );


while( this.aCurrentActivityWaitingSet.length != 0 )
{
var aActivity = this.aCurrentActivityWaitingSet.shift();
var bReinsert = false;

bReinsert = aActivity.perform();

if( bReinsert )
{
this.aCurrentActivityReinsertSet.push( aActivity );
}
else
{
this.aDequeuedActivitySet.push( aActivity );
}
}

if( this.aCurrentActivityReinsertSet.length != 0 )
{
this.aCurrentActivityWaitingSet = this.aCurrentActivityReinsertSet;
this.aCurrentActivityReinsertSet = [];
}
};

ActivityQueue.prototype.processDequeued = function()
{
var nSize = this.aDequeuedActivitySet.length;
for( var i = 0; i < nSize; ++i )
this.aDequeuedActivitySet[i].dequeued();

this.aDequeuedActivitySet = [];
};

ActivityQueue.prototype.isEmpty = function()
{
return ( ( this.aCurrentActivityWaitingSet.length == 0 ) &&
( this.aCurrentActivityReinsertSet.length == 0 ) );
};

ActivityQueue.prototype.clear = function()
{
aActivityQueueDebugPrinter.print( 'ActivityQueue.clear invoked' );
var nSize = this.aCurrentActivityWaitingSet.length;
var i;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityWaitingSet[i].dequeued();
this.aCurrentActivityWaitingSet = [];

nSize = this.aCurrentActivityReinsertSet.length;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityReinsertSet[i].dequeued();
this.aCurrentActivityReinsertSet = [];
};

ActivityQueue.prototype.endAll = function()
{
aActivityQueueDebugPrinter.print( 'ActivityQueue.endAll invoked' );
var nSize = this.aCurrentActivityWaitingSet.length;
var i;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityWaitingSet[i].end();
this.aCurrentActivityWaitingSet = [];

nSize = this.aCurrentActivityReinsertSet.length;
for( i = 0; i < nSize; ++i )
this.aCurrentActivityReinsertSet[i].end();
this.aCurrentActivityReinsertSet = [];
};

ActivityQueue.prototype.getTimer = function()
{
return this.aTimer;
};

ActivityQueue.prototype.size = function()
{
return ( this.aCurrentActivityWaitingSet.length +
this.aCurrentActivityReinsertSet.length +
this.aDequeuedActivitySet.length );
};


function ElapsedTime( aTimeBase )
{
this.aTimeBase = aTimeBase;
this.nLastQueriedTime = 0.0;
this.nStartTime = this.getCurrentTime();
this.nFrozenTime = 0.0;
this.bInPauseMode = false;
this.bInHoldMode = false;
}


ElapsedTime.prototype.getTimeBase = function()
{
return this.aTimeBase;
};

ElapsedTime.prototype.reset = function()
{
this.nLastQueriedTime = 0.0;
this.nStartTime = this.getCurrentTime();
this.nFrozenTime = 0.0;
this.bInPauseMode = false;
this.bInHoldMode = false;
};

ElapsedTime.prototype.getElapsedTime = function()
{
this.nLastQueriedTime = this.getElapsedTimeImpl();
return this.nLastQueriedTime;
};

ElapsedTime.prototype.pauseTimer = function()
{
this.nFrozenTime = this.getElapsedTimeImpl();
this.bInPauseMode = true;
};

ElapsedTime.prototype.continueTimer = function()
{
this.bInPauseMode = false;

var nPauseDuration = this.getElapsedTimeImpl() - this.nFrozenTime;

this.nStartTime += nPauseDuration;
};

ElapsedTime.prototype.adjustTimer = function( nOffset, bLimitToLastQueriedTime )
{
if( bLimitToLastQueriedTime == undefined )
bLimitToLastQueriedTime = true;

this.nStartTime -= nOffset;

if( this.bInHoldMode || this.bInPauseMode )
this.nFrozenTime += nOffset;
};

ElapsedTime.prototype.holdTimer = function()
{
this.nFrozenTime = this.getElapsedTimeImpl();
this.bInHoldMode = true;
};

ElapsedTime.prototype.releaseTimer = function()
{
this.bInHoldMode = false;
};

ElapsedTime.prototype.getSystemTime = function()
{
return ( getCurrentSystemTime() / 1000.0 );
};

ElapsedTime.prototype.getCurrentTime = function()
{
var nCurrentTime;
if ( !this.aTimeBase )
{
nCurrentTime = this.getSystemTime();
}
else
{
nCurrentTime = this.aTimeBase.getElapsedTimeImpl();
}

assert( ( typeof( nCurrentTime ) === typeof( 0 ) ) && isFinite( nCurrentTime ),
'ElapsedTime.getCurrentTime: assertion failed: nCurrentTime == ' + nCurrentTime );


return nCurrentTime;
};

ElapsedTime.prototype.getElapsedTimeImpl = function()
{
if( this.bInHoldMode || this.bInPauseMode )
{
return this.nFrozenTime;
}

var nCurTime = this.getCurrentTime();
return ( nCurTime - this.nStartTime );
};


/*****
* @libreofficeend
*
* Several parts of the above code are the result of the porting,
* started on August 2011, of the C++ code included in the source files
* placed under the folder '/slideshow/source' and subfolders.
* @source https://cgit.freedesktop.org/libreoffice/core/tree/slideshow/source
*
*/

]]>
 </script>
<g
   style="visibility:hidden;fill-rule:evenodd;stroke-width:28.22200012;stroke-linejoin:round"
   id="g1796-5"
   class="com.sun.star.drawing.CustomShape"
   transform="matrix(0.1,0,0,0.1,395.52879,-24.103425)"><g
     id="id142-7"><rect
       style="fill:none;stroke:none"
       id="rect1781-4"
       height="771"
       width="1242"
       y="13531"
       x="20390"
       class="BoundingBox" /><text
       id="text1793-1"
       class="TextShape"
       x="-592.57922"
       y="-12.608069"><tspan
         style="font-weight:700;font-size:388px;font-family:'Arial Narrow', sans-serif"
         id="tspan1791-8"
         font-weight="700"
         font-size="388px"
         class="TextParagraph"><tspan
           id="tspan1785-5"
           y="13799.392"
           x="19810.42"
           class="TextPosition"
           style="fill:#000000;stroke:none">RegWriteW</tspan></tspan></text>
</g></g></svg>